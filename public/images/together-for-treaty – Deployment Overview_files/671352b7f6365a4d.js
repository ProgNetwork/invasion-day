
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="78ed26b4-b845-5ad4-b3f4-0753a75a41e5")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5463680,6769352,e=>{"use strict";e.s([],5463680),e.i(6356390),e.i(15312);var t=e.i(7897830);e.i(39509),e.s(["CreateResourceButton",()=>d],6769352);var i=e.i(751170),r=e.i(2504781),s=e.i(5468328);e.i(3182268);var a=e.i(7849855);e.i(6887680);var n=e.i(6810699),o=e.i(1414602),l=e.i(5074599);function d(e){let{onSuccess:d,protocolType:c,label:m}=e,{projectSlug:g}=(0,a.useProjectAndTeamSlug)(),{data:f}=(0,n.useResourceList)({projectSlug:g,protocolType:c}),{openBrowseProducts:h}=(0,t.useResourceModals)({onSuccess:d}),{permissions:p,isLoading:R}=(0,o.useResourcePermissions)();return R?(0,i.jsx)(u,{}):f&&f.stores.length>0?(0,i.jsx)(s.Tooltip,{disableTriggers:p.create,text:(0,l.missingPermissionLabel)("create",c),children:(0,i.jsx)(r.Button,{disabled:!p.create,onClick:()=>h("browse-new"),type:"default",typeName:"button",children:m??(0,l.createResourceButtonLabel)(c)})}):(0,i.jsx)(u,{})}function u(){return(0,i.jsx)("div",{style:{height:40}})}},8556491,e=>{"use strict";e.s(["AdditionalPermissionsRequiredModal",()=>s]);var t=e.i(751170),i=e.i(4723202),r=e.i(1235157);function s(e){let{role:s,team:a,actionLabel:n,dataTestId:o}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 md:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":o,children:(0,t.jsxs)("div",{className:"shadow-lg md:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:s?(0,r.getRoleName)(s):"Viewer"})," on the"," ",(0,t.jsx)("strong",{children:a?.name})," team, you don't have the required permission to ",n,"."]}),(0,t.jsx)("div",{children:"To access you need to request additional permissions."})]}),"VIEWER_FOR_PLUS"===s?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(i.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}},8587921,7873387,e=>{"use strict";e.s(["MEMBERS_LIMIT",()=>m,"default",()=>f,"useMembersForTeam",()=>h,"useMembersInfinite",()=>g],8587921);var t=e.i(4099374),i=e.i(9014736),r=e.i(406579),s=e.i(8042625),a=e.i(277234),n=e.i(4244280),o=e.i(9668517),l=e.i(5338940),d=e.i(1717203),u=e.i(7557283);e.s(["default",()=>c],7873387);let c=e=>(i,r,s)=>{let a=(0,t.useRef)(void 0),n=e(i,r,s);(0,t.useEffect)(()=>{void 0!==n.data&&(a.current=n.data)},[n.data]);let o=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...n,data:void 0===n.data?a.current:n.data,isLagging:void 0===n.data&&void 0!==a.current,resetLaggy:o}},m=20;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:g,limit:f,role:h,eligibleMembersForProjectId:p,sort:R="date_desc",filterByUserIds:v,includeEntitlements:E,mfaStateFilter:b,includePermissionRequests:x}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=arguments.length>2&&void 0!==arguments[2]&&arguments[2],T=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:y,team:I}=(0,l.useTeam)(),{isLoading:L,can:P}=(0,d.default)(),j=!L&&P(u.Action.List,u.Resource.TeamFellowMembership),S=(0,o.useTeamSlug)(),w=f||m,A=(0,r.default)((e,t)=>{if(!y||!I||!j)return null;if(0===e)return`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,s.encode)({sort:R,limit:w,search:g,role:h,eligibleMembersForProjectId:p,filterByUserIds:v,includeEntitlements:!!E||void 0,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:x})}`;let i=t?.pagination.nextPageCursor;return i?`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,s.encode)({sort:R,limit:w,nextPageCursor:i,search:g,role:h,eligibleMembersForProjectId:p,includeEntitlements:!!E||void 0,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:x})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:M?[c]:[]});(0,t.useEffect)(()=>{M&&A.resetLaggy()},[S,M]);let _=(0,t.useMemo)(()=>A.data?.flatMap(e=>e.members.slice(0,w))||[],[A.data,w]),B=(0,t.useMemo)(()=>A.data?.flatMap(e=>e.permissionRequests||[])||[],[A.data]),$=!!A.data,C=$&&0===_.length,V=!!($&&A.data&&A.size>A.data.length),O=!!($&&A.data&&!A.data[A.data.length-1]?.pagination?.nextPageCursor);return(0,i.default)(()=>{if(!T||!A.data||O||!y||!I)return null;let e=A.data[A.data.length-1].pagination.nextPageCursor;return`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,s.encode)({sort:R,limit:w,nextPageCursor:e,search:g,role:h,eligibleMembersForProjectId:p,includeEntitlements:E,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:x})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[A,{members:_,permissionRequests:B.filter(e=>null!=e),initialDataLoaded:$,isEmpty:C,loadMore:()=>A.setSize(A.size+1),isLoadingMore:V,isReachingEnd:O,isLagging:A.isLagging}]}function f(){let{sort:e="date_desc",limit:t=20,filterByUserIds:r,until:o,role:c,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:p}=(0,l.useTeam)(),{isLoading:R,can:v}=(0,d.default)(),E=!R&&v(u.Action.List,u.Resource.TeamFellowMembership);return(0,i.default)(()=>h&&p&&E?`${n.API_TEAMS_MEMBERS_V3}/${p.id}/members${(0,s.encode)({sort:e,until:o,limit:t,role:c,filterByUserIds:r,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),f)}function h(e){let{limit:t=20,until:r,role:o,sort:l="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.default)(()=>e?`${n.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,s.encode)({until:r,limit:t,role:o,sort:l})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),d)}},1235157,e=>{"use strict";e.s(["getRoleName",()=>i,"orderedTeamRoles",()=>t,"rolesMeta",()=>r,"v0Roles",()=>s,"v0RolesMeta",()=>a]);let t=["OWNER","MEMBER","DEVELOPER","SECURITY","VIEWER","VIEWER_FOR_PLUS","BILLING","CONTRIBUTOR"];function i(e){return r[e]?.label||e}let r={OWNER:{label:"Owner",description:"Full team access"},MEMBER:{label:"Member",description:"Create deployments, manage integrations, and domains"},DEVELOPER:{label:"Developer",description:"Create non-production deployments"},SECURITY:{label:"Security",description:"Manage security settings and secrets"},VIEWER:{label:"Viewer",description:"Read-only team access"},VIEWER_FOR_PLUS:{label:"Viewer",description:"View projects and collaborate on deployments"},BILLING:{label:"Billing",description:"Manage billing settings and invoices"},CONTRIBUTOR:{label:"Contributor",description:"Only has access to assigned projects"}},s=["V0Builder","V0Viewer","V0Chatter"],a={V0Builder:{key:"V0Builder",name:"Builder",description:"Can create and manage v0 projects."},V0Chatter:{key:"V0Chatter",name:"Chatter",description:"Can chat with v0 projects."},V0Viewer:{key:"V0Viewer",name:"Viewer",description:"Can view v0 projects."}}},4723202,e=>{"use strict";e.s(["RequestRoleButton",()=>g]);var t=e.i(751170),i=e.i(4099374),r=e.i(2504781),s=e.i(5255926),a=e.i(455575),n=e.i(5468328),o=e.i(277234),l=e.i(5338940),d=e.i(8587921),u=e.i(5140444),c=e.i(8248823),m=e.i(57106);function g(e){let{teamRole:o,variant:g="card"}=e,{team:h,isLoading:p}=(0,l.useTeam)(),{hasRequestedRole:R,mutate:v,isLoading:E}=function(e){let{user:t,isLoading:i}=(0,u.useUser)(),{data:r,mutate:s,isLoading:a}=(0,d.default)({includePermissionRequests:!0}),n=r?.permissionRequests;return{hasRequestedRole:n?.some(i=>i.uid===t?.uid&&i.requestedTeamRole.includes(e))??!1,mutate:s,isLoading:i||a}}(o),[b,x]=(0,i.useState)(!1),[M,T]=(0,i.useState)(!1);if(h?.membership?.role!=="VIEWER_FOR_PLUS")return null;let y=R||M;return(0,t.jsx)(s.Skeleton,{show:E||p,children:(0,t.jsx)(n.Tooltip,{disableTriggers:!y,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${h?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(r.Button,{disabled:y,loading:b,className:"card"===g?"text-label-14 font-medium":void 0,onClick:async()=>{if(h?.id){x(!0);try{await f(h.id,o),v(),T(!0),a.toasts.success("Request for the Member role has been sent")}catch(e){a.toasts.error((0,c.errorToString)(e,"Failed to send request"))}finally{x(!1)}}},size:"card"===g?"small":void 0,type:"card"===g?"tertiary":void 0,children:y?"Access Requested":"Request Access"})})})}async function f(e,t){await (0,o.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}},1068837,e=>{"use strict";e.s(["AdditionalPermissionsRequiredModalClient",()=>s]);var t=e.i(751170),i=e.i(1717203),r=e.i(8556491);function s(e){let{actionLabel:s,permissionChecks:a}=e,{can:n,isLoading:o,accessInfo:l}=(0,i.default)(),d=a.every(e=>{let[t,i]=e;return n(t,i)});return o||d?null:(0,t.jsx)(r.AdditionalPermissionsRequiredModal,{role:l?.role,team:l?.team??void 0,actionLabel:s})}},6214714,4830608,e=>{"use strict";e.s(["ExperimentsResourceHeadingButtons",()=>E,"ExperimentsResourceListFallback",()=>b,"ExperimentsResourceListWithParams",()=>x,"ExperimentsResourceModalsProvider",()=>v,"useExperimentResource",()=>R],6214714);var t=e.i(751170),i=e.i(4099374),r=e.i(9014736);e.i(5463680);var s=e.i(6769352),a=e.i(15312);e.i(5628754);var n=e.i(9691190);e.s(["preloadExperimentItems",()=>g,"useExperimentItems",()=>f],4830608);var o=e.i(9830371),l=e.i(4244280),d=e.i(8042625),u=e.i(9171423);async function c(e){let t=await (0,u.fetchApi)(e,{throwOnHTTPError:!0,returnStatus:!0,cache:"default",headers:{"cache-control":"private, max-age=45",vary:"Cookie"}});if("object"!=typeof t.body)throw Error(`Invalid fetch response(${t.status}), returned ${typeof t.body} at ${e}`);if(200!==t.status)throw Error(`Fetch failed with status ${t.status} at ${e}`);return t.body}let m=e=>{let t=`${l.API_EXPERIMENTATION}/items?${(0,d.encode)({teamId:e.teamSlug,resourceId:e.resourceId})}`;return{get key(){return t},fetch:c,process:t=>e.resourceId?t.items.filter(t=>t.resourceId===e.resourceId):e.resourceIds?t.items.filter(t=>e.resourceIds?.includes(t.resourceId)):t.items}};function g(e){if(!e.resourceId)return;let t=m(e);(0,o.preload)(t.key,t.fetch)}function f(e){let t=(0,i.useMemo)(()=>m(e),[e]),s=(0,r.default)(t.key,t.fetch);return(0,i.useMemo)(()=>({items:s.data?t.process(s.data):[],isLoading:s.isLoading,error:s.error}),[s.data,s.isLoading,t,s.error])}var h=e.i(7557283),p=e.i(1068837);function R(e){let t=(0,i.useMemo)(()=>(e=>{let t=`${l.API_STORE}/stores/${e.resourceId}${(0,d.encode)({teamId:e.teamSlug})}`;return{get key(){return t},fetch:c,process:e=>e.store}})(e),[e]),s=(0,r.default)(t.key,t.fetch);return(0,i.useMemo)(()=>({resource:s.data?t.process(s.data):null,isLoading:s.isLoading}),[s.data,s.isLoading,t])}function v(e){let{children:i}=e;return(0,t.jsx)(a.ResourceModalsProvider,{protocolType:"experimentation",children:i})}function E(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.CreateResourceButton,{onSuccess:e=>{},protocolType:"experimentation"})})}function b(){return(0,t.jsx)(n.ResourceList,{protocolType:"experimentation",resourceLinkFunc:()=>"#"})}function x(e){let r=(0,i.use)(e.params),s=(0,i.useRef)({}),a=(0,i.useCallback)(e=>{if(e){let t=e=>{let t=e.target.closest("[data-resource-item]");if(!t)return;let i=t.getAttribute("data-resource-item");i&&(s.current[i]||(s.current[i]=!0,g({teamSlug:r.teamSlug,resourceId:i})))};return e.addEventListener("mouseover",t),()=>{e.removeEventListener("mouseover",t)}}},[r.teamSlug]);return(0,t.jsxs)("div",{ref:a,children:[(0,t.jsx)(n.ResourceList,{protocolType:"experimentation",resourceLinkFunc:e=>`/${r.teamSlug}/${r.project||"~"}/experimentation/collections/${e.id}`}),(0,t.jsx)(p.AdditionalPermissionsRequiredModalClient,{actionLabel:"view or manage experiment integrations",permissionChecks:[[h.Action.Read,h.Resource.IntegrationConfiguration]]})]})}}]);

//# sourceMappingURL=b7a31e8568b9f234.js.map
//# debugId=78ed26b4-b845-5ad4-b3f4-0753a75a41e5
