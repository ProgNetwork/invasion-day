
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f868915d-a666-53e7-850a-004b0c8ac81a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3220378,e=>{"use strict";e.s(["MultiSwitcherPopup",()=>eL,"ScopeLink",()=>eN],3220378);var t=e.i(751170),r=e.i(5265628),a=e.i(4099374),i=e.i(3679047),n=e.i(9722978),s=e.i(5883567),o=e.i(2331152),l=e.i(1918911),c=e.i(9508212),u=e.i(1344973),d=e.i(2504781),m=e.i(4585051),p=e.i(1492947),h=e.i(4004502),f=e.i(7151748),g=e.i(3870297),j=e.i(6685186),x=e.i(5338940),S=e.i(5140444),v=e.i(9668517),y=e.i(3322724),w=e.i(57106),C=e.i(7837522),k=e.i(7780974),T=e.i(1236612),b=e.i(9261674),P=e.i(4839822),E=e.i(475038),A=function(e){return e.PROJECTS="scope-search-projects",e.TEAMS="scope-search-teams",e}({}),I=e.i(827385),R=e.i(271259),F=e.i(8172029),N=e.i(1502164),L=e.i(5756088),D=e.i(6318858),O=e.i(5255926),M=e.i(8977282),$=e.i(6228447),_=e.i(4670733);let K="ðŸ‘¥",V="ðŸ“",q=RegExp("/~/(deployments|observability|storage|ai|settings)(?:/|$)");var z=e.i(5136192),U=e.i(6705621),B=e.i(6060673),G=e.i(8896705),H=e.i(6016088),W=e.i(84614);function Y(e){let{team:r,isCurrent:s,closeSwitcher:o}=e,[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)({x:100,translateY:0}),p=(0,i.useRouter)(),h=function(e){let{user:t,team:r}=e;return{name:r?.name||t?.name||r?.slug||t?.username,slug:r?.slug||t?.username,avatar:r?.avatar||t?.avatar}}({team:r}),f=(0,i.usePathname)(),g=(0,i.useParams)()||{},j=(0,i.useSearchParams)()??new URLSearchParams(""),{value:x}=(0,_.useAllAccountTypeBadgesFlag)(),S=(0,a.useContext)(H.CloneContext),v=e=>{if(h.slug&&((0,M.setScope)(h.slug),f)){let t=(0,z.getScopeHref)({pathname:f,pathParams:g,searchParams:j,team:r});e?window.open(t,"_self","noopener"):p.push(t)}},y=h.slug&&f?(0,z.getScopeHref)({pathname:f,pathParams:g,searchParams:j,team:r}):void 0;return(0,t.jsx)(T.Command.Item,{href:y,callback:e=>{if(h.slug){if("key"in e&&"Enter"===e.key)return(e.preventDefault(),o(),S)?void S.openModalSwitchConfirm({callback:()=>v(!0)}):void(y&&(window.location.href=y));if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),y&&window.open(y,"_blank","noopener,noreferrer");return}if(o(),f){if(S)return void S.openModalSwitchConfirm({callback:()=>v(!0)});v(!1)}}},onKeyDown:e=>{if("Enter"===e.key){if(e.preventDefault(),o(),S)return void S.openModalSwitchConfirm({callback:()=>v(!0)});y&&(window.location.href=y)}},className:(0,n.clsx)(W.default.teamItem,{[W.default.hover]:l}),"data-current":s,onMouseMove:e=>{if(l){let{top:t,height:r,bottom:a}=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t)/r*100,n=e.currentTarget.closest("[data-command-list-wrapper]");if(!n)return;let s=n.getBoundingClientRect(),o=0;s.bottom-a<250&&(o=250-(s.bottom-a+r/2)),i>=5&&i<=95?d({x:e.clientX-s.left-16,translateY:o}):(i>100||i<0)&&setTimeout(()=>{c(!1)},500)}},onMouseOut:()=>{c(!1)},onMouseOver:()=>{c(!0)},style:{"--protection-x":`${u.x}px`,"--protection-translate-y":`${-u.translateY}px`},value:[h.name,h.slug],children:(0,t.jsxs)(J,{active:s,children:[(0,t.jsx)(m.Avatar,{hash:h.avatar,size:22,teamId:r?.id}),(0,t.jsx)("span",{className:(0,n.clsx)(W.default.name,"geist-ellipsis",{[W.default.showAllBadges]:x}),children:h.name}),(0,t.jsx)(N.ScopeBadge,{fallbackToPlan:!!x,team:r})]})})}function J(e){let{children:r,active:a}=e;return(0,t.jsxs)(c.Stack,{align:"center",className:W.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsx)(c.Stack,{align:"center",className:W.default.itemWrapper,direction:"row",flex:"1",gap:2,children:r}),a?(0,t.jsx)(D.Check,{className:"ml-2",color:"gray-900"}):null]})}function Q(e){let{projectId:r,teamSlug:a,...i}=e,{data:n,isLoading:s}=(0,B.useProject)(r,{config:{onError:()=>!0},fetchOptions:{throwOnScopeAuthError:!0}},a),{team:o}=(0,x.useTeam)(a);return s?(0,t.jsx)(et,{}):(0,$.isAuthenticationRequired)(o)?(0,t.jsx)(X,{isCurrent:i.isCurrent,projectId:r,slug:a}):n?(0,t.jsx)(Z,{...i,project:n,scopeSlug:a}):null}function X(e){let{isCurrent:r,projectId:a,slug:n}=e,s=(0,i.useRouter)();return(0,t.jsx)(T.Command.Item,{callback:e=>{if("key"in e&&"Enter"===e.key){e.preventDefault(),(0,$.requireAuthentication)({slug:n,push:e=>{s.push(e)}});return}(0,$.requireAuthentication)({slug:n,push:e=>{s.push(e)}})},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),(0,$.requireAuthentication)({slug:n,push:e=>{s.push(e)}}))},"data-current":r,value:["unauthed-project",a,n],children:(0,t.jsxs)(c.Stack,{align:"center",className:W.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsxs)(c.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("div",{className:W.default.protectedProject}),(0,t.jsx)(u.Text,{children:"Protected Project"})]}),(0,t.jsx)(L.LockClosed,{color:"gray-700"})]})})}function Z(e){let{project:r,scopeSlug:a,isCurrent:n,contentRight:s,closeSwitcher:o}=e,l=(0,i.usePathname)(),c=(0,i.useParams)(),u=r.name&&a&&l?(e=>{let{srcPathname:t,srcPathParams:r,srcSearchParamsStr:a,destScopeSlug:i,destProjectName:n}=e,s=`/${i}/${n}`,o=r?.teamSlug,l=r?.project,c=r?.id;if(o&&l&&i&&t.includes(l))s=t.replace(o,K).replace(l,V).replace(K,i).replace(V,n);else o&&!l&&i&&q.test(t)&&(s=t.replace("/~/",`/${n}/`),i!==o&&(s=s.replace(`/${o}/`,`/${i}/`)));return null!=c&&(s=function(e,t){let r=e.indexOf(`/${t}`);return -1===r?e:e.substring(0,r)}(s,c)),a&&(s+=a),s})({srcPathname:l,srcPathParams:c,srcSearchParamsStr:window.location.search,destScopeSlug:a,destProjectName:r.name}):`/team/${a}/project/${r.name||r.id}`;return(0,t.jsx)(T.Command.Item,{href:u,callback:e=>{if(r.name){if("key"in e&&"Enter"===e.key){e.preventDefault(),o(),window.location.href=u;return}if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),window.open(u,"_blank","noopener,noreferrer");return}o()}},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o(),window.location.href=u)},"data-current":n,value:[r.name,r.id,a],children:(0,t.jsx)(er,{contentRight:s,isCurrent:n,name:r.name,children:(0,t.jsx)(G.FaviconOrFramework,{project:r,size:16,style:{position:"relative"},teamId:a})})})}function ee(e){let{repo:r,scopeSlug:a,isCurrent:n,contentRight:s,closeSwitcher:o,isTeam:l}=e,c=((0,i.useSearchParams)()||"").toString(),u=l?`/${a}/~/repos/${r.slug}${"repo"===r.type?"/repo-overview":""}?${c}`:`/dashboard/repos/${r.slug}${"repo"===r.type?"/repo-overview":""}?${c}`;return(0,t.jsx)(T.Command.Item,{href:u,callback:e=>{if(r.id){if("key"in e&&"Enter"===e.key){e.preventDefault(),o(),window.location.href=u;return}if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),window.open(u,"_blank","noopener,noreferrer");return}o()}},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o(),window.location.href=u)},"data-current":n,value:[r.name,r.id,a],children:(0,t.jsx)(er,{contentRight:s,isCurrent:n,name:r.name,children:(0,t.jsx)(U.RepositoryAvatar,{gitProvider:"github"})})})}function et(e){let{index:r=0}=e;return(0,t.jsx)(T.Command.Item,{style:{display:"flex",background:"transparent"},children:(0,t.jsxs)(c.Stack,{align:"center",direction:"row",flex:"0 1 100%",gap:3,children:[(0,t.jsx)(O.Skeleton,{height:16,rounded:!0,width:16}),(0,t.jsx)(O.Skeleton,{height:20,style:{margin:"2px 0",flex:.7+(r%2?.2:0)}})]})})}function er(e){let{children:r,name:a,isCurrent:i,contentRight:s}=e;return(0,t.jsxs)(c.Stack,{align:"center",className:W.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsxs)(c.Stack,{align:"center",className:W.default.itemWrapper,direction:"row",flex:"1",gap:3,children:[(0,t.jsx)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:r}),(0,t.jsx)("span",{className:(0,n.clsx)(W.default.name,"geist-ellipsis"),children:a})]}),(0,t.jsx)("div",{className:W.default["hover-content"],children:s}),i?(0,t.jsx)(D.Check,{className:"ml-2",color:"gray-900"}):null]})}function ea(e){let{fav:t,activeSlug:r,...i}=e;return(0,a.createElement)(Q,{...i,isCurrent:t.projectId===r,key:t.projectId,projectId:t.projectId})}let ei="create_team_button";var en=e.i(9543208),es=e.i(387079),eo=e.i(6942035),el=e.i(4519214),ec=e.i(5955443),eu=e.i(2107254),ed=e.i(6774523),em=e.i(8061940),ep=e.i(1613936),eh=e.i(380513),ef=e.i(6161994);function eg(e){let{primary:r,activeSection:a,setActiveSection:n,commandProps:{setInputValue:s,inputValue:o,...l},selectedScope:c,closeSwitcher:u}=e,{addFavorite:d,removeFavorite:m,favorites:p,isFavorite:h}=(0,ep.useFavoriteProjectsAndSpaces)(),{projects:f,microfrontendGroups:g,repositories:j,canViewRepositories:v,isLoading:y,isLoadingTeamSpecificData:w,isLoadingRepositoriesContent:C,isLoadingMicrofrontendsContent:k,teamId:b}=(e=>{let{selectedScope:t,inputValue:r}=e,{user:a}=(0,S.useUser)(),{teams:n}=(0,x.useTeam)(),s=eI((0,i.useParams)()),o=eE(t,n,a),l=(0,$.isAuthenticationRequired)(o),c=n?.find(e=>e.slug===t)?.id,{data:u,isLoading:d}=(0,eh.useFeatureFlag)("enable-code-checks"),{data:m={repositories:[]},isLoading:p}=(0,em.useMinimizedRepositories)({teamId:u?c:void 0}),h=[],f=m.repositories??[];u&&(h=f.map(e=>({...e,type:"repo"})).filter(e=>{let{name:t}=e;return t.toLowerCase().includes(r.toLowerCase())}).sort((e,t)=>e.name.localeCompare(t.name)).slice(0,9));let{data:g,isLoading:j}=(0,ef.useMicrofrontendsGroups)({overWriteTeamSlug:t}),v=(g??{groups:[]}).groups.filter(e=>e.projects.some(e=>e.name===s)),{data:y,isLoading:w}=(0,eu.default)({fetchEnabled:!l,limit:10,latestDeployments:0,search:r},{onError:()=>!0,revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1},t,{throwOnScopeAuthError:!0}),C=(y?.projects??[]).filter(e=>v.every(t=>t.projects.every(t=>t.id!==e.id)));r||C.sort((e,t)=>e.name.localeCompare(t.name));let k=d||p;return{projects:C,microfrontendGroups:v,repositories:h,canViewRepositories:!!u,isLoading:k||j||w,isLoadingTeamSpecificData:w,isLoadingRepositoriesContent:k,isLoadingMicrofrontendsContent:j,teamId:c??null}})({inputValue:o,selectedScope:c});return c?(0,t.jsx)(ec.AnimatePresence,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,t.jsx)(ej,{activeSection:a,primary:r,setActiveSection:n,style:W.default,children:(0,t.jsxs)(T.Command,{"aria-label":"Projects and Repositories",inputValue:o,setInputValue:s,...l,children:[(0,t.jsx)(eP,{canViewRepositories:v,setActiveSection:n}),(0,t.jsxs)(T.Command.List,{className:W.default.list,disableDynamicHeight:!0,maxHeight:730,emptyMessage:(0,t.jsx)(ex,{canViewRepositories:v,inputValue:o,isLoading:w,projects:f,repositories:j,setInputValue:s}),children:[(0,t.jsx)(eS,{closeSwitcher:u,favorites:p,isLoading:!1,removeFavorite:m,selectedScope:c}),(0,t.jsx)(ev,{addFavorite:d,closeSwitcher:u,isFavorite:h,isLoading:k,microfrontendGroups:g,removeFavorite:m,selectedScope:c,teamId:b}),(0,t.jsx)(ew,{addFavorite:d,closeSwitcher:u,inputValue:o,isFavorite:h,isLoading:w,projects:f,removeFavorite:m,selectedScope:c}),(0,t.jsx)(eC,{closeSwitcher:u,selectedScope:c}),(0,t.jsx)(ey,{canViewRepositories:v,closeSwitcher:u,inputValue:o,isLoading:C,repositories:j,selectedScope:c})]})]})})}):null}function ej(e){let{activeSection:r,children:a,primary:i,setActiveSection:s,style:o}=e;return(0,t.jsx)(el.m.div,{animate:{opacity:1},className:(0,n.clsx)(o.command,{[o.focused]:"projects"===r,[o.primary]:i}),"data-testid":(0,h.tid)("project-switcher","dropdown"),exit:{opacity:0},initial:{opacity:1},onMouseEnter:()=>s("projects"),onMouseLeave:e=>{let t=document.querySelector("[data-radix-popper-content-wrapper]");e.relatedTarget instanceof Node&&t?.contains(e.relatedTarget)&&s("teams")},children:a})}function ex(e){let{canViewRepositories:r,inputValue:a,isLoading:i,projects:n,repositories:s,setInputValue:o}=e;if(i||""===a||n.length>0||s.length>0)return null;let l=`Projects${r?" or Repositories":""}`;return(0,t.jsxs)(c.Stack,{align:"start",gap:4,justify:"start",children:[(0,t.jsxs)(u.Text,{align:"left",weight:500,children:["No ",l," Found"]}),(0,t.jsxs)(u.Text,{align:"left",color:"gray-900",children:['Your search for "',a,'" did not match any ',l,"."]}),(0,t.jsx)(d.Button,{onClick:()=>{o("")},size:"small",type:"secondary",width:"100%",children:"Clear Search"})]},"searchNotFound")}function eS(e){let{closeSwitcher:r,favorites:n,isLoading:s,removeFavorite:o,selectedScope:l}=e,{teams:c}=(0,x.useTeam)(),u=eI((0,i.useParams)());return s||null===c||0===n.length?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(T.Command.Group,{"data-order":"1",heading:"Favorites",children:n.map(e=>{let a=c.find(t=>t.id===e.teamId);return a?(0,t.jsx)(ea,{activeSlug:u,closeSwitcher:r,contentRight:(0,t.jsx)("button",{"aria-label":"Remove from favorites",className:W.default["fav-button"],onClick:t=>{t.preventDefault(),t.stopPropagation(),o(e)},type:"button",children:(0,t.jsx)(eo.Cross,{})}),fav:e,isCurrent:!1,scopeSlug:l,teamId:e.teamId,teamSlug:a.slug},(0,ep.serializeFavorite)(e)):null})}),(0,t.jsx)(T.Command.Separator,{})]},"favorites")}function ev(e){let{addFavorite:r,closeSwitcher:a,isFavorite:n,isLoading:s,microfrontendGroups:o,removeFavorite:l,selectedScope:c,teamId:u}=e,d=(0,i.useParams)(),{user:m,isLoading:p}=(0,S.useUser)();if(s||p)return null;let h=eI(d);return(0,t.jsx)(t.Fragment,{children:o.map(e=>{let i=e.group.name?e.group.name:e.group.slug;return(0,t.jsx)(T.Command.Group,{"data-order":"2",heading:i,children:e.projects.map(e=>(0,t.jsx)(Z,{closeSwitcher:a,contentRight:u?(0,t.jsx)(eT,{addFavorite:r,isFavorited:n({projectId:e.id,teamId:u}),project:e,removeFavorite:l,selectedScope:c,teamId:u,limited:!!m?.limited}):null,isCurrent:e.name===h,project:e,scopeSlug:c},`scope-project-${e.id}`))},i)})})}function ey(e){let{closeSwitcher:r,repositories:a,inputValue:n,isLoading:s,selectedScope:o,canViewRepositories:l}=e,c=eI((0,i.useParams)());if(!l)return null;let u={"data-order":"5",heading:"Repositories"};return s?(0,t.jsx)(T.Command.Group,{...u,children:[,,,,,].fill(0).map((e,r)=>(0,t.jsx)(et,{index:r},(0,ed.getUnsafeKey)(r,"space-loader")))}):0===a.length&&""===n?(0,t.jsx)(T.Command.Group,{...u,children:(0,t.jsx)(ek,{type:"repositories"})}):(0,t.jsx)(T.Command.Group,{...u,children:a.map(e=>(0,t.jsx)(ee,{closeSwitcher:r,isCurrent:e.slug===c,isTeam:e.ownerId.startsWith("team"),repo:e,scopeSlug:o},`scope-repo-${e.id}`))})}function ew(e){let{addFavorite:r,closeSwitcher:a,inputValue:n,isFavorite:s,isLoading:o,projects:l,removeFavorite:c,selectedScope:u}=e,{user:d}=(0,S.useUser)(),{teams:m}=(0,x.useTeam)(),p=eI((0,i.useParams)()),h=eA(u,d),f=m?.find(e=>e.slug===u)??null,g=f?.id??null;if(h)return null;let j={"data-order":"3",heading:"Projects"},v=!(0,$.isAuthenticationRequired)(f)&&!function(e){let{teamOrUser:t,user:r}=e;return!!(t?.mfa&&"enforced"in t.mfa&&t.mfa.enforced)&&!r?.mfa?.enabled}({teamOrUser:f,user:d});return o?(0,t.jsx)(T.Command.Group,{...j,children:[,,,,,].fill(0).map((e,r)=>(0,t.jsx)(et,{index:r},(0,ed.getUnsafeKey)(r,"scope-loader")))}):0===l.length&&""===n?(0,t.jsxs)(T.Command.Group,{...j,children:[(0,t.jsx)(eb,{closeSwitcher:a,selectedScope:u}),v?(0,t.jsx)(ek,{type:"projects"}):null]}):(0,t.jsxs)(T.Command.Group,{...j,children:[(0,t.jsx)(eb,{closeSwitcher:a,selectedScope:u}),v?l.map(e=>(0,t.jsx)(Z,{closeSwitcher:a,contentRight:(0,t.jsx)(eT,{addFavorite:r,isFavorited:s({teamId:e.accountId??"",projectId:e.id}),project:e,removeFavorite:c,selectedScope:u,teamId:g,limited:!!d?.limited}),isCurrent:e.name===p,project:e,scopeSlug:u},`scope-project-${e.id}`)):null]})}function eC(e){let{closeSwitcher:r,selectedScope:a}=e,{user:n}=(0,S.useUser)(),{teams:o}=(0,x.useTeam)(),l=(0,i.useRouter)(),d=eE(a,o,n);return(0,$.isAuthenticationRequired)(d)||eA(a,n)?null:(0,t.jsx)(T.Command.Item,{callback:e=>{let t=`/new/${a}`;e.ctrlKey||e.metaKey||"button"in e&&1===e.button?window.open(t,"_blank","noopener"):l.push(t),r()},"data-order":"4","data-testid":(0,h.tid)("scope-switcher","create-project"),hideOnFilter:!1,children:(0,t.jsxs)(c.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)(s.PlusCircle,{color:"blue-900",size:16}),(0,t.jsx)(u.Text,{children:"Create Project"})]})})}function ek(e){let{type:r}=e,a="projects"===r;return(0,t.jsxs)(c.Stack,{align:"start",className:W.default.empty,gap:1,justify:"start",children:[(0,t.jsxs)(u.Text,{align:"left",color:"gray-1000",weight:600,children:["No ",a?"projects":"repositories",", yet!"]}),(0,t.jsxs)(u.Text,{align:"left",color:"gray-900",children:["This team has no ",a?"projects":"repositories","."]})]})}function eT(e){let{isFavorited:r,addFavorite:a,removeFavorite:i,selectedScope:n,project:s,teamId:o,limited:l}=e;return n&&o&&!l?(0,t.jsx)("button",{"aria-label":`${r?"Remove from your":"Add project to your"} favorites`,className:W.default["fav-button"],onClick:e=>{e.preventDefault(),e.stopPropagation(),o&&(r?i:a)({teamId:o,projectId:s.id})},style:{background:"none",height:32,borderRadius:4},type:"button",children:r?(0,t.jsx)(es.StarFill,{size:16,style:{marginRight:-2,flexShrink:0}}):(0,t.jsx)(en.Star,{size:16,style:{marginRight:-2,flexShrink:0}})}):null}function eb(e){let{closeSwitcher:r,selectedScope:a}=e,{user:n}=(0,S.useUser)(),{teams:s}=(0,x.useTeam)(),o=(0,i.useRouter)(),l=eE(a,s,n),m=(0,$.isAuthenticationRequired)(l),p=(0,$.getTeamLimitedBy)(l);if(!m)return null;let h=!!l&&"saml"in l&&(l.saml?.enforced??!1),f="Re-Authenticate",g=h?"You must authenticate with SAML to access projects in":"You must re-authenticate to access projects in",j=h?"Continue with SAML SSO":"Continue",v=()=>{(0,$.requireAuthentication)({slug:a,next:`/${a}`,push:e=>{o.push(e)}}),r()};return 1===p.length&&p.includes("mfa")&&(f="Two-Factor Required",g="You must enable two-factor authentication to access projects in",j="Configure 2FA",v=()=>{o.push("/account/settings/authentication#two-factor-authentication"),r()}),(0,t.jsxs)(c.Stack,{align:"center",className:W.default.empty,gap:3,justify:"center",children:[(0,t.jsxs)(c.Stack,{align:"start",gap:1,justify:"start",children:[(0,t.jsx)(u.Text,{align:"left",color:"gray-1000",weight:600,children:f}),(0,t.jsxs)(u.Text,{align:"left",color:"gray-900",children:[g," ",(0,t.jsx)(u.Text,{as:"span",weight:600,children:l?.name}),"."]})]}),(0,t.jsx)(d.Button,{onClick:v,size:"small",width:"100%",children:j})]})}function eP(e){let{canViewRepositories:r,setActiveSection:a}=e;return(0,t.jsxs)(c.Stack,{align:"center",className:W.default.input,direction:"row",children:[(0,t.jsx)(o.MagnifyingGlass,{color:"gray-500",size:20}),(0,t.jsx)(T.Command.Input,{autoFocus:!1,itemID:A.PROJECTS,onFocus:()=>a("projects"),placeholder:`Find Project${r?" or Repository":""}...`})]})}let eE=(e,t,r)=>r?.username===e?r??null:t?.find(t=>t.slug===e)||null,eA=(e,t)=>e===t?.username,eI=e=>e?.project||e?.spaceIdOrSlug;function eR(e){let{primary:r,activeSection:a,setActiveSection:i,commandProps:n,selectedScope:s,closeSwitcher:o}=e;return(0,t.jsx)(eg,{activeSection:a,closeSwitcher:o,commandProps:n,primary:r,selectedScope:s,setActiveSection:i})}function eF(e){let{primary:r,activeSection:a,setActiveSection:i,commandProps:l,onShowCreateTeam:m,closeSwitcher:p,team:j}=e,{track:S}=(0,C.useTrackActivity)(),{canCreateTrial:v,isOemPartner:y}=(0,R.useCanCreateTrial)(),w=(0,x.useSortedTeams)(),{setInputValue:b,inputValue:P}=l;return(0,t.jsx)("div",{className:(0,n.clsx)(W.default.command,r&&W.default.primary,{[W.default.focused]:"teams"===a}),"data-testid":(0,h.tid)("scope-switcher","dropdown"),onMouseEnter:()=>i("teams"),onMouseLeave:e=>{let t=document.querySelector("[data-radix-popper-content-wrapper]");e.relatedTarget instanceof Node&&t?.contains(e.relatedTarget)&&i("projects")},children:(0,t.jsxs)(T.Command,{"aria-label":"Command menu",...l,children:[(0,t.jsxs)(c.Stack,{align:"center",className:W.default.input,direction:"row",children:[(0,t.jsx)(o.MagnifyingGlass,{color:"gray-900",size:20}),(0,t.jsx)(T.Command.Input,{autoFocus:!1,itemID:A.TEAMS,onFocus:()=>i("teams"),placeholder:"Find Team..."})]}),(0,t.jsxs)(T.Command.List,{disableDynamicHeight:!0,emptyMessage:(0,t.jsxs)(c.Stack,{align:"start",gap:4,justify:"start",children:[(0,t.jsx)(u.Text,{align:"left",weight:500,children:"No Team Found"}),(0,t.jsxs)(u.Text,{align:"left",color:"gray-900",children:['Your search for "',P,'" did not match any teams.']}),(0,t.jsx)(d.Button,{onClick:()=>{b("")},size:"small",type:"secondary",width:"100%",children:"Clear Search"})]}),maxHeight:730,children:[(0,t.jsx)(T.Command.Group,{heading:"Teams",children:w.map(e=>(0,t.jsx)(Y,{closeSwitcher:p,isCurrent:!!(j&&e.slug===j.slug),team:e},`scope-team-${e.slug}`))}),(0,t.jsx)(T.Command.Item,{callback:()=>{m(),f.analytics.track(g.AnalyticsEvent.SCOPE_SWITCHER_CLICKED_NEW_TEAM),S(k.VercelActivityAction.CreateTeamClick,{source:"scope-switcher",hasTrialAvailable:v??!1,isOemPartner:y??!1}),p()},"data-testid":(0,h.tid)("scope-switcher","create-team"),hideOnFilter:!0,value:[ei,ei],children:(0,t.jsxs)(c.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)(s.PlusCircle,{className:"translate-z-0 translate-x-[3px]",color:"blue-900"}),(0,t.jsx)("span",{children:"Create Team"})]})})]})]})})}function eN(e){let{team:r,hideTextOnMobile:s}=e,o=(0,E.useIsViewingPublicDeployment)(),{user:l,isNorthstar:d}=(0,S.useUser)(),{name:p,avatar:h}=r||l||{},{slug:f}=r||{},{username:g}=l||{},j=p||f||g,x=(0,i.useSearchParams)(),v=x?.get("teamSlug")||"",y=(0,a.useMemo)(()=>(function(e){let{externalPublicDeployment:t,teamSlug:r,team:a,username:i}=e;return t?`${(0,F.getQueryParam)(r)||""}`:a?void 0:i})({externalPublicDeployment:o,teamSlug:v,team:r,username:g}),[o,v,r,g]),C=!!(!r&&d),k=(0,a.useMemo)(()=>(0,I.getNorthstarDashboardHref)({user:l,teamSlug:f}),[f,l]);return(0,t.jsx)(w.Link,{className:(0,n.clsx)(W.default.scopeLink,{[W.default.disabled]:o}),href:k,children:(0,t.jsxs)(c.Stack,{align:"center",direction:"row",children:[(0,t.jsx)(m.Avatar,{className:W.default.avatar,hash:o?void 0:h,size:22,teamId:r?.id,title:o?v:j,username:y}),(0,t.jsx)(u.Text,{className:(0,n.clsx)(W.default.scopeName,"geist-ellipsis",{[W.default.hideOnMobile]:s}),weight:500,children:o?v:j}),!o&&!C&&(0,t.jsx)("div",{className:"geist-hide-on-tablet",children:(0,t.jsx)(N.ScopeBadge,{fallbackToPlan:!0,team:r||void 0})})]})})}function eL(e){let{side:n="bottom",children:s,setCreateModalOpen:o,primaryColumn:c,forceVisible:u=!1,...m}=e,{team:f}=(0,x.useTeam)(),{user:g}=(0,S.useUser)(),w=(0,i.useSearchParams)(),C=(0,v.useTeamSlug)(),[k,T]=(0,a.useState)("teams"),I=C||g?.username||"",R=(0,x.useSortedTeams)(),F=f?R.findIndex(e=>e.id===f.id):0,N=(0,b.useCommand)({selected:F}),L=(0,b.useCommand)({selected:0}),[D,O]=(0,a.useState)(!1),M=()=>{O(!1),N.setInputValue(""),L.setInputValue("")};L.map;let $=(0,y.useIsMobile)(),_=(0,E.useIsViewingPublicDeployment)(),K=(0,a.useRef)(0),V=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=()=>{O(!0)};return document.addEventListener(P.OPEN_SCOPE_SWITCHER_EVENT,e),()=>{cancelAnimationFrame(K.current),cancelAnimationFrame(V.current),document.removeEventListener(P.OPEN_SCOPE_SWITCHER_EVENT,e)}},[]),(0,a.useEffect)(()=>{w?.get(P.OPEN_SCOPE_SWITCHER_EVENT)==="true"&&O(!0)},[w]),(0,a.useEffect)(()=>{let e,{inputValue:t,setInputValue:r,setSelectedIndex:a,selectedIndex:i}=N;return D||(e=setTimeout(()=>{t&&r(""),i!==F&&a(F)},150)),()=>{e&&clearTimeout(e)}},[D,F]),(0,a.useEffect)(()=>{let e,{inputValue:t,setInputValue:r}=L;return D||(e=setTimeout(()=>{t&&r("")},150)),()=>{e&&clearTimeout(e)}},[D]);let q=(0,t.jsx)(eF,{activeSection:k,closeSwitcher:M,commandProps:N,onShowCreateTeam:()=>{o()},primary:!$&&"team"===c,setActiveSection:T,team:f}),z=(0,a.useMemo)(()=>{let{filterList:e,list:t}=N,r=e||t.current,{selectedIndex:a}=N;return r[a]?.value||[]},[N])[1],U=(0,t.jsx)(eR,{activeSection:k,closeSwitcher:M,commandProps:L,primary:"project"===c,selectedScope:$?I:z,setActiveSection:T});return(0,a.useEffect)(()=>{D&&setTimeout(()=>{let e="team"===c?A.TEAMS:A.PROJECTS,t=document.querySelector(`[itemId=${e}]`);null!==t&&t instanceof HTMLInputElement&&t.focus()},200)},[D,c]),(0,t.jsxs)(r.Root,{...m,onOpenChange:e=>void(0,j.awaitPaint)().then(()=>O(e)),open:D,children:[(0,t.jsxs)(r.Anchor,{style:{display:"flex",alignItems:"center",width:"100%"},children:[s,u||!_?(0,t.jsx)(r.Trigger,{asChild:!0,children:(0,t.jsx)(d.Button,{"aria-label":"Switch team",className:W.default.trigger,"data-testid":(0,h.tid)("scope-switcher","toggle"),style:{marginLeft:2,flexShrink:0,width:28,padding:0,backgroundColor:D?"var(--ds-gray-alpha-200)":void 0},type:"tertiary",typeName:"button",children:(0,t.jsx)(l.ChevronUpDown,{color:"gray-900"})})}):null]}),$?(0,t.jsx)(p.Drawer,{fixed:!0,height:"80vh",onDismiss:M,show:D,children:(0,t.jsx)("div",{style:{position:"relative"},children:"team"===c?(0,t.jsx)("div",{children:q},"teams"):(0,t.jsx)("div",{children:U},"projects")})}):(0,t.jsxs)(r.Content,{align:"start",alignOffset:"team"===c?-16:-255,className:W.default.content,onKeyDown:e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let t=L.inputRef.current,r=N.inputRef.current;t?.selectionStart!=null&&e.target===t&&(t.selectionStart>0||t.selectionStart!==t.selectionEnd)||(r?.selectionStart==null||e.target!==r||!(r.selectionStart<r.value.length)&&r.selectionStart===r.selectionEnd)&&("ArrowRight"===e.key&&t&&document.activeElement!==t?(cancelAnimationFrame(K.current),t.focus(),K.current=requestAnimationFrame(()=>{t.select()})):"ArrowLeft"===e.key&&r&&document.activeElement!==r&&(cancelAnimationFrame(V.current),r.focus(),V.current=requestAnimationFrame(()=>{r.select()})))},onOpenAutoFocus:e=>e.preventDefault(),side:n,sideOffset:8,style:{display:"flex",position:"relative"},children:[q,U]})]})}(0,h.markLoadedForTest)("multi-switcher")}]);

//# sourceMappingURL=d794bfa7d3cba081.js.map
//# debugId=f868915d-a666-53e7-850a-004b0c8ac81a
