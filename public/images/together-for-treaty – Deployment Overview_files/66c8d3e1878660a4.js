
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1c3e8296-2803-5720-9e94-c105fb9ee9d4")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7132425,e=>{"use strict";e.s(["MicrofrontendsBadge",()=>D]);var t=e.i(751170),n=e.i(3679047),r=e.i(9722978),i=e.i(5797774),o=e.i(1344973),a=e.i(2504781),s=e.i(8216525),l=e.i(3487134),c=e.i(762945),d=e.i(3162826),u=e.i(2988836),m=e.i(57106),p=e.i(6161994),f=e.i(1116271),h=e.i(8822420),g=e.i(3305800),j=e.i(6625227),x=e.i(6060673),v=e.i(7643270),y=e.i(9358876),$=e.i(5136192),C=e.i(5338940),w=e.i(4896636),b=e.i(4099374),P=e.i(5771992),k=e.i(4396019),T=e.i(5071474);function M(e){let{className:n,hasWarning:i,children:o}=e;return(0,t.jsx)(h.IconInCircleWrapper,{className:(0,r.clsx)({"bg-blue-300 text-blue-900 hover:bg-blue-400":!i,"bg-amber-300 text-amber-900 hover:bg-amber-400":i},n),children:o})}function A(e){let{project:t,viewingDeployment:n}=e,{data:r}=(0,k.useProjectProductionDeployment)(t?.id,{config:{revalidateOnFocus:!1}}),i=n?.gitSource?.ref,{deployments:o}=(0,P.useDeploymentsInfinite)({limit:1,project:t,branch:i,requireProject:!0,ignoreProjectSlug:!0})[1],a=i?o[0]:void 0;return n?a:r?.deployment}function S(e){let{project:n,viewingDeployment:r}=e,i=A({project:n,viewingDeployment:r});if(!i)return null;let o=+("READY"!==i.readyState);return(0,t.jsx)(s.DeploymentStatus,{deployment:i,className:`absolute z-${o}`})}function L(e){let{viewingProject:n,viewingDeployment:r,hideOtherChildren:i,applications:o,pathParams:a,projects:s}=e,[l,c]=(0,b.useState)(!1),d=()=>c(!l),{sortedProjects:u}=(0,v.partitionMicrofrontendsProjects)(s,{viewingProjectName:n?.name,applications:o}),m=u[0],p=n?.name===m.name,f=!n||p,h=f?i?1:4:2,g=l?u.length:h,j=i&&!f?[]:[...u.length>g?[{onClick:d,name:(0,y.pluralize)(1===h?"child project":"other child project",u.length-g,!0),hideArrow:h>1,statusDots:(0,t.jsx)("div",{className:"relative size-2",children:u.slice(g).map(e=>(0,t.jsx)(S,{project:e,viewingDeployment:r},e.id))})}]:[],...1===u.length?[{onClick:d,name:"0 child projects"}]:[]],x=[...u.slice(0,g),...j];return(0,t.jsx)(t.Fragment,{children:x.map(e=>(0,t.jsx)(I,{viewingDeployment:r,pathParams:a,projectLink:e,viewingProject:n},e.name))})}function I(e){let{viewingProject:r,viewingDeployment:i,pathParams:a,projectLink:l}=e,{name:c}=l,u="hideArrow"in l&&l.hideArrow,{isDefaultApp:p}="microfrontends"in l&&l.microfrontends||{},f=r?.name===c,{team:h}=(0,C.useTeam)(),{href:g,statusDot:j,statusDotHref:x}=function(e){let{team:n,project:r,viewingDeployment:i,viewingProject:o,pathParams:a,pathname:l,searchParams:c}=e,d=A({project:r,viewingDeployment:i});if(!r||!n)return{href:void 0};let u=d&&"id"in d?d.id:d?.uid;if(i){if(d){let e=`/${n.slug}/${r.name}/${u?.replace("dpl_","")}`;return{href:e,statusDotHref:e,statusDot:(0,t.jsx)(s.DeploymentStatus,{deployment:d})}}let e=i.gitSource?.ref;return{href:`/${n.slug}/${r.name}/deployments${e?`?filterBranch=${e}`:""}`}}return{href:l&&o?(0,$.getScopeHref)({pathname:l,pathParams:a,searchParams:c,team:n,project:r}):`/${n.slug}/${r.name}/settings/microfrontends`,statusDotHref:`/${n.slug}/${r.name}/${u?.replace("dpl_","")}`,statusDot:d?(0,t.jsx)(s.DeploymentStatus,{deployment:d}):void 0}}({team:h,project:"id"in l?l:void 0,viewingDeployment:i,viewingProject:r,pathParams:a,pathname:(0,n.usePathname)(),searchParams:(0,n.useSearchParams)()??new URLSearchParams("")}),v="onClick"in l?l.onClick:void 0,y=j||("statusDots"in l?l.statusDots:void 0);return(0,t.jsxs)("div",{className:"group flex flex-row items-center gap-1",children:[p?null:(0,t.jsx)(t.Fragment,{children:u?(0,t.jsx)("div",{className:"size-4"}):(0,t.jsx)(d.CornerDownRight,{size:12})}),(0,t.jsx)(m.Link,{href:g,type:"secondary",variant:"underline",onClick:v,children:(0,t.jsx)(o.Text,{weight:f?500:400,size:14,children:c})}),y?(0,t.jsx)(m.Link,{href:x||g,onClick:v,children:(0,t.jsx)("div",{className:"ml-1",children:y})}):null,(0,t.jsx)(m.Link,{href:g,onClick:v,children:(0,t.jsx)(d.CornerDownRight,{style:{clipPath:"inset(0 0 0 5px)"},className:"opacity-0 group-hover:opacity-100",size:12})})]},c)}function R(e){let{pageContext:r,className:d="",groupId:h,side:y="bottom",project:$}=e,[C,P]=(0,b.useState)(!1),k=function(e){let{pageContext:r,groupId:i,project:d}=e,h=(0,n.useParams)()||{},{teamSlug:y,project:$,id:C}=h,b=C?`dpl_${C}`:void 0,{data:P}=(0,j.default)(b),{data:k}=(0,x.useProject)(void 0===d?$:void 0,{apiVersion:"v10"}),M=d||k,{data:A,isLoading:S}=(0,f.useMicrofrontendsConfig)({deploymentId:P?.microfrontends?P?.id:void 0}),I=P?.alias.find(e=>e.includes("-git-")),{data:R}=(0,w.default)({domain:I}),D=function(e){let t,{deployment:n,deploymentConfig:r,alias:i,project:o,groupId:a}=e,{data:s}=(0,p.useMicrofrontendsGroups)(),l="the production deployment of the default app";i?.microfrontends?.applications&&Array.isArray(i.microfrontends.applications)?(l="this alias",t=i.microfrontends.applications.reduce((e,t)=>(e[t.projectId]={deploymentId:t.deploymentId},e),{})):n?.microfrontends?.applications&&(l="this deployment",t=n.microfrontends.applications);let{data:c}=(0,x.useProjects)(Object.keys(t??{})),d=s?.groups.find(e=>e.group.id===o?.microfrontends?.groupIds[0]||e.group.id===a);if(!d)return null;let u=t?r?.config:d.config,m=t?c||[]:d.projects;return{...d,config:u,projects:m,target:l,applications:t}}({groupId:i,deployment:P,alias:R,deploymentConfig:A,project:M}),{data:N}=(0,j.default)(D?.configDeploymentId),{showingMicrofrontendsHelpModal:_,openMicrofrontendsHelpModal:F,microfrontendsHelpModal:E}=(0,g.useMicrofrontendsHelpModal)(D||{})||{};if(!y||b&&(!P||S)||$&&!M||!D)return null;let{projects:W,config:H,group:O,target:q,applications:B}=D,{defaultProject:z}=(0,v.partitionMicrofrontendsProjects)(W);if(!z)return null;let V=!M;if(V&&!F)return null;let G=`/${y}/${z.name}/settings/microfrontends`,U=!!F&&(!P||!H||"READY"!==P.readyState)&&!r,Y=U?(0,t.jsxs)(o.Text,{color:"gray-900",children:["The"," ",(0,t.jsx)(m.Link,{href:G,type:"primary",children:O.name})," ",(0,t.jsx)(m.Link,{href:`/${y}/~/settings/microfrontends`,children:"microfrontends group"})," ",H?"has invalid configuration":"is missing a configuration file","."]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.Text,{color:"gray-900",children:["This ",P?"deployment":"project"," is part of the"," ",(0,t.jsx)(m.Link,{href:G,type:"primary",children:O.name})," ",(0,t.jsx)(m.Link,{href:`/${y}/~/settings/microfrontends`,children:"microfrontends group"}),"."]})});return{content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[Y,r?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.InformationFillSmall,{}),(0,t.jsx)(o.Text,{color:"gray-900",children:r})]}):null,(0,t.jsx)("div",{className:"flex flex-col items-start gap-2",children:(0,t.jsx)(L,{viewingProject:M,viewingDeployment:P,hideOtherChildren:!!(r||U),applications:B,projects:W,pathParams:h})}),"this deployment"===q?(0,t.jsx)(o.Text,{color:"gray-900",children:"Projects listed are from when this deployment was created."}):null,"this alias"===q?(0,t.jsx)(o.Text,{color:"gray-900",children:"Projects listed are from when this branch was last updated."}):null,U?(0,t.jsxs)(t.Fragment,{children:[H?(0,t.jsxs)(o.Text,{color:"amber-900",children:["The"," ",(0,t.jsx)(o.Text,{className:"inline",monospace:!0,color:"amber-900",children:"microfrontends.json"})," ","file for ",q,N?(0,t.jsxs)(m.Link,{className:"inline-flex items-center gap-1",href:`/${y}/${z.name}/${N.id}`,variant:"underline",children:[(0,t.jsx)(s.DeploymentStatus,{deployment:N}),(0,t.jsx)(o.Text,{as:"span",monospace:!0,children:(0,T.default)(N).hash})]}):""," ","is out of sync with the projects in the group."]}):(0,t.jsxs)(o.Text,{color:"amber-900",children:["A ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"})," file was not uploaded in the production deployment for the default app"," ",N?(0,t.jsxs)(m.Link,{className:"inline-flex items-center gap-1",href:`/${y}/${z.name}/${N.id}`,variant:"underline",children:[(0,t.jsx)(s.DeploymentStatus,{deployment:N}),(0,t.jsx)(o.Text,{as:"span",monospace:!0,children:(0,T.default)(N).hash})]}):"",". A configuration file is required to enable Microfrontends routing."]}),(0,t.jsx)(a.Button,{onClick:F,size:"small",type:"warning",children:"See Details"})]}):null]})}),hasWarning:U,icon:V&&U?(0,t.jsx)(c.Warning,{}):(0,t.jsx)(l.Microfrontends,{}),showingMicrofrontendsHelpModal:_,microfrontendsHelpModal:E}}({pageContext:r,groupId:h,project:$});if(!k)return null;let{content:A,hasWarning:S,icon:I,microfrontendsHelpModal:R,showingMicrofrontendsHelpModal:D}=k,N=(0,t.jsx)("div",{className:"max-w-[274px] p-1",onClick:e=>{e.target instanceof HTMLElement&&e.target.closest("a[href]")&&P(!0)},children:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:A})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.ContextCard.Trigger,{content:N,side:y,hide:D||C,children:(0,t.jsx)("div",{onMouseEnter:()=>P(!1),children:(0,t.jsx)(M,{className:d,hasWarning:!!S,children:I})})}),R]})}function D(e){let{project:r}=e,{project:i,id:o}=(0,n.useParams)()||{},a=o?`dpl_${o}`:void 0,{data:s}=(0,j.default)(a),{data:l}=(0,x.useProject)(void 0===r?i:void 0,{apiVersion:"v10"});return(r||l)?.microfrontends||s?.microfrontends?(0,t.jsx)(R,{...e}):null}},4470704,e=>{"use strict";e.s(["getDeploymentKey",()=>o,"getFinishedState",()=>r,"getUrl",()=>i,"transform",()=>a]);var t=e.i(8042625),n=e.i(4244280);let r=e=>{let t=e?.readyState==="CANCELED",n=e?.readyState==="READY",r=e?.readyState==="ERROR";return t||n||r};function i(e){if(!e)return"";let r=e;return(r=r.replace(/^https?:\/\//,"")).startsWith("dpl_")?`${(0,n.API_DEPLOYMENTS)("v13")}/${r}`:`${(0,n.API_DEPLOYMENTS)("v13")}/get${(0,t.encode)({url:r})}`}function o(e,n,r){let o=i(e);if(o){let e={projectId:r?.projectId,withAutomaticAliases:r?.automaticAliases?1:null},i=o.includes("?url");i||(e.teamId=n,e.withGitRepoInfo=r?.gitRepo?"true":null),o+=(0,t.encode)(e,!i)}return o}function a(e){return e&&(e.host=e.url,e.isPrivate=e.public),e}},6625227,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(9014736),n=e.i(3679047),r=e.i(277234),i=e.i(4470704);function o(e,r,o){let{teamSlug:s}=(0,n.useParams)()??{};return(0,t.default)((0,i.getDeploymentKey)(e,s,o),a,r)}async function a(e){let t=await (0,r.fetchAPI)(e,{throwOnHTTPError:!0});return(0,i.transform)(t)}},3487134,e=>{"use strict";e.s(["Microfrontends",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 5C2.59736 5 2.92634 4.92129 3.22006 4.78073L7.00001 8.56067L10.7799 4.78073C11.0737 4.92129 11.4027 5 11.75 5C12.9927 5 14 3.99264 14 2.75C14 1.50736 12.9927 0.5 11.75 0.5C10.5074 0.5 9.50001 1.50736 9.50001 2.75C9.50001 3.09736 9.57872 3.42634 9.71929 3.72006L7.00001 6.43934L4.28073 3.72006C4.42129 3.42634 4.5 3.09736 4.5 2.75C4.5 1.50736 3.49264 0.5 2.25 0.5C1.00736 0.5 0 1.50736 0 2.75C0 3.99264 1.00736 5 2.25 5ZM3 2.75C3 3.16422 2.66422 3.5 2.25 3.5C1.83579 3.5 1.5 3.16422 1.5 2.75C1.5 2.33579 1.83579 2 2.25 2C2.66422 2 3 2.33579 3 2.75ZM11.75 3.5C12.1642 3.5 12.5 3.16422 12.5 2.75C12.5 2.33579 12.1642 2 11.75 2C11.3358 2 11 2.33579 11 2.75C11 3.16422 11.3358 3.5 11.75 3.5Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 13.5C3.49264 13.5 4.5 12.4927 4.5 11.25C4.5 10.2703 3.8739 9.43691 3 9.12804V6.5H1.5V9.12804C0.626106 9.43691 0 10.2703 0 11.25C0 12.4927 1.00736 13.5 2.25 13.5ZM3 11.25C3 11.6642 2.66422 12 2.25 12C1.83579 12 1.5 11.6642 1.5 11.25C1.5 10.8358 1.83579 10.5 2.25 10.5C2.66422 10.5 3 10.8358 3 11.25Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.75 13.5C12.9927 13.5 14 12.4927 14 11.25C14 10.2703 13.3739 9.43691 12.5 9.12804V6.5H11V9.12804C10.1261 9.43691 9.50001 10.2703 9.50001 11.25C9.50001 12.4927 10.5074 13.5 11.75 13.5ZM12.5 11.25C12.5 11.6642 12.1642 12 11.75 12C11.3358 12 11 11.6642 11 11.25C11 10.8358 11.3358 10.5 11.75 10.5C12.1642 10.5 12.5 10.8358 12.5 11.25Z" fill="currentColor" />',{viewBox:"0 0 14 14",size:14})},1116271,e=>{"use strict";e.s(["useMicrofrontendsConfig",()=>o]);var t=e.i(9014736),n=e.i(8042625),r=e.i(277234),i=e.i(5338940);function o(e){let{deploymentId:o}=e,{isReady:a,team:s}=(0,i.useTeam)();return(0,t.default)(()=>a&&o?`/api/v1/microfrontends/${o}/config${(0,n.encode)({teamId:s?.id})}`:null,async e=>{let t=await (0,r.fetchAPI)(e);return"error"in t?null:t})}},5136192,e=>{"use strict";e.s(["getScopeHref",()=>r]);var t=e.i(7482588),n=e.i(6228447);let r=e=>{let{pathname:t,pathParams:r,searchParams:l,team:c,user:u,project:m}=e,p=c?.slug||u?.username,f=function(e){let{pathname:t,pathParams:n,searchParams:r,team:l,user:c,project:u}=e;if(!t)return"/";if(c&&!l){let e=a();return t.endsWith("/~/domains")?`${e}/domains`:t.endsWith("/~/activity")?`${e}/activity`:t.endsWith("/~/settings")?`${e}/settings`:e}let m=l?.slug,p=l?.slug||c?.username,f=u?.name,h=n?.teamSlug??r.get("teamSlug"),g=n?.project??r.get("project"),j=function(e){let t={};for(let[n,r]of e)t[n]=r;return t}(r),x=t.split("/").filter(Boolean),v=x.filter(e=>!/\[.*\]/.test(e)),y=v[0],$=v[v.length-1],C=v[2],w={pathname:t,page:$,query:j,teamSlug:l?.slug};if(h&&g&&f&&p&&t.includes(g))return t.replace(h,p).replace(g,f);if("/dashboard"===t||"/"===t)return`/${p}`;if("help"===y)return m?`/help?teamSlug=${m}`:"/help/";if("new"===y){if("import"===$)return(delete j["create-team-collapsed"],m)?d({pathname:`/new/${m&&m!==c?.username?`${m}/`:""}import`,query:{...j}}):(delete j.teamSlug,d({pathname:"/new/import",query:{...j}}));if("repo"===$)return m?d({pathname:`/new/${m&&m!==c?.username?`${m}/`:""}import/repo`,query:{...j}}):(delete j.teamSlug,d({pathname:"/new/import/repo",query:{...j}}));if("clone"===$)return(p!==j["create-team-collapsed"]&&delete j["create-team-collapsed"],m)?d({pathname:`/new/${p}/clone`,query:{...j}}):(delete j.teamSlug,d({pathname:"/new/clone",query:{...j}}));else if("third-party"===$)return d({pathname:`/new/${p}/git/third-party`});else if(x.includes("templates")){let e=[...x];return e.splice(1,+!!(h&&t.includes(h)),p||""),d({pathname:`/${e.join("/")}`})}return d({pathname:`/new/${p}`})}if(x.includes("account"))return m?s(w):a();if(x.includes("settings"))return m?m!==h&&!f&&g?`/${m}`:s(w,!0):a();if("dashboard"===y||t.includes("/~"))return p&&"integrations"===C?`/${p}/~/integrations`:p&&"domains"===$?`/${p}/~/domains`:p&&h&&t.startsWith(`/${h}/~/repos`)?`/${p}`:p&&h&&t.startsWith(`/${h}/~/ai`)?`/${p}/~/ai`:h&&t.startsWith(`/${h}/~/stores`)||t.startsWith("/dashboard/stores")?m?`/${m}/~/stores`:"/dashboard/stores":t.endsWith("/domains/[domain]")||j.domain||h&&t.startsWith(`/${h}/~/domains`)||t.startsWith("/dashboard/domains")?m?`/${m}/~/domains`:"/dashboard/domains":t.endsWith("/monitoring/[chart]")||j.chart||h&&t.startsWith(`/${h}/~/monitoring`)||t.startsWith("/dashboard/monitoring")?m?`/${m}/~/monitoring`:"/dashboard/monitoring":h&&t.startsWith(`/${h}/~/support/cases`)?m?`/${m}/~/support/cases`:"/dashboard/support/cases":h&&p&&t.includes(`/${h}`)?t.replace(`/${h}`,`/${p}`):t.replace($,p?`${p}/${$}`:$);if(h&&t.startsWith(`/${h}/~/support/cases`)||t.startsWith("/support/cases")){let e=t.split("/support/cases")[1]||"";return(e.startsWith("/[case-id]")&&(e=""),l)?`/${l.slug}/~/support/cases${e}`:`/support/cases${e}`}return h&&g&&t.startsWith(`/${h}/${g}`)?`/${p}`:"domains"===$?m?o(w):i(w):`/${p}`}({pathname:t,pathParams:r,searchParams:l,team:c,user:u,project:m});if((0,n.isAuthenticationRequired)(c)){let e=(0,n.getTeamLimitedBy)(c);return 1===e.length&&e.includes("mfa")?d({pathname:"/two-factor-required",query:{teamSlug:c?.slug}}):d({pathname:`/login/scope/${p}`,query:{missingScope:"1",next:f}})}return f},i=e=>{let{query:t}=e;return d({pathname:"/domains",query:{...t,teamSlug:void 0}})},o=e=>{let{query:t,teamSlug:n}=e;return d({pathname:"/domains",query:{...t,teamSlug:n}})},a=()=>"/account",s=(e,t)=>{let{pathname:n,page:r,teamSlug:i}=e,o=function(e){let{pathname:t,page:n,fromSettings:r}=e;return r&&n&&"settings"!==n?l.exec(t)?"/invoices":c.exec(t)?"/secure-compute":t.endsWith("/microfrontends/new")?"/microfrontends/new":`/${n}`:""}({pathname:n,page:r,fromSettings:t});return`/${String(i)}/~/settings${o}`},l=/\/settings\/invoices\//,c=/\/settings\/secure-compute\//;function d(e){return(0,t.format)(e)}},3162826,e=>{"use strict";e.s(["CornerDownRight",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3V2.25H1V3V9.25C1 10.2165 1.7835 11 2.75 11H12.4393L10.4697 12.9697L9.93934 13.5L11 14.5607L11.5303 14.0303L14.7803 10.7803C15.0732 10.4874 15.0732 10.0126 14.7803 9.71967L11.5303 6.46967L11 5.93934L9.93934 7L10.4697 7.53033L12.4393 9.5H2.75C2.61193 9.5 2.5 9.38807 2.5 9.25V3Z" fill="currentColor"/>')},4896636,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(9014736),n=e.i(8042625),r=e.i(277234),i=e.i(4244280),o=e.i(5338940);let a=(e,a)=>{let{domain:s,filterDeleted:l=!0}=e,{isReady:c,team:d}=(0,o.useTeam)();return(0,t.default)(()=>s&&c?`${i.API_ALIASES}/${encodeURIComponent(s)}${(0,n.encode)({filterDeleted:l,teamId:d?.id})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),a)}},7643270,e=>{"use strict";e.s(["getSuggestedMicrofrontendsConfig",()=>o,"partitionConfigReferencedProjects",()=>n,"partitionMicrofrontendsProjects",()=>t,"postprocessConfig",()=>i,"validateMicrofrontendsGroupName",()=>r]);let t=(e,t)=>{let n=e.find(e=>e.microfrontends?.isDefaultApp),{viewingProjectName:r,applications:i}=t||{},o=e.filter(e=>e.id!==n?.id).sort((e,t)=>e.name.localeCompare(t.name)),a=n?[n,...o.sort((e,t)=>{if(e.name===r)return -1;if(t.name===r)return 1;let n=i?.[e.id]?.deploymentId,o=i?.[t.id]?.deploymentId;return n&&!o?-1:!n&&o?1:e.name.localeCompare(t.name)})]:[];return{defaultProject:n,otherProjects:o,sortedProjects:a}},n=(e,t)=>{let n=(e=>e&&"applications"in e?Object.entries(e.applications):[])(e);return{missingReferences:t.filter(e=>!n.some(t=>{let[n]=t;return n===e.name})),extraReferences:n.filter(e=>{let[n]=e;return!t.some(e=>e.name===n)}).map(e=>{let[t]=e;return{name:t}})}};function r(e){return e?e.length>48?"Group name must be less than 48 characters":null:"Group name is required"}let i=e=>e.replaceAll('"paths": []','"paths": [/* add paths here */]');function o(e,t,n){return i(JSON.stringify({$schema:"https://openapi.vercel.sh/microfrontends.json",applications:{[e.name]:{development:{fallback:n??"...loading.vercel.app"}},...t.reduce((e,t)=>(e[t.name]={routing:[{paths:[]}]},e),{})}},null,2))}},8822420,3305800,e=>{"use strict";e.s(["IconInCircleWrapper",()=>o,"MicrofrontendsIconInCircle",()=>i],8822420);var t=e.i(751170),n=e.i(3487134),r=e.i(9722978);function i(e){let{className:r,size:i=28,color:a}=e;return(0,t.jsx)(o,{className:r,size:i,children:(0,t.jsx)(n.Microfrontends,{color:a})})}function o(e){let{className:n,size:i=28,children:o}=e;return(0,t.jsx)("div",{className:(0,r.clsx)(`flex h-[${i}px] min-w-[${i}px] items-center justify-center rounded-full text-center`,n),children:o})}e.s(["useMicrofrontendsHelpModal",()=>y],3305800);var a=e.i(4099374),s=e.i(9508212),l=e.i(6891161),c=e.i(5838627),d=e.i(1344973),u=e.i(57106),m=e.i(9668517),p=e.i(8518548),f=e.i(7643270),h=e.i(6060673),g=e.i(1438473);function j(e){let{config:n,extraReferences:r,missingReferences:i,onClose:o,projects:a,group:s}=e;return(0,t.jsxs)(l.Modal.Modal,{active:!0,onClickOutside:o,width:720,children:[(0,t.jsx)(l.Modal.Body,{children:(0,t.jsx)(v,{config:n,extraReferences:r,missingReferences:i,projects:a,group:s})}),(0,t.jsx)(l.Modal.Actions,{className:"justify-end",children:(0,t.jsx)(l.Modal.Action,{onClick:o,children:"Done"})})]})}function x(e){let{reference:n,teamSlug:r}=e,{data:i}=(0,h.useProject)(n.name);return(0,t.jsxs)(d.Text,{color:"gray-900",children:[(0,t.jsx)("pre",{className:"inline",children:n.name})," ",i?(0,t.jsxs)(t.Fragment,{children:["-"," ",(0,t.jsxs)(u.Link,{href:`/${r}/${i.name}/settings/microfrontends`,variant:"underline",children:["add project to group ",(0,t.jsx)(g.ArrowRight,{size:12})]})]}):null]},`missing-references-${n.name}`)}function v(e){let{config:n,extraReferences:r,missingReferences:i,group:o,projects:a}=e,h=(0,m.useTeamSlug)(),{defaultProject:g,otherProjects:j}=(0,f.partitionMicrofrontendsProjects)(a),{domain:v}=(0,p.useBestProductionDomain)(g?.id);if(!g||!h)return null;let y=g.rootDirectory?`${g.rootDirectory}/microfrontends.json`:"microfrontends.json";if(!n){let e=(0,f.getSuggestedMicrofrontendsConfig)(g,j,v?.name);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Modal.Header,{children:(0,t.jsx)(l.Modal.Title,{children:"Create Your Config"})}),(0,t.jsxs)(s.Stack,{direction:"column",gap:4,children:[(0,t.jsxs)(d.Text,{children:["The latest production deployment for"," ",(0,t.jsx)(u.Link,{href:`/${h}/${g.name}`,variant:"underline",children:g.name})," ","does not yet have a"," ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"})," configuration file. Until a config file is added, deployments will work like any regular project, not as part of a Microfrontends group. If the file already exists, redeploy the project to upload it."]}),(0,t.jsxs)(d.Text,{children:["Add your ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"})," ","configuration file to the root of your default project",g.rootDirectory?(0,t.jsxs)(t.Fragment,{children:[" ","(",(0,t.jsx)("pre",{className:"inline",children:y}),")"," "]}):"",". See the"," ",(0,t.jsx)(u.Link,{href:"/docs/microfrontends/quickstart#define-microfrontends.json",external:!0,tab:!0,variant:"highlight",children:"docs"})," ","for details on how to define your routes."]}),(0,t.jsx)(c.CodeBlock,{filename:y,language:"json",className:"m-0",children:e})]})]})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Modal.Header,{children:(0,t.jsx)(l.Modal.Title,{children:"Update Your Config"})}),(0,t.jsxs)(s.Stack,{direction:"column",gap:4,children:[i.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Text,{color:"gray-900",lineHeight:24,children:["The latest production deployment for"," ",(0,t.jsxs)(d.Text,{color:"gray-1000",as:"span",children:[(0,t.jsx)(u.Link,{href:`/${h}/${g.name}`,variant:"underline",children:g.name})," "]})," ","does not include configuration for all projects in the microfrontends group"," ",(0,t.jsx)(d.Text,{color:"gray-1000",as:"span",children:(0,t.jsx)(u.Link,{href:`/${h}/${g.name}/settings/microfrontends`,variant:"underline",children:o.name})}),". Add the missing application",i.length>1?"s":""," to your"," ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"}),", or remove the project",i.length>1?"s":""," from the group:"]}),(0,t.jsx)(c.CodeBlock,{language:"json",hideLineNumbers:!0,className:"m-0",children:(0,f.postprocessConfig)(JSON.stringify({applications:i.map(e=>({[e.name]:"microfrontends"in e&&{routing:[{paths:[]}]}}))},null,2))})]}):null,r.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Text,{color:"gray-900",lineHeight:24,children:[r.length>1?"Applications definitions ":"An application definition ",r.length>1?"were":"was"," found in your"," ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"})," that"," ",r.length>1?"are":"is"," not a project in the microfrontends group"," ",(0,t.jsx)(d.Text,{color:"gray-1000",as:"span",children:(0,t.jsx)(u.Link,{href:`/${h}/${g.name}/settings/microfrontends`,variant:"underline",children:o.name})}),":"]}),(0,t.jsx)(s.Stack,{className:"border-0 border-l-2 border-solid border-gray-400 pl-4",gap:4,children:r.map(e=>(0,t.jsx)(x,{reference:e,teamSlug:h},`extra-reference-${e.name}`))}),(0,t.jsxs)(d.Text,{color:"gray-900",children:["Note: application names in the"," ",(0,t.jsx)("pre",{className:"inline",children:"microfrontends.json"})," must match the Vercel project name."]})]}):null]})]})}function y(){let{config:e,projects:n,group:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i,o]=(0,a.useState)(!1),s=(0,a.useCallback)(()=>{o(!1)},[o]),l=(0,a.useCallback)(()=>{o(!0)},[o]);if(!n||!r)return null;let{missingReferences:c,extraReferences:d}=(0,f.partitionConfigReferencedProjects)(e,n);if(0===c.length&&0===d.length)return null;let{defaultProject:u}=(0,f.partitionMicrofrontendsProjects)(n);return u?{showingMicrofrontendsHelpModal:i,openMicrofrontendsHelpModal:l,microfrontendsHelpModal:(0,t.jsx)(t.Fragment,{children:i?(0,t.jsx)(j,{config:e,extraReferences:d,missingReferences:c,onClose:s,projects:n,group:r}):null})}:null}},681099,e=>{"use strict";e.s(["useMicrofrontendsGroupProjects",()=>o]);var t=e.i(9014736),n=e.i(8042625),r=e.i(277234),i=e.i(5338940);function o(e){let{isReady:o,team:a}=(0,i.useTeam)();return(0,t.default)(()=>e&&o?`/api/v1/microfrontends/groups/${e}/projects${(0,n.encode)({teamId:a?.id})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{fallbackData:{projects:[]}})}},9148191,e=>{"use strict";e.s(["useMicrofrontendsProjectInfo",()=>s]);var t=e.i(4099374),n=e.i(3679047),r=e.i(5338940),i=e.i(6161994),o=e.i(681099),a=e.i(6060673);function s(){let e=(0,n.useParams)(),{data:s}=(0,a.useProject)(e?.project,{apiVersion:"v13"}),l=s?.microfrontends?.groupIds[0],{isReady:c,team:d}=(0,r.useTeam)(),{data:u,isLoading:m}=(0,i.useMicrofrontendsGroups)(),{data:p,isLoading:f}=(0,o.useMicrofrontendsGroupProjects)(l),h=p?.projects.find(e=>e.microfrontends?.isDefaultApp),g=s?.microfrontends!==void 0&&!s.microfrontends.isDefaultApp;return(0,t.useMemo)(()=>({defaultProjectName:h?.name,defaultProjectBaseUrl:h?`/${d?.slug}/${h.name}`:null,groupName:u?.groups.find(e=>e.group.id===l)?.group.name??h?.name,isChildMicrofrontend:g,isLoading:!c||!d||f||m,isMicrofrontend:(s?.microfrontends?.groupIds?.length??0)>0}),[h,l,g,m,f,c,s?.microfrontends?.groupIds?.length,d,u])}},3219719,(e,t,n)=>{var r=e.r(263217),i=e.r(660575),o=e.r(5729582),a=e.r(7791606),s=e.r(2728359);t.exports=function(e,t,n,l){if(!a(e))return e;t=i(t,e);for(var c=-1,d=t.length,u=d-1,m=e;null!=m&&++c<d;){var p=s(t[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(c!=u){var h=m[p];void 0===(f=l?l(h,p,m):void 0)&&(f=a(h)?h:o(t[c+1])?[]:{})}r(m,p,f),m=m[p]}return e}},5120311,(e,t,n)=>{var r=e.r(716543);t.exports=function(e){return r(e,5)}},7829532,(e,t,n)=>{var r=e.r(3219719);t.exports=function(e,t,n){return null==e?e:r(e,t,n)}},594750,421794,e=>{"use strict";e.s(["formatPatchRule",()=>M,"useFirewallConfig",()=>w],594750);var t=e.i(4099374),n=e.i(455575),r=e.i(9014736),i=e.i(6597743),o=e.i(5120311),a=e.i(7829532),s=e.i(2793676),l=e.i(3679047),c=e.i(8042625),d=e.i(277234),u=e.i(4244280),m=e.i(5338940);e.s(["RULES_TO_NAMES",()=>p,"botProtectionFromConfig",()=>v,"botProtectionFromRulesets",()=>y,"createActionConfig",()=>g,"crsRuleToConfig",()=>f,"getRulesetFromRulesets",()=>$,"isBotProtectionData",()=>x,"isBotProtectionManagedRuleset",()=>j],421794);let p={gen:{name:"Generic Attack",description:"Provide broad protection from various undefined or novel attack vectors."},java:{name:"Java Attack",description:"Mitigate risks of exploitation targeting Java-based applications or components."},lfi:{name:"Local File Inclusion Attack",description:"Prevent unauthorized access to local files through web applications."},ma:{name:"Multipart Attack",description:"Block attempts to bypass security controls using multipart/form-data encoding."},php:{name:"PHP Attack",description:"Safeguard against vulnerability exploits in PHP-based applications."},rce:{name:"Remote Execution Attack",description:"Prevent unauthorized execution of remote scripts or commands."},rfi:{name:"Remote File Inclusion Attack",description:"Prohibit unauthorized upload or execution of remote files."},sd:{name:"Scanner Detection",description:"Detect and prevent reconnaissance activities from network scanning tools."},sf:{name:"Session Fixation Attack",description:"Prevent unauthorized takeover of user sessions by enforcing unique session IDs."},sqli:{name:"SQL Injection Attack",description:"Prohibit unauthorized use of SQL commands to manipulate databases."},xss:{name:"XSS Attack",description:"Prevent injection of malicious scripts into trusted webpages."}};function f(e){return p[e]}function h(e){return e.endsWith("update")?"modified":e.endsWith("insert")?"created":e.endsWith("remove")?"deleted":e.endsWith("priority")?"reordered":"firewallEnabled"===e?"changed":""}function g(e,t,n){let r=n?"You":e.username,{id:i,action:o}=e;return"crs.update"===e.action?{id:i||"",principal:r,rule:i?t.owasp.ruleGroups?.[i].name??i:"",actionTaken:h(o)}:"ip.insert"===e.action||"ip.remove"===e.action?{id:i||"",principal:r,rule:(e.action,"IP Blocking Rule"),actionTaken:h(o)}:"rules.insert"===e.action||"rules.update"===e.action?{id:i||"",principal:r,rule:e.value.name,actionTaken:h(o)}:"rules.remove"===e.action?{id:i||"",principal:r,rule:"a Custom Rule",actionTaken:h(o)}:"rules.priority"===e.action?{id:i||"",principal:r,rule:"Rule",actionTaken:h(o)}:"managedRules.update"===e.action?{id:i||"",principal:r,rule:(()=>{if(!i)return"";let e=$(t,i);return e?e.name:i})(),actionTaken:e.value.active?"enabled":"disabled"}:"botId.toggle"===e.action?{id:i||"",principal:r,rule:"BotID Deep Analysis",actionTaken:e.value?"enabled":"disabled"}:{principal:r,id:i||"",rule:"Firewall",actionTaken:h(o)}}function j(e){return"bot_filter"===e||"bot_protection"===e}function x(e){return"managed_bot_filter"===e||"managed_bot_protection"===e}function v(e){let t=e?.managedRules;return t?.bot_filter??t?.bot_protection}function y(e){return e.bot_filter??e.bot_protection}function $(e,t){return"bot_filter"===t?e.bot_filter??e.bot_protection:"bot_protection"===t?e.bot_protection??e.bot_filter:e[t]}async function C(e){let[t]=e;return(await (0,d.fetchAPI)(t,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}function w(e){let{projectId:o,ruleId:a}=e,{team:s}=(0,m.useTeam)(),d=(0,l.useRouter)(),p=(0,c.encode)({teamId:s?.id,projectId:o}),{data:f,mutate:h,isLoading:g}=(0,r.default)(s&&o?[`${u.API_FIREWALL}/firewall/config${p}`,p]:null,async e=>C(e)),j=(0,n.useToasts)(),x=(0,t.useMemo)(()=>T(f?{...f,draft:null}:void 0),[f]),v=(0,t.useMemo)(()=>T(f),[f]),{trigger:y,isMutating:$}=(0,i.default)(`${u.API_FIREWALL}/firewall/config/draft${p}`,b),{trigger:w,isMutating:M}=(0,i.default)([`${u.API_FIREWALL}/firewall/config/`,`/activate${p}`],P),{trigger:A,isMutating:S}=(0,i.default)(`${u.API_FIREWALL}/firewall/config/draft${p}`,k),L=(0,t.useCallback)(async e=>{try{let t=await b(`${u.API_FIREWALL}/firewall/config/draft${p}`,{arg:e});h({...f||{active:null,versions:[t]},draft:t},{revalidate:!1}).then(()=>null,()=>null)}catch(e){throw j.error(e.message||"Failed to update Firewall. Please try again."),e}},[p,j,f,h]),I=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;try{let r=await y(e);await h({...f||{active:null,versions:[r]},draft:r},{revalidate:!1}),t&&(n?.(),h().then(()=>null,()=>null))}catch(e){throw j.error(e.message||"Failed to update Firewall. Please try again."),e}},[h,y,j,f]),R=(0,t.useCallback)(async()=>{try{await A(),await h()}catch(e){throw j.error(e.message||"Failed to discard Firewall changes. Please try again."),e}},[h,A,j]),D=(0,t.useCallback)(async(e,t)=>{try{await w(t);let n=e?.toastSuccessMessage??"Your Firewall changes have been applied successfully";j.success(n),d.refresh(),await h().catch(()=>null)}catch(t){throw j.error(e?.toastErrorMessage||t.message||"Failed to publish Firewall changes. Please try again."),t}},[w,h,j,d]),N=(0,t.useCallback)(()=>{h().then(()=>null,()=>null)},[h]),_=(0,t.useMemo)(()=>{if(!a||!v)return;let e=v.rules.find(e=>e.id===a);if(e)return e.value},[a,v]),F=(0,t.useMemo)(()=>!v||!v.rules.some(e=>e.isRateLimit),[v]);return{activeConfig:x,config:v,showRateLimitModal:F,selectedRule:_,updateConfig:I,reorderItem:L,discardChanges:R,publishChanges:D,isPublishing:M,isDiscarding:S,isUpdatingConfig:$,isLoadingConfig:g&&!f,refresh:N}}async function b(e,t){let{arg:n}=t;return(await (0,d.fetchAPI)(e,{method:"PATCH",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(n)})).body}async function P(e,t){let[n,r]=e,{arg:i="draft"}=t;return await (0,d.fetchAPI)(`${n}${i}${r}`,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify({})})}async function k(e){return await (0,d.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0})}function T(e){if(!e)return;let t=e.draft||e.active||null;if(!t)return t;let n=new Map,r=Object.keys(t.crs).map(e=>{let{name:r,description:i}=p[e],o={id:e,action:t.crs[e].action,active:t.crs[e].active,name:r,description:i};return n.set(o.id,{...o,type:"owas"}),o}).sort((e,t)=>e.name.localeCompare(t.name)),i=t.rules.map(e=>{let t={id:e.id,description:e.description,name:e.name,action:e.action?.mitigate?.action==="rate_limit"?e.action.mitigate.rateLimit?.action||"log":e.action?.mitigate?.action||"log",active:e.active,value:e,isRateLimit:e.action?.mitigate?.action==="rate_limit"};return n.set(t.id,{...t,type:"custom_rule"}),t});t.ips.forEach(e=>{n.set(e.id,{...e,type:"ip_block"})});let o=t.changes.sort((e,t)=>t.createdAt.localeCompare(e.createdAt));return{currentConfig:t,crsRules:r,rules:i,changes:o,ruleMap:n}}function M(e,t){if(Object.hasOwn(e,"value")){let n=(0,o.default)(e);return n=(0,s.default)(n,"value.id"),"action"===t.type?n.isRateLimit?(0,a.default)(n,"value.action.mitigate.rateLimit.action",t.value):(0,a.default)(n,"value.action.mitigate.action",t.value):(0,a.default)(n,"value.active",t.value),{id:e.id,action:"rules.update",value:n.value}}let n="action"===t.type?{action:t.value,active:e.active}:{action:"disable"===e.action?"log":e.action,active:t.value};return{id:e.id,action:"crs.update",value:n}}}]);

//# sourceMappingURL=35775d30a561c8fa.js.map
//# debugId=1c3e8296-2803-5720-9e94-c105fb9ee9d4
