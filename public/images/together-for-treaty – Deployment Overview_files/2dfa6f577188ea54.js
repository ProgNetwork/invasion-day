
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b1ef7030-24b2-54ab-b6c8-3b269ddfe42b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4496450,e=>{"use strict";function i(e){return!t(e?.billing?.planIteration)}function t(e){return!e||"legacy"===e}e.s(["isLegacyPlanIteration",()=>t,"isOnUnbundledPricingPlan",()=>i])},1438473,e=>{"use strict";e.s(["ArrowRight",()=>i]);let i=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.53033 2.21968L9 1.68935L7.93934 2.75001L8.46967 3.28034L12.4393 7.25001H1.75H1V8.75001H1.75H12.4393L8.46967 12.7197L7.93934 13.25L9 14.3107L9.53033 13.7803L14.6036 8.70711C14.9941 8.31659 14.9941 7.68342 14.6036 7.2929L9.53033 2.21968Z" fill="currentColor"/>')},9358876,e=>{"use strict";e.s(["pluralize",()=>i]);let i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=1!==i?`${e}s`:e;return t&&(s=`${i} ${s}`),s}},9979783,e=>{"use strict";e.s(["typedFetch",()=>s,"typedFetchData",()=>l]);var i=e.i(3019334),t=e.i(9171423);async function s(e,s,l,r,a){let n="get"===s?void 0:r,o="get"===s?r:a,c=(0,i.buildUrlFromPathExpression)(e,l),d=await (0,t.fetchApi)(c,{...o,returnStatus:!0,returnHeaders:!0,route:e,method:s.toUpperCase(),params:l,body:n}),u=d.body;if("string"==typeof u)throw Error("Response body is string");return{body:u,status:d.status,headers:d.headers}}async function l(e,s,l,r,a){let n="get"===s?void 0:r,o="get"===s?r:a,c=(0,i.buildUrlFromPathExpression)(e,l),d=await (0,t.fetchApi)(c,{...o,throwOnHTTPError:!0,route:e,method:s.toUpperCase(),params:l,body:n});if("string"==typeof d)throw Error("Response body is string");return d}},5202960,6880199,e=>{"use strict";e.s([],5202960),e.s(["patchObservabilityConfiguration",()=>r],6880199);var i=e.i(9979783),t=e.i(4244280),s=e.i(7151748),l=e.i(3870297);async function r(e){let{team:r,source:a,enableTeam:n}=e,o=(await (0,i.typedFetchData)(t.API_OBSERVABILITY_CONFIGURATION,"patch",{teamId:r.id},{teamEnabled:n})).teamEnabled===n;return o&&s.analytics.track(n?l.AnalyticsEvent.OBSERVABILITY_PLUS_ENABLED:l.AnalyticsEvent.OBSERVABILITY_PLUS_DISABLED,{teamId:r.id,plan:r.billing?.plan,source:a}),o}},7114658,e=>{"use strict";e.s(["useObservabilityPlusForProjects",()=>u,"useObservabilityPlusForProjectsFlag",()=>g],7114658);var i=e.i(9979783),t=e.i(4244280),s=e.i(7151748),l=e.i(3870297),r=e.i(4597921),a=e.i(9668517),n=e.i(28552);e.i(3182268);var o=e.i(7849855),c=e.i(455575),d=e.i(1942008);function u(){let{data:e,mutate:i,isLoading:t,isValidating:s}=(0,n.useObservabilityConfiguration)(),l=(0,a.useTeamSlug)(),{projectSlug:r}=(0,o.useProjectSlug)();return{isObservabilityPlusForProjectsFlagEnabled:g(),toggleObservabilityPlusForProject:async t=>{let{projectName:s,disabled:r}=t;if(l)try{let t=await h({teamIdOrSlug:l,projectIdOrName:s,disabled:r});if(c.toasts.success(`Observability Plus ${r?"excluded":"included"} on ${s}`),!e)return;let a=t.disabledAt?[...e.observabilityPlus.excludedProjects||[],{...t,name:s}]:e.observabilityPlus.excludedProjects?.filter(e=>e.id!==t.id);await i({observabilityPlus:{...e.observabilityPlus,excludedProjects:a}})}catch(e){c.toasts.error("An error occurred while updating the project status."),await i()}},excludedProjects:e?e.observabilityPlus.excludedProjects??[]:void 0,isCurrentProjectExcluded:!(0,d.hasObservabilityPlusOnProject)(e?.observabilityPlus,r),isValidating:s,isLoading:t,hasObservabilityPlus:e?.observabilityPlus.enabled??!1}}function g(){return(0,r.useServerFlag)("enable-observability-plus-for-projects",!1)}async function h(e){let{teamIdOrSlug:r,projectIdOrName:a,disabled:n}=e,o=await (0,i.typedFetchData)(t.API_OBSERVABILITY_CONFIGURATION_FOR_PROJECT,"put",{teamId:r,projectIdOrName:a},{disabled:n},{throwOnHTTPError:!0});return s.analytics.track(n?l.AnalyticsEvent.OBSERVABILITY_PLUS_PROJECT_DISABLED:l.AnalyticsEvent.OBSERVABILITY_PLUS_PROJECT_ENABLED,{projectIdOrName:a,teamIdOrSlug:r}),o}},5568858,1509029,379786,e=>{"use strict";e.s(["useToggleObservabilityPlus",()=>A],5568858);var i=e.i(751170);e.s(["ProjectListWithUsageEvents",()=>f,"useIncludedAndExcludedProjectWithUsageEvents",()=>j],379786),e.i(1477032);var t=e.i(1942008),s=e.i(7432042),l=e.i(8053957),r=e.i(5338940),a=e.i(1233856);e.s(["FreeHobbyRetention",()=>d,"FreeProEntRetention",()=>c,"MeteredEvents",()=>n,"PlusRetention",()=>o],1509029);let n=["incomingRequest","outgoingRequest","serverlessFunctionInvocation","edgeFunctionInvocation","edgeMiddlewareInvocation"],o=(0,s.default)("32d"),c=(0,s.default)("4d"),d=(0,s.default)("14h");var u=e.i(9667097);async function g(e){let{teamId:i}=e,t=(0,a.startOfDuration)(new Date,{days:1}),l=new Date(t.getTime()-(0,s.default)("7d")),r=await Promise.all(n.map(async e=>{let s=await (0,u.getSonarData)({scope:{type:"owner",ownerId:i},reason:"observability_usage_estimate",event:e,rollups:{count:{measure:"count",aggregation:"sum"}},granularity:{days:1},startTime:l,endTime:t,groupBy:["projectId"],limit:5});return{event:e,data:s}})),o=new Map,c={totalEvents:0,eventBreakdown:{}};for(let{event:e,data:i}of r)for(let t of i.summary){let i=o.get(t.projectId)??0,s=Math.round((t.count??0)*4.25);o.set(t.projectId,i+s),c.totalEvents+=s,c.eventBreakdown[e]=(c.eventBreakdown[e]??0)+s}let d=r.flatMap(e=>{let{event:i,data:t}=e;return t.data.map(e=>{let{timestamp:t,count:s}=e;return{event:i,timestamp:t,value:4.25*Number(s)}})});return{eventBreakdown:c.eventBreakdown,totalEvents:Math.round(c.totalEvents),timeseries:d,eventsByProject:Array.from(o.entries()).map(e=>{let[i,t]=e;return{projectId:i,events:t}}).sort((e,i)=>i.events-e.events)}}var h=e.i(7114658),b=e.i(9736132),m=e.i(6060673),x=e.i(3869281),p=e.i(5255926),y=e.i(1344973),v=e.i(4099374);function j(){let{excludedProjects:e}=(0,h.useObservabilityPlusForProjects)(),{data:i}=function(){let{team:e}=(0,r.useTeam)();return(0,l.default)(e?.id,()=>e?g({teamId:e.id}):null)}(),{data:s}=(0,m.useProjects)(i&&e?Array.from(new Set([...e.map(e=>{let{id:i}=e;return i}),...i.eventsByProject.map(e=>{let{projectId:i}=e;return i}).slice(0,6)])):void 0,{config:{keepPreviousData:!0}}),a=i?.eventsByProject?i.eventsByProject.reduce((i,s)=>{var l;let{projectId:r,events:a}=s;return void 0!==(l=(0,t.hasObservabilityPlusOnProject)({excludedProjects:e},r)?i+a:i)?+l:void 0},0):void 0;return{totalEvents:a,excludedProjects:s?.filter(i=>!(0,t.hasObservabilityPlusOnProject)({excludedProjects:e},i.id)),includedProjects:s?.filter(i=>(0,t.hasObservabilityPlusOnProject)({excludedProjects:e},i.id)),observabilityUsage:i,totalExcludedProjects:e?.length??0}}function f(e){let{observabilityUsage:t,excludedProjects:s,includedProjects:l,canConfigure:r}=e,[a,n]=(0,v.useTransition)(),{toggleObservabilityPlusForProject:o}=(0,h.useObservabilityPlusForProjects)();return(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(P,{leftColumnTitle:"Top 5 Projects *",rightColumnTitle:"~ Events in the last 30 days",children:l&&t?l.map(e=>{let s=t.eventsByProject.find(i=>i.projectId===e.id);return(0,i.jsx)(w,{disabled:a||!r,project:e,isIncluded:!0,onStatusChanged:()=>{n(async()=>{await o({projectName:e.name,disabled:!0})})},description:s?.events.toLocaleString()},e.id)}):(0,i.jsx)(i.Fragment,{children:Array.from(Array(s?.length??3).keys()).map(e=>(0,i.jsx)(w,{},e))})}),(0,i.jsx)(y.Text,{color:"gray-700",children:"* Other projects can be excluded in their Observability page"})]}),(0,i.jsx)(P,{leftColumnTitle:"Excluded Projects",children:s?.map(e=>(0,i.jsx)(w,{disabled:a||!r,project:e,isIncluded:!1,onStatusChanged:()=>{n(async()=>{await o({projectName:e.name,disabled:!1})})},description:"Excluded"},e.id))})]})}function P(e){let{children:t,leftColumnTitle:s,rightColumnTitle:l}=e;return(0,i.jsxs)("div",{className:" flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-1",children:[(0,i.jsx)(y.Text,{color:"gray-1000",size:14,weight:500,children:s}),l?(0,i.jsx)(y.Text,{align:"right",color:"gray-1000",size:14,weight:500,children:l}):null]}),(0,i.jsx)("div",{className:"divide-1 divide-solid divide-x-0 divide-y",children:t})]})}function w(e){let{project:t,onStatusChanged:s,isIncluded:l,description:r,disabled:a}=e;return(0,i.jsx)("div",{className:"col-span-2 border-[var(--ds-gray-200)] tabular-nums",children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 py-2",children:[(0,i.jsxs)("div",{className:"flex cursor-pointer items-center justify-center gap-2",onClick:s,children:[(0,i.jsx)(x.Checkbox,{checked:l,disabled:a,onChange:s}),t?(0,i.jsx)(b.FrameworkAvatar,{isDisabled:!l,size:20,project:t}):(0,i.jsx)(b.FrameworkAvatarSkeleton,{size:20}),t?(0,i.jsx)(y.Text,{color:l?"gray-900":"gray-700",size:14,children:t.name}):(0,i.jsx)(p.Skeleton,{width:50,height:20})]}),t?(0,i.jsx)(y.Text,{color:l?"gray-900":"gray-700",align:"right",size:14,children:r}):(0,i.jsx)(p.Skeleton,{width:50,height:20})]})})}let O={surveyName:"Disable Observability Plus User Feedback",surveySlug:"disable-observability-plus-user-feedback",surveySteps:[{title:"Observability Plus has been disabled",description:"Help us improve by sharing your feedback.",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling Observability Plus?",selectMultiple:!0,options:[{id:"missing-features",label:"Missing features",reveals:{id:"what-were-you-missing",label:"What were you missing?"}},{id:"too-expensive",label:"Too expensive",reveals:{id:"missing-controls",label:"What controls are missing?"}},{id:"prefer-another-product",label:"I prefer another product",reveals:{id:"preferred-product",label:"Which product do you prefer?"}},{id:"not-working-as-expected",label:"It is not working as expected",reveals:{id:"what-was-not-working",label:"What was not working?"}},{id:"just-looking-around",label:"I was just looking around"},{id:"other",label:"Other",reveals:{id:"other-reason",label:"Additional comments"}}]}]}]};var N=e.i(2126130);e.i(5202960);var k=e.i(6880199),T=e.i(7917902),E=e.i(1717203),C=e.i(7557283),I=e.i(364898),S=e.i(4496450);function F(){let e=j(),{can:t,isLoading:s}=(0,E.default)(),l=!s&&t(C.Action.Update,C.Resource.ObservabilityConfiguration);return(0,i.jsx)(f,{...e,canConfigure:l})}let A=e=>{let t,{team:s}=(0,T.useAccount)(),{hasOnlyMonitoring:l,hasObservabilityPlusAccess:r,mutate:a}=(0,N.useHasObservabilityPlus)(),{excludedProjects:n,isObservabilityPlusForProjectsFlagEnabled:o}=(0,h.useObservabilityPlusForProjects)(),c={...function(e){let{hasOnlyMonitoring:t,team:s,source:l,refresh:r,skipPostConfirm:a}=e,n=(0,i.jsxs)(i.Fragment,{children:["By disabling Observability Plus, you will immediately lose access to all advanced metrics. Only included metrics with limited retention window will be accessible.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{})]}),o={name:"observabilityBase",price:1e3,enable:async()=>{s&&(await (0,k.patchObservabilityConfiguration)({team:s,enableTeam:!0,source:l}),await r())},enableSteps:{confirm:{lineItems:[...t?[{name:"Monitoring with 250K data points",price:1e3,removal:!0}]:[],{name:"Observability Plus with 1M events",price:"from_invoice_item"},{name:"On-demand events",price:120,priceDescriptor:"per 1M events"}],nonProratedCustomCopy:(0,i.jsxs)(i.Fragment,{children:[" ","and your credit card will be charged ",(0,i.jsx)("b",{children:"immediately"}),"."]}),customCopy:(0,i.jsxs)(i.Fragment,{children:[" ","Charges for on-demand events will be billed to your credit card as accrued."]})}},disableSteps:{disable:{customDisableCopy:(0,i.jsxs)(i.Fragment,{children:[n,"Disabling will take effect now, regardless of your billing cycle."]})},exitSurvey:O},disable:async()=>{s&&(await (0,k.patchObservabilityConfiguration)({team:s,enableTeam:!1,source:l}),await r())}};return s?.billing?.plan==="enterprise"&&(0,S.isLegacyPlanIteration)(s?.billing?.planIteration)&&(o.disableSteps.disable.customDisableModal=(0,i.jsxs)(i.Fragment,{children:[n,"Please reach out to your account executive to disable Observability Plus."]})),a||(o.enableSteps.postConfirmConfiguration={instructions:null,content:(0,i.jsx)(F,{})}),o}({hasOnlyMonitoring:l,team:s,refresh:a,source:e.analyticsEventSource,skipPostConfirm:e.skipPostConfirm}),...e,isEnabled:()=>r},{isEnabled:d,openEnableOrUpdateModal:u,openDisableModal:g,AddOnModal:b,formattedPrice:m}=(0,I.useTogglePaidAddOn)(c);return o&&(t=n?.length?`${n.length} project excluded`:"Manage projects"),{addOn:c,isObservabilityPlusEnabled:d,enableObservabilityPlus:u,disableObservabilityPlus:g,ObservabilityPlusModal:b,pricingCopy:`${m} / month`,configureUIText:t}}},6837494,4896489,e=>{"use strict";e.s(["EnableModal",()=>$],6837494);var i=e.i(751170);e.i(6483798);var t=e.i(8287059),s=e.i(2126130),l=e.i(5568858),r=e.i(5338940),a=e.i(3679047),n=e.i(4099374);e.i(1477032);var o=e.i(1509029),c=e.i(7114658),d=e.i(57106),u=e.i(1717203),g=e.i(7557283),h=e.i(9722978),b=e.i(6891161),m=e.i(8522580),x=e.i(5255926),p=e.i(1344973),y=e.i(5468328),v=e.i(1438473),j=e.i(8761240),f=e.i(199192),P=e.i(2988836);e.s(["AnalyticsSource",()=>T,"useModalState",()=>C,"useOpenEnableModal",()=>I],4896489);var w=e.i(455575),O=e.i(8901011);e.i(5202960);var N=e.i(6880199),k=e.i(4496450);let T="observability-enable-modal",E={step:"choose",isEnabling:!1},C=(0,O.create)((e,i)=>({step:"closed",team:null,projectId:null,plan:"hobby",isTrialing:!1,isEnabling:!1,isLegacyEnt:!1,hasOnlyMonitoring:!1,openedFrom:!1,setProps:i=>{let{team:t,...s}=i,l=t?.billing?.plan??"hobby";e({...s,team:t,plan:l,isTrialing:"pro"===l&&t?.billing?.status==="trialing"})},open:function(){let{from:t="observability",via:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:l}=i();e({...E,source:s,openedFrom:t,isLegacyEnt:l?.billing?.plan==="enterprise"&&!(0,k.isOnUnbundledPricingPlan)(l)})},close:()=>{e({step:"closed"})},doNext:async()=>{let{isEnabling:t,isLegacyEnt:s,isTrialing:l,plan:r,step:a,team:n,onContactSupport:o,onOpenTeamUpgrade:c,onSuccess:d,source:u}=i();if(n&&!t){if("choose"===a&&"pro"===r&&!l)return void e({step:"paid-addon"});if("choose"===a){if("hobby"===r||l)c?.({addOn:{additionalConfigurations:{team:n,source:"enable-modal"},type:"observabilityPlus"},disabledSteps:["team-members"],forceExpandedReceipt:!0,forceImmediateUpgrade:l,source:`${T}${u?`-${u}`:""}`,teamHint:n.id,trialBehavior:"disallow-trial",onConversionSuccess:d,onAbandon:i=>{i&&e({step:"choose"})}});else if(s)o?.({team:n});else if("enterprise"===r){e({isEnabling:!0});try{await (0,N.patchObservabilityConfiguration)({team:n,enableTeam:!0,source:"enable-modal"}),w.toasts.success("Enabled Observability Plus.")}catch(i){e({isEnabling:!1}),w.toasts.error(`Failed to enable Observability Plus${i instanceof Error?`: ${i.message}`:""}`);return}d?.({team:n})}e({step:"closed",isEnabling:!1})}}}})),I=()=>C(e=>e.open);var S=e.i(379786);let F={incomingRequest:{label:"Edge Requests",description:"All requests received by the Vercel Edge Network"},outgoingRequest:{label:"External API Requests",description:"All HTTP requests made by your functions to external APIs"},serverlessFunctionInvocation:{label:"Serverless Function Invocations"},edgeFunctionInvocation:{label:"Edge Function Invocations"},edgeMiddlewareInvocation:{label:"Edge Middleware Invocations"}},A=e=>{let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return i.endsWith(".00")?i.slice(0,-3):i},_=e=>{let i=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),t=i.endsWith(".00")?i.slice(0,-3):i;return`${t} MIU`};function M(e){let{metric:t,count:s,loading:l}=e,r=F[t];return(0,i.jsxs)(n.default.Fragment,{children:[(0,i.jsxs)(p.Text,{className:"flex items-center gap-1",color:"gray-900",size:14,children:[r.label,r.description?(0,i.jsx)(y.Tooltip,{text:r.description,children:(0,i.jsx)(P.InformationFillSmall,{color:"gray-900"})}):null]}),l||void 0===s?(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(x.Skeleton,{height:10,width:35})}):(0,i.jsx)(p.Text,{align:"right",color:"gray-900",size:14,children:(+s).toLocaleString()})]},t)}function L(e){let{onClose:t}=e,s=(0,S.useIncludedAndExcludedProjectWithUsageEvents)(),{observabilityUsage:l,totalExcludedProjects:r,totalEvents:a}=s,y=(0,c.useObservabilityPlusForProjectsFlag)(),{doNext:v,hasOnlyMonitoring:P,team:w,plan:O}=C(),N=C(R),T=C(e=>e.isLegacyEnt),E=C(U),{can:I,isLoading:F}=(0,u.default)(),L=(0,n.useMemo)(()=>!F&&I(g.Action.Update,g.Resource.ObservabilityConfiguration),[F,I]),D="enterprise"===O,z=D&&!(0,k.isLegacyPlanIteration)(w?.billing?.planIteration)?_:A,$=void 0!==a?Math.max(0,a-1e6):void 0,W=void 0!==$?$/1e6*1.2:void 0,H=void 0!==W?10*!D+W:void 0;return(0,i.jsxs)(b.Modal.Modal,{active:!0,onClickOutside:t,children:[(0,i.jsxs)(b.Modal.Body,{className:"tailwind-preflight",children:[(0,i.jsx)(b.Modal.Header,{children:(0,i.jsx)(b.Modal.Title,{className:"px-1",children:E})}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 px-1",children:[(0,i.jsxs)("div",{children:["Gain advanced insights, with powerful observability features and longer retention."," ",(0,i.jsx)(d.Link,{external:!0,href:"/docs/observability",variant:"highlight",children:"Learn more"})]}),(0,i.jsxs)("ul",{className:"my-3 ml-0.5 list-none p-0 space-y-2",children:[(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.CheckCircleFill,{color:"gray-1000",size:16}),"Unlock advanced insights across Observability and Logs"]}),(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.CheckCircleFill,{color:"gray-1000",size:16}),"Gain access to custom queries for deeper insights"]}),(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.CheckCircleFill,{color:"gray-1000",size:16}),"View up to 30 days of data"]}),D&&w?.billing?.planIteration!=="plus"?(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.CheckCircleFill,{color:"gray-1000",size:16}),"Includes 1 million events, across all projects"]}):null,"pro"===O&&P?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.CheckCircleFill,{className:"mt-1 inline shrink-0 self-start",color:"gray-1000",size:16}),"The price per million events has already been reduced to $1.20. The base fee remains $10."]})}):null]})]}),y?(0,i.jsx)("div",{className:"mt-2 flex flex-col",children:(0,i.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,i.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,i.jsx)(f.ChevronRightSmall,{})}),(0,i.jsx)(p.Text,{color:"gray-1000",weight:500,children:"Included Projects"})]}),(0,i.jsx)(p.Text,{className:"flex items-center gap-1",color:"gray-900",children:r>0?`${r} Project${r>1?"s":""} excluded `:"All Projects"})]}),(0,i.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 py-3.5 pl-9 tabular-nums space-y-2",children:(0,i.jsx)(S.ProjectListWithUsageEvents,{...s,canConfigure:L})})]})}):null,(0,i.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,i.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,i.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,i.jsx)(f.ChevronRightSmall,{})}),(0,i.jsxs)(p.Text,{color:"gray-1000",weight:500,children:[P?"Observability":""," Cost Estimate*",(0,i.jsxs)(p.Text,{as:"span",className:"block",color:"gray-900",size:13,children:[D?null:(0,i.jsxs)(i.Fragment,{children:[z(10)," per month + "]}),z(1.2)," per million events"]})]})]}),(0,i.jsxs)(p.Text,{className:"flex items-center gap-1",color:"gray-1000",weight:500,children:[void 0!==H?`~ ${z(H)}`:(0,i.jsx)(x.Skeleton,{height:18,width:30})," ",(0,i.jsx)("span",{children:"/ month"})]})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)("div",{className:(0,h.clsx)("ml-0 grid grid-cols-[2fr,1fr] items-center gap-x-1 gap-y-3 border-t border-dashed p-3 pl-9"),children:[D?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(p.Text,{color:"gray-1000",children:"Base Price"}),w?.billing?.planIteration!=="plus"&&(0,i.jsx)(p.Text,{color:"gray-900",size:13,children:"Includes 1 million events, across all projects"})]}),(0,i.jsxs)(p.Text,{align:"right",color:"gray-900",size:14,children:[z(10)," / month"]})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(p.Text,{color:"gray-1000",children:"Additional Events"}),(0,i.jsxs)(p.Text,{color:"gray-900",size:12,children:[(0,i.jsx)("span",{children:void 0!==$?$?$.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:2}):"0":(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(x.Skeleton,{className:"mr-2 inline-block h-2 w-16 translate-y-0.5",height:12,width:20})})})," ","additional events Ã— ",z(1.2)," per million"]})]}),(0,i.jsx)(p.Text,{align:"right",color:"gray-900",children:void 0!==W?W?z(W):"No additional cost":(0,i.jsx)(x.Skeleton,{className:"inline-block",height:18,width:30})})]}),(0,i.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 py-3.5 pl-9 tabular-nums space-y-2",children:y?(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsx)(p.Text,{color:"gray-1000",size:14,weight:500,children:"Total events in the last 30 days"}),void 0!==a?(0,i.jsx)(p.Text,{align:"right",color:"gray-1000",size:14,children:a.toLocaleString()}):(0,i.jsx)(x.Skeleton,{height:18,width:50})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsx)(p.Text,{color:"gray-1000",size:14,weight:500,children:"Total events in the last 30 days"}),void 0!==a?(0,i.jsx)(p.Text,{align:"right",color:"gray-1000",size:14,children:a.toLocaleString()}):(0,i.jsx)(x.Skeleton,{height:18,width:50})]}),(0,i.jsx)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:l?.eventBreakdown?Object.entries(l.eventBreakdown).map(e=>{let[t,s]=e;return(0,i.jsx)(M,{count:s,metric:t},t)}):(0,i.jsx)(i.Fragment,{children:o.MeteredEvents.map(e=>(0,i.jsx)(M,{loading:!0,metric:e},e))})})]})})]})]}),(0,i.jsx)(p.Text,{className:"mt-2 px-2",color:"gray-800",size:14,children:"* Estimate is based on your team's activity over the last 30 days. The actual cost will vary depending on future usage patterns."}),P?(0,i.jsx)(m.Note,{className:"-mx-2 mt-6",type:"violet",children:"By migrating, your team's existing Monitoring package will be replaced by Observability Plus"}):null,"hobby"===O?(0,i.jsxs)(m.Note,{className:"-mx-2 mt-8",type:"violet",children:["Upgrading to Observability Plus requires a paid plan.",(0,i.jsx)("br",{}),(0,i.jsx)(d.Link,{external:!0,href:"/docs/plans/pro",children:"Learn more"})]}):null,T?(0,i.jsx)(m.Note,{className:"-mx-2 mt-2",type:"cyan",children:"To enable Observability Plus, please contact your account executive."}):null]})]}),(0,i.jsxs)(b.Modal.Actions,{children:[(0,i.jsx)(b.Modal.Action,{onClick:t,type:"secondary",children:"Dismiss"}),!T&&(0,i.jsx)(B,{text:L?void 0:"Please ask your team owners",children:(0,i.jsx)(b.Modal.Action,{disabled:!L,loading:N.loading,onClick:()=>void v(),suffix:N.suffix,type:N.type,children:N.label})})]})]})}function B(e){let{text:t,children:s}=e;return t?(0,i.jsx)(y.Tooltip,{text:t,children:s}):s}function R(e){let{plan:t,hasOnlyMonitoring:s,isEnabling:l}=e;return"enterprise"===t?{loading:l,label:s?"Confirm and Migrate":"Confirm"}:{label:"Continue",suffix:(0,i.jsx)(v.ArrowRight,{})}}function U(e){let{plan:i,hasOnlyMonitoring:t}=e;return t?"Migrate from Monitoring to Observability Plus":"hobby"===i?"Upgrade to Pro and Observability Plus":"Upgrade to Observability Plus"}e.i(3182268);var D=e.i(7849855);function z(e){let{onClose:t}=e,{projectSlug:s}=(0,D.useProjectSlug)(),{toggleObservabilityPlusForProject:l}=(0,c.useObservabilityPlusForProjects)(),[r,a]=(0,n.useTransition)();return(0,i.jsxs)(b.Modal.Modal,{active:!0,onClickOutside:t,children:[(0,i.jsxs)(b.Modal.Body,{className:"tailwind-preflight",children:[(0,i.jsx)(b.Modal.Header,{children:(0,i.jsx)(b.Modal.Title,{className:"px-1",children:"Include Observability Plus on Project"})}),(0,i.jsxs)(p.Text,{children:["Include Observability Plus on"," ",(0,i.jsx)("span",{className:"font-medium",children:s})," to unlock advanced observability features for your project."]})]}),(0,i.jsxs)(b.Modal.Actions,{children:[(0,i.jsx)(b.Modal.Action,{onClick:t,type:"secondary",children:"Cancel"}),(0,i.jsx)(b.Modal.Action,{loading:r,onClick:()=>{s&&a(async()=>{await l({projectName:s,disabled:!1}),t()})},children:"Include Observability Plus"})]})]})}function $(){let{setProps:e,step:o,close:c,open:d}=C(),{team:u}=(0,r.useTeam)(),g=(0,a.useRouter)(),{hasOnlyMonitoring:h,mutate:b,hasObservabilityPlusAccessOnCurrentProject:m,hasObservabilityPlusAccess:x}=(0,s.useHasObservabilityPlus)(),p=(0,n.useCallback)(()=>{b(),g.refresh()},[g,b]),y=(0,n.useCallback)(e=>{g.push(`/help?teamSlug=${e.team.slug}`)},[g]),{enableObservabilityPlus:v,ObservabilityPlusModal:j}=(0,l.useToggleObservabilityPlus)({analyticsEventSource:T,onSuccess:p,onClose:e=>{c(),e&&d()},skipPostConfirm:!0}),f=(0,t.useOpenUpgradeModal)();return((0,n.useEffect)(()=>e({team:u,hasOnlyMonitoring:h,onContactSupport:y,onOpenTeamUpgrade:f,onSuccess:p}),[h,y,f,p,e,u]),(0,n.useEffect)(()=>{"paid-addon"===o&&v?.()},[v,o]),"choose"===o&&x&&!m)?(0,i.jsx)(z,{onClose:c}):(0,i.jsxs)(i.Fragment,{children:["choose"===o?(0,i.jsx)(L,{onClose:c}):null,"paid-addon"===o?j:null]})}},2400041,e=>{e.v({container:"entities-module__AKr3mW__container",list:"entities-module__AKr3mW__list"})},7137701,e=>{e.v({container:"entity-content-module__Sb84Kq__container",textContent:"entity-content-module__Sb84Kq__textContent"})},200487,e=>{e.v({button:"entity-module___Tgnpa__button",left:"entity-module___Tgnpa__left",right:"entity-module___Tgnpa__right"})},2064047,e=>{"use strict";e.s(["Entity",()=>u],2064047);var i=e.i(751170),t=e.i(9722978),s=e.i(9508212),l=e.i(2400041),r=e.i(1344973),a=e.i(7137701);let n={truncate:!0,weight:600},o={truncate:!0,color:"gray-900"};function c(e){let{title:t,description:l,avatar:c,width:d,fill:u=!1,...g}=e,h="string"==typeof t?(0,i.jsx)(r.Text,{...n,children:t}):t,b="string"==typeof l?(0,i.jsx)(r.Text,{...o,children:l}):l;return(0,i.jsxs)(s.Stack,{align:"center",className:a.default.container,direction:"row",flex:u?1:void 0,gap:2,style:{"--width":d},...g,children:[h||b?(0,i.jsxs)(s.Stack,{className:a.default.textContent,flex:1,children:[t?h:null,l?b:null]}):null,c||null]})}c.TitleTextProps=n,c.DescriptionTextProps=o,c.SkeletonProps={boxHeight:20,height:14,width:"40%",show:!0};var d=e.i(200487);let u=e=>{let{as:l,children:r,className:a,left:n,right:o,rightProps:c,footer:u,onClick:g,padding:h=4,...b}=e,m=l??(g?"button":"li");return(0,i.jsxs)(s.Stack,{as:m,className:(0,t.clsx)(a,"button"===m&&d.default.button),onClick:g,padding:h,...b,children:[(0,i.jsxs)(s.Stack,{align:"center",as:"section",direction:"row",gap:4,children:[n||r?(0,i.jsxs)(s.Stack,{align:"center",className:(0,t.clsx)("left",d.default.left),direction:"row",flex:1,gap:4,children:[n,r]}):null,o?(0,i.jsx)(s.Stack,{align:"center",className:(0,t.clsx)("right",d.default.right),direction:"row",gap:4,...c,children:o}):null]}),u||null]})};u.Content=c,u.List=function(e){let{children:r,className:a,header:n,style:o,ref:c}=e;return n?(0,i.jsxs)(s.Stack,{gap:3,children:[n,(0,i.jsx)("ul",{className:(0,t.clsx)(l.default.container,l.default.list,a),ref:c,style:o,children:r})]}):(0,i.jsx)("ul",{className:(0,t.clsx)(l.default.container,l.default.list,a),ref:c,style:o,children:r})}},6985651,e=>{e.v({icon:"icon-module__yqmEeW__icon",wrapper:"icon-module__yqmEeW__wrapper"})},76079,e=>{"use strict";e.s(["AvatarWithIcon",()=>n]);var i=e.i(751170),t=e.i(4099374),s=e.i(6677848),l=e.i(4585051),r=e.i(6985651);let a=e=>{let{icon:t,left:a,right:n,size:o,bottom:c=-5,iconTitle:d,style:u,iconBackground:g,gitType:h,...b}=e;return void 0===n&&void 0===a&&(a=-3),(0,i.jsxs)("div",{className:r.default.wrapper,style:{...u,"--size":(0,s.px)(o)},children:[(0,i.jsx)(l.Avatar,{size:o,...b}),t?(0,i.jsx)("div",{"aria-hidden":!0,className:r.default.icon,"data-background":g?"true":"false","data-git-type":h,style:{left:a,bottom:c,right:n},title:d,children:t}):null]})};a.displayName="AvatarWithIcon";let n=(0,t.memo)(a)},8896705,e=>{"use strict";e.s(["FaviconOrFramework",()=>o]);var i=e.i(751170),t=e.i(9722978),s=e.i(5255926),l=e.i(4585051),r=e.i(76079),a=e.i(1138941),n=e.i(7898658);function o(e){let{size:o=32,style:c,project:d,title:u,icon:g,right:h,bottom:b,teamId:m}=e,{data:x,isLoading:p}=(0,n.default)({teamId:m,project:d}),y=(0,a.useFramework)(d);if(p||!y&&!x)return(0,i.jsx)(s.Skeleton,{height:o,rounded:!0,style:{flexShrink:0},width:o});let v={size:o,src:x?.src||y?.logo,title:u??y?.name,className:(0,t.clsx)({"bg-white/75 rounded-full shadow-border shadow-background-100 dark:bg-foreground dark:shadow-foreground":!!(!x&&y)}),style:c};return g?(0,i.jsx)(r.AvatarWithIcon,{bottom:b,icon:g,right:h,...v}):(0,i.jsx)(l.Avatar,{...v,mask:!1})}}]);

//# sourceMappingURL=cfc42a4f1b858e66.js.map
//# debugId=b1ef7030-24b2-54ab-b6c8-3b269ddfe42b
