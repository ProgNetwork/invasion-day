
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2605c9d3-57a2-5ca0-8205-f7e998425d63")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1935298,e=>{e.v({fakeSideBorders:"group-log-filters-module__iUXrVG__fakeSideBorders",filterContent:"group-log-filters-module__iUXrVG__filterContent",first:"group-log-filters-module__iUXrVG__first",last:"group-log-filters-module__iUXrVG__last",modalActiveButtonContainer:"group-log-filters-module__iUXrVG__modalActiveButtonContainer",modalActiveButtonDot:"group-log-filters-module__iUXrVG__modalActiveButtonDot",modalBody:"group-log-filters-module__iUXrVG__modalBody",modalMain:"group-log-filters-module__iUXrVG__modalMain",title:"group-log-filters-module__iUXrVG__title",titleContainer:"group-log-filters-module__iUXrVG__titleContainer"})},8300708,e=>{e.v({buttonLink:"group-details-panel-module__u1jj4W__buttonLink",buttonRule:"group-details-panel-module__u1jj4W__buttonRule",codeBlock:"group-details-panel-module__u1jj4W__codeBlock",copy:"group-details-panel-module__u1jj4W__copy",cta:"group-details-panel-module__u1jj4W__cta",detailsContainer:"group-details-panel-module__u1jj4W__detailsContainer",detailsHeader:"group-details-panel-module__u1jj4W__detailsHeader",detailsMain:"group-details-panel-module__u1jj4W__detailsMain",divider:"group-details-panel-module__u1jj4W__divider",drawer:"group-details-panel-module__u1jj4W__drawer",error:"group-details-panel-module__u1jj4W__error",fetchMetricRowContainer:"group-details-panel-module__u1jj4W__fetchMetricRowContainer",fetchMetricsContainer:"group-details-panel-module__u1jj4W__fetchMetricsContainer",ghostButton:"group-details-panel-module__u1jj4W__ghostButton",groupMessage:"group-details-panel-module__u1jj4W__groupMessage",info:"group-details-panel-module__u1jj4W__info",learnMore:"group-details-panel-module__u1jj4W__learnMore",logDetailRowSkeleton:"group-details-panel-module__u1jj4W__logDetailRowSkeleton",message:"group-details-panel-module__u1jj4W__message",modalBody:"group-details-panel-module__u1jj4W__modalBody",noLogsSelected:"group-details-panel-module__u1jj4W__noLogsSelected",root:"group-details-panel-module__u1jj4W__root",rowContainer:"group-details-panel-module__u1jj4W__rowContainer",setupLogDrain:"group-details-panel-module__u1jj4W__setupLogDrain",title:"group-details-panel-module__u1jj4W__title",tooltip:"group-details-panel-module__u1jj4W__tooltip",truncate:"group-details-panel-module__u1jj4W__truncate",warning:"group-details-panel-module__u1jj4W__warning"})},4410321,e=>{e.v({breakSpaces:"group-log-rows-module__JxqD1W__breakSpaces",colspan:"group-log-rows-module__JxqD1W__colspan",darkTheme:"group-log-rows-module__JxqD1W__darkTheme",darktheme:"group-log-rows-module__JxqD1W__darktheme",error:"group-log-rows-module__JxqD1W__error",fadeIn:"group-log-rows-module__JxqD1W__fadeIn",faded:"group-log-rows-module__JxqD1W__faded",fatal:"group-log-rows-module__JxqD1W__fatal",flash:"group-log-rows-module__JxqD1W__flash",header:"group-log-rows-module__JxqD1W__header",headerContainer:"group-log-rows-module__JxqD1W__headerContainer",info:"group-log-rows-module__JxqD1W__info",isNew:"group-log-rows-module__JxqD1W__isNew",isSelected:"group-log-rows-module__JxqD1W__isSelected",liveModeRow:"group-log-rows-module__JxqD1W__liveModeRow",loadingError:"group-log-rows-module__JxqD1W__loadingError",loadingNew:"group-log-rows-module__JxqD1W__loadingNew","move-in-indicator":"group-log-rows-module__JxqD1W__move-in-indicator","move-logs-down":"group-log-rows-module__JxqD1W__move-logs-down","move-logs-down-with-opacity":"group-log-rows-module__JxqD1W__move-logs-down-with-opacity","move-logs-up":"group-log-rows-module__JxqD1W__move-logs-up",moveUp:"group-log-rows-module__JxqD1W__moveUp",paused:"group-log-rows-module__JxqD1W__paused",previouslyFaded:"group-log-rows-module__JxqD1W__previouslyFaded",reverseBackground:"group-log-rows-module__JxqD1W__reverseBackground",rowContainer:"group-log-rows-module__JxqD1W__rowContainer",rowItem:"group-log-rows-module__JxqD1W__rowItem",screenReaderSelect:"group-log-rows-module__JxqD1W__screenReaderSelect",separated:"group-log-rows-module__JxqD1W__separated",tooltip:"group-log-rows-module__JxqD1W__tooltip",tooltipContainer:"group-log-rows-module__JxqD1W__tooltipContainer",truncate:"group-log-rows-module__JxqD1W__truncate",uppercase:"group-log-rows-module__JxqD1W__uppercase",warning:"group-log-rows-module__JxqD1W__warning"})},3327755,(e,t,s)=>{!function(e){"use strict";function t(e){var t={},s=e?e.split(/\.|-|_/):["0","0","0"];return t.info=s.join("."),t.major=s[0]||"0",t.minor=s[1]||"0",t.patch=s[2]||"0",t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var s=["crios","fxios","daumapps"],r=e.userAgent=function(e,r){var a,l,o,n,i=e?e.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return{ua:i,browser:(a={},"webkit"===(l=/(dolfin)[ \/]([\w.]+)/.exec(i)||/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(tizen)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||0>i.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(i)||["","unknown"])[1]?l=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||[l[0],"safari",l[2]]:"mozilla"===l[1]?/trident/.test(i)?l[1]="msie":l[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&(l[1]="polaris"),a[l[1]]=!0,a.name=l[1],a.version=t(l[2]),a),platform:function(e){var t,s;if(!(!(t=e).match(/linux|windows (nt|98)|macintosh|cros/)||t.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)))return"pc";if((s=e).match(/ipad/)||s.match(/android/)&&!s.match(/mobi|mini|fennec/))return"tablet";return e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)?"mobile":""}(i),os:(o={},"iphone"===(n=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||!!/android/.test(i)&&["","android","0.0.0"]||!!/(windows)/.test(i)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(i)||/(tizen)[ \/]([\w._\-]+);/.exec(i)||!!/(linux)/.test(i)&&["","linux","0.0.0"]||!!/webos/.test(i)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(i)||/(bada)[ \/]([\w._\-]+)/.exec(i)||!!/bada/.test(i)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(i)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"])[1]||"ipad"===n[1]||"ipod"===n[1]?n[1]="ios":"windows"===n[1]&&"98"===n[2]&&(n[2]="0.98.0"),"cros"===n[1]&&(n[1]="chrome"),o[n[1]]=!0,o.name=n[1],o.version=t(n[2]),o),app:function(e,r){var a={},l=null,o=s;Array.isArray(r)?o=s.concat(r):"string"==typeof r&&(o=s.concat([r]));for(var n=0,i=o.length;n<i&&!(l=RegExp("("+o[n]+")[ \\/]([\\w._\\-]+)").exec(e));n+=1);return l||(l=["",""]),l[1]?(a.isApp=!0,a.name=l[1],a.version=t(l[2])):a.isApp=!1,a}(i,r)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=r(window.navigator.userAgent)||null)}((s.daumtools=s,s.util=s,s))},2458511,e=>{e.v({combobox:"search-filter-module__SHqGLq__combobox",comboboxList:"search-filter-module__SHqGLq__comboboxList",comboboxWrapper:"search-filter-module__SHqGLq__comboboxWrapper",confirm:"search-filter-module__SHqGLq__confirm",empty:"search-filter-module__SHqGLq__empty",filter:"search-filter-module__SHqGLq__filter",firstOption:"search-filter-module__SHqGLq__firstOption",firstOptionInnerButton:"search-filter-module__SHqGLq__firstOptionInnerButton",hide:"search-filter-module__SHqGLq__hide",highlight:"search-filter-module__SHqGLq__highlight",input:"search-filter-module__SHqGLq__input",option:"search-filter-module__SHqGLq__option",suffix:"search-filter-module__SHqGLq__suffix",suggestions:"search-filter-module__SHqGLq__suggestions",textOverlay:"search-filter-module__SHqGLq__textOverlay"})},5431818,e=>{e.v({logRowsContainer:"logs-common-module__Gs96xq__logRowsContainer",logRowsWrapper:"logs-common-module__Gs96xq__logRowsWrapper"})},615673,e=>{e.v({container:"paginated-group-logs-module__kgOb4G__container",hasLogs:"paginated-group-logs-module__kgOb4G__hasLogs"})},7230346,e=>{e.v({logGradient:"group-logs-module__OaUHyW__logGradient",logHeader:"group-logs-module__OaUHyW__logHeader",show:"group-logs-module__OaUHyW__show"})},6687520,e=>{"use strict";e.s(["GroupLogs",()=>r4],6687520);var t=e.i(751170),s=e.i(4099374),r=e.i(9508212),a=e.i(8674454),l=e.i(6694387),o=e.i(4991687),n=e.i(8459493),i=e.i(2504781),d=e.i(9722978),c=e.i(4004502),u=e.i(8139291),p=e.i(992159),h=e.i(3679047),m=e.i(7917902),x=e.i(3322724),g=e.i(1360174),f=e.i(1717203),j=e.i(7557283),v=e.i(7151748),y=e.i(3870297),b=e.i(9202779),C=e.i(1344973),w=e.i(6891161),_=e.i(7580732),S=e.i(9014736),N=e.i(8042625),k=e.i(4244280),L=e.i(1138941),T=e.i(6060673),E=e.i(7033605),I=e.i(8306707);let D={rows:[]};function M(e){let{attributeName:t,attributeNameSearchQuery:s,forceEmpty:r=!1,deploymentDomains:a,deploymentIds:l,domains:o,levels:n,sources:i,requestTags:d,routes:c,requestPaths:u,requestIds:p,requestMethods:h,statusCodes:x,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b}=e,{data:C}=(0,T.useProject)((0,L.useProjectIdOrName)()),{user:w,team:_,isLoading:M}=(0,m.useAccount)(),{startDate:q,endDate:A,searchQuery:R,myLogs:O,hasTraces:P}=(0,E.useLogsApiParams)(),B=A??new Date,$=(0,S.default)(()=>{if(M||!t||r||p&&p.length>0||!C)return;let e=null!==_?_.id:null,m=null!==w?w?.uid:null,S=e||m;if(null===S)return;let L=(0,N.encode)({attributeName:t,attributeNameSearchQuery:s||void 0,startDate:q.getTime(),endDate:B.getTime(),searchQuery:(0,I.stringifyArrayContent)((0,I.tokenizeSearchQuery)(R)),projectId:C.id,deploymentDomain:(0,I.stringifyArrayContent)(a),deploymentId:(0,I.stringifyArrayContent)(l),domain:(0,I.stringifyArrayContent)(o),level:(0,I.stringifyArrayContent)(n),ownerId:S,source:(0,I.stringifyArrayContent)(i),requestTags:(0,I.stringifyArrayContent)(d),route:(0,I.stringifyArrayContent)(c),requestPath:(0,I.stringifyArrayContent)(u),requestMethod:(0,I.stringifyArrayContent)(h),statusCode:(0,I.stringifyArrayContent)(x),cache:(0,I.stringifyArrayContent)(g),environment:(0,I.stringifyArrayContent)(f),branch:(0,I.stringifyArrayContent)(j),myLogs:O?"true":void 0,sessionId:(0,I.stringifyArrayContent)(v),hasTraces:P?"true":void 0,traceId:(0,I.stringifyArrayContent)(y),invocationId:(0,I.stringifyArrayContent)(b)});return`${k.API_LOGS}/request-logs/filter-values${L}`},F,{keepPreviousData:!0,revalidateOnFocus:!1});return r?{...$,data:D}:$}async function F(e,t){let s=await fetch(e,t);if(!s.ok)throw Error((await s.json()).message);return s.json()}var q=e.i(1935298),A=e.i(615800),R=e.i(5062269);let O=["responseStatusCodes","vercelCaches","requestMethods","timeline","levels","sources","environments"],P={hobby:"pastHour",pro:"pastDay",enterprise:"past3Days"},B=()=>{let{project:e}=(0,h.useParams)()??{},t=(0,T.useProject)(e),r=t.data?.id,{user:a,team:l}=(0,m.useAccount)(),o=l?.billing?.plan??"hobby",n=(0,s.useCallback)(()=>{r&&a?.uid&&(0,A.trackInSnowflake)(R.Topic.VercelAppV0LogPageVisited,{project_id:r,team_id:l?.id,user_id:a.uid},"vercel-app")},[r,a?.uid,l?.id]);return{trackLogPageVisit:n,trackFilterUse:(0,s.useCallback)(e=>{r&&a&&("timeline"===e.filter&&"maximum"===e.value[0]&&(e.value[0]=P[o]),(0,A.trackInSnowflake)(R.Topic.VercelAppV0LogFilterQuery,{project_id:r,team_id:l?.id,user_id:a.uid,event_trigger:e.eventTrigger,filter_terms:e.value.map(t=>({field:e.filter,operator:"=",value:t||void 0}))},"vercel-app"))},[r,a,l,o]),trackLogPresetRun:(0,s.useCallback)(e=>{let{presetId:t}=e;r&&a&&(0,A.trackInSnowflake)(R.Topic.VercelAppV0LogPresetRun,{project_id:r,team_id:l?.id,user_id:a.uid,preset_id:t,preset_type:t.endsWith("_t")?"team":"personal"},"vercel-app")},[r,a,l])}};var $=e.i(4796642),z=e.i(787358),W=e.i(4333930),G=e.i(9334638);let H=(0,G.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3.25C0.5 1.86929 1.61929 0.75 3 0.75H13C14.3807 0.75 15.5 1.86929 15.5 3.25V4.75C15.5 5.24434 15.3565 5.70517 15.1089 6.09311C14.6903 5.81311 14.2373 5.58044 13.7576 5.40277C13.9087 5.22759 14 4.99946 14 4.75V3.25C14 2.69772 13.5523 2.25 13 2.25H3C2.44772 2.25 2 2.69772 2 3.25V4.75C2 5.30229 2.44772 5.75 3 5.75H8.46611C7.74768 6.12985 7.10902 6.64041 6.58178 7.25H3C1.61929 7.25 0.5 6.13071 0.5 4.75V3.25ZM5.86958 8.25H3C1.61929 8.25 0.5 9.36929 0.5 10.75V12.25C0.5 13.6307 1.61929 14.75 3 14.75H5.86958C5.59976 14.2835 5.38623 13.7804 5.23829 13.25H3C2.44772 13.25 2 12.8023 2 12.25V10.75C2 10.1977 2.44772 9.75 3 9.75H5.23829C5.38623 9.21955 5.59975 8.71645 5.86958 8.25ZM4.25 4.75C4.66421 4.75 5 4.41421 5 4C5 3.58579 4.66421 3.25 4.25 3.25C3.83579 3.25 3.5 3.58579 3.5 4C3.5 4.41421 3.83579 4.75 4.25 4.75ZM7.5 4C7.5 4.41421 7.16421 4.75 6.75 4.75C6.33579 4.75 6 4.41421 6 4C6 3.58579 6.33579 3.25 6.75 3.25C7.16421 3.25 7.5 3.58579 7.5 4ZM13.2307 12C13.2 12.815 13.0938 13.6278 12.9124 14.4279C13.8564 13.9717 14.5462 13.0724 14.7118 12H13.2307ZM11.8047 14.7359C11.7044 14.7452 11.6028 14.75 11.5 14.75C11.3972 14.75 11.2956 14.7452 11.1953 14.7359C10.9494 13.839 10.8077 12.9211 10.77 12H12.23C12.1923 12.9211 12.0506 13.839 11.8047 14.7359ZM13.2307 11C13.2 10.185 13.0938 9.37224 12.9124 8.57213C13.8564 9.02834 14.5462 9.92764 14.7118 11H13.2307ZM12.23 11C12.1923 10.0789 12.0506 9.16097 11.8047 8.2641C11.7044 8.25477 11.6028 8.25 11.5 8.25C11.3972 8.25 11.2956 8.25477 11.1953 8.2641C10.9494 9.16097 10.8077 10.0789 10.77 11H12.23ZM9.76925 11C9.80005 10.185 9.90616 9.37224 10.0876 8.57213C9.1436 9.02834 8.45381 9.92764 8.28822 11H9.76925ZM10.0876 14.4279C9.90616 13.6278 9.80005 12.815 9.76925 12H8.28822C8.45381 13.0724 9.1436 13.9717 10.0876 14.4279ZM11.5 16C13.9853 16 16 13.9853 16 11.5C16 9.01472 13.9853 7 11.5 7C9.01472 7 7 9.01472 7 11.5C7 13.9853 9.01472 16 11.5 16Z" fill="currentColor"/>
  `),V=[{label:"Vercel Function",value:"serverless",icon:(0,t.jsx)(W.FunctionSquare,{size:16})},{label:"Edge Middleware",value:"edge-middleware",icon:(0,t.jsx)(z.FunctionMiddleware,{size:16})},{label:"Edge Function",value:"edge-function",icon:(0,t.jsx)($.FunctionEdge,{size:16})},{label:"Edge Cache",value:"edge-cache",icon:(0,t.jsx)(H,{size:16})}],U=[{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"}],Q=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"HEAD",value:"HEAD"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"}],X=[{label:"MISS",value:"MISS"},{label:"HIT",value:"HIT"},{label:"NONE",value:"NONE"},{label:"BYPASS",value:"BYPASS"},{label:"STALE",value:"STALE"},{label:"PRERENDER",value:"PRERENDER"},{label:"REVALIDATED",value:"REVALIDATED"}],Z=[{label:"API Endpoint",value:"api"},{label:"Server-side Rendering",value:"ssr"},{label:"Incremental Static Regeneration",value:"isr"},{label:"Partial Prerendering",value:"ppr"},{label:"Server Components",value:"rsc"},{label:"Cron Job",value:"cron"}],J=[{name:"level",attributeName:"level",suggestions:U.map(e=>e.value)},{name:"resource",attributeName:"source",suggestions:V.map(e=>e.value)},{name:"requestType",attributeName:"requestTags",suggestions:Z.map(e=>e.value)},{name:"function",attributeName:"route",suggestions:["function name"]},{name:"requestPath",attributeName:"requestPath",suggestions:["request path"]},{name:"host",attributeName:"domain",suggestions:["domain name"]},{name:"deployment",attributeName:"deploymentDomain",suggestions:["deployment name"]},{name:"method",attributeName:"requestMethod",suggestions:Q.map(e=>e.value)},{name:"status",attributeName:"statusCode",suggestions:["status code"]},{name:"cache",attributeName:"cache",suggestions:X.map(e=>e.value)},{name:"environment",attributeName:"environment",suggestions:[{label:"Production",value:"production"},{label:"Preview",value:"preview"}].map(e=>e.value)},{name:"branch",attributeName:"branch",suggestions:["branch name"]},{name:"requestId",attributeName:"requestId",suggestions:["Request ID - a partial of the requestId is required to search, ex:abcde-1678961364403-a1b2c3d4f5e6"]},{name:"sessionId",attributeName:"sessionId",suggestions:["id of your tracing session"]},{name:"traceId",attributeName:"traceId",suggestions:["id of the trace"]},{name:"deploymentId",attributeName:"deploymentId",suggestions:["id of the deployment"]},{name:"invocationId",attributeName:"invocationId",suggestions:["id of the invocation"]}],K=J.filter(e=>"deploymentId"!==e.name&&"deployment"!==e.name);var Y=e.i(6209667);function ee(){let{state:{levels:e,routes:r,deploymentDomains:a,deploymentIds:l,domains:o,sources:n,requestTags:i,requestMethods:d,requestPaths:u,caches:p,statusCodes:h,environments:m,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),{data:y,isLoading:b}=M({attributeName:"level",domains:o,deploymentDomains:a,deploymentIds:l,sources:n,requestTags:i,routes:r,requestPaths:u,requestMethods:d,caches:p,statusCodes:h,environments:m,branches:x,sessionIds:g,traceIds:f,invocationIds:j}),C=(0,s.useMemo)(()=>{let e;return e=y?.rows,U.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return s||b||(s=0),{label:t.label,value:t.value,count:s}}).sort((e,t)=>Number(t.count)-Number(e.count))},[y,b]),w=C.length,{trackFilterUse:S}=B();return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:e.length,"data-testid":(0,c.tid)("group-logs","level-filter"),defaultExpanded:!0,onClearFilter:()=>v({levels:void 0,preset:null}),title:"Contains Console Level",children:(0,t.jsx)(Y.LogFilter,{hideSearch:!0,isCountLoading:b,onChange:e=>{v({levels:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"levels",value:e.sort()})},options:C,selectedOptions:e,totalAvailableOptions:w})})}function et(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:u,requestPaths:p,caches:h,statusCodes:m,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,E.useLogsQueryState)(),[b,C]=(0,s.useState)(!1),{data:w,isLoading:S}=M({attributeName:"source",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:u,requestPaths:p,caches:h,statusCodes:m,environments:x,branches:g,forceEmpty:!b,requestTags:i,sessionIds:f,traceIds:j,invocationIds:v}),{trackFilterUse:N}=B(),k=(0,s.useMemo)(()=>{let e;return e=w?.rows??[],V.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:s??0}})},[w]),L=k.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,d.clsx)(q.default.filterContent),count:n.length,"data-testid":(0,c.tid)("logs","source-filter"),onClearFilter:()=>y({sources:void 0,preset:null}),onExpand:()=>C(!0),title:"Resource",children:(0,t.jsx)(Y.LogFilter,{hideSearch:!0,isCountLoading:S,onChange:e=>{y({sources:e.sort(),preset:null}),N({eventTrigger:"filter click",filter:"sources",value:e.sort()})},options:k,selectedOptions:n,totalAvailableOptions:L})})}function es(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:u,requestPaths:p,caches:h,statusCodes:m,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,E.useLogsQueryState)(),[b,C]=(0,s.useState)(!1),{data:w,isLoading:S}=M({attributeName:"requestTags",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:u,requestPaths:p,caches:h,statusCodes:m,environments:x,branches:g,sources:n,sessionIds:f,traceIds:j,forceEmpty:!b,invocationIds:v}),{trackFilterUse:N}=B(),k=(0,s.useMemo)(()=>{let e;return e=w?.rows??[],Z.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:s??0}})},[w]),L=k.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,d.clsx)(q.default.filterContent),count:i.length,"data-testid":(0,c.tid)("logs","request-tags-filter"),onClearFilter:()=>y({requestTags:void 0,preset:null}),onExpand:()=>C(!0),title:"Request Type",children:(0,t.jsx)(Y.LogFilter,{hideSearch:!0,isCountLoading:S,onChange:e=>{y({requestTags:e.sort(),preset:null}),N({eventTrigger:"filter click",filter:"requestTags",value:e.sort()})},options:k,selectedOptions:i,totalAvailableOptions:L})})}function er(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,requestMethods:u,statusCodes:p,caches:h,environments:m,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=B(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=M({attributeName:"domain",attributeNameSearchQuery:y,levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:d,requestMethods:u,statusCodes:p,caches:h,environments:m,branches:x,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>{let e=N?.rows??[];return n.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(Y.generateFilterOption)},[N,n]),I=N?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:n.length,"data-testid":(0,c.tid)("group-logs","domain-filter"),onClearFilter:()=>v({domains:void 0,preset:null}),onExpand:()=>S(!0),title:"Host",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({domains:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"domains",value:Array(e.length).fill("")})},onSearch:b,options:T,searchId:"search-hosts",searchLabel:"Search hosts",searchPlaceholder:"Search hosts…",selectedOptions:n,showSelectedOptionsAtTop:!0,totalAvailableOptions:I})})}var ea=e.i(5499338),el=e.i(6094744),eo=e.i(3981247);e.i(3182268);var en=e.i(7849855),ei=e.i(4396019);function ed(){let{state:{levels:e,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:u,requestMethods:p,caches:h,environments:m,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),{isDeploymentEditable:y}=(0,el.usePageConfig)(),{trackFilterUse:b}=B(),[C,w]=(0,s.useState)(""),[S,N]=(0,s.useState)(!1),{data:k,isLoading:L}=M({attributeName:"deploymentId",attributeNameSearchQuery:C,deploymentIds:a,levels:e,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:u,requestMethods:p,caches:h,environments:m,branches:x,sessionIds:g,traceIds:f,forceEmpty:!y||!S,invocationIds:j}),{teamSlug:T,projectSlug:I}=(0,en.useProjectAndTeamSlug)(),{data:D}=(0,eo.useRollingRelease)({teamIdOrSlug:T,projectSlug:I}),{deployment:F}=(0,ei.useProjectProductionDeployment)(I??void 0),A=D?.rollingRelease,R=A?.currentDeployment?.id,O=A?.canaryDeployment?.id,P=!a,$=(0,s.useMemo)(()=>{if(!R||!O)return[];let e=[];return k?.rows?.forEach(s=>{let a=s.attributeValue,l=F?.id===a,o=a===O;l?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(ea.Badge,{size:"sm",variant:"green-subtle",children:"Current"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):o?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(ea.Badge,{size:"sm",variant:"blue-subtle",children:"Canary"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):e.push({label:a,value:`${a}`,count:s.total})}),e.sort((e,t)=>{let s=F?.id===e.value,r=O&&e.value===O,a=F?.id===t.value,l=O&&t.value===O;return s&&!a?-1:!s&&a?1:r&&!l?-1:!r&&l?1:0})},[R,O,k?.rows,F?.id]),z=k?.availableOptions??0;return y?(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:a.length,"data-testid":(0,c.tid)("logs","deployment-filter"),onClearFilter:()=>v({deploymentIds:void 0,preset:null}),onExpand:()=>N(!0),title:"Deployment ID",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:P,isLoading:L,onChange:e=>{v({deploymentIds:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"deploymentIds",value:Array(e.length).fill("")})},onSearch:w,options:$,searchId:"search-deployment-ids",searchLabel:"Search deployment IDs",searchPlaceholder:"Search deployment IDs…",selectedOptions:a,showSelectedOptionsAtTop:!0,totalAvailableOptions:z})}):null}function ec(){let{state:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,domains:o,requestPaths:n,sources:i,requestTags:d,environments:u,branches:p,requestMethods:h,caches:m,statusCodes:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=B(),{functionFilterDefaultExpanded:w}=(0,el.usePageConfig)(),[S,N]=(0,s.useState)(w),{data:k,isLoading:L}=M({attributeName:"route",attributeNameSearchQuery:y,domains:o,forceEmpty:!S,levels:r,requestPaths:n,environments:u,branches:p,deploymentDomains:a,deploymentIds:l,statusCodes:x,requestMethods:h,caches:m,sources:i,requestTags:d,sessionIds:g,traceIds:f,invocationIds:j}),T=!k,I=(0,s.useMemo)(()=>{let t=k?.rows??[];return e.filter(e=>!t.find(t=>t.attributeValue===e)).forEach(e=>{t.push({attributeValue:e,total:0})}),t.map(Y.generateFilterOption)},[k,e]),D=k?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:e.length,"data-testid":(0,c.tid)("logs","route-filter"),defaultExpanded:w,onClearFilter:()=>v({routes:void 0,preset:null}),onExpand:()=>N(!0),title:"Route",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:T,isLoading:L,onChange:e=>{v({routes:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"routes",value:Array(e.length).fill("")})},onSearch:b,options:I,searchId:"search-routes",searchLabel:"Search Routes",searchPlaceholder:"Search Routes…",selectedOptions:e,showSelectedOptionsAtTop:!0,totalAvailableOptions:D})})}var eu=e.i(5627633),ep=e.i(3793583),eh=e.i(1794286),em=e.i(5255926),ex=e.i(2992903),eg=e.i(5338940),ef=e.i(8063555);e.i(6483798);var ej=e.i(8287059);e.i(6837494);var ev=e.i(4896489),ey=e.i(294613);function eb(){let e=(0,ej.useOpenUpgradeModal)(),s=(0,ev.useOpenEnableModal)(),{team:r}=(0,eg.useTeam)(),{maxTimeRange:a,maxRetention:l,isLoading:o,teamId:n,hasExtendedTimeline:i}=(0,ef.useUserRetention)(),{state:{startDate:d,endDate:u},setState:p}=(0,E.useLogsQueryState)(),{startDate:h,endDate:m,timeline:x}=(0,E.useLogsApiParams)(),{trackFilterUse:g}=B(),f=Date.now(),j=(0,ep.sub)(f,a).getTime(),v=d&&u?void 0:x,{presets:y,presetValue:b}=(()=>{let t=function(){let e=new Date;return[{key:"past30Minutes",text:"Last 30 minutes",start:(0,ep.sub)(e,{minutes:30}),end:e},{key:"pastHour",text:"Last hour",start:(0,ep.sub)(e,{hours:1}),end:e},{key:"past12Hours",text:"Last 12 hours",start:(0,ep.sub)(e,{hours:12}),end:e},{key:"pastDay",text:"Last day",start:(0,ep.sub)(e,{days:1}),end:e},{key:"past3Days",text:"Last 3 days",start:(0,ep.sub)(e,{days:3}),end:e},{key:"pastWeek",text:"Last week",start:(0,ep.sub)(e,{weeks:1}),end:e},{key:"past2Weeks",text:"Last 2 weeks",start:(0,ep.sub)(e,{weeks:2}),end:e}]}(),l=r?.billing?.plan??"hobby",o=t.map(e=>{let t=e.start.getTime(),s=!1,r=null;if(!i&&t<j)if(s=!0,"hobby"===l){let e=(0,ey.getMaxRetention)(!1,"pro");r=t>=(0,ep.sub)(f,e).getTime()?"pro":"observability-plus"}else r="observability-plus";return{...e,key:e.start.getTime()===j?"maximum":e.key,needsUpgrade:s,upgradeType:r}});o.some(e=>e.start.getTime()===j)||o.push({key:"maximum",text:`Last ${(0,eu.formatDuration)(a)}`,start:new Date(j),end:new Date,needsUpgrade:!1,upgradeType:null});let d=v?o.find(e=>e.key===v):void 0,c=[{presets:o.filter(e=>!e.needsUpgrade)}];if("hobby"===l){let t=o.filter(e=>e.needsUpgrade&&"pro"===e.upgradeType).map(t=>({...t,onClick:()=>{e({teamHint:n,source:"logs-timeline-filter",onConversionSuccess:()=>{p({preset:null,timeline:t.key})}})}}));t.length>0&&c.push({title:"Upgrade to Pro",divider:!0,presets:t})}let u=o.filter(e=>e.needsUpgrade&&"observability-plus"===e.upgradeType).map(e=>({...e,onClick:()=>{s({via:"logs-date-range-select"}),(0,ex.track)("Observability Upsell Clicked",{region:"logs-date-range-select"})}}));return u.length>0&&c.push({title:"Observability Plus",divider:!0,presets:u}),{presets:c,presetValue:d}})();return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,"data-testid":(0,c.tid)("logs","timeline-filter"),defaultExpanded:!0,title:"Timeline",children:"maximum"===x&&o?(0,t.jsx)(em.Skeleton,{height:40,width:"100%"}):(0,t.jsx)(eh.Calendar,{allowClear:!1,compact:!0,maxValue:f,minValue:(0,ep.sub)(f,l).getTime(),maxDuration:a,value:b||{start:d??h,end:u??m},width:"100%",dataTestId:(0,c.tid)("group-logs","calendar"),onChange:(e,t)=>{g({eventTrigger:"filter click",filter:"timeline",value:[t||"custom"]}),t?p({preset:null,timeline:t}):p({preset:null,startDate:new Date(e.start),endDate:new Date(e.end)})},presets:y,presetKey:v})})}var eC=e.i(9338892),ew=e.i(5869491);function e_(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,requestPaths:n,statusCodes:i,requestMethods:d,caches:u,environments:p,branches:h,sources:m,requestTags:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=B(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=M({attributeName:"statusCode",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestPaths:n,requestMethods:d,caches:u,environments:p,branches:h,forceEmpty:!w,sources:m,requestTags:x,sessionIds:g,traceIds:f,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>(N?.rows??[]).reduce((e,t)=>{if("-1"!==t.attributeValue){let s=(e=>{let{attributeValue:t,total:s}=e,r="None"!==t?ew.statusCodes[t]:void 0,a=r?.message??"";return{label:`${t} ${a}`,value:`${t}`,count:s}})(t);e.push(s)}return e},[]),[N?.rows]),I=T.length;i.filter(e=>!T.find(t=>String(t.value)===e)).forEach(e=>{T.push({label:e,value:e,count:0})});let D=(0,s.useMemo)(()=>y?(0,eC.matchSorter)(T,y,{keys:["label"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):T,[T,y]);return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:i.length,"data-testid":(0,c.tid)("logs","status-filter"),onClearFilter:()=>v({statusCodes:void 0,preset:null}),onExpand:()=>S(!0),title:"Status Code",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({statusCodes:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"responseStatusCodes",value:e.sort()})},onSearch:b,options:D,searchId:"search-status",searchLabel:"Search status",searchPlaceholder:"Search status…",selectedOptions:i,showSelectedOptionsAtTop:!0,totalAvailableOptions:I})})}function eS(){let{state:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,domains:i,sources:d,requestTags:u,requestMethods:p,caches:h,statusCodes:m,requestPaths:x,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,E.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=B(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=M({attributeName:"requestPath",attributeNameSearchQuery:y,domains:i,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,statusCodes:m,sources:d,requestTags:u,requestMethods:p,caches:h,routes:e,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>{let e=N?.rows??[];return x.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(Y.generateFilterOption)},[N,x]),I=N?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:x.length,"data-testid":(0,c.tid)("logs","request-path-filter"),onClearFilter:()=>v({requestPaths:void 0,preset:null}),onExpand:()=>S(!0),title:"Request Path",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({requestPaths:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"requestPaths",value:Array(e.length).fill("")})},onSearch:b,options:T,searchId:"search-request-paths",searchLabel:"Search request paths",searchPlaceholder:"Search request paths…",selectedOptions:x,showSelectedOptionsAtTop:!0,totalAvailableOptions:I})})}function eN(e){let{isLoadingEnvs:r,allEnvironments:a}=e,{state:{routes:l,deploymentDomains:o,deploymentIds:n,domains:i,sources:d,requestTags:c,requestPaths:u,levels:p,requestMethods:h,statusCodes:m,caches:x,environments:g,branches:f,sessionIds:j,traceIds:v,invocationIds:y},setState:b}=(0,E.useLogsQueryState)();a=a.filter(e=>"production"===e.id||"preview"===e.id);let{trackFilterUse:C}=B(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=M({attributeName:"environment",domains:i,deploymentDomains:o,deploymentIds:n,sources:d,requestTags:c,routes:l,requestMethods:h,levels:p,statusCodes:m,requestPaths:u,caches:x,branches:f,sessionIds:j,traceIds:v,forceEmpty:!w,invocationIds:y}),L=(0,s.useMemo)(()=>{let e;return e=N?.rows,a.map(t=>{let s=t.name??t.slug,r=e?.find(e=>e.attributeValue===t.id)?.total??0;return{label:s,value:t.id,count:r}}).sort((e,t)=>t.count-e.count)},[N,a]),T=(0,s.useMemo)(()=>k&&!!r,[k,r]),I=L.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:g.length,onClearFilter:()=>b({environments:void 0}),onExpand:()=>S(!0),title:"Environment",children:(0,t.jsx)(Y.LogFilter,{hideSearch:!0,isCountLoading:T,onChange:e=>{b({environments:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"environments",value:e.sort()})},options:L,searchId:"search-environment",searchLabel:"Search environment",searchPlaceholder:"Search environment…",selectedOptions:g,totalAvailableOptions:I})})}function ek(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,requestPaths:u,caches:p,environments:h,branches:m,sessionIds:x,traceIds:g,invocationIds:f},setState:j}=(0,E.useLogsQueryState)(),{trackFilterUse:v}=B(),[y,b]=(0,s.useState)(!1),[C,w]=(0,s.useState)(""),{data:S,isLoading:N}=M({attributeName:"branch",attributeNameSearchQuery:C,deploymentIds:a,deploymentDomains:r,levels:e,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,caches:p,environments:h,requestPaths:u,sessionIds:x,traceIds:g,forceEmpty:!y,invocationIds:f}),k=!S,L=(0,s.useMemo)(()=>{let e=S?.rows??[];return m.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(Y.generateFilterOption)},[S,m]),T=S?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:m.length,onClearFilter:()=>j({branches:void 0}),onExpand:()=>b(!0),title:"Branch",children:(0,t.jsx)(Y.LogFilter,{isFirstLoading:k,isLoading:N,onChange:e=>{j({branches:e.sort(),preset:null}),v({eventTrigger:"filter click",filter:"branches",value:Array(e.length).fill("")})},onSearch:w,options:L,searchId:"search-branches",searchLabel:"Search branches",searchPlaceholder:"Search branches…",selectedOptions:m,showSelectedOptionsAtTop:!0,totalAvailableOptions:T})})}function eL(){let{state:{routes:e,deploymentDomains:r,deploymentIds:a,domains:l,sources:o,requestTags:n,levels:i,requestMethods:d,requestPaths:c,statusCodes:u,environments:p,branches:h,caches:m,sessionIds:x,traceIds:g,invocationIds:f},setState:j}=(0,E.useLogsQueryState)(),[v,y]=(0,s.useState)(!1),{data:b,isLoading:C}=M({attributeName:"cache",domains:l,deploymentDomains:r,deploymentIds:a,sources:o,requestTags:n,routes:e,requestMethods:d,requestPaths:c,levels:i,environments:p,branches:h,statusCodes:u,sessionIds:x,traceIds:g,forceEmpty:!v,invocationIds:f}),w=(0,s.useMemo)(()=>{let e;return e=b?.rows,X.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:s??0}}).sort((e,t)=>t.count-e.count)},[b]),S=w.length,{trackFilterUse:N}=B();return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:m.length,onClearFilter:()=>j({caches:void 0,preset:null}),onExpand:()=>y(!0),title:"Cache",children:(0,t.jsx)(Y.LogFilter,{hideSearch:!0,isCountLoading:C,onChange:e=>{j({preset:null,caches:e.sort()}),N({eventTrigger:"filter click",filter:"vercelCaches",value:e.sort()})},options:w,searchId:"search-cache",searchLabel:"Search cache",searchPlaceholder:"Search cache…",selectedOptions:m,showSelectedOptionsAtTop:!0,totalAvailableOptions:S})})}function eT(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestMethods:u,requestPaths:p,statusCodes:h,caches:m,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,E.useLogsQueryState)(),[b,C]=(0,s.useState)(""),{trackFilterUse:w}=B(),[S,N]=(0,s.useState)(!1),{data:k,isLoading:L}=M({attributeName:"requestMethod",levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:p,statusCodes:h,caches:m,domains:n,environments:x,branches:g,sessionIds:f,traceIds:j,forceEmpty:!S,invocationIds:v}),T=(0,s.useMemo)(()=>{let e,t=(e=k?.rows,Q.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:s??0}}).sort((e,t)=>t.count-e.count));return b?(0,eC.matchSorter)(t,b,{keys:["value"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):t},[b,k]),I=k?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,d.clsx)(q.default.filterContent),count:u.length,"data-testid":(0,c.tid)("logs","request-method-filter"),onClearFilter:()=>y({requestMethods:void 0,preset:null}),onExpand:()=>N(!0),title:"Request Method",children:(0,t.jsx)(Y.LogFilter,{isCountLoading:L,onChange:e=>{w({eventTrigger:"filter click",filter:"requestMethods",value:e.sort()}),y({requestMethods:e.sort(),preset:null})},onSearch:C,options:T,searchId:"search-request-method",searchLabel:"Search request methods",searchPlaceholder:"Search request methods…",selectedOptions:u,showSelectedOptionsAtTop:!0,totalAvailableOptions:I})})}function eE(e){let{isLoadingEnvs:s,allEnvironments:a}=e,{hasActiveFilters:l}=(0,E.useLogsQueryState)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Stack,{align:"center",className:q.default.titleContainer,direction:"row",justify:"space-between",children:[(0,t.jsx)(r.Stack,{children:(0,t.jsx)(eF,{})}),(0,t.jsx)(r.Stack,{direction:"row",gap:2,children:l()&&(0,t.jsx)(eA,{size:"small"})})]}),(0,t.jsx)(eq,{allEnvironments:a,isLoadingEnvs:s})]})}function eI(e){let{isLoadingEnvs:r,allEnvironments:a,active:l,...o}=e,n=(0,x.useIsMobile)(),[i,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!l){let e=setTimeout(()=>{d(!0)},500);return()=>clearTimeout(e)}d(!1)},[l]),(l||!i)&&n)?(0,t.jsx)(eD,{active:l,allEnvironments:a,isLoadingEnvs:r,...o}):null}function eD(e){let{isLoadingEnvs:s,allEnvironments:a,active:l,onDismiss:o}=e,{hasActiveFilters:n}=(0,E.useLogsQueryState)();return(0,t.jsxs)(w.Modal.Modal,{active:l,"data-testid":(0,c.tid)("group-logs","filters-modal"),drawerHeight:"max",drawerVerticalScroll:!0,onClickOutside:o,children:[(0,t.jsx)(w.Modal.Body,{className:q.default.modalBody,children:(0,t.jsxs)(r.Stack,{className:q.default.modalMain,children:[n()?(0,t.jsx)(r.Stack,{className:(0,d.clsx)("geist-show-on-mobile",q.default.filterContent,q.default.first),gap:2,children:(0,t.jsx)(eA,{})}):null,(0,t.jsx)(eq,{allEnvironments:a,isLoadingEnvs:s})]})}),(0,t.jsx)(w.Modal.Actions,{children:(0,t.jsx)(w.Modal.Action,{"data-testid":(0,c.tid)("group-logs","filters-modal-apply"),fullWidth:!0,onClick:o,children:"Apply"})})]})}function eM(e){let{onClick:s}=e,{hasActiveFilters:r}=(0,E.useLogsQueryState)();return(0,t.jsxs)("div",{className:(0,d.clsx)("lg:hidden","relative"),children:[(0,t.jsx)(i.Button,{"aria-label":"Log Filters",className:q.default.modalActiveButton,"data-testid":(0,c.tid)("group-logs","filters-modal-button"),passthroughOnClick:s,shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(b.SettingsSliders,{})}),r()&&(0,t.jsx)("div",{className:q.default.modalActiveButtonDot})]})}function eF(){return(0,t.jsx)(C.Text,{className:q.default.title,size:14,weight:600,children:"Filters"})}function eq(e){let{isLoadingEnvs:s,allEnvironments:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eb,{}),(0,t.jsx)(ee,{}),(0,t.jsx)(eN,{allEnvironments:r,isLoadingEnvs:s}),(0,t.jsx)(ec,{}),(0,t.jsx)(eS,{}),(0,t.jsx)(e_,{}),(0,t.jsx)(et,{}),(0,t.jsx)(es,{}),(0,t.jsx)(er,{}),(0,t.jsx)(eT,{}),(0,t.jsx)(eL,{}),(0,t.jsx)(ek,{}),(0,t.jsx)(ed,{})]})}function eA(e){let{onClick:s,...r}=e,{setState:a}=(0,E.useLogsQueryState)(),l=(0,x.useIsMobile)(),{isDeploymentEditable:o}=(0,el.usePageConfig)();return(0,t.jsx)(i.Button,{onClick:e=>{let t={startDate:void 0,endDate:void 0,page:1,timeline:void 0,preset:null,levels:void 0,sources:void 0,domains:void 0,routes:void 0,requestPaths:void 0,requestIds:void 0,searchQuery:l?void 0:"",requestMethods:void 0,statusCodes:void 0,caches:void 0,branches:void 0,environments:void 0,myLogs:void 0,hasTraces:void 0,traceIds:void 0,sessionIds:void 0,invocationIds:void 0};o&&(t.deploymentDomains=void 0,t.deploymentIds=void 0),a(t),s?.(e)},touchEventWorkaround:!0,type:"secondary",...r,children:"Reset"})}var eR=e.i(691329),eO=e.i(5955443),eP=e.i(7511168),eB=e.i(1201436),e$=e.i(1933683),ez=e.i(4141852),eW=e.i(8004707),eG=e.i(8713146),eH=e.i(109803),eV=e.i(9138164),eU=e.i(1000031),eQ=e.i(1802690),eX=e.i(2560270),eZ=e.i(7399351),eJ=e.i(6942035),eK=e.i(1230902),eY=e.i(8923565),e0=e.i(455575),e1=e.i(5257834),e2=e.i(57106),e3=e.i(9031150),e5=e.i(1637579),e6=e.i(4837983),e4=e.i(9307255),e8=e.i(545405),e9=e.i(6625227),e7=e.i(3126613),te=e.i(1542949),tt=e.i(9375869),ts=e.i(349746);function tr(){return(0,t.jsxs)("svg",{fill:"none",height:"48",viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:"#FAFAFA",height:"48",rx:"24",width:"48"}),(0,t.jsx)("path",{d:"M29 30.6667V22.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M24 30.6667V17.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M19 30.6667V25.6667",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}var ta=e.i(8300708),tl=e.i(7827812);function to(){let e=(0,h.useSearchParams)();return(0,I.tokenizeSearchQuery)(e?.get("searchQuery")??"")}var tn=e.i(3219703),ti=e.i(8735244),td=e.i(1286423),tc=e.i(516467);function tu(e){return+(0,tc.toDate)(e)>Date.now()}var tp=e.i(277234),th=e.i(2126130),tm=e.i(5468328),tx=e.i(2988836),tg=e.i(6982071),tf=e.i(4569307),tj=e.i(4099936),tv=e.i(8313680);function ty(e){let{type:s,className:r}=e,a={className:r};return"blob"===s?(0,t.jsx)(tj.Blob,{...a}):"edge-config"===s?(0,t.jsx)(tv.EdgeConfig,{...a}):null}function tb(e){let{requestMethod:s,icon:r}=e;return(0,t.jsxs)("span",{className:"inline-flex flex-row items-center gap-1 rounded-sm border border-gray-300 px-1 font-mono text-xs font-medium uppercase text-gray-800",children:[r,s]})}function tC(e){let{statusCode:s,reason:r}=e,a=(0,tf.getStatusCodeType)(s),l=null,o=null,n={fill:"none",height:"6",viewBox:"0 0 6 6",width:"6",xmlns:"http://www.w3.org/2000/svg"};return a===tf.StatusType["2XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#46A758",r:"2"})}):a===tf.StatusType["3XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#0070F3",r:"2"})}):a===tf.StatusType["4XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0.5L5.59808 5H0.401924L3 0.5Z",fill:"#FF990A"})}):a===tf.StatusType["5XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"#CA2A30"})}):-1===s&&(r?(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-red-900)"}),(0,t.jsx)("line",{stroke:"var(--ds-red-900)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o=`Fetch failed with reason: ${r}`):(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-gray-800)"}),(0,t.jsx)("line",{stroke:"var(--ds-gray-800)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o="Timed out while waiting for a response")),(0,t.jsx)(tm.Tooltip,{delay:!1,text:o??(0,t.jsx)(tn.StatusCodeBadge,{full:!0,monochrome:!0,statusCode:s}),children:l})}var tw=e.i(3617058);function t_(e){let{className:s}=e;return(0,t.jsxs)("div",{className:(0,tw.twMerge)("flex items-center text-gray-300",s),children:[(0,t.jsx)("div",{className:"absolute h-[7px] w-full border-x border-current"}),(0,t.jsx)("div",{className:"absolute h-px w-full bg-current"})]})}function tS(e){let{startTime:s,endTime:r,className:a,traces:l}=e;return(0,t.jsx)("div",{className:(0,tw.twMerge)("relative flex items-center text-gray-600",a),children:(0,t.jsxs)("div",{className:"relative mx-0.5 flex size-full items-center",children:[(0,t.jsx)(t_,{}),l.map((e,a)=>{let{traceStart:l,traceEnd:o,className:n}=e,i=(l-s)/(r-s)*100,c=(o-l)/(r-s)*100,u=`${i.toString()+c.toString()+a.toString()}`;return(0,t.jsxs)("div",{className:"relative ml-px mr-[2px] flex w-full",children:[(0,t.jsx)("div",{style:{width:`${i}%`}}),(0,t.jsx)(tm.Tooltip,{delay:!1,position:"top",text:`Started after ${l-s}ms`,children:(0,t.jsx)("div",{className:(0,d.clsx)("absolute my-6 mr-1 h-[5px] min-w-[2px] rounded-[1px] bg-current",n),style:{width:`${c}%`}})})]},u)})]})})}var tN=e.i(3848869),tk=e.i(7432042);let tL=["cache-get","cache-set","fetch-set","fetch-get"],tT={"cache-get":"GET","cache-set":"SET","fetch-get":"GET","fetch-set":"SET"};function tE(e){let{fetchType:s}=e;return tL.includes(s)?(0,t.jsxs)("span",{className:"relative inline-flex items-center gap-1 rounded-sm bg-gray-100 px-1 py-px font-mono text-xs uppercase text-gray-800",children:[(0,t.jsx)("svg",{fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{clipRule:"evenodd",d:"M2.47653 1.08941C3.40636 0.717474 4.65234 0.5 6 0.5C7.34766 0.5 8.59364 0.717474 9.52347 1.08941C9.98683 1.27475 10.3995 1.50951 10.7056 1.79898C11.0129 2.08957 11.25 2.47411 11.25 2.9375V6.5V10.0625C11.25 10.5259 11.0129 10.9104 10.7056 11.201C10.3995 11.4905 9.98683 11.7253 9.52347 11.9106C8.59364 12.2825 7.34766 12.5 6 12.5C4.65234 12.5 3.40636 12.2825 2.47653 11.9106C2.01317 11.7253 1.60045 11.4905 1.29437 11.201C0.987098 10.9104 0.75 10.5259 0.75 10.0625V6.5V2.9375C0.75 2.47411 0.987098 2.08957 1.29437 1.79898C1.60045 1.50951 2.01317 1.27475 2.47653 1.08941ZM1.875 4.49811V6.5C1.875 6.55438 1.90024 6.66309 2.06737 6.82115C2.23568 6.98033 2.50943 7.14959 2.89434 7.30356C3.66105 7.61024 4.75882 7.8125 6 7.8125C7.24118 7.8125 8.33895 7.61024 9.10566 7.30356C9.49057 7.14959 9.76432 6.98033 9.93263 6.82115C10.0998 6.66309 10.125 6.55438 10.125 6.5V4.49811C9.93882 4.60473 9.7365 4.70038 9.52347 4.78559C8.59364 5.15753 7.34766 5.375 6 5.375C4.65234 5.375 3.40636 5.15753 2.47653 4.78559C2.2635 4.70038 2.06118 4.60473 1.875 4.49811ZM10.125 2.9375C10.125 2.99188 10.0998 3.10059 9.93263 3.25865C9.76432 3.41783 9.49057 3.58709 9.10566 3.74106C8.33895 4.04774 7.24118 4.25 6 4.25C4.75882 4.25 3.66105 4.04774 2.89434 3.74106C2.50943 3.58709 2.23568 3.41783 2.06737 3.25865C1.90024 3.10059 1.875 2.99188 1.875 2.9375C1.875 2.88312 1.90024 2.77441 2.06737 2.61635C2.23568 2.45717 2.50943 2.28791 2.89434 2.13394C3.66105 1.82726 4.75882 1.625 6 1.625C7.24118 1.625 8.33895 1.82726 9.10566 2.13394C9.49057 2.28791 9.76432 2.45717 9.93263 2.61635C10.0998 2.77441 10.125 2.88312 10.125 2.9375ZM10.125 8.06061C9.93882 8.16723 9.7365 8.26288 9.52347 8.34809C8.59364 8.72003 7.34766 8.9375 6 8.9375C4.65234 8.9375 3.40636 8.72003 2.47653 8.34809C2.2635 8.26288 2.06118 8.16723 1.875 8.06061V10.0625C1.875 10.1169 1.90024 10.2256 2.06737 10.3836C2.23568 10.5428 2.50943 10.7121 2.89434 10.8661C3.66105 11.1727 4.75882 11.375 6 11.375C7.24118 11.375 8.33895 11.1727 9.10566 10.8661C9.49057 10.7121 9.76432 10.5428 9.93263 10.3836C10.0998 10.2256 10.125 10.1169 10.125 10.0625V8.06061Z",fill:"#8F8F8F",fillRule:"evenodd"})}),tT[s]]}):null}function tI(e){let{title:s,children:r}=e;return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,t.jsx)("div",{className:"text-gray-700",children:s}),(0,t.jsx)("div",{children:r})]})}function tD(e){let{cache:s}=e,r=s.hit?"HIT":"MISS";return(0,t.jsxs)("div",{className:"flex flex-col gap-1 gap-y-2 overflow-hidden",children:["VSC_GET"===s.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tI,{title:"Cache Status",children:s.stale>0?"Stale":r}),s.revalidated>0?(0,t.jsx)(tI,{title:"Revalidated",children:"YES"}):null,0!==s.age?(0,t.jsx)(tI,{title:"Age",children:(0,tk.default)(1e3*s.age)}):null]}):null,s.revalidate_after>0?(0,t.jsxs)(tI,{title:"Revalidate After",children:[(0,tN.formatDistanceStrict)(0,1e3*s.revalidate_after)," ",s.revalidate_after>1e3&&s.revalidate_after<1e5?(0,t.jsxs)("span",{className:"text-gray-700",children:["(",s.revalidate_after,"s)"]}):null]}):null,s.tags.length>0?(0,t.jsx)(tI,{title:"Tags",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-1 overflow-y-scroll",children:s.tags.map(e=>(0,t.jsx)(ea.Badge,{className:"normal-case",size:"sm",variant:"blue",children:e},e))})}):null]})}let tM="inline-block flex-1 cursor-pointer truncate bg-transparent p-0 text-left text-[12px] font-mono";function tF(e){let s,{request:r,additionalMetrics:a,startTime:l,endTime:o,createCopyHandler:n,longestMethodLength:i,shouldConnectToNext:c,lite:u,onUpgradePressed:p}=e,m=(0,h.useParams)(),x=(0,tf.getStatusCodeType)(r.http_status),g=`${r.request_hostname}${r.request_path}`,{isRuntimeCache:f,requestType:j,isRevalidate:v}=(0,tf.resolveRuntimeCacheProps)(g,r),{store:y,isStore:b,isLoading:C}=(0,tf.useGetStoreFromHostname)(r.request_hostname,r.request_path),w=g;g.endsWith("_vercel/insights/event")&&(w="Web Analytics Event"),tf.SUSPENSE_CACHE_HOSTNAME_REGEX.test(g)&&(w=v?"Revalidate Cache":f?r.cache_item_id||"Runtime Cache":"Data Cache"),(tf.readFromCache.includes(r.fetch_type)||f&&"cache-get"===j)&&c&&(w=`Reading Cache${404===r.http_status?" (Miss)":""}`),(tf.writeToCache.includes(r.fetch_type)||f&&"cache-set"===j)&&(w="Updating Cache"),!C&&b&&y&&m&&(w=`${y.name}`,s=`/${m.teamSlug}/~/stores/${y.type}/${y.id}`);let _=n(g),S=tL.includes(r.fetch_type)||f&&!v&&!!j,N=!c&&(tf.readFromCache.includes(r.fetch_type)||f&&"cache-get"===j),k=(0,t.jsxs)(t.Fragment,{children:[N?(0,t.jsx)("span",{className:"border-indigo-500 mr-1 border-r pr-1 text-gray-900",children:"Using cache"}):null,(0,t.jsx)("span",{className:(0,d.clsx)("truncate",s&&"hover:underline",N?"text-gray-700":"text-gray-900"),children:C?(0,t.jsx)(em.Skeleton,{as:"span",height:15,width:36}):w})]});return(0,t.jsxs)("div",{className:(0,d.clsx)("grid-cols-[8fr,1fr]","group relative grid h-[24px] w-full  items-center gap-2 border-none bg-transparent transition-opacity duration-200 ease-in-out"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-1 truncate",children:[(0,t.jsxs)("div",{className:"flex items-center",style:{...i&&{minWidth:`calc(${i}ch + 1px)`}},children:[c?(0,t.jsx)("div",{className:"absolute bottom-1 left-[9.5px] h-2 w-[1.5px] translate-y-full bg-gray-300"}):null,S?(0,t.jsx)(tE,{fetchType:f?j||"":r.fetch_type}):(0,t.jsx)(tb,{icon:y?(0,t.jsx)(ty,{className:"size-3",type:y.type}):void 0,requestMethod:r.request_method})]}),s?(0,t.jsx)(e2.Link,{className:(0,d.clsx)(tM,"no-underline"),href:s,children:k}):(0,t.jsxs)("button",{className:(0,d.clsx)(tM,"flex"),onClick:_,onKeyPress:_,type:"button",children:[k,S&&r.cache?(0,t.jsx)(tm.Tooltip,{text:(0,t.jsx)(tD,{cache:r.cache}),tooltipClassName:"tailwind-preflight",children:(0,t.jsx)(tx.InformationFillSmall,{className:"ml-2"})}):null]}),(0,t.jsx)("div",{className:"flex gap-1",children:u?(0,t.jsx)(t.Fragment,{children:-1===r.http_status?(0,t.jsx)(tm.Tooltip,{text:(0,t.jsx)("span",{children:"Timed out while waiting for a response"}),wrap:!0,children:(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-red-900",children:"Timeout"})}):(0,t.jsx)(tn.StatusCodeBadge,{statusCode:r.http_status,variant:"small"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tC,{reason:r.reason,statusCode:r.http_status}),(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-gray-1000",children:(0,tf.formatMilliseconds)(r.duration)})]})})]}),u?(0,t.jsx)(tm.Tooltip,{text:(0,t.jsx)("span",{children:"Unlock latency insights with Observability Plus"}),wrap:!0,children:(0,t.jsxs)("button",{"aria-label":"Upgrade to Observability Plus to unlock latency insights",className:"group/lock relative flex h-4 w-full cursor-pointer appearance-none items-center border-none bg-transparent p-0 text-gray-500 focus:outline-none",onClick:()=>{p&&p()},type:"button",children:[(0,t.jsx)("div",{className:"absolute left-1/2 z-10 mx-auto mb-0.5 flex size-4 -translate-x-1/2 justify-center rounded-sm px-1 transition-colors duration-100 ease-in-out group-hover/lock:bg-gray-300 group-hover/lock:text-gray-800",children:(0,t.jsx)(tg.LockClosedSmall,{})}),(0,t.jsx)(t_,{className:"transition-colors duration-100 ease-in-out group-hover/lock:text-gray-500"})]})}):(0,t.jsx)(tS,{className:(0,d.clsx)("min-w-[20px] flex-1",x===tf.StatusType["2XX"]&&"text-green-800",x===tf.StatusType["3XX"]&&"text-blue-700",x===tf.StatusType["4XX"]&&"text-amber-800",x===tf.StatusType["5XX"]&&"text-red-800",-1===r.http_status&&(r.reason?"text-red-900":"text-gray-800")),endTime:o,startTime:l,traces:a?a.map(e=>{let t=(0,tf.getStatusCodeType)(e.http_status);return{className:(0,d.clsx)(t===tf.StatusType["2XX"]&&"!bg-green-800",t===tf.StatusType["3XX"]&&"!bg-blue-700",t===tf.StatusType["4XX"]&&"!bg-amber-800",t===tf.StatusType["5XX"]&&"!bg-red-800"),traceStart:e.timestamp,traceEnd:e.timestamp+e.duration}}):[{traceStart:r.timestamp,traceEnd:r.timestamp+r.duration}]})]})}function tq(e){let{requests:r,startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n}=e,[i,d]=(0,s.useState)(!1),c={startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n};return 1===r.length?(0,t.jsx)(tF,{...c,request:r[0]}):(0,t.jsx)(t.Fragment,{children:r.map((e,t)=>(0,s.createElement)(tF,{...c,key:t,request:e,shouldConnectToNext:(0,tf.checkIfShouldConnectToNext)(r,t)}))})}function tA(e){let{requests:r,startTime:a,endTime:l,className:o}=e,n=(0,e0.useToasts)(),i=(0,x.useIsMobile)(),c=(0,s.useCallback)(e=>t=>{!i&&("key"in t&&"Enter"!==t.key||((0,e8.copyToClipboard)(e),n.message("Request path copied to clipboard")))},[n,i]),{startTime:u,endTime:p}=(0,s.useMemo)(()=>({startTime:Math.min(...r.map(e=>e.timestamp),a),endTime:Math.max(...r.map(e=>e.timestamp+e.duration),l),totalTime:l-a}),[l,r,a]),h=(0,s.useMemo)(()=>{let e=!1,t=!1,s=r.reduce((s,r)=>(tL.includes(r.fetch_type)&&(e=!0),r.request_hostname.includes(".vercel-storage.com")&&(t=!0),r.request_method.length>s)?r.request_method.length:s,0);return t?s+2:e?s+1:s},[r]),m=(0,s.useMemo)(()=>{let e={};return r.forEach((t,s)=>{let r=-1===t.fetch_idx?`${t.request_hostname}${t.request_path}-${t.fetch_idx}-${s}`:`${t.fetch_idx}`;e[r]||(e[r]=[]),e[r].push(t)}),Object.values(e).sort((e,t)=>e[0].timestamp-t[0].timestamp)},[r]);return(0,t.jsx)("div",{className:(0,d.clsx)("relative",o),children:m.map(e=>(0,t.jsx)(tq,{createCopyHandler:c,endTime:p,longestMethodLength:Math.max(h,3),requests:e,startTime:u},`${e[0].timestamp}${e[0].fetch_idx}${e[0].request_path}${e[0].request_hostname}`))})}function tR(e){let{requests:r,className:a,onUpgradePressed:l}=e,o=(0,e0.useToasts)(),n=(0,x.useIsMobile)(),i=(0,s.useCallback)(e=>t=>{!n&&("key"in t&&"Enter"!==t.key||((0,e8.copyToClipboard)(e),o.message("Request path copied to clipboard")))},[o,n]);return(0,t.jsx)("div",{className:(0,d.clsx)("relative mx-2",a),children:r.map(e=>(0,t.jsx)(tF,{createCopyHandler:i,endTime:0,lite:!0,longestMethodLength:4,onUpgradePressed:l,request:e,startTime:0},`${e.fetch_idx}${e.request_path}${e.request_hostname}`))})}function tO(e){let{projectId:a,requestId:l,source:o,startTime:n,endTime:i,enableDataCacheMetrics:d,disableHeader:c,pathType:u}=e,{hasObservabilityPlusAccessOnCurrentProject:p}=(0,th.useHasObservabilityPlus)(),h=(0,ev.useOpenEnableModal)(),{loading:x,data:g,isAwaitingData:f}=function(e){let{requestId:t,projectId:s,source:r,timestamp:a,pathType:l}=e,{team:o}=(0,m.useAccount)(),n=o?.billing?.plan,i=(0,td.addSeconds)(new Date(a),20),d=(0,S.default)(()=>o&&s&&t&&n&&"hobby"!==n?`${k.API_LOGS_FETCH_METRICS}${(0,N.encode)({ownerId:o.id,requestId:t,projectId:s,source:r,pathType:l})}`:null,e=>(0,tp.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tu(i)});return{data:d.data?.data,loading:d.isValidating,error:d.error,isAwaitingData:tu(i)}}({projectId:a,requestId:l,source:"request"!==o?o:void 0,timestamp:n.getTime(),pathType:u}),j=g?.some(e=>e.fetch_type.startsWith("cache-")),{data:v}=function(e){let{requestId:t,projectId:s,timestamp:r,shouldLoad:a}=e,{team:l}=(0,m.useAccount)(),o=l?.billing?.plan,n=(0,td.addSeconds)(new Date(r),15),i=(0,S.default)(()=>l&&s&&t&&o&&"hobby"!==o&&a?`${k.API_LOGS_CACHE_METRICS}${(0,N.encode)({ownerId:l.id,requestId:t,projectId:s})}`:null,e=>(0,tp.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tu(n)});return{data:i.data?.data,loading:i.isValidating,error:i.error,isAwaitingData:tu(n)}}({projectId:a,requestId:l,timestamp:n.getTime(),shouldLoad:d&&j}),y=(0,s.useMemo)(()=>{let e=[...v??[]];return v?g?.map(t=>{let s=e.find(e=>{if(t.cache_item_id===e.item_id&&t.fetch_type.startsWith("cache-")){let s=t.fetch_type.split("-")[1];return e.type.includes(s.toUpperCase())}return!1});return s?(e.splice(e.findIndex(e=>e.item_id===s.item_id),1),{...t,cache:s}):t}):g},[g,v]),b=g&&g.length>0,w=(0,s.useCallback)(()=>{h({from:"observability",via:"request-metrics"}),(0,ex.track)("Observability Upsell Clicked",{region:"logs-request-metrics"})},[h]),_=(0,s.useMemo)(()=>f&&!b?(0,t.jsxs)(r.Stack,{align:"center",className:"mr-0.5",direction:"row",gap:2,children:[(0,t.jsx)(ti.Spinner,{size:16}),(0,t.jsx)(C.Text,{className:"text-gray-800",children:"Awaiting data"})]}):x&&!b?(0,t.jsx)(em.Skeleton,{as:"dd",className:"ml-2",height:20,width:30}):b?p?(0,t.jsx)(tA,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),requests:y??[],startTime:n.getTime()}):(0,t.jsx)(tR,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),onUpgradePressed:w,requests:y??[],startTime:n.getTime()}):(0,t.jsx)(C.Text,{className:"mr-0.5 text-right text-gray-800",children:"No outgoing requests"}),[f,x,b,p,i,y,n,w]);return(0,t.jsx)("div",{className:"tailwind-preflight",children:c?_:(0,t.jsxs)(r.Stack,{className:"w-full justify-between",direction:b?"column":"row",gap:2,style:{position:"relative"},children:[(0,t.jsx)(r.Stack,{align:"center",direction:"row",gap:1,children:(0,t.jsx)(C.Text,{as:"span",color:"gray-900",size:14,children:"External APIs"})}),_]})})}var tP=e.i(9886547),tB=e.i(8225664);function t$(e){let{requestSearchParams:a,inRequestLogs:l}=e,o=(0,e0.useToasts)(),n=`?${Object.keys(a).reduce((e,t)=>`${e}${t}=${a[t]}&`,"").slice(0,-1)}
    `,i=(0,s.useCallback)((e,t)=>{"key"in e&&"Enter"!==e.key||((0,e8.copyToClipboard)(t),o.message(`Copied '${t.split("=")[0]}' param and value to clipboard`))},[o]);return(0,t.jsx)("div",{className:"tailwind-preflight",children:(0,t.jsxs)(r.Stack,{className:(0,d.clsx)("pb-4 pt-2",!l&&"ml-3 border-t"),direction:"column",gap:2,style:{position:"relative"},children:[(0,t.jsxs)(r.Stack,{align:"center",className:(0,d.clsx)("mx-2"),direction:"row",justify:"space-between",children:[(0,t.jsx)(C.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:"Search Params"}),(0,t.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:n,title:"Copy full search params to the clipboard",type:"tertiary"})]}),(0,t.jsx)("ul",{className:"mx-2 flex flex-wrap gap-2",children:Object.keys(a).map(e=>{let s=a[e];try{s=decodeURIComponent(a[e])}catch(e){}let r=`${e}=${s}`;return(0,t.jsxs)("li",{className:"inline-flex max-w-full cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono divide-x",onClick:e=>i(e,r),onKeyDown:e=>i(e,r),children:[(0,t.jsx)("span",{className:"inline-block whitespace-nowrap bg-transparent p-1.5 text-left text-[12px]",title:e,children:e}),(0,t.jsx)("span",{className:"inline-flex items-center overflow-hidden bg-background-200 px-1.5 font-mono font-medium text-gray-900",children:(0,t.jsx)("span",{className:"truncate",title:s,children:s})})]},e)})})]})})}var tz=e.i(1551685),tW=e.i(4670733),tG=e.i(762945),tH=e.i(6226725),tV=e.i(6401841),tU=e.i(8320377),tQ=e.i(846089),tX=e.i(8654638),tZ=e.i(6280036),tJ=e.i(389963),tK=e.i(8087928),tY=e.i(8161149),t0=e.i(248550),t1=e.i(2259462),t2=e.i(4535059),t3=e.i(1568600),t5=e.i(7402201),t6=e.i(4410321);let t4=(0,s.forwardRef)(function(e,s){return(0,t.jsx)("div",{className:t6.default.headerContainer,ref:s,children:(0,t.jsxs)(r.Stack,{align:"center",className:(0,d.clsx)(t6.default.rowContainer,t6.default.header),direction:"row",children:[(0,t.jsx)("div",{className:t6.default.rowItem,style:{flexShrink:0,paddingLeft:16,width:166},children:"Time"}),(0,t.jsx)("div",{className:t6.default.rowItem,style:{flexShrink:0,width:"72px"},children:"Status"}),(0,t.jsx)("div",{className:(0,d.clsx)(t6.default.rowItem,t6.default.truncate),style:{minWidth:"12%",maxWidth:"12%"},children:"Host"}),(0,t.jsx)("div",{className:(0,d.clsx)(t6.default.rowItem,t6.default.truncate),style:{paddingLeft:"35px",minWidth:"calc(max(12%,180px) + 50px)",maxWidth:"calc(400px + 50px)"},children:"Request"}),(0,t.jsx)("div",{className:(0,d.clsx)(t6.default.rowItem,t6.default.truncate),children:"Messages"})]})})});function t8(e){let{logRows:a=[],selectedLogId:l,onRowSelect:o}=e,{state:{live:n,paused:i}}=(0,E.useLogsQueryState)(),u=(0,s.useRef)(!1),p=to(),h=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{a.length>0&&(h.current=new Date(a[0].timestamp).getTime()+1)},[a]);let[m,x]=(0,s.useState)({state:"disabled"});(0,s.useEffect)(()=>n?void x(e=>"enabled"!==e.state?{state:"enabled",ts:h.current||Date.now()}:e):i?void x(e=>({state:"paused",ts:e.ts||Date.now()})):void x(e=>({state:"disabled",ts:e.ts})),[n,i]);let g="disabled"!==m.state&&m.ts?a.findIndex(e=>new Date(e.timestamp).getTime()<m.ts):a.length;"paused"===m.state&&0===g&&(g=a.length);let f=a.slice(0,g),j=a.slice(g);(0,s.useEffect)(()=>{function e(e){"Tab"===e.key&&(u.current=!0)}function t(e){"Tab"===e.key&&(u.current=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]);let{teamSlug:v,projectSlug:y}=(0,en.useProjectAndTeamSlug)(),{data:b}=(0,eo.useRollingRelease)({teamIdOrSlug:v,projectSlug:y}),C=b?.rollingRelease?.state==="ACTIVE"?b.rollingRelease.canaryDeployment:null;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(r.Stack,{className:"tailwind-preflight","data-testid":(0,c.tid)("group-logs","log-rows"),direction:"column",flex:"auto",onFocus:e=>{u.current&&e.target.scrollIntoView({block:"center"})},children:[f.map(e=>{let t=e.requestId===l;return(0,s.createElement)(t7,{...e,highlightedWords:p,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,moveUp:!!(m.ts&&new Date(e.timestamp).getTime()<m.ts),onSelect:o})}),j.length>0?(0,t.jsx)("div",{className:(0,d.clsx)(t6.default.liveModeRow,{[t6.default.paused]:"paused"===m.state}),children:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(t3.PlayFill,{size:10})," Live Mode"]})},m.ts):null,j.map(e=>{let t=e.requestId===l;return(0,s.createElement)(t7,{...e,faded:"enabled"===m.state,highlightedWords:p,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,onSelect:o,previouslyFaded:!!(m.ts&&new Date(e.timestamp).getTime()<m.ts),reverseBackground:!0})})]})})}function t9(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tV.Stop,{"aria-hidden":"true"});case"warning":return(0,t.jsx)(tG.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tH.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}let t7=(0,s.memo)(function(e){let{onSelect:r,isCanary:a,isSelected:l,highlightedWords:o,isNew:n,faded:i,previouslyFaded:c,moveUp:u,reverseBackground:p,...h}=e,m=(0,s.useRef)(null),{value:x}=(0,tW.useEnableAnsiLogs)();(0,s.useEffect)(()=>{m.current&&m.current.scrollIntoView({block:"center"})},[m]);let{resolvedTheme:g}=(0,tZ.useTheme)(),f=new Date(h.timestamp),j=new Set([...h.events].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()).map(e=>{let t=e.source;return"static"===t&&h.events.some(e=>"PRERENDER"===e.cache)&&(t="data-cache"),"serverless"===t&&"middleware"===e.pathType&&(t="serverless-middleware"),t})),v=()=>void(0,e3.awaitPaint)().then(()=>r(h)),y=(0,s.useMemo)(()=>h.hasFunctionCrashed?"fatal":h.statusCode>=500?"error":h.statusCode>=400?"warning":"info",[h.statusCode,h.hasFunctionCrashed]),b=(0,s.useMemo)(()=>{let e=h.logs.toSorted((e,t)=>{let{timestamp:s}=e,{timestamp:r}=t;return new Date(s).getTime()-new Date(r).getTime()}).reverse(),t=e.find(e=>{let{level:t}=e;return"error"===t});if(t)return{style:"text-red-900",text:t.message};let s=e.find(e=>{let{level:t}=e;return"warning"===t});return s?{style:"text-amber-900",text:s.message}:{style:"text-gray-1000",text:e[0]?.message??""}},[h.logs]);return(0,t.jsxs)("div",{className:(0,d.clsx)("flex items-center py-[3px]",t6.default.rowContainer,t6.default[y],{[t6.default.faded]:i,[t6.default.previouslyFaded]:c,[t6.default.moveUp]:u,[t6.default.reverseBackground]:p,[t6.default.isSelected]:l,[t6.default.isNew]:n,[t6.default.darkTheme]:"dark"===g},h.className),"data-log-row-id":h.requestId,onClick:()=>v(),onKeyDown:e=>{"Enter"===e.key&&v()},ref:l?m:void 0,tabIndex:0,children:[(0,t.jsx)("div",{className:"relative flex items-center justify-center pl-2",children:(0,t.jsx)(t9,{level:y})}),(0,t.jsx)("div",{className:(0,d.clsx)(t6.default.rowItem,t6.default.uppercase,t6.default.truncate),style:{flexShrink:0},children:(0,t.jsxs)(t5.EllapsedTimeTooltip,{content:{timestamp:f.getTime()},children:[(0,t.jsx)("span",{className:"opacity-60",children:(0,eK.format)(f,"MMM dd ")}),(0,t.jsx)("span",{className:"opacity-100",children:(0,eK.format)(f,"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-60",children:(0,eK.format)(f,".SS")})]})}),(0,t.jsxs)("div",{className:t6.default.rowItem,style:{flexShrink:0,width:"72px",justifyContent:"space-between"},children:[(0,t.jsx)(tn.RequestMethodBadge,{method:h.requestMethod,variant:"small"}),(0,t.jsx)(tn.StatusCodeBadge,{statusCode:h.statusCode,variant:"small"})]}),(0,t.jsxs)("div",{className:(0,d.clsx)(t6.default.rowItem),style:{minWidth:"12%",maxWidth:"12%"},children:[a?(0,t.jsx)("div",{style:{opacity:.6,paddingRight:"3px"},children:(0,t.jsx)(ea.Badge,{size:"sm",variant:"green-subtle",children:"Canary"})}):null,(0,t.jsx)(tJ.MaybeTooltip,{text:h.domain,tooltipContainerClassName:t6.default.tooltipContainer,tooltipClassName:t6.default.tooltip})]}),(0,t.jsx)("div",{className:"ml-4 px-2",children:(0,t.jsx)("div",{className:"-space-x-px flex justify-end",style:{width:"25px",height:"16px",opacity:.6},children:Array.from(j).map((e,s,r)=>(0,t.jsx)("div",{style:s!==r.length-1?{clipPath:"path('M13.7639 0H0V16.7324C0.294173 16.9026 0.635713 17 1 17H15C15.1543 17 15.3045 16.9825 15.4487 16.9495C14.0552 16.6906 13 15.4685 13 14V2C13 1.23165 13.2889 0.530757 13.7639 0Z')"}:{},children:(0,t.jsx)(tm.Tooltip,{text:V.find(t=>t.value===e)?.label,children:(0,t.jsx)(so,{type:e})})},e))})}),(0,t.jsx)("div",{className:"flex min-w-[max(12%,180px)]  max-w-[400px] items-center justify-start truncate pr-2",children:(0,t.jsx)(e6.HighlightText,{className:"truncate",search:o,text:h.requestPath})}),h.logs.length>0&&(0,t.jsxs)("div",{className:(0,d.clsx)(t6.default.rowItem,t6.default.separated,t6.default.truncate,"shrink",b.style),children:[h.logs.length>1&&(0,t.jsx)("div",{className:"mr-2 rounded-full bg-gray-300 px-1 text-[11px] text-gray-800",children:h.logs.length}),x?(0,t.jsx)(tU.Ansi,{newLines:!0,renderNewLine:()=>(0,t.jsx)("span",{className:t6.default.breakSpaces,children:" "}),renderText:e=>(0,t.jsx)(e6.HighlightText,{as:"span",className:t6.default.breakSpaces,search:o,text:e}),children:b.text}):(0,t.jsx)(e6.HighlightText,{search:o,text:b.text})]})]})});function se(){let e=tl.LOGS_PAGE_SIZE;return(0,t.jsx)("div",{className:"py-1",children:[...Array(e)].map((e,s)=>(0,t.jsx)(st,{},`${Date.now()}-${s}`))})}function st(){return(0,t.jsx)("div",{className:(0,d.clsx)("px-2 py-0.5"),children:(0,t.jsx)(r.Stack,{className:(0,d.clsx)(t6.default.rowContainer,"border-b-transparent!"),direction:"row",children:(0,t.jsx)(em.Skeleton,{className:t6.default.rowItem,height:24,width:"100%"})})})}function ss(){let{team:e}=(0,eg.useTeam)(),{maxRetention:s,billingPlan:a}=(0,ef.useUserRetention)(),{setState:l}=(0,E.useLogsQueryState)(),o=`You have reached your ${(0,eu.formatDuration)(s)} of maximum retention limit.`;return(0,t.jsxs)(r.Stack,{align:"center",className:t6.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sn,{}),(0,t.jsxs)(C.Text,{color:"gray-900",size:14,style:{maxWidth:"380px"},children:[o," ",(0,t.jsx)(e2.Link,{external:!0,href:"/docs/runtime-logs",type:"highlight",children:"Learn more"})]}),(0,t.jsx)(r.Stack,{children:"pro"===a&&e?(0,t.jsx)(e2.ButtonLink,{href:`/${e.slug}/~/settings/billing`,size:"small",touchEventWorkaround:!0,children:"Upgrade to Enterprise"}):(0,t.jsx)(i.Button,{onClick:()=>l({timeline:"past30Minutes"}),prefix:(0,t.jsx)(tK.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset timeline to past 30 mins"})})]})}function sr(e){let s,{errorName:r}=e;return s="WrongRequestIdFormat"===r?(0,t.jsxs)(t.Fragment,{children:["You may have input the wrong format for request id. At least a partial string is required, example:"," ",(0,t.jsx)("code",{className:"text-[10px] before:text-gray-500 before:content-['ID='] ",children:"abcde-1678961364403-a1b2c3d4f5e6"})]}):`We could not find logs for the selected filters, we've been notified
    of the issue, try to clear your filters. If the issue persists,
    contact our support.`,(0,t.jsx)(C.Text,{className:t6.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:s})}function sa(e){let{error:s}=e,{setState:a}=(0,E.useLogsQueryState)(),l=(0,x.useIsMobile)(),{isDeploymentEditable:o}=(0,el.usePageConfig)();return"ExceedsBillingLimitError"===s.name?(0,t.jsx)(ss,{}):(0,t.jsxs)(r.Stack,{align:"center",className:t6.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sn,{}),(0,t.jsx)(sr,{errorName:s.name}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(i.Button,{onClick:()=>{let e={levels:void 0,sources:void 0,caches:void 0,domains:void 0,routes:void 0,requestMethods:void 0,requestPaths:void 0,statusCodes:void 0,environments:void 0,branches:void 0,requestIds:void 0,deploymentDomains:void 0,timeline:"past30Minutes"};o&&(e.deploymentDomains=void 0,e.deploymentIds=void 0),l||(e.searchQuery=""),a(e)},prefix:(0,t.jsx)(tK.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset filters"})})]})}function sl(){let{state:{hasTraces:e},hasActiveFilters:s,setState:a}=(0,E.useLogsQueryState)(),{mutate:l}=(0,tl.useGroupLogs)(),o=s();return o&&e?(0,t.jsxs)(r.Stack,{align:"center",className:t6.default.loadingError,"data-testid":(0,c.tid)("group-logs","no-logs"),direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sn,{icon:"traces"}),(0,t.jsx)(C.Text,{color:"gray-900",size:16,weight:500,className:(0,d.clsx)(t6.default.screenReaderSelect,"max-w-[420px] text-center"),tabIndex:0,children:"No traces found for the selected filters"}),(0,t.jsx)("div",{className:"flex flex-col gap-3 max-w-[420px] text-left",children:(0,t.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2",children:[(0,t.jsx)(C.Text,{size:14,weight:500,color:"gray-1000",children:"Start tracing in 3 steps:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 marker:text-gray-600",children:[(0,t.jsxs)("li",{children:["Open the"," ",(0,t.jsx)(e2.Link,{href:"/docs/vercel-toolbar/in-production-and-localhost/add-to-production",type:"highlight",children:"Vercel Toolbar"})," ","on your deployment"]}),(0,t.jsxs)("li",{children:["Select ",(0,t.jsx)("strong",{children:"Run Page Trace"})," and wait for the page to reload"]}),(0,t.jsx)("li",{children:"Click the notification to view the trace"})]})]})}),(0,t.jsxs)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,children:[(0,t.jsx)(e2.ButtonLink,{href:"/docs/session-tracing",size:"small",children:"Learn More about Tracing"}),(0,t.jsx)(i.Button,{onClick:()=>void l(),size:"small",type:"secondary",children:"Refresh"})]})]}):(0,t.jsxs)(r.Stack,{align:"center",className:t6.default.loadingError,"data-testid":(0,c.tid)("group-logs","no-logs"),direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sn,{icon:o?"logs":"function"}),(0,t.jsx)(C.Text,{className:t6.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:o?"No logs found for the selected filters":"There are no runtime logs in this time range"}),(0,t.jsx)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{onClick:()=>a({},!0,!0),size:"small",children:"Reset Filters"}),(0,t.jsx)(i.Button,{onClick:()=>void l(),size:"small",type:"secondary",children:"Refresh"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{onClick:()=>void l(),size:"small",children:"Refresh Query"}),(0,t.jsx)(e2.ButtonLink,{href:"/docs/runtime-logs",size:"small",tab:!0,type:"secondary",children:"Learn More"})]})})]})}function so(e){let{type:s}=e;switch(s){case"request":return(0,t.jsx)(t1.File,{size:16});case"serverless":return(0,t.jsx)(W.FunctionSquare,{size:16});case"serverless-middleware":case"edge-middleware":return(0,t.jsx)(z.FunctionMiddleware,{size:16});case"edge-function":return(0,t.jsx)($.FunctionEdge,{size:16});case"data-cache":return(0,t.jsx)(eG.DataCache,{size:16});case"external":return(0,t.jsx)(eW.ArrowGlobe,{size:16});default:return(0,t.jsx)(H,{size:16})}}function sn(e){let{icon:s="logs"}=e;return(0,t.jsx)(tY.EmptyState.Icon,{icon:"function"===s?(0,t.jsx)(W.FunctionSquare,{}):"traces"===s?(0,t.jsx)(t2.Traces,{}):(0,t.jsx)(t0.Logs,{}),size:40})}var si=e.i(4597921),sd=e.i(9224004);let sc=()=>{let{selectedTrace:e}=(0,sd.useLogs)();return e};var su=e.i(5851942),sp=e.i(7867910);function sh(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tV.Stop,{"aria-hidden":"true",className:"-ml-1"});case"warning":return(0,t.jsx)(tG.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tH.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}function sm(e){let{timestamp:s,message:r,level:a,error:l,onShowError:o}=e,n=to(),i=`${r.replaceAll("\r","\n")}`,{value:u}=(0,tW.useEnableAnsiLogs)(),p=(0,si.useServerFlag)("enable-observability-error-dashboard",!1);return(0,t.jsxs)("div",{className:(0,d.clsx)("log-message","group -mt-px flex flex-col border-y py-1.5 pl-4 pr-2 font-mono text-[13px] @[480px]:flex-row @[480px]:gap-3",{info:"text-gray-1000 bg-background-200",error:"-my-px border-y border-red-300 bg-red-100 text-red-900",warning:"-my-px border-y border-amber-300 bg-amber-100 text-amber-900",fatal:"border-l-4 border-l-red-900 -my-px border-y border-red-300 text-red-900 bg-gradient-to-r from-red-400 to-red-100 to-5%"}[a]),children:[(0,t.jsxs)("div",{className:"flex items-center @[480px]:items-start",children:[(0,t.jsx)("div",{className:(0,d.clsx)("mr-2  mt-[2px] flex @[480px]:mt-[5px] @[480px]:size-4","info"===a&&"hidden @[480px]:block"),children:(0,t.jsx)(sh,{level:a})}),(0,t.jsxs)("span",{className:"select-none whitespace-nowrap pt-px font-mono",children:[(0,tz.isToday)(new Date(s))?null:(0,t.jsxs)("span",{className:"uppercase opacity-65",children:[(0,eK.format)(new Date(s),"MMM dd")," "]}),(0,t.jsx)("span",{className:"opacity-75",children:(0,eK.format)(new Date(s),"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-50",children:(0,eK.format)(new Date(s),".SSS")})]}),(0,t.jsx)("div",{className:"flex flex-1 justify-end @[480px]:hidden",children:(0,t.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:i,title:"Copy message to the clipboard",type:"tertiary"})})]}),(0,t.jsx)("span",{className:"flex-1 whitespace-pre-wrap break-all pt-px","data-testid":(0,c.tid)("group-logs","detail-message"),children:u?(0,t.jsx)(tU.Ansi,{newLines:!0,renderText:e=>(0,t.jsx)(e6.HighlightText,{as:"span",search:n,text:e}),children:i}):(0,t.jsx)(e6.HighlightText,{search:n,text:i})}),p&&"error"===a&&l?(0,t.jsxs)("button",{className:"sticky top-11 -mx-1 -mr-2 flex h-[30px] cursor-pointer flex-row items-center gap-1 whitespace-nowrap rounded-md border border-[hsla(var(--ds-red-700-value),0.2)] bg-[hsla(var(--ds-red-800-value),0.1)] px-2 py-1 font-sans text-red-900 transition-colors duration-100 ease-in-out hover:bg-[hsla(var(--ds-red-800-value),0.3)]",onClick:()=>o?.(l),type:"button",children:[(0,t.jsx)(e$.Eye,{size:16}),(0,t.jsxs)("span",{children:["Seen ",new Intl.NumberFormat().format(l.countErrors)," times"]})]}):null,"fatal"===a?(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(ea.Badge,{variant:"red",size:"sm",children:"Fatal"})}):null,(0,t.jsx)("div",{className:(0,d.clsx)("-my-0.5 hidden opacity-0 group-hover:opacity-100 @[480px]:block focus-within:focus-visible:opacity-100"),children:(0,t.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:i,title:"Copy message to the clipboard",type:"tertiary"})})]})}function sx(e){let{logs:s,source:r,onShowError:a}=e;return(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsxs)("div",{className:"sticky -top-px z-10 -mt-px flex select-none flex-row gap-2 border-y bg-background-100 px-4 py-2",children:[(0,t.jsx)(so,{type:r}),(0,t.jsx)(C.Text,{color:"gray-1000",size:13,weight:500,children:V.find(e=>e.value===r)?.label??r})]}),(0,t.jsx)("div",{className:"flex flex-col @container",children:s.map((e,s)=>(0,t.jsx)(sm,{error:e.error,level:e.level,message:e.message,onShowError:a,timestamp:e.timestamp},`${e.timestamp}-${s}`))})]})}function sg(e){let{onToggleCollapse:r,collapsed:a}=e;(0,e0.useToasts)();let[l,o]=(0,s.useState)(!1),{data:n}=(0,ts.useSelectedLog)(),c=sc(),u=(0,h.useParams)(),p=(0,s.useMemo)(()=>{let e=c?.spans.find(e=>e.spanId===c.rootSpanId);if(!e)return"";let[t,s]=e.duration,r=1e3*t+s/1e6;return r>1e3?`${new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(.001*r)}s`:`${Math.round(r)}ms`},[c]),m=!!(n?.traceId&&n.sessionId),x=l&&m?"trace":"logs",[g,f]=(0,s.useState)(null),[j,b]=(0,s.useState)(null),{data:w}=(0,tQ.useErrors)(),_=(0,s.useCallback)(()=>{let e=!a;r?.(e)},[a,r]);if((0,sp.useHotkey)(_,"l"),(0,s.useEffect)(()=>{if(!n)return;let e=n.logs.some(e=>null===g||e.level===g);g&&!e&&f(null)},[n,g]),(0,s.useEffect)(()=>{let e=e=>{if(a)return;let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());if((e.metaKey||e.ctrlKey)&&"a"===e.key&&!s){e.preventDefault();let t=document.querySelectorAll(".log-message"),s=document.createRange();if(t.length>0){s.setStartBefore(t[0]),s.setEndAfter(t[t.length-1]);let e=window.getSelection();e?.removeAllRanges(),e?.addRange(s)}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),!n)return null;let S=n.logs.reduce((e,t)=>{e[t.source]||(e[t.source]=[]);let s=w?.rows.find(e=>sf(t.message)===sf(e.errorName)),r={...t,error:s};return e[t.source].push(r),e},{}),N=n.logs.reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{info:0,warning:0,error:0,fatal:0}),k=Object.values(N).filter(e=>e>0).length,L=k>1||1===k&&N.info>0,T=Object.entries(Object.entries(S).reduce((e,t)=>{let[s,r]=t,a=g?r.filter(e=>e.level===g):r;return a.length>0&&(e[s]=a),e},{})).sort((e,t)=>{let[,s]=e,[,r]=t,a=s[0]?.timestamp??"",l=r[0]?.timestamp??"";return new Date(a).getTime()-new Date(l).getTime()}),E=!!r;return(0,t.jsx)("div",{className:(0,d.clsx)("flex h-full flex-1 flex-col transition-all duration-200 ease-in-out sm:flex-initial"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,d.clsx)("flex items-center justify-between border-b bg-background-100 py-2 pr-2",j?"pl-4":"pl-1"),onClick:e=>{e.target!==e.currentTarget||j||_()},children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:E?j?(0,t.jsxs)("header",{className:"text-heading-14",children:["Error Details",(0,t.jsx)(ea.Badge,{className:"ml-2",children:"Internal"})]}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-1",children:(0,t.jsx)("button",{className:(0,d.clsx)("text-button-14 rounded px-3 py-1.5 transition-colors",m&&"cursor-pointer hover:bg-gray-200",m&&"logs"===x?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),o(!1),a&&_(),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"logs-tab",action:"View Logs"})},type:"button",children:"Logs"})}),m?(0,t.jsx)("button",{className:(0,d.clsx)("text-button-14 cursor-pointer rounded px-3 py-1.5 transition-colors hover:bg-gray-200","trace"===x?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),o(!0),a&&_(),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"trace-tab",action:"View Trace"})},type:"button",children:"Trace"}):null]}):null}),E?(0,t.jsx)("div",{className:"flex items-center gap-1",children:j?(0,t.jsx)(i.Button,{"aria-label":"Close Error Details",onClick:()=>b(null),svgOnly:!0,size:"small",type:"tertiary",shape:"square",children:(0,t.jsx)(eJ.Cross,{size:16})}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["logs"===x?(0,t.jsxs)(t.Fragment,{children:[L?(0,t.jsxs)(ea.Badge,{className:"cursor-pointer",onClick:()=>f(null),size:"sm",variant:"gray-subtle",children:[n.logs.length," Total"]}):null,N.warning>0&&(0,t.jsxs)(ea.Badge,{className:"cursor-pointer",onClick:()=>f("warning"===g?null:"warning"),size:"sm",variant:"warning"===g?"amber":"amber-subtle",children:[N.warning," Warning"]}),N.error>0&&(0,t.jsxs)(ea.Badge,{className:"cursor-pointer",onClick:()=>f("error"===g?null:"error"),size:"sm",variant:"error"===g?"red":"red-subtle",children:[N.error," Error"]}),N.fatal>0&&(0,t.jsxs)(ea.Badge,{className:`cursor-pointer border ${"fatal"===g?"border-red-900":"border-red-700"}`,onClick:()=>f("fatal"===g?null:"fatal"),size:"sm",variant:"red",children:[N.fatal," Fatal"]}),n.logs.length>0?(0,t.jsx)(tB.CopyButton,{label:"Copy Logs",shape:"square",style:{width:"28px",height:"28px"},textToCopy:n.logs.map(e=>`${e.timestamp} [${e.level}] ${e.message}`).join("\n"),title:"Copy full logs to clipboard",type:"tertiary"}):null]}):(0,t.jsxs)(t.Fragment,{children:[c?(0,t.jsx)(ea.Badge,{size:"sm",variant:"gray-subtle",children:p}):null,u&&m?(0,t.jsx)(e2.ButtonLink,{"aria-label":"Open Trace in New tab",className:"-mr-2",href:`/${u.teamSlug}/${u.project}/logs/traces/${n.traceId}`,svgOnly:!0,target:"_blank",type:"tertiary",width:42,children:(0,t.jsx)(eH.External,{})}):null]}),(0,t.jsx)(i.Button,{"aria-label":a?"Expand Logs Panel":"Collapse Logs Panel",onClick:_,svgOnly:!0,type:"tertiary",size:"small",shape:"square",children:a?(0,t.jsx)(eZ.ChevronUp,{size:16}):(0,t.jsx)(eX.ChevronDown,{size:16})})]})}):null]}),j?(0,t.jsx)(tX.ErrorCard,{row:j,showGoToErrors:!0,styles:"sticky z-50 w-4/5 inset-0 rounded-none font-sans h-full text-gray-1000 shadow-none border-none"}):null,"trace"===x?(0,t.jsx)(su.TraceViewerTimeline,{trace:c,height:"100%"}):n.logs.length>0&&!a?(0,t.jsx)("div",{className:(0,d.clsx)("relative flex flex-1 flex-col overflow-y-auto"),children:T.map(e=>{let[s,r]=e;return(0,t.jsx)(sx,{logs:r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),onShowError:e=>b(e),source:s},s)})}):!a&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center bg-background-200 p-8",children:(0,t.jsx)(C.Text,{color:"gray-900",size:14,children:"No logs found for this request"})})]})})}function sf(e){let t="";for(let s of[/^\s*⨯ \[(.{3,}?)\] {/,/^\s*⨯ (.{3,}?)(\r\n|\r|\n|$)/,/^\s*(.{3,}?)(\r\n|\r|\n|$)/]){let r=e.match(s);if(r?.[1]){t=r[1];break}}if(!t)return e;let s=t.replace(/\s+/g," ").trim();return(s=(s=s.replace(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/g,"<url>")).replace(/-?\d+\s*(milliseconds?|seconds?|minutes?|mins?|hours?|days?|ms|s|m|h|d)/gi,"<duration>")).replace(/-?\d+/g,"<number>")}function sj(){let e=sc();return(0,t.jsx)(su.TraceViewer,{height:"100%",trace:e})}function sv(e){return!!e&&("string"==typeof e&&"-"!==e&&""!==e||"number"==typeof e&&-1!==e)}let sy=e=>"STALE"===e.cache||"PRERENDER"===e.cache;function sb(e){let{className:s}=e;return(0,t.jsx)("div",{className:(0,d.default)("absolute left-6 h-16 w-3.5 border-[1.5px] border-r-0 border-gray-400 ",s)})}function sC(e){let{direction:s,through:r,lineClassName:a,className:l,children:o}=e;return(0,t.jsxs)("div",{className:(0,d.default)("relative flex items-center overflow-hidden",o?"h-10 pl-9":"h-2",l),children:["straight"===s?(0,t.jsx)(sb,{className:(0,d.default)(a)}):(0,t.jsxs)(t.Fragment,{children:[r?(0,t.jsx)(sb,{className:(0,d.default)("h-40 rounded-none border-y-0","up"===s?"top-0":"bottom-[47.5%]","dashed"===r&&"top-[55%] border-dashed")}):null,("up"===s||"both"===s)&&(0,t.jsx)(sb,{className:(0,d.default)(a,"bottom-1/2 translate-y-[0.5px] rounded-l")}),("down"===s||"both"===s)&&(0,t.jsx)(sb,{className:(0,d.default)(a,"top-1/2 -translate-y-px rounded-l-md","dashed"===r&&"border-dashed border-t-0 rounded-tl-none translate-y-2")})]}),(0,t.jsx)("div",{className:"relative flex items-center",children:o})]})}function sw(e){let{hasFunctionCrashed:s}=e;return(0,t.jsx)(sC,{className:"mb-2",direction:"up",children:(0,t.jsx)(tn.RequestFinishedBadge,{hasFunctionCrashed:s})})}var s_=e.i(6143247);let sS=new Map([["nodejs",{name:"Node.js",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=`${r}_mask0`,l=`${r}_mask1`,o=`${r}_mask2`,n=`${r}_paint0_linear`,i=`${r}_paint1_linear`,d=`${r}_paint2_linear`;return(0,t.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 14 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{clipRule:"evenodd",d:"M6.91226 6.4202C6.95713 6.39383 7.01268 6.39383 7.05755 6.4202L8.26282 7.11829C8.30789 7.14449 8.33546 7.19271 8.33546 7.24481V8.64248C8.33546 8.69458 8.30789 8.7428 8.26282 8.769L7.05755 9.46709C7.01268 9.49346 6.95713 9.49346 6.91226 9.46709L5.70773 8.769C5.66213 8.74331 5.63381 8.69498 5.63361 8.64248V7.24481C5.63361 7.19271 5.66029 7.14449 5.70625 7.11829L6.91226 6.4202Z",fill:"#689F63",fillRule:"evenodd"}),(0,t.jsx)("mask",{height:"16",id:a,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.62322 0.101176L0.377445 3.72068C0.143899 3.85581 -1.28246e-05 4.10586 8.5718e-10 4.3765V11.6206C8.5718e-10 11.891 0.143506 12.1409 0.377445 12.2764L6.62367 15.8987C6.85722 16.0338 7.14471 16.0338 7.37826 15.8987L13.6234 12.2764C13.8564 12.1408 13.9999 11.8909 14 11.6206V4.3765C14 4.10619 13.8562 3.85613 13.622 3.72068L7.37767 0.101176C7.14355 -0.0337253 6.85571 -0.0337253 6.62159 0.101176",fill:"white"})}),(0,t.jsxs)("g",{mask:`url(#${a})`,children:[(0,t.jsx)("path",{d:"M20.2158 3.09495L2.61633 -5.56644L-6.40765 12.9165L11.1914 21.5783L20.2158 3.09495Z",fill:`url(#${n})`}),(0,t.jsx)("mask",{height:"16",id:l,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M0.148193 12.0591C0.207938 12.137 0.282656 12.2044 0.370569 12.255L5.72833 15.3622L6.62079 15.8772C6.75422 15.9546 6.90632 15.9873 7.05576 15.9762C7.10557 15.9721 7.15538 15.9628 7.20401 15.9489L13.7914 3.83876C13.741 3.78368 13.6819 3.73754 13.6158 3.69884L9.5262 1.32771L7.36442 0.0788888C7.303 0.0439129 7.23718 0.0173793 7.16873 0L0.148193 12.0591Z",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${l})`,children:(0,t.jsx)("path",{d:"M-7.45789 5.63936L4.96918 22.5265L21.4042 10.335L8.97638 -6.55164L-7.45789 5.63936Z",fill:`url(#${i})`})}),(0,t.jsx)("mask",{height:"16",id:o,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.82612 0.00282809C6.7199 0.0136004 6.61712 0.0466642 6.52444 0.0998762L0.296448 3.70896L7.01218 15.9903C7.10558 15.9769 7.19749 15.9457 7.28051 15.8974L13.5263 12.2751C13.7171 12.1642 13.8503 11.9753 13.891 11.7577L7.04479 0.0151824C6.99451 0.00512223 6.94337 3.71091e-05 6.8921 0C6.87134 0 6.85058 0.00104193 6.82983 0.00297693",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${o})`,children:(0,t.jsx)("path",{d:"M-0.0454712 -0.00238037V16.0731H14.0383V-0.00238037H-0.0454712Z",fill:`url(#${d})`})})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:n,x1:"11.2743",x2:"2.24575",y1:"-1.24934",y2:"17.0954",children:[(0,t.jsx)("stop",{offset:"0.3",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.5",stopColor:"#55934F"}),(0,t.jsx)("stop",{offset:"0.8",stopColor:"#5AAD45"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:i,x1:"-1.114",x2:"15.2951",y1:"14.1796",y2:"2.10394",children:[(0,t.jsx)("stop",{offset:"0.57",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.72",stopColor:"#619857"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#76AC64"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"-0.0406827",x2:"14.041",y1:"8.03582",y2:"8.03582",children:[(0,t.jsx)("stop",{offset:"0.16",stopColor:"#6BBF47"}),(0,t.jsx)("stop",{offset:"0.38",stopColor:"#79B461"}),(0,t.jsx)("stop",{offset:"0.47",stopColor:"#75AC64"}),(0,t.jsx)("stop",{offset:"0.7",stopColor:"#659E5A"}),(0,t.jsx)("stop",{offset:"0.9",stopColor:"#3E863D"})]})]})]})},{"aria-hidden":"true"})}],["go",{name:"Go",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)("svg",{height:"10px",version:"1.1",viewBox:"0 0 261 99",width:"29px",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fill:"#2DBCAF",fillRule:"nonzero",id:"Go-Logo_Aqua",children:[(0,t.jsx)("path",{d:"M19.5076142,29.4191457 C19,29.4191457 18.8730964,29.1559878 19.1269036,28.761251 L21.7918782,25.2086194 C22.0456853,24.8138825 22.680203,24.5507246 23.1878173,24.5507246 L68.4923858,24.5507246 C69,24.5507246 69.1269036,24.9454615 68.8730964,25.3401983 L66.715736,28.761251 C66.4619289,29.1559878 65.8274112,29.5507246 65.4467005,29.5507246 L19.5076142,29.4191457 Z",id:"Path"}),(0,t.jsx)("path",{d:"M0.509858443,41.5507246 C0,41.5507246 -0.127464611,41.2804544 0.127464611,40.875049 L2.80422144,37.2264003 C3.05915066,36.8209949 3.69647371,36.5507246 4.20633215,36.5507246 L62.3301946,36.5507246 C62.8400531,36.5507246 63.0949823,36.95613 62.9675177,37.3615354 L61.9478008,40.6047787 C61.8203362,41.1453192 61.3104777,41.4155895 60.8006193,41.4155895 L0.509858443,41.5507246 Z",id:"Path"}),(0,t.jsx)("path",{d:"M31.5021645,53.4191457 C31,53.4191457 30.8744589,53.0244088 31.1255411,52.629672 L32.8831169,49.3401983 C33.1341991,48.9454615 33.6363636,48.5507246 34.1385281,48.5507246 L59.2467532,48.5507246 C59.7489177,48.5507246 60,48.9454615 60,49.4717773 L59.7489177,52.629672 C59.7489177,53.1559878 59.2467532,53.5507246 58.8701299,53.5507246 L31.5021645,53.4191457 Z",id:"Path"}),(0,t.jsx)("g",{id:"CXHf1q_1_",transform:"translate(69.000000, 0.550725)",children:(0,t.jsxs)("g",{id:"Group",children:[(0,t.jsx)("path",{d:"M94.0875,27.3038462 C86.0881579,29.3346154 80.6282895,30.8576923 72.7559211,32.8884615 C70.8513158,33.3961538 70.7243421,33.5230769 69.0736842,31.6192308 C67.1690789,29.4615385 65.7723684,28.0653846 63.1059211,26.7961538 C55.1065789,22.8615385 47.3611842,24.0038462 40.1236842,28.7 C31.4894737,34.2846154 27.0453947,42.5346154 27.1723684,52.8153846 C27.2993421,62.9692308 34.2828947,71.3461538 44.3138158,72.7423077 C52.9480263,73.8846154 60.1855263,70.8384615 65.8993421,64.3653846 C67.0421053,62.9692308 68.0578947,61.4461538 69.3276316,59.6692308 C64.7565789,59.6692308 59.0427632,59.6692308 44.8217105,59.6692308 C42.1552632,59.6692308 41.5203947,58.0192308 42.4092105,55.8615385 C44.0598684,51.9269231 47.1072368,45.3269231 48.8848684,42.0269231 C49.2657895,41.2653846 50.1546053,39.9961538 52.0592105,39.9961538 C58.5348684,39.9961538 82.4059211,39.9961538 98.2776316,39.9961538 C98.0236842,43.4230769 98.0236842,46.85 97.5157895,50.2769231 C96.1190789,59.4153846 92.6907895,67.7923077 87.1039474,75.1538462 C77.9618421,87.2115385 66.0263158,94.7 50.9164474,96.7307692 C38.4730263,98.3807692 26.9184211,95.9692308 16.7605263,88.3538462 C7.36447368,81.2461538 2.03157895,71.8538462 0.634868421,60.1769231 C-1.01578947,46.3423077 3.04736842,33.9038462 11.4276316,22.9884615 C20.4427632,11.1846154 32.3782895,3.69615385 46.9802632,1.03076923 C58.9157895,-1.12692308 70.3434211,0.269230769 80.6282895,7.25 C87.3578947,11.6923077 92.1828947,17.7846154 95.3572368,25.1461538 C96.1190789,26.2884615 95.6111842,26.9230769 94.0875,27.3038462 Z",id:"Path"}),(0,t.jsx)("path",{d:"M136.115789,97.4923077 C124.561184,97.2384615 114.022368,93.9384615 105.134211,86.3230769 C97.6427632,79.85 92.9447368,71.6 91.4210526,61.8269231 C89.1355263,47.4846154 93.0717105,34.7923077 101.705921,23.4961538 C110.975,11.3115385 122.148684,4.96538462 137.258553,2.3 C150.209868,0.0153846154 162.399342,1.28461538 173.446053,8.77307692 C183.476974,15.6269231 189.698684,24.8923077 191.349342,37.0769231 C193.507895,54.2115385 188.555921,68.1730769 176.747368,80.1038462 C168.367105,88.6076923 158.082237,93.9384615 146.273684,96.35 C142.845395,96.9846154 139.417105,97.1115385 136.115789,97.4923077 Z M166.335526,46.2153846 C166.208553,44.5653846 166.208553,43.2961538 165.954605,42.0269231 C163.669079,29.4615385 152.114474,22.3538462 140.051974,25.1461538 C128.243421,27.8115385 120.625,35.3 117.831579,47.2307692 C115.546053,57.1307692 120.371053,67.1576923 129.513158,71.2192308 C136.496711,74.2653846 143.480263,73.8846154 150.209868,70.4576923 C160.240789,65.2538462 165.700658,57.1307692 166.335526,46.2153846 Z",id:"Shape"})]})})]})})})},{"aria-hidden":"true"})}],["python",{name:"Python",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=`${r}_linearGradient-1`,l=`${r}_linearGradient-2`;return(0,t.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 98 99",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:a,x1:"0.959176447%",x2:"74.0505936%",y1:"9.14856261e-08%",y2:"64.1103734%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#5A9FD4"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#306998"})]}),(0,t.jsxs)("linearGradient",{id:l,x1:"49.9999998%",x2:"24.2424815%",y1:"82.2756107%",y2:"44.914431%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFD43B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#FFE873"})]})]}),(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fillRule:"nonzero",id:"Group",children:[(0,t.jsx)("path",{d:"M48.3285309,0.000808961017 C44.2949163,0.0195514649 40.4429046,0.363560535 37.053531,0.963308956 C27.0688609,2.72727229 25.2560319,6.41939877 25.256031,13.228309 L25.256031,22.2208089 L48.8510309,22.2208089 L48.8510309,25.2183089 L25.256031,25.2183089 L16.4010311,25.2183089 C9.5436672,25.2183089 3.53916305,29.3399799 1.66103098,37.1808088 C-0.505370605,46.1682189 -0.601462292,51.776509 1.66103098,61.1608087 C3.33824788,68.1461184 7.34366897,73.1233087 14.2010311,73.1233087 L22.313531,73.1233087 L22.313531,62.3433087 C22.313531,54.555395 29.0518177,47.6858106 37.053531,47.6858088 L60.6210308,47.6858088 C67.1813877,47.6858088 72.4185308,42.2842245 72.4185308,35.6958089 L72.4185308,13.228309 C72.4185308,6.83393069 67.0241484,2.03050484 60.6210308,0.963308956 C56.5677623,0.288590695 52.3621455,-0.0179335429 48.3285309,0.000808961017 Z M35.568531,7.23330901 C38.0057323,7.23330901 39.996031,9.25611748 39.996031,11.743309 C39.996031,14.2216847 38.0057323,16.225809 35.568531,16.225809 C33.1225921,16.225809 31.141031,14.2216838 31.141031,11.743309 C31.141031,9.25611836 33.1225921,7.23330901 35.568531,7.23330901 Z",fill:`url(#${a})`,id:"path1948"}),(0,t.jsx)("path",{d:"M75.3610308,25.2183089 L75.3610308,35.6958089 C75.3610308,43.8188732 68.4742432,50.6558079 60.6210308,50.6558088 L37.053531,50.6558088 C30.597998,50.6558088 25.256031,56.1808738 25.256031,62.6458087 L25.256031,85.1133059 C25.256031,91.5076851 30.8163884,95.2687875 37.053531,97.1033059 C44.5223822,99.2994427 51.6846194,99.6963403 60.6210308,97.1033059 C66.5611672,95.3834427 72.4185334,91.9222091 72.4185308,85.1133059 L72.4185308,76.1208086 L48.8510309,76.1208086 L48.8510309,73.1233087 L72.4185308,73.1233087 L84.2160342,73.1233087 C91.073399,73.1233087 93.6287342,68.3401496 96.0135254,61.1608087 C98.4769358,53.7697891 98.372119,46.6621259 96.0135254,37.1808088 C94.318839,30.3542608 91.0821198,25.2183089 84.2160342,25.2183089 L75.3610308,25.2183089 Z M62.1060308,82.1158086 C64.5519715,82.1158086 66.5335308,84.1199356 66.5335308,86.5983059 C66.5335308,89.0854939 64.5519688,91.1083059 62.1060308,91.1083059 C59.6688268,91.1083059 57.6785309,89.0854939 57.6785309,86.5983059 C57.6785309,84.1199356 59.6688242,82.1158086 62.1060308,82.1158086 Z",fill:`url(#${l})`,id:"path1950"})]})})]})},{"aria-hidden":"true"})}],["ruby",{name:"Ruby",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=Array(15).fill().map((e,t)=>`${r}_linearGradient-${t}`);return(0,t.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 100 100",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:a[0],x1:"84.7503645%",x2:"58.2543962%",y1:"111.399353%",y2:"64.5837087%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"41%",stopColor:"#E42B1E"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#990000"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#990000"})]}),(0,t.jsxs)("linearGradient",{id:a[1],x1:"116.651024%",x2:"1.74616041%",y1:"60.8903211%",y2:"19.2879503%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[2],x1:"75.7744024%",x2:"38.9781357%",y1:"219.327131%",y2:"7.82868176%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[3],x1:"50.012428%",x2:"66.4830414%",y1:"7.23449921%",y2:"79.1354134%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E57252"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#DE3B20"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A60003"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A60003"})]}),(0,t.jsxs)("linearGradient",{id:a[4],x1:"46.1741749%",x2:"49.9323342%",y1:"16.347907%",y2:"83.0468449%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E4714E"}),(0,t.jsx)("stop",{offset:"56%",stopColor:"#BE1A0D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[5],x1:"36.9653573%",x2:"49.5282324%",y1:"15.5936471%",y2:"92.4776332%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"18%",stopColor:"#E46342"}),(0,t.jsx)("stop",{offset:"40%",stopColor:"#C82410"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[6],x1:"13.6086166%",x2:"85.7636612%",y1:"58.3456855%",y2:"-46.7167814%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#C81F11"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF0905"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF0905"})]}),(0,t.jsxs)("linearGradient",{id:a[7],x1:"27.6242038%",x2:"50.7445145%",y1:"21.1345847%",y2:"79.0557818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"31%",stopColor:"#DE4024"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF190B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF190B"})]}),(0,t.jsxs)("linearGradient",{id:a[8],x1:"-20.6671297%",x2:"104.241521%",y1:"122.281897%",y2:"-6.34211007%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"7%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"17%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"27%",stopColor:"#C82F1C"}),(0,t.jsx)("stop",{offset:"33%",stopColor:"#820C01"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#A31601"}),(0,t.jsx)("stop",{offset:"72%",stopColor:"#B31301"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#E82609"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#E82609"})]}),(0,t.jsxs)("linearGradient",{id:a[9],x1:"58.7919609%",x2:"11.9636556%",y1:"65.2049657%",y2:"50.1275621%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#990C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D0E"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D0E"})]}),(0,t.jsxs)("linearGradient",{id:a[10],x1:"79.3194899%",x2:"23.088288%",y1:"62.7538068%",y2:"17.8876818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E0C00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E0C00"})]}),(0,t.jsxs)("linearGradient",{id:a[11],x1:"92.8800277%",x2:"59.8414537%",y1:"74.1223655%",y2:"39.7039965%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E120B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E120B"})]}),(0,t.jsxs)("radialGradient",{cx:"32.0008013%",cy:"40.2100469%",fx:"32.0008013%",fy:"40.2100469%",gradientTransform:"translate(0.320008,0.402100),scale(0.522539,1.000000),translate(-0.320008,-0.402100)",id:a[12],r:"133.14407%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#7E0E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7E0E08"})]}),(0,t.jsxs)("radialGradient",{cx:"13.5493795%",cy:"40.859922%",fx:"13.5493795%",fy:"40.859922%",gradientTransform:"translate(0.135494,0.408599),scale(0.778453,1.000000),translate(-0.135494,-0.408599)",id:a[13],r:"113.540881%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#800E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#800E08"})]}),(0,t.jsxs)("linearGradient",{id:a[14],x1:"56.5701955%",x2:"3.10480737%",y1:"101.716594%",y2:"11.9932603%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"43%",stopColor:"#9E100A"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#B3100C"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#B3100C"})]}),(0,t.jsxs)("linearGradient",{id:a[15],x1:"30.8698732%",x2:"92.4707626%",y1:"35.5989756%",y2:"100.693616%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"44%",stopColor:"#910F08"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#791C12"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#791C12"})]})]}),(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fillRule:"nonzero",id:"ruby",children:[(0,t.jsx)("polygon",{fill:`url(#${a[0]})`,id:"Path",points:"77.0122645 65.4278136 20.2589918 99.1275777 93.7437433 94.1410964 99.4035175 20.0432571"}),(0,t.jsx)("polygon",{fill:`url(#${a[1]})`,id:"Path",points:"93.8641535 94.0904237 87.5481442 50.4969668 70.3440559 73.2143305"}),(0,t.jsx)("polygon",{fill:`url(#${a[2]})`,id:"Path",points:"93.9494437 94.0904237 47.6773646 90.458054 20.504829 99.032755"}),(0,t.jsx)("polygon",{fill:`url(#${a[3]})`,id:"Path",points:"20.5700511 99.0422874 32.1294164 61.1733249 6.69279222 66.6123474"}),(0,t.jsx)("polygon",{fill:`url(#${a[4]})`,id:"Path",points:"70.3395405 73.3397576 59.7033189 31.6778786 29.2646604 60.2100448"}),(0,t.jsx)("polygon",{fill:`url(#${a[5]})`,id:"Path",points:"96.9902992 32.2648777 68.2173133 8.76484857 60.2050274 34.6680617"}),(0,t.jsx)("polygon",{fill:`url(#${a[6]})`,id:"Path",points:"83.5344758 0.386315593 66.6118459 9.73816318 55.9354878 0.260888453"}),(0,t.jsx)("polygon",{fill:`url(#${a[7]})`,id:"Path",points:"0 79.3151066 7.08914198 66.3860772 1.35461312 50.9836241"}),(0,t.jsx)("path",{d:"M0.973314611,50.4969668 L6.74296307,66.8627001 L31.81334,61.2380454 L60.4358134,34.6374574 L68.5133214,8.98058328 L55.7945075,0 L34.1708685,8.09255913 C27.3581679,14.4291382 14.1381473,26.9668352 13.6615241,27.2026383 C13.1899181,27.4434584 4.93179515,43.0516119 0.973314611,50.4969668 L0.973314611,50.4969668 Z",fill:"#FFFFFF",id:"Path"}),(0,t.jsx)("path",{d:"M21.2323064,21.0968451 C35.9975894,6.4569892 55.0324123,-2.19246642 62.3372889,5.17763237 C69.6376501,12.5477311 61.8957855,30.4587268 47.1305023,45.0935658 C32.3652194,59.7284045 13.5661995,68.8544832 6.26633995,61.4843842 C-1.03853672,54.1193026 6.46702339,35.7316838 21.2323064,21.0968451 L21.2323064,21.0968451 Z",fill:`url(#${a[8]})`,id:"Path"}),(0,t.jsx)("path",{d:"M20.5700511,99.0272361 L32.0391088,61.0378639 L70.1288227,73.2745355 C56.356923,86.188514 41.0397605,97.1056924 20.5700511,99.0272361 L20.5700511,99.0272361 Z",fill:`url(#${a[9]})`,id:"Path"}),(0,t.jsx)("path",{d:"M60.4859842,34.5627029 L70.2642842,73.2946038 C81.7684617,61.1984105 92.0936236,48.1941244 97.1503443,32.109348 L60.4859842,34.5627029 L60.4859842,34.5627029 Z",fill:`url(#${a[10]})`,id:"Path"}),(0,t.jsx)("path",{d:"M97.0505043,32.3050143 C100.963831,20.4947948 101.866907,3.55209662 83.4135641,0.406383936 L68.2719995,8.76986569 L97.0505043,32.3050143 L97.0505043,32.3050143 Z",fill:`url(#${a[11]})`,id:"Path"}),(0,t.jsx)("path",{d:"M0,79.1445256 C0.541845246,98.636405 14.6047363,98.9268942 20.5951365,99.0979771 L6.75801434,66.7824268 L0,79.1445256 L0,79.1445256 Z",fill:"#9E1209",id:"Path"}),(0,t.jsx)("path",{d:"M60.5406704,34.6229079 C69.3807754,40.0564118 87.1969484,50.9685728 87.5581785,51.1692563 C88.1195901,51.4853326 95.2393364,39.1633702 96.8548382,32.1996556 L60.5406704,34.6229079 L60.5406704,34.6229079 Z",fill:`url(#${a[12]})`,id:"Path"}),(0,t.jsx)("path",{d:"M32.0240575,61.0378639 L47.3562714,90.6186006 C56.422145,85.7018568 63.5213212,79.7114565 70.0234642,73.2946038 L32.0240575,61.0378639 L32.0240575,61.0378639 Z",fill:`url(#${a[13]})`,id:"Path"}),(0,t.jsx)("path",{d:"M6.69780929,66.8225633 L4.52541124,92.6906571 C8.62437017,98.2897247 14.2635744,98.7763819 20.1787184,98.3398954 C15.8991444,87.6886226 7.35003046,66.3910942 6.69780929,66.8225633 L6.69780929,66.8225633 Z",fill:`url(#${a[14]})`,id:"Path"}),(0,t.jsx)("path",{d:"M68.1821938,8.83508781 L98.6409204,13.1096448 C97.0153848,6.22118618 92.0233846,1.77604831 83.5144071,0.386315593 L68.1821938,8.83508781 L68.1821938,8.83508781 Z",fill:`url(#${a[15]})`,id:"Path"})]})})]})},{"aria-hidden":"true"})}],["v8",{name:"Edge"}]]);function sN(e){let{requestMethod:s,requestPath:a,responseStatusCode:l,onUp:o,onDown:n,onClose:d}=e;return(0,t.jsxs)(r.Stack,{align:"center",className:"ml-px p-4",direction:"row",gap:1,justify:"space-between",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:[(0,t.jsx)(C.Text,{className:ta.default.title,lineHeight:16,size:13,children:(0,t.jsx)(tn.RequestMethodBadge,{method:s})}),(0,t.jsx)(C.Text,{className:ta.default.title,lineHeight:16,size:13,truncate:!0,children:a})]}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-1",style:{display:o||n?void 0:"none"},children:[(0,t.jsx)(tn.StatusCodeBadge,{statusCode:l}),(0,t.jsx)(i.Button,{"aria-label":"Up",className:ta.default.ghostButton,disabled:!o,onClick:o,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eZ.ChevronUp,{color:"gray-700",size:16})}),(0,t.jsx)(i.Button,{"aria-label":"Down",className:ta.default.ghostButton,disabled:!n,onClick:n,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eX.ChevronDown,{color:"gray-700",size:16})})]}),(0,t.jsx)(r.Stack,{className:"geist-hide-on-mobile",direction:"row",children:(0,t.jsx)("div",{className:ta.default.buttonRule})}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(i.Button,{"aria-label":"Close",onClick:d,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eJ.Cross,{color:"gray-700",size:16})})})]})]})}function sk(e){let{selectedLogId:r,onClose:a}=e,l=(0,x.useIsMobile)(),[o,n]=(0,s.useState)(!1),[i,d]=(0,s.useState)(!1),{logRows:u}=(0,tl.useGroupLogs)(),{onUp:p,onDown:h,selectedLog:m}=sE({logRows:u,selectedLogId:r,onClose:a}),g=(0,s.useMemo)(()=>(0,e3.withAwaitPaint)(a),[a]);if(!l)return null;let f=!!(m?.traceId&&m?.sessionId),j=m?(0,t.jsx)(s$,{logGroup:m}):null;return(0,t.jsxs)(w.Modal.Modal,{active:!!r,"data-testid":(0,c.tid)("group-logs","details-panel"),drawerClassname:"h-full [&>div]:flex [&>div]:flex-col  [&>div]:flex-1",drawerHeight:"max",onClickOutside:g,children:[m&&(0,t.jsx)(sN,{onClose:a,onDown:h,onUp:p,requestMethod:m.requestMethod,requestPath:m.requestPath,responseStatusCode:m.statusCode}),(0,t.jsx)(w.Modal.Header,{children:(0,t.jsx)(eY.Switch,{className:"mx-4 -mb-2",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eY.Switch.Control,{checked:!o&&(!f||!i),label:f?"Request":"Request Details",onClick:()=>{n(!1),d(!1)},size:"large",value:"details"}),(0,t.jsx)(eY.Switch.Control,{checked:o,label:"Logs",onClick:()=>{n(!0),d(!1)},size:"large",value:"logs"}),f&&(0,t.jsx)(eY.Switch.Control,{checked:i,label:"Trace",onClick:()=>{n(!1),d(!0)},size:"large",value:"trace"})]})})}),(0,t.jsx)(w.Modal.Body,{className:"flex flex-1 flex-col !p-0 [&>div:first-child]:flex-1",children:f&&i?(0,t.jsx)(sj,{}):o?(0,t.jsx)(sg,{collapsed:!1}):j})]})}let sL=(0,s.memo)(function(e){let{onClose:s,selectedLogId:r}=e,{logRows:a}=(0,tl.useGroupLogs)(),{onUp:l,onDown:o,selectedLog:n}=sE({logRows:a,selectedLogId:r,onClose:s});return n?(0,t.jsx)(sz,{...n,onClose:s,onDown:o,onUp:l}):(0,t.jsx)(sT,{onClose:s})});function sT(e){let{onClose:s}=e,{data:r,error:a}=(0,ts.useSelectedLog)();return a?(0,t.jsx)(sH,{error:a}):r?(0,t.jsx)(sz,{...r,onClose:s}):(0,t.jsx)(sV,{onClose:s})}function sE(e){let{logRows:t,selectedLogId:r,onClose:a}=e,{setState:l}=(0,E.useLogsQueryState)(),o=(0,s.useRef)(null),n=r?t.findIndex(e=>e.requestId===r):-1;n>-1&&(o.current=t[n]);let i=(0,s.useMemo)(()=>n>0?()=>l({selectedLogId:t[n-1].requestId}):void 0,[l,t,n]),d=(0,s.useMemo)(()=>n<t.length-1&&-1!==n?()=>l({selectedLogId:t[n+1].requestId}):void 0,[l,t,n]);return(0,s.useEffect)(()=>{function e(e){let s=e.target&&e.target.tagName.toLowerCase();if(r&&"input"!==s&&"textarea"!==s)switch(e.key){case"ArrowUp":if(i){e.preventDefault(),i();let s=document.querySelector(`[data-log-row-id="${t[n-1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"ArrowDown":if(d){e.preventDefault(),d();let s=document.querySelector(`[data-log-row-id="${t[n+1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"Escape":e.preventDefault(),a()}}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,i,d,r,t,a]),{onUp:i,onDown:d,selectedLog:o.current}}function sI(e){let{requestPath:s}=e,r=to();return(0,t.jsx)(C.Text,{className:"truncate","data-testid":(0,c.tid)("logs","detail-requestPath"),monospace:!0,size:13,children:(0,t.jsx)(e6.HighlightText,{as:"span",search:r,text:s})})}function sD(e){let{used:s,max:r,format:a,className:l}=e;return(0,t.jsxs)(C.Text,{className:(0,tw.twMerge)("font-mono text-[13px]",l),monospace:!0,size:13,children:[(0,t.jsxs)("span",{className:(0,tw.twMerge)(!!r&&s>=.8*r&&"text-amber-900",!!r&&s>=r&&"text-red-900"),children:[a(s)," "]}),(0,t.jsxs)("span",{className:"text-gray-700",children:["/",r?` ${a(r)}`:(0,t.jsx)(em.Skeleton,{className:"inline-block translate-y-0.5",height:14,width:22})]})]})}function sM(e){let{icon:s,title:r,description:n,subtitle:i,additionalInfo:c,children:u,contextActions:p,isFluidEnabled:h,event:m}=e,x=(0,t.jsxs)("div",{className:(0,d.clsx)("flex w-full items-center gap-2 overflow-hidden px-2 pt-2",u?"pb-0.5":"pb-2"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[s&&(0,t.jsx)("div",{className:"text-gray-800",children:s}),(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,t.jsx)(C.Text,{className:"truncate",size:14,weight:500,children:r}),i&&(0,t.jsx)(C.Text,{className:"leading-tighter -mt-0.5",color:"gray-800",size:14,children:i})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(C.Text,{className:"inline-flex items-center gap-2 truncate",color:"gray-900",size:13,children:n}),c&&(0,t.jsx)(C.Text,{color:"gray-700",size:12,children:c})]})]});return(0,t.jsxs)("div",{className:"flex flex-col rounded-md border border-gray-300 bg-background-200",children:[(0,t.jsxs)("div",{className:(0,d.clsx)("flex flex-col rounded-md border-gray-300 bg-background-100 px-2",i?"py-px":"py-1",h&&"border-b border-l border-r -mx-px"),children:[r&&(p?.length?(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(l.MenuButton,{className:"-mx-1 rounded-sm !px-1 hover:bg-gray-100 [&>span]:px-0",variant:"unstyled",children:x}),(0,t.jsx)(a.Menu,{width:180,children:p.map(e=>(0,t.jsx)(sW,{...e},e.label))})]}):x),(0,t.jsx)("div",{className:"flex flex-col",children:u})]}),h&&m?(0,t.jsx)(sU,{event:m,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(sR,{event:m}),(0,t.jsx)(sq,{isFluidEnabled:h,event:m}),(0,t.jsx)(sA,{event:m})]})}):null]})}function sF(e){let{event:s}=e,{getProjectUrl:r}=(0,e4.useDashboardNavigation)(),{data:a}=(0,ts.useSelectedLog)(),{deploymentId:l}=a??{},o=-1!==s.durationMs&&"serverless"===s.source,{getFunctionMetadata:n}=(0,tP.useFunctionMetadata)("serverless"===s.source?l:void 0);if(!o||!s.durationMs)return null;let i=n(s.route),d=i&&"lambda"===i.type&&i.lambda.timeout&&1e3*i.lambda.timeout||-1,c=-1!==d;return(0,t.jsx)(sG,{contextActions:[{icon:(0,t.jsx)(eV.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Max Duration",href:r("/settings/functions#function-max-duration")}],label:`Execution Duration${c?" / Maximum":""}`,value:`${(0,eP.default)(s.durationMs,{secondsDecimalDigits:2})}${c?" ":""}`,valueLabel:"Execution Duration",children:(0,t.jsx)(sD,{format:e=>(0,eP.default)(e,{secondsDecimalDigits:2}),max:c?d:void 0,used:s.durationMs})})}function sq(e){let{event:s,isFluidEnabled:r}=e,{getProjectUrl:a}=(0,e4.useDashboardNavigation)(),l=r?"Peak Memory":"Memory Used";return sv(s.functionMaxMemoryUsed)?(0,t.jsx)(sG,{contextActions:[{icon:(0,t.jsx)(eV.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function CPU & Memory",href:a("/settings/functions#function-cpu")}],label:`${l} / Maximum`,value:`${s.functionMaxMemoryUsed} MB`,valueLabel:l,children:(0,t.jsx)(sD,{format:e=>`${e} MB`,max:s.functionMemorySize,used:s.functionMaxMemoryUsed})}):null}function sA(e){let{event:s}=e,{data:a}=(0,ts.useSelectedLog)(),{deploymentId:l}=a??{},o=-1!==s.durationMs&&"serverless"===s.source,{getFunctionMetadata:n}=(0,tP.useFunctionMetadata)("serverless"===s.source?l:void 0),{getProjectUrl:i}=(0,e4.useDashboardNavigation)(),d=n(s.route),c=!d&&"serverless"===s.source,u=null;return(d?.type==="lambda"&&(u=function(e){let[s,a,l]=e?.match(/(v8|[^0-9]*)([0-9].*)?/)||[],o=sS.get(a),n=e;return s&&o&&(n=o.name,l&&(n+=` ${l}`)),{text:n,reactNode:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[o?.logo,(0,t.jsx)(C.Text,{monospace:!0,size:13,children:n})]})}}(d.lambda.runtime)),u&&o)?(0,t.jsx)(sG,{contextActions:u?.text.includes("Node.js")?[{icon:(0,t.jsx)(eV.SettingsGear,{color:"gray-900",size:16}),label:"Configure Node.js Version",href:i("/settings/build-and-deployment#node.js-version")}]:void 0,isLoading:c,label:"Runtime",value:u?.text,children:u?.reactNode}):null}function sR(e){let{event:s}=e,r=(0,e0.useToasts)(),{handleFilter:a}=sX(),{concurrency:l,invocationId:o}=s;return void 0===l||l<1?null:(0,t.jsx)(sG,{label:(0,t.jsx)(t.Fragment,{children:"Peak Concurrency"}),contextActions:[{icon:(0,t.jsx)(p.Filter,{}),label:"View concurrent requests",onClick:()=>o?a("invocationIds",o,{override:!0,additionalParams:{timeline:"maximum"}}):void 0},{icon:(0,t.jsx)(eB.Copy,{}),label:"Copy Invocation ID",onClick:()=>{o&&((0,e8.copyToClipboard)(o),r.success("Invocation ID copied to clipboard"),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"Copy Invocation ID",action:"Copy"}))}}],value:`${l} Request${1===l?"":"s"}`})}function sO(e){let{event:r,onClick:a,groupLog:l,projectId:o,children:n,additionalInfo:i,hasExternalApiAccess:d}=e,c=(0,te.useO11yNavigation)(),{handleFilter:u}=sX(),{pathType:p,source:h,httpStatus:m,cache:x,invocationId:g}=r,{data:f}=(0,T.useProject)(o),j=!!(f?.resourceConfig?.fluid!==!1&&g&&"serverless"===h),v=null,y=h,b="",C="";"serverless"===h?(y="Function Invocation","background_func"===p?(v=(0,t.jsx)(W.FunctionSquare,{color:"gray-900",size:16}),y=i?.isServingRevalidation?"Revalidation":"Background Revalidation",b="Function Invocation"):"middleware"===p?(v=(0,t.jsx)(z.FunctionMiddleware,{color:"gray-900",size:16}),y="Middleware"):v=(0,t.jsx)(W.FunctionSquare,{color:"gray-900",size:16})):"middleware"===p?(v=(0,t.jsx)(z.FunctionMiddleware,{color:"gray-900",size:16}),y="Middleware"):"edge-function"===h?(v=(0,t.jsx)($.FunctionEdge,{color:"gray-900",size:16}),y="Edge Function Invocation"):"static"===h?(v=(0,t.jsx)(H,{color:"gray-900",size:16}),y="Edge Cache","PRERENDER"===x?(y="ISR Cache",v=(0,t.jsx)(eG.DataCache,{color:"gray-900",size:16})):"HIT"===x&&(C=""),"partial_prerender"===p&&(y="Edge Cache",b="Partial Prerender")):"external"===h?(v=(0,t.jsx)(eW.ArrowGlobe,{color:"gray-800",size:16}),y="Rewrite"):v=(0,t.jsx)(e$.Eye,{color:"gray-900",size:16});let w=(0,t.jsx)(tn.StatusCodeBadge,{className:"shrink !flex-row-reverse",full:200!==m,statusCode:m}),_="serverless"===h||"edge-function"===h,S=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(e$.Eye,{className:"mr-2 shrink-0 text-gray-800"}),label:"Open in Observability",href:c(`/route/${encodeURIComponent(r.route)}`,{removeExistingParams:!0,additionalParams:"edge-function"===r.source?{type:"edge"}:void 0})}],[c,r.route,r.source]);return(0,t.jsxs)(sM,{description:(0,t.jsxs)(t.Fragment,{children:[C,w]}),icon:v,isFluidEnabled:j,onClick:a,subtitle:b,title:y,event:r,children:[n,sv(r.route)&&_&&"middleware"!==p&&(0,t.jsx)(sG,{contextActions:S,label:"Route",onFilter:()=>u("routes",r.route),value:r.route,children:(0,t.jsx)(e7.RouteHighlighter,{route:r.route})}),sv(x)&&"MISS"!==x&&(0,t.jsx)(sG,{label:"Cache",onFilter:()=>u("caches",x),value:x}),!j&&(0,t.jsx)(sA,{event:r}),(0,t.jsx)(sF,{event:r}),!j&&(0,t.jsx)(sq,{isFluidEnabled:j,event:r}),"static"!==h&&"HIT"!==x&&"STALE"!==x&&d&&(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(tO,{enableDataCacheMetrics:!0,endTime:new Date(new Date(r.timestamp).getTime()+(r.durationMs??5e3)),projectId:o??"",requestId:l.requestId,source:h,startTime:new Date(r.timestamp),pathType:p})})]})}function sP(e){let{events:a,groupLog:l,projectId:o,hasExternalApiAccess:n}=e,i=(0,s.useMemo)(()=>{let e=[...a].sort((e,t)=>{let s=new Date(e.timestamp).getTime(),r=new Date(t.timestamp).getTime();return s===r?"background_func"===e.pathType?1:"background_func"===t.pathType?-1:0:s-r}),t=Math.max(...e.map(e=>"background_func"===e.pathType?e.httpStatus:-1));return e.filter(e=>"background_func"!==e.pathType||"static"!==e.source).map(e=>"background_func"===e.pathType?{...e,httpStatus:t}:e)},[a]);return 0===a.length?(0,t.jsx)(sC,{direction:"up",children:(0,t.jsx)(tn.RequestInProgressBadge,{})}):(0,t.jsx)(r.Stack,{direction:"column",gap:0,children:i.map((e,r)=>{let d=r===i.length-1,c=null,u=!1,p=a[r-1];if("partial_prerender"===e.pathType)c="STALE"===e.cache||"PRERENDER"===e.cache||"HIT"===e.cache?(0,t.jsx)(sC,{direction:"up",through:!0,children:(0,t.jsx)(tn.ResponseStreamingStartedBadge,{})}):d?(0,t.jsx)(sw,{hasFunctionCrashed:l.hasFunctionCrashed}):(0,t.jsx)(sC,{direction:"up",through:"dashed",children:(0,t.jsx)(tn.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})});else if(sy(e))c=d?(0,t.jsx)(sw,{hasFunctionCrashed:l.hasFunctionCrashed}):(0,t.jsx)(sC,{direction:"up",through:"dashed",children:(0,t.jsx)(tn.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})});else if(d){var h;let s=p&&sy(p)&&"background_func"===e.pathType,r=p&&"MISS"===p.cache&&"serverless"===p.source&&"middleware"!==p.pathType&&"background_func"===e.pathType;u=(!p||"MISS"===p.cache&&"serverless"!==p.source&&"edge-function"!==p.source)&&"MISS"===e.cache&&"serverless"===e.source&&"background_func"===e.pathType;let a=200===(h=e.httpStatus)||404===h||301===h||308===h||307===h||302===h;c=s||r?a?(0,t.jsx)(sC,{className:"mb-2",direction:"up",lineClassName:"border-dashed",children:(0,t.jsx)(tn.DataCacheUpdatedBadge,{})}):null:u?(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(sC,{direction:"up",through:a,children:(0,t.jsx)(tn.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})}),a?(0,t.jsx)(sC,{className:"h-5",direction:"up",lineClassName:"border-dashed",children:(0,t.jsx)(tn.DataCacheUpdatedBadge,{})}):null]}):(0,t.jsx)(sw,{hasFunctionCrashed:l.hasFunctionCrashed})}else c=(0,t.jsx)(sC,{direction:"straight"});let m=function(e,t,s){let r=t?.region,a=e.region,l=s.clientRegion;return sB(e)?null:(t&&sB(t)&&(r=l),sZ(e.region)&&"middleware"!==e.pathType&&r!==a&&l!==a)?a:null}(e,p,l);return(0,t.jsxs)(s.default.Fragment,{children:[m&&(0,t.jsx)(sC,{direction:"both",className:"-mt-2",lineClassName:p&&sB(p)?"border-dashed h-[30px]":"",children:(0,t.jsx)(tn.RegionBadge,{region:m})}),(0,t.jsx)(sO,{additionalInfo:{isServingRevalidation:u},event:e,groupLog:l,hasExternalApiAccess:n,projectId:o}),c]},`${e.timestamp}-${e.source}-${r}`)})})}function sB(e){return"prerender"===e.pathType&&"static"===e.source||"streaming_func"===e.pathType&&"static"===e.source}function s$(e){let a,{logGroup:l}=e,{timestamp:o,clientUserAgent:n,events:i,domain:c,requestPath:u,deploymentId:p,requestId:m,requestSearchParams:x,environment:g,branch:f,traceId:j,sessionId:v,clientRegion:y}=l,b=(0,h.useParams)(),{data:w}=(0,T.useProject)(b?.project),{team:_}=(0,eg.useTeam)(),S=_?.billing?.plan??"hobby",N=w?.id,k=(0,te.useO11yNavigation)(),{getProjectUrl:L}=(0,e4.useDashboardNavigation)(),E=m.split("::").at(-1)??m,{data:I}=(0,e9.default)(p),D=(0,tt.useDeploymentLink)(I),{isDeploymentEditable:M}=(0,el.usePageConfig)(),{handleFilter:F}=sX();console.error("logGroup",JSON.stringify(l,null,2));let q=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eH.External,{size:16}),label:"Visit Path",onClick:()=>window.open(`https://${c}${u}`,"_blank","noopener")},{icon:(0,t.jsx)(e$.Eye,{}),label:"Open in Observability",href:k(`/requestPath/${encodeURIComponent(u)}`,{removeExistingParams:!0})}],[k,u,c]),A=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eV.SettingsGear,{size:16}),label:"Configure Rules",href:L("/firewall/configure")}],[L]),R=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eU.Linked,{size:16}),label:"Open Deployment",href:D}],[D]),{data:O}=(0,eo.useRollingRelease)({teamIdOrSlug:_?.id,projectSlug:N}),P=O?.rollingRelease!==null,B=!1;return P&&"production"===g&&(O?.rollingRelease?.state==="ACTIVE"&&p===O.rollingRelease.canaryDeployment?.id?(a="Current Canary",B=!0):O?.rollingRelease?.state==="ACTIVE"&&p===O.rollingRelease.currentDeployment?.id?(a="Current Base",B=!0):(O?.rollingRelease?.state,a="Unspecified")),(0,t.jsxs)(r.Stack,{className:(0,d.clsx)("flex-1 pb-4"),tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"ml-1 flex items-center justify-between gap-2 p-1",children:[(0,t.jsx)(tn.RequestStartedBadge,{}),(0,t.jsx)("span",{className:"text-right font-mono text-[13px] leading-tight",children:(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"uppercase text-gray-900",children:[(0,eK.format)(new Date(o).getTime(),"MMM dd")," ",(0,eK.format)(new Date(o).getTime(),"HH:mm:ss"),(0,t.jsxs)("span",{className:"text-gray-900",children:[".",(0,eK.format)(new Date(o).getTime(),"SS")]})]}),(0,t.jsx)("span",{className:"inline-bock ml-1.5 rounded-sm px-1 py-px font-mono text-gray-900",children:(0,eK.format)(new Date(o).getTime(),"OO")})]})})]}),(0,t.jsxs)(sM,{children:[(0,t.jsx)(sG,{label:"Request ID",onFilter:()=>F("requestIds",E,{override:!0}),value:E||"No request ID"}),(0,t.jsx)(sG,{contextActions:q,label:"Path",onFilter:()=>F("requestPaths",u),value:u,children:(0,t.jsx)(sI,{requestPath:u})}),(0,t.jsx)(sG,{label:"Host",onFilter:()=>F("domains",c),value:c}),sv(n)&&(0,t.jsx)(sG,{label:"User Agent",value:n}),Object.keys(x).length>0&&(0,t.jsx)(t$,{inRequestLogs:!0,requestSearchParams:x}),sv(j)&&sv(v)&&(0,t.jsx)(sG,{label:"Trace ID",onFilter:()=>F("traceIds",j),value:j}),sv(v)&&(0,t.jsx)(sG,{label:"Session ID",onFilter:()=>F("sessionIds",v),value:v})]}),sZ(y)?(0,t.jsx)(sC,{direction:"both",children:(0,t.jsx)(tn.RegionBadge,{isEdgeRegion:!0,region:y})}):(0,t.jsx)(sC,{direction:"straight"}),(0,t.jsx)(sM,{contextActions:A,description:(0,t.jsx)("span",{className:"px-1",children:"Allowed"}),icon:(0,t.jsx)(ez.FirewallFlame,{color:"gray-900",size:16}),title:"Firewall"}),(0,t.jsx)(sC,{direction:"straight"}),(0,t.jsx)(sP,{events:i,groupLog:l,hasExternalApiAccess:"hobby"!==S,projectId:N})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(C.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(sG,{contextActions:R,isLoading:!I,label:"Deployment ID",onFilter:M?()=>F("deploymentIds",p):void 0,value:p}),sv(g)&&(0,t.jsx)(sG,{label:"Environment",onFilter:()=>F("environments",g),value:g}),a&&(0,t.jsx)(sG,{label:"Rolling Release",onFilter:B?()=>F("deploymentIds",p):void 0,value:a}),sv(f)&&(0,t.jsx)(sG,{label:"Branch",onFilter:()=>F("branches",f),value:f})]})]})}function sz(e){let{onClose:s,onDown:a,onUp:l,...o}=e,{requestMethod:n,requestPath:i,statusCode:u}=o;return(0,t.jsxs)(r.Stack,{className:(0,d.clsx)(ta.default.root,"dark:bg-background-200"),"data-testid":(0,c.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsx)(sN,{onClose:s,onDown:a,onUp:l,requestMethod:n,requestPath:i,responseStatusCode:u}),(0,t.jsx)(s$,{logGroup:o})]})}function sW(e){let{icon:s,label:r,onClick:a,href:l}=e,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 flex size-4 shrink-0 items-center text-gray-900",children:s}),r]});return l?(0,t.jsx)(e1.MenuLink,{className:"flex items-center",href:l,onMouseUp:()=>a?.(),children:o}):(0,t.jsx)(n.MenuItem,{className:"flex items-center",icon:!0,onClick:a,children:o})}function sG(e){let{label:r,value:n,valueLabel:i,isLoading:c=!1,children:u,onFilter:h,contextActions:m=[],styleProps:x={}}=e,g=(0,e0.useToasts)(),f=i??r,j=(0,s.useCallback)(()=>{n&&!c&&"string"==typeof f&&((0,e8.copyToClipboard)(n),g.message(`${f} copied to clipboard`))},[f,n,g,c]),b=(0,s.useCallback)(e=>{"string"==typeof f&&v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:f,action:e})},[f]);return(0,t.jsx)("div",{className:"border-b py-1 last:border-none",children:(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsxs)(l.MenuButton,{className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:w-full [&>span]:items-center [&>span]:justify-between [&>span]:gap-4",disabled:c,style:x,variant:"unstyled",children:[(0,t.jsx)(C.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:r}),(0,t.jsx)(em.Skeleton,{as:"dd",className:(0,d.clsx)(ta.default.logDetailRowSkeleton,"!flex"),show:c,children:(0,t.jsx)("span",{className:"truncate font-mono !text-[13px] text-gray-1000",title:n,children:u||n})})]}),(0,t.jsxs)(a.Menu,{width:Math.max(200,70+7*Math.max(...m.map(e=>e.label.length))),children:[h&&(0,t.jsx)(sW,{icon:(0,t.jsx)(p.Filter,{}),label:"Add Filter",onClick:()=>{h(),b("Add Filter")}}),m.map(e=>(0,t.jsx)(sW,{...e,onClick:()=>{e.onClick?.(),b(e.label)}},e.label)),"string"==typeof f&&(0,t.jsx)(sW,{icon:(0,t.jsx)(eB.Copy,{}),label:`Copy ${f}`,onClick:()=>{j(),b("Copy")}})]})]})})}function sH(e){let{error:s}=e,{maxRetention:a}=(0,ef.useUserRetention)();return(0,t.jsxs)(r.Stack,{align:"center",className:ta.default.noLogsSelected,direction:"column",gap:5,children:[(0,t.jsx)(r.Stack,{flex:"1 0 auto",justify:"center",children:(0,t.jsxs)(r.Stack,{align:"center",gap:3,justify:"center",children:[(0,t.jsx)(tr,{}),(0,t.jsx)(C.Text,{align:"center",color:"inherit",children:s?.name==="ExceedsBillingLimitError"?s.message:"Error loading selected log or the selected log does not exist, please try again"})]})}),(0,t.jsx)(r.Stack,{className:ta.default.setupLogDrain,children:(0,t.jsxs)(C.Text,{color:"inherit",size:12,children:["To store logs for longer than ",(0,eu.formatDuration)(a),", set up a Log Drain.",(0,t.jsxs)(e2.Link,{className:ta.default.learnMore,href:"/docs/deployments/logs",tab:!0,children:["Learn more ",(0,t.jsx)(eH.External,{align:"top",size:16})]})]})})]})}function sV(e){let{onClose:s}=e;return(0,t.jsxs)(r.Stack,{className:ta.default.root,"data-testid":(0,c.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsxs)(r.Stack,{align:"center",className:"ml-px p-4",direction:"row",gap:1,justify:"space-between",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:(0,t.jsx)(em.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)(C.Text,{className:ta.default.title,lineHeight:16,size:13,children:"GET"})})}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(r.Stack,{direction:"row",children:(0,t.jsx)("div",{className:ta.default.buttonRule})}),(0,t.jsx)(i.Button,{"aria-label":"Close",onClick:s,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eJ.Cross,{color:"gray-700",size:20})})]})]}),(0,t.jsxs)(r.Stack,{className:"flex-1 pb-4",tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 px-1 py-2",children:[(0,t.jsx)(tn.RequestStartedBadge,{}),(0,t.jsx)(em.Skeleton,{className:"w-48",show:!0,children:(0,t.jsx)("span",{className:"text-right text-[13px] tabular-nums leading-tight",children:"Loading timestamp..."})})]}),(0,t.jsxs)(sM,{children:[(0,t.jsx)(sG,{isLoading:!0,label:"Request ID",value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:"Path",value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:"Host",value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:"User Agent",value:"Loading"})]}),(0,t.jsx)(sC,{direction:"both",children:(0,t.jsx)(tn.AnatomyBadge,{className:"font-normal text-gray-800 text-sm",icon:(0,t.jsx)(tn.GlobeSmallIcon,{className:"text-gray-800"}),children:(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("span",{children:"Received in"})," ",(0,t.jsx)(em.Skeleton,{show:!0,children:"Region"})]})})}),(0,t.jsx)(sM,{description:(0,t.jsx)(em.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)("span",{children:"Allowed"})}),icon:(0,t.jsx)(ez.FirewallFlame,{color:"gray-800",size:16}),title:"Firewall"}),(0,t.jsx)(sC,{direction:"straight"}),(0,t.jsxs)(sM,{description:(0,t.jsx)(em.Skeleton,{className:"w-24",show:!0,children:(0,t.jsx)("span",{children:"Description"})}),icon:(0,t.jsx)(em.Skeleton,{height:16,width:16}),title:(0,t.jsx)(em.Skeleton,{show:!0,children:"Function Invocation"}),children:[(0,t.jsx)(sG,{isLoading:!0,label:(0,t.jsx)(em.Skeleton,{show:!0,children:"Route"}),value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:(0,t.jsx)(em.Skeleton,{show:!0,children:"Runtime"}),value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:(0,t.jsx)(em.Skeleton,{show:!0,children:"Execution Duration"}),value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:(0,t.jsx)(em.Skeleton,{show:!0,children:"Memory Used / Maximum"}),value:"Loading"})]})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(C.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(sG,{isLoading:!0,label:"Deployment ID",value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:"Environment",value:"Loading"}),(0,t.jsx)(sG,{isLoading:!0,label:"Branch",value:"Loading"})]})]})]})}function sU(e){let{children:r,event:a}=e,[l,o]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"rounded-md overflow-hidden text-gray-800 px-2 cursor-pointer",children:[(0,t.jsxs)("button",{type:"button",className:"w-full flex items-center justify-between py-2 text-xs bg-inherit cursor-pointer",onClick:()=>o(!l),children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eQ.Fluid,{color:"gray-700",className:"size-3"}),(0,t.jsx)(C.Text,{color:"gray-800",size:12,weight:400,children:"Fluid"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,t.jsxs)("div",{className:(0,d.clsx)("flex items-center gap-2 text-gray-500 transition-all duration-100",l&&"opacity-0 translate-y-1"),children:[(0,t.jsx)(sQ,{usage:a.functionMaxMemoryUsed??0,max:a.functionMemorySize??0}),(0,t.jsxs)("span",{className:"text-gray-900 text-xs font-regular font-mono",children:[a.functionMaxMemoryUsed," MB"]})]}),(0,t.jsx)(eX.ChevronDown,{color:"gray-900",size:12,className:(0,d.clsx)("transform transition-transform",{"rotate-180":l})})]})]}),(0,t.jsx)(eO.AnimatePresence,{initial:!1,children:l&&(0,t.jsx)(eR.motion.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"border-gray-200 space-y-1",children:r})},"content")})]})}let sQ=e=>{let{usage:s,max:r}=e,a=r>0?Math.max(0,Math.min(100,s/r*100)):0;return(0,t.jsx)("div",{className:"w-[2px] h-[10px] rounded-full bg-gray-300 flex items-end overflow-hidden",children:(0,t.jsx)("div",{className:(0,s_.cn)("w-full bg-gray-900 rounded-full",a>80&&"bg-amber-700",a>99&&"bg-red-700"),style:{height:`${a}%`}})})},sX=()=>{let{setState:e}=(0,E.useLogsQueryState)();return{handleFilter:(0,s.useCallback)(function(t,s){let{replace:r=!1,override:a=!1,additionalParams:l={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e({[t]:[s],...l},r,a)},[e])}};function sZ(e){return sv(e)&&""!==e&&e in e5.regions}var sJ=e.i(3327755),sK=e.i(1991452),sY=e.i(3734840),s0=e.i(6357175),s1=e.i(3162826),s2=e.i(6881349),s3=e.i(7797615),s5=e.i(2458511);function s6(e,t){let[s,r]=function(e,t){let s=e=>/\s/.exec(e),r=t-1,a=t;for(;r>=0&&!s(e[r]);)r-=1;for(r=Math.max(0,r+1);a<e.length&&!s(e[a]);)a+=1;return a=Math.max(r,a),[r,a]}(e,t),a=e.substr(s,r);return a+e.substr(r)}function s4(e,t,s,r){return void 0!==r&&r!==t?e.substr(0,t)+s+e.substr(r):e.substr(0,t)+s+e.substr(t)}let s8=["requestId","sessionId","traceId","deploymentId","invocationId"];function s9(){let e=(0,sK.useRouter)(),{state:{levels:r,domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestPaths:u,statusCodes:p,searchQuery:h,requestIds:m,requestMethods:x,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b,live:C},setState:w}=(0,E.useLogsQueryState)(),{trackFilterUse:_}=B(),{isDeploymentEditable:S}=(0,el.usePageConfig)(),N=K;S&&(N=J);let{isLoading:k}=(0,tl.useGroupLogs)(),[L,T]=(0,s.useState)(null),[I,D]=(0,s.useState)(""),[F,q]=(0,s.useState)(!0),[A,R]=(0,s.useState)(""),[P,$]=(0,s.useState)(0),z=(0,s.useRef)(null),W=(0,s.useRef)({}),G=(0,s.useRef)(null),H=(0,s.useRef)(null),V=(0,s.useRef)({query:{levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionId:[],traceIds:[]},searchQuery:""}),U=(0,s0.useDebouncedCallback)(e=>D(e),300),[Q,X]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=sJ.daumtools.userAgent();X("safari"===e?.browser?.name)},[]);let Z=(0,s.useCallback)(e=>{R(e),z.current?.setValue(e)},[]),Y=(0,s.useMemo)(()=>L?.attributeName==="source"||L?.attributeName==="requestTags"||L?.attributeName==="level"||L?.attributeName==="statusCode"||L?.attributeName==="cache"||L?.attributeName==="requestMethod"||L?.attributeName==="environment",[L]),ee=(0,s.useMemo)(()=>!!L?.attributeName&&s8.includes(L.attributeName),[L]),{data:et,isLoading:es}=M({attributeName:!L||ee?null:L.attributeName,attributeNameSearchQuery:I,levels:L?.attributeName==="level"?void 0:r,caches:L?.attributeName==="cache"?void 0:g,requestMethods:L?.attributeName==="requestMethod"?void 0:x,domains:L?.attributeName==="domain"?void 0:a,deploymentDomains:L?.attributeName==="deploymentDomain"?void 0:l,sources:L?.attributeName==="source"?void 0:n,requestTags:L?.attributeName==="requestTags"?void 0:i,routes:L?.attributeName==="route"?void 0:d,requestPaths:L?.attributeName==="requestPath"?void 0:u,statusCodes:L?.attributeName==="statusCode"?void 0:p,environments:L?.attributeName==="environment"?void 0:f,branches:L?.attributeName==="branch"?void 0:j,sessionIds:L?.attributeName==="sessionId"?void 0:v,traceIds:L?.attributeName==="traceId"?void 0:y,invocationIds:L?.attributeName==="invocationId"?void 0:b}),{data:er,isLoading:ea}=M({attributeName:"environment",domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestMethods:x,levels:r,statusCodes:p,requestPaths:u,caches:g,branches:j,sessionIds:v,traceIds:y,invocationIds:b}),eo=(er?.rows??[]).reduce((e,t)=>e+t.total,0),en=(0,s.useMemo)(()=>{if(L?.attributeName!=="requestId")return et?.rows?.map(e=>({label:String(e.attributeValue),value:String(e.attributeValue)}))},[L,et]),ei=(0,s.useCallback)(()=>{R(""),w({levels:void 0,sources:void 0,requestTags:void 0,deploymentDomains:void 0,deploymentIds:void 0,domains:void 0,routes:void 0,requestPaths:void 0,searchQuery:"",requestIds:void 0,requestMethods:void 0,statusCodes:void 0,caches:void 0,preset:null,environments:void 0,branches:void 0,sessionIds:void 0,traceIds:void 0,invocationIds:void 0})},[w]),ed=(0,s.useCallback)(()=>{let e={levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionIds:[],traceIds:[],invocationIds:[]},t=(G.current?.value||"").split(" "),s=t.filter(e=>!N.find(t=>e.includes(`${t.name}:`))&&!/^\s*$/.test(e)).join(" ");return t.map(e=>{if(e.includes(":")){let t=e.indexOf(":"),s=e.slice(0,t),r=e.slice(t+1),a=N.find(e=>e.name===s);if(""!==r&&a)return{name:re(a.attributeName),filterValue:r.split(",")}}return null}).filter(e=>null!==e).forEach(t=>{let{name:s,filterValue:r}=t;s in e?e[s]=[...e[s],...r]:e[s]=r}),{query:e,searchQuery:s}},[N]);(0,s.useEffect)(()=>{ea&&z.current?.close()},[ea]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!G.current||t&&s||(e.preventDefault(),G.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{let e=G.current;if(e&&!Q){let t=()=>{$(e.scrollLeft)};return e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}},[Q]),(0,s.useEffect)(()=>{let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:u,requestIds:m,requestMethods:x,statusCodes:p,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b},s="";(0,sY.default)(W.current,e.query)||setTimeout(()=>{let r=Object.keys({...e.query,searchQuery:h}).filter(e=>e in t||"searchQuery"===e&&h);if(0===r.length)return void Z("");r.forEach(e=>{if("searchQuery"===e&&h){s+=`${h.replaceAll("+"," ")} `;return}let r=function(e){if("requestTags"===e)return e;let t=0;return"branches"===e?t=-2:e.endsWith("s")&&(t=-1),e.slice(0,t)}(e),a=N.find(e=>e.attributeName===r);a&&t[e].length>0&&(s+=`${a.name}:${t[e].join(",")} `)}),Z(s)}),W.current=e.query},[e.query,r,Z,l,o,h,n,i,a,d,u,m,N,x,p,g,f,j,v,y,b]);let ec=(0,s.useCallback)(()=>{let{query:e,searchQuery:t}=ed();w({...e,searchQuery:t,preset:null}),t&&t!==V.current.searchQuery?_({eventTrigger:"search bar",filter:"searchQuery",value:[""]}):Object.keys(e).forEach(t=>{e[t].length>V.current.query[t].length&&_({eventTrigger:"search bar",filter:t,value:O.includes(t)?e[t]:Array(e[t].length).fill("")})}),V.current={query:e,searchQuery:t}},[w,ed,_]),eu=(0,s.useCallback)(()=>{let e=G.current?.selectionStart||0,t=s6(G.current?.value||"",e);if(t.includes(":")){let[e]=t.split(":"),s=N.find(t=>t.name===e);s&&T(s)}else T(null);D("")},[N]),ep=(0,s.useCallback)((e,t)=>{let s=G.current?.selectionStart||0;if(L&&!Y)return e;let r=t=>{let s=(0,eC.matchSorter)(e,t,{keys:["value","label"]}),r=e.find(e=>"confirm search"===e.label);return r&&s.unshift(r),s};if(L){let e=s6(t,s).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$");return r(e[e.length-1].split(" ")[0])}if(t.includes(" ")){let e=s6(t,s),a=s6(t,s-e.length-1),l=!a.includes(":")&&!h.includes(a.split(" ")[0]);return(N.find(e=>a.includes(e.name)),l)?[]:r(e.split(" ")[0])}return r(t)},[L,h,Y,N]),eh=(0,s.useMemo)(()=>{if(!en||!L||0===en.length||"requestId"===L.attributeName)return null;q(!0);let{query:e}=ed(),t=e[re(L.attributeName)];return en.filter(e=>!t.includes(e.value))},[L,ed,en]),em=eh&&L&&!es||I&&F&&L,ex=A.includes(":");return(0,t.jsxs)("div",{className:s5.default.comboboxWrapper,style:{"--word-gap":ex?"10px":"0px"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsxs)(s2.Combobox,{className:s5.default.combobox,filter:ep,noNegativeIndex:!0,noTextSelection:!0,onChange:e=>{let t=G.current?.selectionStart||0,s=G.current?.value||"";if(z.current?.setSelectedIndex(0),!e)return;let r=N.find(t=>t.name===e.split(":")[0]);if(""===s){Z(e),r&&T(r);return}if(r){let a=s6(s,t);if(s.includes(`${r.name}:`)){let e=s.split(" ").find(e=>e.includes(r.name))||"",{query:t}=ed(),l=t[re(r.attributeName)].length>0;Z(s.replace(e,`${e}${l?",":""}`).split(" ").filter(e=>e!==a).join(" ")),T(r);return}if(a){let r=s.slice(0,t-a.length),l=s.slice(t-a.length,s.length+a.length);Z(r+(l=l.replace(a,e)))}else{let r=0===t;Z(s4(s,t,e)),r&&setTimeout(()=>{G.current?.setSelectionRange(e.length,e.length)})}T(r);return}if(L){let r=s6(s,t).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$"),a=r[r.length-1];if(a){let r=a.split(" ")[0],l=/^\s*$/.test(r),o=s6(s,t),n=o.split(":")[0];if(s.split(":").filter(e=>e.includes(n)).length>1){let t=s.split(" ").find(e=>e.includes(L.name))||"";Z(s.replace(t,`${t},${e}`).split(" ").filter(e=>e!==o).join(" "))}else Z(s.replace(l?" ":a,`${e} `))}else Z(s4(s,t,`${e} `));z.current?.setSelectedIndex(-1),T(null),setTimeout(()=>{ec()})}},onChangeOpen:e=>{z.current?.setSelectedValue(null),!e&&(D(""),H.current||z.current?.close())},onClear:ei,placeholder:ea||0===eo||C?"Search logs...":`${(0,s3.abbreviateNumber)(eo).toUpperCase()} total ${1===eo?"log":"logs"} found...`,ref:z,shouldContinue:!0,children:[(0,t.jsx)(s2.Combobox.Input,{className:s5.default.input,"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",loading:!!(es&&L||k),onBlur:()=>{T(null)},onPaste:e=>{try{let t=e.clipboardData.getData("text/plain"),s=/[a-z0-9]{5}-\d{13}-[a-z0-9]{12}/i.exec(t),r=e.currentTarget,a=r.selectionStart||0,l=r.selectionEnd||a,o=r.value.substring(a,l);if(s&&!t.includes("requestId")&&(!r.value.includes("requestId:")||o.includes("requestId"))){e.preventDefault();let s=s4(r.value,a,`requestId:${t}`,l);Z(s)}}catch(e){}},onChange:t=>{if(R(t.target.value),""===t.target.value){T(null);let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:u,requestIds:m,requestMethods:x,statusCodes:p,caches:g,environments:f,branches:j};Object.keys({...e.query,searchQuery:h}).filter(e=>e in t||"searchQuery"===e&&h).length>0&&(ei(),Z(""));return}Z(t.target.value);let s=t.target.selectionStart||0;eu();let c=s6(t.target.value,s);if(c.includes(":")){let e=N.find(e=>e.name===c.split(":")[0]);if(e){let t=c.split(":")[1].split(",");U((t=t[t.length-1]).split(" ")[0]),T(e)}else T(null)}},onClick:eu,onKeyDown:e=>{let t=G.current?.value||"",s=H.current;if("Enter"===e.key&&s&&ec(),"ArrowLeft"===e.key||"ArrowRight"===e.key){let s=e.target.selectionStart||0;/^\s*$/.test(t.split("")[s-1])&&T(null)}},ref:G}),(0,t.jsx)(s2.Combobox.List,{className:s5.default.comboboxList,emptyMessage:(0,t.jsxs)("button",{className:s5.default.confirm,onClick:()=>{z.current?.close(),ec()},ref:H,type:"button",children:["Confirm search"," ",(0,t.jsx)("kbd",{className:s5.default.suffix,children:(0,t.jsx)(s1.CornerDownRight,{})})]}),hideOptions:!0,children:em?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rt,{onSelect:()=>{z.current?.close(),ec()}}),eh?eh.map(e=>(0,t.jsx)(s2.Combobox.Option,{className:s5.default.option,value:e.value,children:`${e.value}`},e.value)):[]]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rt,{onSelect:()=>{z.current?.close(),ec()}},"first-option"),N.map(e=>(0,t.jsxs)(s2.Combobox.Option,{className:s5.default.option,value:`${e.name}:`,children:[(0,t.jsx)("span",{className:s5.default.filter,children:`${e.name}:`}),(0,t.jsx)("div",{className:s5.default.suggestions,children:e.suggestions.map(e=>(0,t.jsxs)("span",{children:["[",e,"]"]},e))})]},e.name))]})})]}),!Q&&(0,t.jsx)("div",{"aria-hidden":!0,className:s5.default.textOverlay,style:{transform:`translateX(-${P}px)`},children:A.split(/\s/).map((e,s)=>e.includes(":")?(0,t.jsxs)("span",{className:s5.default.highlight,children:[e," "]},e):(0,t.jsx)("span",{style:""===e&&0===s?{marginLeft:-4,marginRight:0}:{},children:e},`${e}${s}`))})]})}function s7(){return(0,t.jsxs)(s2.Combobox,{className:(0,d.clsx)(s5.default.combobox,"geist-show-on-desktop"),placeholder:"Search logs...",children:[(0,t.jsx)(s2.Combobox.Input,{className:s5.default.input,id:"search-logs"}),(0,t.jsx)(s2.Combobox.List,{className:s5.default.comboboxList})]})}function re(e){return"requestTags"===e?e:"branch"===e?`${e}es`:`${e}s`}function rt(e){let{onSelect:s}=e;return(0,t.jsx)(s2.Combobox.Option,{label:"confirm search",onCustomSelect:s,value:"",children:(0,t.jsxs)(r.Stack,{className:"flex w-full flex-row justify-between",children:[(0,t.jsx)(C.Text,{weight:500,children:"Confirm search"})," ",(0,t.jsx)(s1.CornerDownRight,{})]})})}var rs=e.i(8510056),rr=e.i(6870754),ra=e.i(7437286);function rl(){let{state:{page:e},setState:a}=(0,E.useLogsQueryState)(),{data:l,isLoading:o,isValidating:n,size:i,setSize:d}=(0,tl.useGroupLogs)(),u=(0,s.useRef)(null),p=(0,s.useRef)(void 0),h=(0,ra.useIntersectionObserver)(u,{rootMargin:"200px"}),x=l&&l.length>0,g=l?.[l.length-1].hasMoreRows,f=o||i>0&&l&&void 0===l[i-1],{team:j}=(0,m.useAccount)(),v=j?.billing?.plan??"hobby",{maxRetention:y}=(0,ef.useUserRetention)(),b=function(e,t){let s=(0,ep.sub)(Date.now(),e).getTime(),r=t?.[t.length-1].rows;if(!r||0===r.length)return!0;let a=new Date(r[r.length-1].timestamp).getTime(),l=new Date(r[0].timestamp).getTime();return!!(a&&a>=s&&l&&l>=s)}(y,l),w=(0,s.useCallback)(()=>{!o&&!n&&x&&g&&b&&a({page:e+1},!0)},[x,g,o,n,e,a,b]);return(0,s.useEffect)(()=>{d(e)},[e]),(0,s.useEffect)(()=>{h?.isIntersecting&&!p.current&&w(),p.current=h?.isIntersecting},[h?.isIntersecting,w]),(0,t.jsx)(r.Stack,{align:"center",children:(0,t.jsx)("div",{"data-testid":(0,c.tid)("group-logs","load-more-logs"),ref:u,style:{padding:"var(--geist-gap) 0",visibility:void 0===l?"hidden":"visible",minWidth:"12rem"},children:(g||o||n||void 0===l)&&b?(0,t.jsx)(rr.LoadMoreButton,{disabled:!1===g,loading:f,noGap:!0,onClick:w}):(0,t.jsx)("div",{style:{padding:"var(--geist-gap)"},children:(0,t.jsx)(C.Text,{className:t6.default.screenReaderSelect,style:{color:"var(--accents-5)"},tabIndex:0,children:b||"enterprise"===v?"No more logs to show within selected timeline":"The older logs have expired. You can upgrade your plan to store more logs"})})})})}var ro=e.i(5431818),rn=e.i(615673);let ri=(0,s.forwardRef)(function(e,s){let{showSkeleton:r=!1,onScroll:a}=e;return r?(0,t.jsx)(ru,{}):(0,t.jsx)(rd,{onScroll:a,ref:s})}),rd=(0,s.forwardRef)(function(e,r){let{onScroll:a}=e,{setState:l,state:{selectedLogId:o}}=(0,E.useLogsQueryState)(),{data:n,error:i}=(0,tl.useGroupLogs)(),d=!n,[c,u]=(0,s.useState)({rows:[],rowsIdSet:new Set});(0,s.useEffect)(()=>{let e=function e(t){if(0===t.length)return[];if(1===t.length)return t[0];if(t.length>2){let s=Math.floor(t.length/2);return e([e(t.slice(0,s)),e(t.slice(s))])}let[s,r]=t,a=[],l=0,o=0;for(;l<s.length&&o<r.length;){let e=s[l],t=r[o],n=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();n<0?(a.push(e),l++):(n>0?a.push(t):(a.push(e),l++),o++)}return a.concat(s.slice(l)).concat(r.slice(o))}((n||[]).map(e=>e.rows??[]));u(t=>{let{rowsIdSet:s}=t;return{rows:e.map(e=>({...e,isNew:!s.has(e.requestId)})),rowsIdSet:new Set(e.map(e=>e.requestId))}})},[n]);let p=(0,s.useCallback)(e=>{l({selectedLogId:e.requestId})},[l]);if(i)return(0,t.jsx)(rc,{children:(0,t.jsx)(sa,{error:i})});if(d)return(0,t.jsx)(ru,{});let h=c.rows.length>0;return(0,t.jsx)(rc,{hasLogs:h,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:ro.default.logRowsContainer,onScroll:a,ref:r,children:(0,t.jsx)("div",{className:ro.default.logRowsWrapper,style:{paddingTop:"var(--geist-space)"},children:(0,t.jsx)(t8,{logRows:c.rows,onRowSelect:p,selectedLogId:o})})}),(0,t.jsx)(rl,{})]}):(0,t.jsx)(sl,{})})});function rc(e){let{children:s,hasLogs:r=!1}=e;return(0,t.jsx)("div",{className:(0,d.clsx)(rn.default.container,{[rn.default.hasLogs]:r}),style:{position:"relative",zIndex:2,flex:1},children:s})}function ru(){return(0,t.jsx)("div",{style:{padding:"var(--geist-space) 0"},children:(0,t.jsx)(se,{})})}var rp=e.i(4819890);let rh=(0,G.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M14.5 8a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0ZM16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-5.5-2.5h-5v5h5v-5Z" clip-rule="evenodd"/>');var rm=e.i(198667);function rx(){let{skip:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=(0,T.useProject)((0,L.useProjectIdOrName)()),{team:s,isLoading:r}=(0,m.useAccount)(),{deploymentDomains:a,deploymentIds:l,domains:o,levels:n,routes:i,sources:d,requestTags:c,startDate:u,endDate:p,searchQuery:h,requestIds:x,requestMethods:g,requestPaths:f,statusCodes:j,caches:v,environments:y,branches:b,live:C,myLogs:w,sessionIds:_,hasTraces:D,traceIds:M,invocationIds:F}=(0,E.useLogsApiParams)(),q=p??new Date,A=function(e,t){let s=t.getTime()-e.getTime();return s<=(0,tk.default)("2m")?1:s<=(0,tk.default)("5m")?2:s<=(0,tk.default)("10m")?5:s<=(0,tk.default)("30m")?10:s<=(0,tk.default)("50m")?20:s<=(0,tk.default)("75m")?30:s<=(0,tk.default)("2.5h")?60:s<=(0,tk.default)("5h")?120:s<=(0,tk.default)("7.5h")?300:s<=(0,tk.default)("24h")?600:s<=(0,tk.default)("48h")?1200:s<=(0,tk.default)("75h")?1800:s<=(0,tk.default)("150h")?3600:s<=(0,tk.default)("300h")?7200:s<=(0,tk.default)("600h")?14400:s<=(0,tk.default)("1200h")?28800:s<=(0,tk.default)("1800h")?43200:86400}(u,q);return{...(0,S.default)(()=>{if(e||r||!t)return;let p=null!==s?s.id:null;if(null===p)return;let m=(0,N.encode)({interval:A,startDate:u.getTime(),endDate:C?void 0:q.getTime(),searchQuery:(0,I.stringifyArrayContent)((0,I.tokenizeSearchQuery)(h)),projectId:t.id,deploymentDomain:rg(a),deploymentId:rg(l),domain:rg(o),level:rg(n),ownerId:p,source:rg(d),requestTags:rg(c),route:rg(i),requestPath:rg(f),requestMethod:rg(g),requestId:x.map(e=>e.split("::").pop()),statusCode:rg(j),cache:rg(v),environment:rg(y),branch:rg(b),myLogs:!!w||void 0,sessionId:rg(_),hasTraces:!!D||void 0,traceId:rg(M),invocationId:rg(F)});return`${k.API_LOGS}/request-logs/timeseries${m}`},e=>(0,tp.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:5e3*!!C,keepPreviousData:!0,revalidateOnFocus:C,revalidateOnReconnect:C}),interval:A}}function rg(e){if(0!==e.length)return e.join(",")}function rf(e){let{showSkeleton:a}=e,{setState:l}=(0,E.useLogsQueryState)(),{live:o,startDate:n,endDate:d}=(0,E.useLogsApiParams)(),c=(0,s.useRef)(null),{isLoading:u,mutate:p,isValidating:h}=(0,tl.useGroupLogs)(),{mutate:m}=rx(),x=(0,s.useCallback)(()=>{u||c.current&&Date.now()-c.current<1e3||(c.current=Date.now(),l({refreshedAt:Date.now()}),p(),m())},[u,p,m,l]);return(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(i.Button,{className:o?"!ring-1 ring-blue-700":"",disabled:a,onClick:()=>{!o&&window.scrollY>=80&&window.scrollTo(0,0),o&&l({startDate:n,endDate:d}),o||l({live:!0})},prefix:o?(0,t.jsx)(rh,{className:"!text-blue-900"}):(0,t.jsx)(rp.PlayCircle,{}),type:"secondary",children:(0,t.jsx)("span",{className:o?"!text-blue-900":"",children:"Live"})}),(0,t.jsx)(i.Button,{"aria-label":"Refresh Logs",disabled:a||u,onClick:x,shape:"square",svgOnly:!0,type:"secondary",children:h?(0,t.jsx)(ti.Spinner,{color:"var(--accents-5)",size:16}):(0,t.jsx)(rm.RefreshClockwise,{})})]})}var rj=e.i(8556491),rv=e.i(7957424),ry=e.i(1903055),rb=e.i(167223);function rC(){let e=null!==(0,h.useSearchParams)(),{state:{searchQuery:r,levels:a,domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestPaths:u,statusCodes:p,requestMethods:m,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v,live:y},setState:b}=(0,E.useLogsQueryState)(),[C,w]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),N=(0,s.useRef)(null),k=(0,s0.useDebouncedCallback)(e=>{b({searchQuery:e,preset:null})},300),{data:L,isLoading:T}=M({attributeName:"environment",domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestMethods:m,levels:a,statusCodes:p,requestPaths:u,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v}),I=(L?.rows??[]).reduce((e,t)=>e+t.total,0);return(0,s.useEffect)(()=>{e&&!_&&w(r||"")},[e,r,_]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!N.current||t&&s||(e.preventDefault(),N.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,t.jsxs)("div",{style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(rb.default,{"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",onBlur:()=>S(!1),onChange:e=>{k(e.target.value),w(e.target.value)},onFocus:()=>S(!0),placeholder:T||0===I||y?"Search logs...":`${(0,s3.abbreviateNumber)(I)} total ${1===I?"log":"logs"} found...`,ref:N,scrollOnClear:!1,value:_?C:r,width:"100%"})]})}function rw(){return(0,t.jsxs)("div",{className:"geist-show-on-mobile",style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(rb.default,{"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",placeholder:"Search logs...",scrollOnClear:!1,width:"100%"})]})}var r_=e.i(9321858),rS=e.i(7230346),rN=e.i(512540);let rk="logsSidebarWidth";function rL(e){let{left:t,right:s,bottom:r}=e,a=rN.default.get(rk);if(a){let{left:e,right:l,bottom:o}=JSON.parse(a);rN.default.set(rk,JSON.stringify({left:t??e,right:s??l,bottom:r??o}))}else rN.default.set(rk,JSON.stringify({left:t??270,right:s??400,bottom:r??400}))}var rT=e.i(4437381),rE=e.i(8906260),rI=e.i(1203655),rD=e.i(7650435),rM=e.i(655306),rF=e.i(9446496),rq=e.i(1282799),rA=(0,rD.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:rM.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:rT.XAxis},{axisType:"yAxis",AxisComp:rF.YAxis}],formatAxisMap:rq.formatAxisMap}),rR=e.i(3081144),rO=e.i(9108284);let rP={error:"var(--ds-red-700)",success:"hsla(var(--ds-gray-500-value), 0.8)"},rB={error:"Error",success:"Success"};function r$(e){let{value:s,color:r,label:a}=e;return(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-x-2",children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:r}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,t.jsx)("span",{children:a})," ",(0,t.jsx)("span",{className:"font-medium tabular-nums",children:(0,s3.formatNumberCompact)(s)})]})]})}function rz(e){let{interval:s}=rx({skip:!0});return e.payload&&0!==e.payload.length&&e.active?(0,t.jsxs)("div",{className:"items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",children:[(0,t.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:e.payload.map(e=>(0,t.jsx)(r$,{color:rP[e.dataKey],label:rB[e.dataKey],value:Number(e.value)},e.dataKey))}),(0,t.jsx)("div",{className:"px-1 pt-0.5 text-center text-gray-900",children:(0,eK.format)(new Date(e.payload[0].payload.name),`HH:mm${s%60==0?"":":ss"} ${s>300?"iii MMM dd":""}`)})]},`ts-${e.label}`):null}function rW(){let[e,r]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[o,n]=(0,s.useState)("dataMin"),[i,c]=(0,s.useState)("dataMax"),{onSelectionChange:u}=(()=>{let{interval:e}=rx({skip:!0}),{setState:t}=(0,E.useLogsQueryState)();return{onSelectionChange:(0,s.useCallback)(s=>{if(1===s.length){let[r]=s;t({startDate:new Date(r.name),endDate:(0,td.addSeconds)(new Date(r.name),e)});return}let r=s[0],a=s[s.length-1];"name"in r&&"name"in a&&t({startDate:new Date(r.name),endDate:new Date(a.name)})},[t,e])}})(),{startDate:p,endDate:h}=(0,E.useLogsApiParams)(),{data:m,interval:x,isLoading:g}=rx(),f=(0,s.useMemo)(()=>m&&m.data?m.data:(0,rO.default)(p.getTime(),h?.getTime(),1e3*x).map(e=>({name:new Date(e).toISOString(),error:0,success:0})),[m,x,p,h]),j=(0,s.useCallback)(e=>{r(e.activeLabel||"")},[]),v=(0,s.useCallback)(t=>{e&&l(t.activeLabel||"")},[e]),y=(0,s.useCallback)(t=>{let s=a||t.activeLabel||"";if(!e||!s){r(""),l("");return}let[o,i]=[new Date(e).getTime(),new Date(s).getTime()];o>i&&([o,i]=[i,o]),n(o),c(i),r(""),l("")},[e,a]);return(0,s.useEffect)(()=>{"number"==typeof o&&"number"==typeof i&&(u(f.slice(o,i+1)),n("dataMin"),c("dataMax"))},[o,i,f,u]),(0,t.jsx)(rI.ResponsiveContainer,{height:54,width:"100%",children:(0,t.jsxs)(rA,{className:(0,d.clsx)({"!cursor-crosshair":!g,"pointer-events-none":g,"opacity-50 transition-opacity duration-500":m&&g}),data:f,margin:{top:15,right:4,bottom:-10},onMouseDown:j,onMouseMove:v,onMouseUp:y,children:[!g&&(0,t.jsx)(rE.Tooltip,{allowEscapeViewBox:{y:!0},animationDuration:0,content:rz,cursor:{fill:"var(--ds-gray-300)"},position:{y:5}}),(0,t.jsx)(rM.Bar,{animationDuration:0,dataKey:"error",fill:rP.error,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),(0,t.jsx)(rM.Bar,{animationDuration:0,dataKey:"success",fill:rP.success,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),e&&a?(0,t.jsx)(rR.ReferenceArea,{strokeOpacity:.3,x1:e,x2:a}):null,(0,t.jsx)(rT.XAxis,{axisLine:{stroke:"var(--ds-gray-300)"},interval:"preserveStartEnd",minTickGap:300,style:{fontSize:"0.6rem"},tickFormatter:e=>{let t=f[e].name;return x<60?(0,eK.format)(new Date(t),"HH:mm:ss"):x<=600?(0,eK.format)(new Date(t),"HH:mm"):(0,eK.format)(new Date(t),"MMM dd")},tickLine:{stroke:"var(--ds-gray-300)"}})]})})}var rG=e.i(9166951);function rH(e){let{className:s,tooltipClassName:r}=e,{state:a,setState:l}=(0,E.useLogsQueryState)();return(0,t.jsx)(tm.Tooltip,{className:r,desktopOnly:!0,text:"Show requests from this browser",children:(0,t.jsxs)(i.Button,{"aria-label":"Enable My Logs",className:(0,d.clsx)("*:overflow-visible",a.myLogs&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",s),"data-active":a.myLogs,onClick:()=>{let e=!a.myLogs;l({myLogs:e,preset:null}),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"my-logs-toggle",action:e?"Enable My Logs":"Disable My Logs"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(rG.User,{className:(0,d.clsx)(a.myLogs&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,d.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",a.myLogs?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var rV=e.i(9668517),rU=e.i(9522552),rQ=e.i(6198010),rX=e.i(4585051),rZ=e.i(2704354);e.i(553769);var rJ=e.i(3758860),rK=e.i(1919132),rY=e.i(3573347),r0=e.i(6238642),r1=e.i(915e3);function r2(){let e=(0,rV.useTeamSlug)(),{projectSlug:s}=(0,en.useProjectSlug)(),{logDrainsGroups:i}=(0,rY.useLogDrains)({teamSlug:e??null,projectSlug:s}),d=(0,r1.useLogDrainsResources)(),c=(0,h.useSearchParams)();if(!i.active.length||!e)return null;let u=new URLSearchParams(c?Array.from(c.entries()):[]);s&&u.set("project",s);let p=`/logs?${u.toString()}`;return(0,t.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(tm.Tooltip,{desktopOnly:!0,text:"View connected log-drains",children:(0,t.jsx)(l.MenuButton,{"aria-label":"LogDrains",shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(rU.Connection,{})})}),(0,t.jsxs)(a.Menu,{width:"250px",children:[i.active.map(a=>{var l,o;let i=(l=d,o=a.id,l?.find(e=>e.projectsMetadata.some(e=>(0,rK.getLogDrainProtocolSettings)(e)?.logDrainId===o))),c=(0,rJ.getIntegrationDeepLink)({integrationConfigurationId:a.configurationId,teamIdOrSlug:e,productId:i?.product.id,externalResourceId:i?.externalResourceId});return i?(0,t.jsx)(n.MenuItem,{href:c,isLink:!0,prefetch:!1,suffix:(0,t.jsx)(eH.External,{color:"gray-900"}),target:"_blank",children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(rX.Avatar,{hash:a.integrationIcon,size:24}),(0,t.jsx)("span",{className:"truncate",children:i.product.integration.name})]})},a.id):"integration"===a.createdFrom?(0,t.jsx)(n.MenuItem,{href:(0,rZ.getConfigureUrl)({website:a.integrationWebsite??"",configurationUri:a.integrationConfigurationUri},a.configurationId,p),isLink:!0,prefetch:!1,rel:"noopener noreferrer",suffix:(0,t.jsx)(eV.SettingsGear,{color:"gray-900"}),target:"_blank",children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate",direction:"row",gap:2,children:[(0,t.jsx)(rX.Avatar,{hash:a.integrationIcon,mask:!0,size:24}),(0,t.jsx)("span",{className:"truncate",children:a.name})]})},a.id):(0,t.jsx)(n.MenuItem,{href:`/${e}/${s}/settings/log-drains`,isLink:!0,suffix:(0,t.jsx)(eV.SettingsGear,{color:"gray-900"}),children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate pl-1",direction:"row",gap:3,children:[(0,t.jsx)(t0.Logs,{color:"gray-900",size:16}),(0,t.jsx)("span",{className:"truncate",children:a.name})]})},a.id)}),(0,t.jsx)(n.MenuItem,{className:"flex flex-row gap-1",children:(0,t.jsxs)(r.Stack,{align:"center",className:"pl-1",direction:"row",gap:1.5,children:[(0,t.jsx)(rQ.Plus,{color:"gray-900",size:16}),(0,t.jsx)(r0.AddLogDrainButton,{className:"flex items-center",onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Configure Log Drain"})},projectSlug:s,teamSlug:e,variant:"unstyled"})]})})]})]})}var r3=e.i(6097977);function r5(e){let{className:s,tooltipClassName:r}=e,{state:a,setState:l}=(0,E.useLogsQueryState)();return(0,t.jsx)(tm.Tooltip,{className:r,desktopOnly:!0,text:"Show requests that have traces",children:(0,t.jsxs)(i.Button,{"aria-label":"Enable Has Traces",className:(0,d.clsx)("*:overflow-visible",a.hasTraces&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",s),"data-active":a.hasTraces,onClick:()=>{let e=!a.hasTraces;l({hasTraces:e,preset:null}),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"has-traces-toggle",action:e?"Enable Has Traces":"Disable Has Traces"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(t2.Traces,{className:(0,d.clsx)(a.hasTraces&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,d.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",a.hasTraces?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var r6=e.i(3748432);function r4(e){let{sidebarWidth:r,...a}=e,{project:l}=(0,h.useParams)()??{},o=(0,T.useProject)(l),{trackLogPageVisit:n}=B(),{team:i}=(0,m.useAccount)(),{data:{environments:d},isLoading:c}=(0,rv.useAllEnvironments)(o.data?.id??"");return(0,s.useEffect)(()=>{n(),v.analytics.track(y.AnalyticsEvent.LOGS_GROUPING_VIEW,{projectId:o.data?.id??"",action:"visit",teamId:i?.id??""})},[n,o.data?.id,i?.id]),(0,s.useEffect)(()=>{let e=document.documentElement.style.overscrollBehaviorY,t=document.body.style.overscrollBehaviorY;return document.documentElement.style.overscrollBehaviorY="none",document.body.style.overscrollBehaviorY="none",()=>{document.documentElement.style.overscrollBehaviorY=e,document.body.style.overscrollBehaviorY=t}},[]),(0,ry.default)(o.error),(0,t.jsx)(el.PageConfigProvider,{...a,children:(0,t.jsx)(sd.GroupLogsProvider,{children:(0,t.jsx)(r8,{allEnvironments:d,isLoadingEnvs:c,sidebarWidth:r})})})}function r8(e){let{isLoadingEnvs:h,allEnvironments:b,sidebarWidth:C}=e,{state:w,setState:_}=(0,E.useLogsQueryState)(),{selectedLogId:S}=w,{team:N,isLoading:k}=(0,m.useAccount)(),L=(0,x.useIsMobile)(),{topOffset:T}=(0,el.usePageConfig)(),[I,D]=(0,s.useState)(!1),{getExport:M}=(0,r3.useGroupLogsExport)(),{data:F}=(0,ts.useSelectedLog)(),{can:q,isLoading:A}=(0,f.default)(),R=!N||q(j.Action.Read,j.Resource.Logs),O=A||k,[P,B]=(0,s.useState)("auto"),$="auto"===P?(F?.logs.length||0)>0:"opened"===P;(0,s.useEffect)(()=>{S||B("auto")},[S]),(0,s.useEffect)(()=>{$&&B(e=>"auto"===e?"opened":e)},[$]);let z=(0,s.useCallback)(()=>{_({selectedLogId:void 0})},[_]),W=(0,s.useRef)(null),G=(0,s.useRef)(null),H=(0,s.useRef)(null),V=(0,s.useRef)(null),U=(0,s.useRef)(null),Q=(0,s.useRef)(null),X=(0,s.useRef)(null),Z=(0,s.useRef)(null),[J,K]=(0,s.useState)(C.left),[Y,ee]=(0,s.useState)(C.right),[et,es]=(0,s.useState)(C.bottom),[er,ea]=(0,s.useState)(!1),eo=e=>{K(e),rL({left:e})},en=e=>{ee(e),rL({right:e})},ei=`${J}px calc(100% - ${J}px)`,ed=function(e){let t=(0,s.useRef)(0);return s=>{let r=s.currentTarget.scrollLeft;r!==t.current&&(t.current=r,e(s))}}(e=>{let t=null!==X.current;X.current=e.currentTarget.scrollLeft,t||requestAnimationFrame(()=>{U.current&&null!==X.current&&(U.current.scrollLeft=X.current),X.current=null})});(0,s.useEffect)(()=>{function e(){if(null===V.current)return;let e=Math.max(T,V.current.getBoundingClientRect().top),t=e+147;V.current.style.height=`calc(100vh - ${e}px)`,G.current&&(G.current.style.top=`${t}px`),H.current&&(H.current.style.height=`calc(100vh - ${t}px)`)}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[T,S]);let ec=function(e,t){let[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let s=(0,g.default)(()=>{if(!t.current||!e.current)return;let{top:s}=t.current.getBoundingClientRect(),{bottom:r}=e.current.getBoundingClientRect();s<=r?a(!0):a(!1)},200);return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e,t]),r}(U,Q),[eu,ep]=(0,s.useState)(null),eh=`max(min(${Y}px, 50vw), 350px)`;return(0,t.jsxs)(r6.ConditionalNavigationMarker,{enabled:!h,phase:"content",label:"LogsMain",children:[(0,t.jsxs)("div",{className:"tailwind-preflight",style:{display:"flex",flexFlow:"column"},children:[R||O||!N?null:(0,t.jsx)(rj.AdditionalPermissionsRequiredModal,{actionLabel:"view Runtime Logs",role:N.membership?.role,team:N,dataTestId:(0,c.tid)("group-logs","no-permissions-card")}),R||A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{flexGrow:1},children:(0,t.jsxs)("div",{className:"block h-full md:grid",style:{gridTemplateColumns:ei},children:[(0,t.jsxs)("div",{className:"geist-hide-on-mobile",ref:W,style:{borderRight:"1px solid var(--accents-2)",position:"relative",zIndex:1},children:[(0,t.jsx)(rs.DraggableBorder,{element:W,onReset:()=>{eo(270)},onWidthChange:e=>{let t=Math.min(e,window.innerWidth/3);eo(t=t<230?0:t)},position:"right"}),(0,t.jsx)("div",{ref:V,style:{position:"sticky",top:T,height:"100%",background:"var(--geist-background)",contain:"layout"},children:(0,t.jsx)("div",{style:{overflowY:"auto",height:"100%",padding:"var(--geist-gap-half)"},tabIndex:-1,children:(0,t.jsx)(eE,{allEnvironments:b,isLoadingEnvs:h})})})]}),(0,t.jsxs)("div",{style:{display:"flex",flexFlow:"column",position:"relative",height:"100%",zIndex:2},children:[(0,t.jsxs)(r.Stack,{className:rS.default.logHeader,style:{background:"var(--geist-background)",position:"sticky",top:T,zIndex:3},children:[(0,t.jsxs)("div",{style:{padding:"var(--geist-gap-half) var(--geist-gap-half) 0 var(--geist-gap-half)"},children:[(0,t.jsxs)(r.Stack,{direction:{sm:"column",md:"column",lg:"row"},gap:2,children:[(0,t.jsxs)(r.Stack,{className:"grow",direction:"row",gap:2,children:[(0,t.jsx)(i.Button,{"aria-label":"filter sidebar",className:"hidden shrink-0 lg:block",onClick:()=>0===J?eo(270):eo(0),shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(p.Filter,{})}),(0,t.jsx)(rH,{tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(r5,{tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(s.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rw,{}),(0,t.jsx)(s7,{})]}),children:L?(0,t.jsx)(rC,{}):(0,t.jsx)(s9,{})})]}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(eM,{onClick:()=>D(!0)}),(0,t.jsx)(rH,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,t.jsx)(r5,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,t.jsx)("div",{className:"flex-1 lg:hidden"}),(0,t.jsx)(rf,{showSkeleton:A}),(0,t.jsx)(r2,{}),(0,t.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(l.MenuButton,{"aria-label":"Query Actions",shape:"square",size:"small",style:{height:"40px",width:"40px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(u.MoreVertical,{})}),(0,t.jsxs)(a.Menu,{width:"160px",children:[(0,t.jsx)(n.MenuItem,{onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as CSV"}),ep("csv")},children:"Export to CSV"}),(0,t.jsx)(n.MenuItem,{onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as JSON"}),ep("json")},children:"Export to JSON"})]})]})]})]}),(0,t.jsx)(rW,{}),(0,t.jsx)(t4,{ref:U})]}),(0,t.jsx)("div",{className:(0,d.clsx)(rS.default.logGradient,{[rS.default.show]:ec})})]}),(0,t.jsx)(ri,{onScroll:ed,ref:Q,showSkeleton:A}),(0,t.jsxs)("div",{className:"fixed bottom-0 hidden transform-gpu border-t border-gray-300 bg-background-100 md:block",ref:Z,style:{left:J,right:eh,height:$?400===et?"min(400px, 35vh)":`max(min(70vh, ${et}px), 240px)`:49,boxShadow:"var(--ds-shadow-large)",transition:er?"none":"height 0.2s",display:S?"block":"none",zIndex:3},children:[$?(0,t.jsx)(rs.DraggableBorder,{element:Z,onStartDrag:()=>{ea(!0)},onStopDrag:()=>{ea(!1)},onWidthChange:e=>{es(e),rL({bottom:e})},position:"top"}):null,(0,t.jsx)(sg,{collapsed:!$,onToggleCollapse:()=>{B($?"closed":"opened")}})]})]}),(0,t.jsxs)("div",{className:(0,d.clsx)("fixed bottom-0 right-0 hidden h-full translate-x-0 translate-y-0 transform-gpu overflow-y-auto border-t border-t-gray-400 bg-background-100 md:block",{"z-[2]":!!S,visible:!!S,invisible:!S}),ref:G,style:{width:eh,boxShadow:"var(--ds-shadow-large)",top:247},children:[(0,t.jsx)(rs.DraggableBorder,{element:G,onReset:()=>{en(400)},onWidthChange:e=>{en(Math.min(Math.max(e,400),window.innerWidth/2))},position:"left"}),(0,t.jsx)("div",{className:"hidden overflow-y-auto md:flex",ref:H,children:(0,t.jsx)(su.TraceViewerPanel,{className:"z-0 border-none",children:(0,t.jsx)(sL,{onClose:z,selectedLogId:S})})})]})]})}),(0,t.jsx)(eI,{active:I,allEnvironments:b,isLoadingEnvs:h,onDismiss:()=>D(!1)}),(0,t.jsx)(sk,{onClose:z,selectedLogId:S})]}):null]}),eu?(0,t.jsx)(r_.GroupExportModal,{format:eu,getExport:M,onClose:()=>{ep(null)}}):null]})}}]);

//# sourceMappingURL=e793208c6c1df99d.js.map
//# debugId=2605c9d3-57a2-5ca0-8205-f7e998425d63
