
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9326836a-d88e-5c7b-934c-7f5ebbb8e8db")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6307619,e=>{e.v({afterName:"deploy-step-module__kdfw_G__afterName",age:"deploy-step-module__kdfw_G__age",content:"deploy-step-module__kdfw_G__content",contentClose:"deploy-step-module__kdfw_G__contentClose",contentFadeIn:"deploy-step-module__kdfw_G__contentFadeIn",contentFadeOut:"deploy-step-module__kdfw_G__contentFadeOut",contentOpen:"deploy-step-module__kdfw_G__contentOpen",contentWrapperPaddingBoth:"deploy-step-module__kdfw_G__contentWrapperPaddingBoth",contentWrapperPaddingVertical:"deploy-step-module__kdfw_G__contentWrapperPaddingVertical",contentWrapperPaddingVerticalBottom:"deploy-step-module__kdfw_G__contentWrapperPaddingVerticalBottom",header:"deploy-step-module__kdfw_G__header",icon:"deploy-step-module__kdfw_G__icon",item:"deploy-step-module__kdfw_G__item",name:"deploy-step-module__kdfw_G__name",pushActions:"deploy-step-module__kdfw_G__pushActions",trigger:"deploy-step-module__kdfw_G__trigger",triggerContent:"deploy-step-module__kdfw_G__triggerContent",triggerIcon:"deploy-step-module__kdfw_G__triggerIcon"})},9286433,e=>{e.v({creationFlow:"index-module__958Mra__creationFlow",logPreviewText:"index-module__958Mra__logPreviewText",mask:"index-module__958Mra__mask"})},7921739,e=>{e.v({accordion:"deploy-steps-module__0qoykW__accordion",afterNameContainer:"deploy-steps-module__0qoykW__afterNameContainer",cacheBadgeName:"deploy-steps-module__0qoykW__cacheBadgeName",cacheBadgeTooltipContainer:"deploy-steps-module__0qoykW__cacheBadgeTooltipContainer",checksFilter:"deploy-steps-module__0qoykW__checksFilter",checksStatus:"deploy-steps-module__0qoykW__checksStatus",connectionCircle:"deploy-steps-module__0qoykW__connectionCircle",connectionIcon:"deploy-steps-module__0qoykW__connectionIcon",filterMessage:"deploy-steps-module__0qoykW__filterMessage",linkText:"deploy-steps-module__0qoykW__linkText",noData:"deploy-steps-module__0qoykW__noData"})},4080109,e=>{e.v({action:"domain-row-module__MaxPfa__action",domain:"domain-row-module__MaxPfa__domain",domainContainer:"domain-row-module__MaxPfa__domainContainer",header:"domain-row-module__MaxPfa__header",heading:"domain-row-module__MaxPfa__heading",separator:"domain-row-module__MaxPfa__separator",wrapper:"domain-row-module__MaxPfa__wrapper"})},7784834,e=>{e.v({loadMore:"domain-step-module__nlP40W__loadMore",stepMessage:"domain-step-module__nlP40W__stepMessage"})},4303122,e=>{e.v({closedAll:"switcher-module__0BRQ2W__closedAll",collapsedBadgeName:"switcher-module__0BRQ2W__collapsedBadgeName",collapsedBadgesWrapper:"switcher-module__0BRQ2W__collapsedBadgesWrapper",iconLabel:"switcher-module__0BRQ2W__iconLabel",tooltip:"switcher-module__0BRQ2W__tooltip"})},9907554,e=>{e.v({badge:"log-row-module__w74U9q__badge",badgesWrapper:"log-row-module__w74U9q__badgesWrapper",content:"log-row-module__w74U9q__content",contentClose:"log-row-module__w74U9q__contentClose",contentOpen:"log-row-module__w74U9q__contentOpen",downloadButton:"log-row-module__w74U9q__downloadButton",frameworkWrapper:"log-row-module__w74U9q__frameworkWrapper",header:"log-row-module__w74U9q__header",iconWrapper:"log-row-module__w74U9q__iconWrapper",isrIconWrapper:"log-row-module__w74U9q__isrIconWrapper",link:"log-row-module__w74U9q__link",middlewareList:"log-row-module__w74U9q__middlewareList",radixTrigger:"log-row-module__w74U9q__radixTrigger",scroller:"log-row-module__w74U9q__scroller",title:"log-row-module__w74U9q__title",trigger:"log-row-module__w74U9q__trigger",wrapper:"log-row-module__w74U9q__wrapper"})},1160917,e=>{e.v({active:"badge-module__2RpGha__active",badge:"badge-module__2RpGha__badge",badgeContent:"badge-module__2RpGha__badgeContent"})},2608999,e=>{e.v({allPathsMiddlewareRow:"artefacts-list-module__PbE2WW__allPathsMiddlewareRow",button:"artefacts-list-module__PbE2WW__button",copyFlagIcon:"artefacts-list-module__PbE2WW__copyFlagIcon",copyFlagIconWrapper:"artefacts-list-module__PbE2WW__copyFlagIconWrapper",copyIcon:"artefacts-list-module__PbE2WW__copyIcon",copyIconContainer:"artefacts-list-module__PbE2WW__copyIconContainer",copyIconWrapper:"artefacts-list-module__PbE2WW__copyIconWrapper",cronJobItem:"artefacts-list-module__PbE2WW__cronJobItem",cronJobItemAsterisk:"artefacts-list-module__PbE2WW__cronJobItemAsterisk",hasTrigger:"artefacts-list-module__PbE2WW__hasTrigger",headerContent:"artefacts-list-module__PbE2WW__headerContent",isrFunctionRow:"artefacts-list-module__PbE2WW__isrFunctionRow",item:"artefacts-list-module__PbE2WW__item",list:"artefacts-list-module__PbE2WW__list",middlewareInfoIcon:"artefacts-list-module__PbE2WW__middlewareInfoIcon",pathWrapper:"artefacts-list-module__PbE2WW__pathWrapper",regionBadge:"artefacts-list-module__PbE2WW__regionBadge",regionBadgeContainer:"artefacts-list-module__PbE2WW__regionBadgeContainer",singleDigit:"artefacts-list-module__PbE2WW__singleDigit",size:"artefacts-list-module__PbE2WW__size",staticAssetGrid:"artefacts-list-module__PbE2WW__staticAssetGrid",staticRoute:"artefacts-list-module__PbE2WW__staticRoute",staticRouteButton:"artefacts-list-module__PbE2WW__staticRouteButton",staticRoutesContainer:"artefacts-list-module__PbE2WW__staticRoutesContainer",trigger:"artefacts-list-module__PbE2WW__trigger",truncate:"artefacts-list-module__PbE2WW__truncate",typeBadge:"artefacts-list-module__PbE2WW__typeBadge",typeBadgeContainer:"artefacts-list-module__PbE2WW__typeBadgeContainer",typeIcon:"artefacts-list-module__PbE2WW__typeIcon",variantItemGrid:"artefacts-list-module__PbE2WW__variantItemGrid",variantItemUpstream:"artefacts-list-module__PbE2WW__variantItemUpstream",virtualListAtBottom:"artefacts-list-module__PbE2WW__virtualListAtBottom",virtualListAtTop:"artefacts-list-module__PbE2WW__virtualListAtTop"})},6618181,e=>{e.v({header:"header-module__W7AuxW__header",headerStatContainer:"header-module__W7AuxW__headerStatContainer",headerStatMetric:"header-module__W7AuxW__headerStatMetric",headerStatTitle:"header-module__W7AuxW__headerStatTitle",headerStats:"header-module__W7AuxW__headerStats",headerTitle:"header-module__W7AuxW__headerTitle",headerTitleContainer:"header-module__W7AuxW__headerTitleContainer"})},7935689,e=>{e.v({sidebar:"sidebar-module__m58S2q__sidebar",sidebarDivider:"sidebar-module__m58S2q__sidebarDivider",sidebarFooter:"sidebar-module__m58S2q__sidebarFooter",sidebarTaskContainer:"sidebar-module__m58S2q__sidebarTaskContainer",sidebarTitle:"sidebar-module__m58S2q__sidebarTitle"})},8159863,e=>{"use strict";e.s(["useCurrentDashboardDeploymentInterval",()=>r]);var t=e.i(4099374),n=e.i(3679047),s=e.i(7783521),a=e.i(3221921);function r(){let[e,r]=(0,t.useState)(0),[l,o]=(0,t.useState)(!1),c=(0,t.useRef)(!1),{teamSlug:d,project:u,id:p}=(0,n.useParams)()??{};if(!d||!u||!p)throw Error("Missing params");let m=(0,a.useDashboardDeployment)({deploymentId:p,teamSlug:d,projectName:u},{refreshInterval:e,revalidateOnFocus:l}),{data:h,mutate:g}=m,f=h.readyState,x=h.aliasAssigned||"ERROR"===f||"CANCELED"===f,y=(0,t.useMemo)(()=>(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return function(){for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];if(!i.get(e))return i.set(e,!0),setTimeout(()=>{i.delete(e)},n),t(...a)}})(p,()=>{g()}),[p,g]),{isListening:j}=(0,s.useDeploymentStatusPing)(x?void 0:h,y),v=x||j;return(0,t.useEffect)(()=>{!j||x||c.current||(c.current=!0,y())},[x,j,y]),(0,t.useEffect)(()=>{r(3e3*!v)},[v]),(0,t.useEffect)(()=>{o(!x)},[x]),m}let i=new Map},5224197,1367170,7442785,855127,e=>{"use strict";e.s([],5224197),e.s(["DeploySteps",()=>s1,"STEPS",()=>s0],7442785);var t=e.i(751170),n=e.i(222158),s=e.i(4099374),a=e.i(9722978),r=e.i(4756166),i=e.i(6405202),l=e.i(4597921),o=e.i(57106),c=e.i(1344973),d=e.i(5894409),u=e.i(1717203),p=e.i(7557283),m=e.i(2504781),h=e.i(8674454),g=e.i(6694387),f=e.i(4991687),x=e.i(8459493),y=e.i(9508212),j=e.i(8923565),v=e.i(5468328),C=e.i(5761705),_=e.i(7749365),b=e.i(6226725),w=e.i(109803),k=e.i(992159),S=e.i(7957251),N=e.i(6198010),T=e.i(9334638);let I=(0,T.withNewIcon)(`<g clip-path="url(#clip0_6799_10812)">
<path d="M8 5.03125C9.6396 5.03125 10.9688 6.3604 10.9688 8C10.9688 9.6396 9.6396 10.9688 8 10.9688C6.3604 10.9688 5.03125 9.6396 5.03125 8C5.03125 6.3604 6.3604 5.03125 8 5.03125Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5Z" fill="currentColor"/>
</g>
<defs>
<clipPath id="clip0_6799_10812">
<rect width="16" height="16" fill="currentColor"/>
</clipPath>
</defs>`);var A=e.i(6401841),R=e.i(762945),P=e.i(7674801),E=e.i(3679047),L=e.i(23202),M=e.i(6159310),W=e.i(1282571),D=e.i(8525850),B=e.i(4844919),F=e.i(3758860);e.i(6887680);var H=e.i(6810699),z=e.i(7743427),O=e.i(4443312),V=e.i(847180);let U="Running Checks",q="Marketplace Checks",$="Promotion Requirements",G="Assigning Domains",Y="Deployment Summary",Z=["Build Logs",Y,G],J=(0,T.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.53033 4.46967L5 3.93934L3.93934 5L4.46967 5.53033L10.4697 11.5303L11 12.0607L12.0607 11L11.5303 10.4697L5.53033 4.46967Z" fill="currentColor"/>');var K=e.i(8761240),Q=e.i(9386557),X=e.i(9584456),ee=e.i(9429910),et=e.i(5756088),en=e.i(5255926),es=e.i(8735244),ea=e.i(2560270),er=e.i(361349),ei=e.i(85019),el=e.i(6307619),eo=function(e){return e.Building="BUILDING",e.FetchingSourceCode="FETCHING_SOURCE_CODE",e.PopulatingBuildCache="POPULATING_BUILD_CACHE",e.PreparingBuildEnv="PREPARING_BUILD_ENV",e.RestoringBuildCache="RESTORING_BUILD_CACHE",e.UploadingBuildOutputs="UPLOADING_BUILD_OUTPUTS",e}({}),ec=function(e){return e.Delimiter="delimiter",e.Stdout="stdout",e.Stderr="stderr",e}({}),ed=function(e){return e.Canceled="cancelled",e.Complete="complete",e.Error="error",e.Warning="warning",e.InProgress="in-progress",e.Pending="pending",e.Skipped="skipped",e.NoData="no-data",e.Partial="partial",e.MissingPermissions="missing-permissions",e}({});let eu={both:el.default.contentWrapperPaddingBoth,vertical:el.default.contentWrapperPaddingVertical,"vertical-bottom":el.default.contentWrapperPaddingVerticalBottom,none:void 0};function ep(e){let{id:s,name:a}=e,r="string"==typeof a?`${a.length}ch`:"200px";return(0,t.jsx)(n.Item,{className:el.default.item,disabled:!0,value:s,children:(0,t.jsx)(n.Header,{asChild:!0,className:el.default.header,children:(0,t.jsx)("h2",{children:(0,t.jsx)(n.Trigger,{asChild:!0,className:el.default.triggerContent,children:(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)(en.Skeleton,{height:16,style:{width:r,fontSize:"14px"}}),(0,t.jsx)("span",{className:el.default.pushActions}),(0,t.jsx)(en.Skeleton,{className:el.default.icon,height:20,rounded:!0,width:20})]})})})})})}function em(e){let{action:r,children:i,disabled:l,finishedAt:o,id:d,customDuration:u,name:p,paddingType:m="vertical",skeleton:h,startedAt:g,status:f,afterName:x,showDurationWhenSkipped:y}=e,[j,v]=s.useState(null),C=s.useMemo(()=>{switch(f){case"cancelled":case"pending":return(0,t.jsx)(_.Clock,{color:"gray-500",size:20});case"skipped":case"partial":return(0,t.jsx)(J,{color:"gray-500",size:20});case"complete":return(0,t.jsx)(K.CheckCircleFill,{color:"blue-700",size:20});case"warning":return(0,t.jsx)(Q.WarningFill,{color:"amber-700",size:20});case"error":return(0,t.jsx)(X.StopFill,{color:"red-700",size:20});case"no-data":return(0,t.jsx)(ee.InformationFill,{color:"gray-700",size:20});case"missing-permissions":return(0,t.jsx)(et.LockClosed,{color:"gray-700",size:20});default:return(0,t.jsx)(es.Spinner,{size:20})}},[f]);(0,er.useInterval)(()=>{g&&v(Date.now()-g)},o?null:1e3,!0),s.useEffect(()=>{g&&o&&v(o-g)},[j,o,g]);let b="skipped"===f;return(0,t.jsxs)(n.Item,{className:el.default.item,"data-status":f,disabled:l,value:d,children:[(0,t.jsx)(n.Header,{asChild:!0,className:el.default.header,children:(0,t.jsx)("h2",{children:(0,t.jsx)(n.Trigger,{asChild:!0,className:(0,a.clsx)(el.default.triggerContent,{"flex-nowrap":d===eo.Building}),children:(0,t.jsxs)("div",{children:[(0,t.jsx)(ea.ChevronDown,{className:el.default.triggerIcon,color:l?"gray-800":"gray-900"}),(0,t.jsx)(c.Text,{as:"span",className:el.default.name,weight:500,children:p}),x?(0,t.jsx)(c.Text,{as:"span",className:el.default.afterName,children:x}):null,(0,t.jsx)("span",{className:el.default.pushActions}),r,h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:el.default.age}),(0,t.jsx)(en.Skeleton,{className:el.default.icon,height:20,rounded:!0,width:20})]}):(0,t.jsxs)(t.Fragment,{children:[(!b||y)&&(u||j)&&d!==Y?(0,t.jsx)("span",{className:"text-label-14 flex-none text-gray-900 tabular-nums",children:(0,ei.age)(u||j||void 0,{includeSeconds:!0})}):null,b?(0,t.jsx)("span",{className:"text-label-14 flex-none text-gray-900",children:"Skipped"}):null,(0,t.jsx)("div",{className:el.default.icon,children:C})]})]})})})}),(0,t.jsx)(n.Content,{className:el.default.content,children:(0,t.jsx)("div",{className:`${eu[m]??""} tailwind`,children:i})})]})}var eh=e.i(472117);function eg(){let e=(0,E.useSearchParams)(),t=(0,E.useRouter)(),n=new Set(["all","failed","succeeded","running","queued"]),s=e?.get("promotion-requirements");return{activeFilter:n.has(s)?s??"all":"all",handleFilterChange:n=>{let s=new URLSearchParams(e?.toString());"all"===n?s.delete("promotion-requirements"):s.set("promotion-requirements",n),t.push(`?${s.toString()}`)},hasFilter:!!s}}function ef(e){let{deployment:n,teamSlug:a,withChecksFromCi:r,checksPrivateBeta:i,expandedSteps:l,onExpandedStepsChange:o}=e,{data:c}=(0,O.useProjectCheckRuns)({deploymentId:n.id,enableCiChecksAndPolicies:r}),d=(0,s.useMemo)(()=>c?.runs??[],[c]),u=(0,s.useRef)(!1),{hasFilter:p}=eg();(0,s.useEffect)(()=>{!u.current&&p&&o([...l,$]),d.length&&(u.current=!0)},[p,l,o,d]);let m=ed.Pending;0===d.length?ed.Pending:d.some(e=>"failed"===e.conclusion)?m=ed.Error:d.some(e=>"running"===e.status)?m=ed.InProgress:d.every(e=>"succeeded"===e.conclusion)&&(m=ed.Complete);let h=l.includes($),g="production"===n.target;return(0,t.jsx)(ex,{isProduction:g,enableCiChecksAndPolicies:r,checksPrivateBeta:i,isExpanded:h,combinedStatus:m,ciChecks:d,teamSlug:a,deployment:n,expandedSteps:l,onExpandedStepsChange:o})}function ex(e){let{isProduction:n,enableCiChecksAndPolicies:a,checksPrivateBeta:r,combinedStatus:i,ciChecks:l,teamSlug:o,deployment:d,expandedSteps:m,onExpandedStepsChange:h}=e,[g,f]=(0,s.useState)(!1),{activeFilter:x}=eg(),{can:j}=(0,u.default)(),v=(0,s.useMemo)(()=>j(p.Action.All,p.Resource.DeploymentCheck),[j]),C=(0,s.useMemo)(()=>"all"===x?l:l.filter(e=>{switch(x){case"failed":return"failed"===e.conclusion||"timeout"===e.conclusion||"skipped"===e.conclusion;case"running":return"running"===e.status;case"queued":return"queued"===e.status;case"succeeded":return"succeeded"===e.conclusion;default:return!0}}),[l,x]),_=(0,H.useResourceList)({resourceIds:C.flatMap(e=>"integration"===e.source.kind&&e.source.resourceId?[e.source.resourceId]:[])}),b=(0,s.useMemo)(()=>{let e=new Map;return _.data?.stores?.forEach(t=>{"integration"===t.type&&e.set(t.id,t)}),e},[_.data?.stores]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(em,{action:(0,t.jsx)(ej,{isProduction:n,enableCiChecksAndPolicies:a,checksPrivateBeta:r,canUpdateDeploymentRequirements:v,onEditClick:()=>f(!0),ciChecks:l,expandedSteps:m,onExpandedStepsChange:h}),id:$,disabled:0===l.length,name:$,paddingType:"none",status:i,children:0===C.length?(0,t.jsx)(ew,{size:"sm",children:(0,t.jsx)(y.Stack,{align:"center",className:"ml-5",direction:"row",gap:2,children:(0,t.jsx)(c.Text,{variant:"label-14",weight:500,className:"text-gray-900",children:"No requirements match this filter."})})}):C.sort((e,t)=>{let n=e=>"failed"===e.conclusion?0:"canceled"===e.conclusion?9:"running"===e.status?1:"queued"===e.status?2:"succeeded"===e.conclusion?8:"skipped"===e.conclusion?9:10,s=n(e),a=n(t);return s!==a?s-a:e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}).map(e=>{let n="resourceId"in e.source&&e.source.resourceId?b.get(e.source.resourceId):void 0;return(0,t.jsx)(e_,{check:e,resource:n,teamSlug:o,deployment:d,canUpdateDeploymentRequirements:v},e.name)})}),(0,t.jsx)(L.ImportGitHubModal,{isOpen:g,onClose:()=>f(!1),showSettingsLink:!0})]})}function ey(e){let{ciChecks:n,expandedSteps:r,onExpandedStepsChange:i}=e,l=(0,s.useMemo)(()=>({all:n.length,failed:n.filter(e=>"failed"===e.conclusion).length,running:n.filter(e=>"running"===e.status).length,registered:n.filter(e=>"queued"===e.status).length,succeeded:n.filter(e=>"succeeded"===e.conclusion).length,skipped:n.filter(e=>"skipped"===e.conclusion||"canceled"===e.conclusion).length}),[n]),{activeFilter:o,handleFilterChange:c}=eg(),d=[{value:"all",icon:(0,t.jsx)("span",{children:"All"}),count:l.all},{value:"failed",icon:(0,t.jsx)(eb,{check:{status:"completed",conclusion:"failed"}}),count:l.failed},{value:"succeeded",icon:(0,t.jsx)(eb,{check:{status:"completed",conclusion:"succeeded"}}),count:l.succeeded},{value:"running",icon:(0,t.jsx)(eb,{check:{status:"running",conclusion:"neutral"}}),count:l.running},{value:"queued",icon:(0,t.jsx)(eb,{check:{status:"queued",conclusion:"neutral"}}),count:l.registered}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,a.clsx)("transition-opacity duration-200",r.includes($)?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,t.jsx)(j.Switch,{size:"small",onClick:e=>e.stopPropagation(),className:"hidden [@media(min-width:750px)]:flex",children:d.map(e=>{let{value:n,icon:s,count:a}=e;return(0,t.jsx)(j.Switch.Control,{checked:n===o,label:(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s," ",(0,t.jsx)("span",{className:"all"===n?"ml-[2px]":"",children:a})]}),onChange:()=>{i([...r,$]),c(n)},value:n},n)})})}),(0,t.jsxs)(f.MenuContainer,{children:[(0,t.jsx)(g.MenuButton,{size:"small",shape:"square",svgOnly:!0,"aria-label":"Filter Promotion Requirements",type:"secondary",className:"block w-[23px] !p-0 text-sm font-normal [@media(min-width:750px)]:hidden",children:(0,t.jsx)(k.Filter,{size:16,color:"gray-900"})}),(0,t.jsx)(h.Menu,{className:"font-normal [@media(min-width:750px)]:hidden",children:d.map(e=>{let{value:n,icon:s,count:a}=e;return(0,t.jsx)(x.MenuItem,{onClick:e=>{e.stopPropagation(),c(n)},children:(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:["all"!==n?s:void 0," ",(0,t.jsxs)("span",{children:[(0,B.default)(n)," (",a,")"]})]})},n)})})]})]})}function ej(e){let n,{isProduction:s,enableCiChecksAndPolicies:a,checksPrivateBeta:r,canUpdateDeploymentRequirements:i,onEditClick:l,ciChecks:o,expandedSteps:c,onExpandedStepsChange:d}=e,u=(0,eh.useChecksSettingsFlag)();return s&&a?(r||(n=i?(0,t.jsx)(m.Button,{className:"hidden [@media(min-width:450px)]:flex",size:"small",type:"secondary",shape:"square",onClick:l,"aria-label":"Edit promotion requirements",svgOnly:!0,children:(0,t.jsx)(N.Plus,{})}):(0,t.jsx)(v.Tooltip,{text:"You do not have permission to edit Promotion Requirements. Contact a Member or Admin.",children:(0,t.jsx)("span",{children:(0,t.jsx)(m.Button,{className:"hidden [@media(min-width:450px)]:flex",size:"small",type:"secondary",svgOnly:!0,"aria-label":"Edit promotion requirements",disabled:!0,children:(0,t.jsx)(N.Plus,{})})})})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ey,{ciChecks:o,expandedSteps:c,onExpandedStepsChange:d}),n,u&&(0,t.jsx)(M.DashboardButtonLink,{route:"/[teamSlug]/[project]/settings/promotion-requirements",size:"small",type:"secondary",prefix:(0,t.jsx)(w.External,{color:"gray-900"}),target:"_blank",children:"Manage"})]})):null}function ev(e){let{check:n,integration:a,resource:r}=e,i=(0,s.useMemo)(()=>n.externalUrl?a&&"integration"===n.source.kind?(0,F.getIntegrationAbsoluteOrSsoLink)(n.externalUrl,{teamIdOrSlug:n.ownerId,integrationConfigurationId:n.source.integrationConfigurationId,externalResourceId:n.source.externalResourceId,projectId:n.projectId,checkId:n.id}):n.externalUrl:"integration"===n.source.kind?(0,F.getIntegrationDeepLink)({teamIdOrSlug:n.ownerId,integrationConfigurationId:n.source.integrationConfigurationId,externalResourceId:n.source.externalResourceId,projectId:n.projectId,checkId:n.id}):null,[n,a]),{name:l,status:d,conclusion:u}=n,p=(0,t.jsx)(c.Text,{size:14,weight:500,color:"failed"===u?"red-900":"inherit",children:l}),m=(0,t.jsx)(eb,{check:{conclusion:u,status:d}});return(0,t.jsxs)(y.Stack,{direction:"row",gap:4,align:"center",className:"flex-1 min-w-0",children:[r?.notification?(0,t.jsx)(v.Tooltip,{text:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold",children:r.notification.title}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:r.notification.message})]}),position:"top",children:m}):m,(0,t.jsxs)(y.Stack,{direction:"row",gap:2,align:"center",className:"flex-1 min-w-0",children:[(0,t.jsx)(eC,{check:n,integration:a}),i?(0,t.jsx)(o.Link,{external:!0,href:i??"",children:p}):p]})]})}function eC(e){let{check:n,integration:s}=e;return s?(0,t.jsx)(W.MarketplaceIntegrationCardIcon,{size:20,icon:s.icon,name:s.name}):"git-provider"===n.source.kind?(0,t.jsx)(P.LogoGithub,{size:20}):null}function e_(e){let{check:n,resource:s,teamSlug:r,deployment:i,canUpdateDeploymentRequirements:l}=e,{status:d,conclusion:u}=n,{data:p}=(0,z.useIntegration)("integration"===n.source.kind?n.source.integrationId:void 0),{mutate:h}=(0,O.useProjectCheckRuns)({deploymentId:i.id,enableCiChecksAndPolicies:!0}),g=(0,V.useSkipCheckRun)({teamId:i.team?.id,deploymentId:i.id,checkRunId:n.id,onSuccess:()=>{h()}}),f=()=>(0,a.clsx)("hover:bg-[var(--ds-gray-100)]",{"bg-red-100":"failed"===u,"text-red-900":"failed"===u,"hover:bg-red-200":"failed"===u,"border-b-red-500":"failed"===u}),x=s&&r&&(0,D.getResourceDetailsPath)(s,r),j=async()=>{await g.trigger()};return(0,t.jsxs)(ew,{className:f(),size:"sm","data-check-status":"failed"===u?"failed":d,children:["queued"===d?(0,t.jsx)(v.Tooltip,{text:"This requirement is expected to run, but has not provided a status yet.",children:(0,t.jsx)(ev,{check:n,integration:p,resource:s})}):(0,t.jsx)(ev,{check:n,integration:p,resource:s}),(0,t.jsxs)(y.Stack,{direction:"row",gap:4,children:[x?(0,t.jsx)(o.Link,{className:(0,a.clsx)(f(),"hidden flex-row items-center gap-2 bg-transparent text-gray-900 md:flex",{"text-red-900":"failed"===u}),external:!0,href:x,children:(0,t.jsx)(c.Text,{className:(0,a.clsx)(f(),"flex-row items-center gap-2 bg-transparent text-gray-900 flex",{"text-red-900":"failed"===u}),children:s.name})}):null,l&&("running"===d||"queued"===d||"completed"===d&&"failed"===u)&&(0,t.jsx)(v.Tooltip,{text:"Skip this check",children:(0,t.jsx)(m.Button,{size:"small",type:"secondary",onClick:j,disabled:g.isMutating,"aria-label":"Skip check",children:g.isMutating?"Skipping...":"Skip"})})]})]})}function eb(e){let{check:n}=e;return n?.status==="running"?(0,t.jsx)(I,{size:16,color:"amber-600"}):n?.status==="completed"&&"succeeded"===n.conclusion?(0,t.jsx)(C.CheckCircle,{size:16,color:"green-700"}):n?.status==="completed"&&"failed"===n.conclusion?(0,t.jsx)(A.Stop,{size:16,color:"red-700"}):n?.status==="completed"&&"neutral"===n.conclusion?(0,t.jsx)(R.Warning,{size:16,color:"amber-700"}):n?.status==="completed"&&"skipped"===n.conclusion||n?.status==="completed"&&"canceled"===n.conclusion||n?.status==="completed"&&"neutral"===n.conclusion||n?.status==="completed"&&"neutral"===n.conclusion?(0,t.jsx)(S.MinusCircle,{color:"gray-500",size:16}):n?.status==="queued"?(0,t.jsx)(_.Clock,{size:16}):(0,t.jsx)(b.CrossCircle,{color:"gray-500",size:16})}function ew(e){let{children:n,className:s,onClick:r,size:i="lg"}=e;return(0,t.jsx)(y.Stack,{className:(0,a.clsx)("hsla(var(--ds-gray-200-value),1) px-3 sm:px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===i},{"py-[var(--geist-space-gap-half)]":"sm"===i},s),direction:"row",gap:2,justify:"space-between",onClick:r,children:n})}var ek=e.i(9031150),eS=e.i(7151748),eN=e.i(3870297),eT=e.i(4670733),eI=e.i(7837522),eA=e.i(7780974);class eR extends TransformStream{#e="";#t=!1;#n=!1;#s=e=>e;constructor(e){super({transform:(e,t)=>this.#a(e,t),flush:e=>this.#a("\r\n",e)}),this.#t=e?.allowCR??!1,this.#n=e?.returnEmptyLines??!1,this.#s=e?.mapperFun??this.#s}#a(e,t){for(e=this.#e+e;;){let n=e.indexOf("\n");if(this.#t){let s=e.indexOf("\r");if(-1!==s&&s!==e.length-1&&(-1===n||n-1>s)){let n=this.#s(e.slice(0,crOrLfIndex));(this.#n||n)&&t.enqueue(n),e=e.slice(s+1);continue}}if(-1!==n){let s=n;"\r"===e[n-1]&&s--;let a=this.#s(e.slice(0,s));(this.#n||a)&&t.enqueue(a),e=e.slice(n+1);continue}break}this.#e=e}}var eP=e.i(8042625),eE=e.i(5802506),eL=e.i(4244280);let eM=["READY","ERROR","CANCELED","DELETED"],eW=e=>e.type===ec.Delimiter,eD=e=>{let{url:t,onLog:n,onResponse:s,signal:a,since:r,deploymentRef:i}=e,l={builds:1,since:r,direction:"forward",follow:!function(e){if(!e)return!1;let{readyState:t}=e;return eM.includes(t)}(i.current)?1:void 0},o=r??0;return fetch(`${t}${(0,eP.encode)(l)}`,{signal:a}).then(async e=>{if(s?.(e),e.status<200||e.status>=300){let t=await e.text();throw Error(`Failed to fetch log stream: ${e.status} ${t}`)}if(1!==l.follow){for(let t of(await e.json()))n(t);return}let r=e.body?.pipeThrough(new TextDecoderStream,{signal:a}).pipeThrough(new eR({mapperFun:e=>{try{return JSON.parse(e)}catch{return null}}}),{signal:a}).getReader();if(r){for(;;){let{value:e,done:t}=await r.read();if(a.aborted)return;if(t||!e)break;e.created&&(o=e.created+1,n(e))}if(await new Promise(e=>{setTimeout(e,1e3)}),!a.aborted)return eD({url:t,signal:a,deploymentRef:i,since:o,onLog:n,onResponse:s})}})};var eB=e.i(4641028),eF=e.i(100247),eH=e.i(4470704),ez=e.i(6891161),eO=e.i(9318197),eV=e.i(455575),eU=e.i(277234);let eq=e=>{let{active:n,deployment:a,onClose:r,mutateDeployment:i}=e,[l,o]=(0,s.useState)(!1),d=(0,eV.useToasts)(),u=async()=>{o(!0);let{error:e}=await (0,eU.fetchAPI)(`/v1/deployments/${a?.id}/checks/skip${(0,eP.encode)({teamId:a.team?.id})}`,{method:"POST"});e&&d.error({text:e.message||"An error occurred while skipping checks"}),o(!1),r(),i?.()};return(0,t.jsxs)(ez.Modal.Modal,{active:n,onClickOutside:r,width:"500px",children:[(0,t.jsxs)(y.Stack,{align:"center",justify:"center",children:[(0,t.jsx)(eO.Spacer,{y:1}),(0,t.jsx)(c.Text,{as:"h3",size:24,children:"Skip Checks"})]}),(0,t.jsx)(ez.Modal.Body,{children:(0,t.jsx)(c.Text,{align:"center",size:14,children:"Are you sure you want to continue?"})}),(0,t.jsxs)(ez.Modal.Actions,{children:[(0,t.jsx)(ez.Modal.Action,{onClick:r,type:"secondary",children:"Cancel"}),(0,t.jsx)(ez.Modal.Action,{disabled:l,loading:l,onClick:u,children:"Skip Checks"})]})]})};var e$=e.i(9014736),eG=e.i(9668517);function eY(e){let{meta:t={}}=e??{};return"githubCommitRef"in t?{refType:"github",refValue:t.githubCommitRef??void 0}:"gitlabCommitRef"in t?{refType:"gitlab",refValue:t.gitlabCommitRef??void 0}:"bitbucketCommitRef"in t?{refType:"bitbucket",refValue:t.bitbucketCommitRef??void 0}:{}}var eZ=e.i(3001456),eJ=e.i(7710663),eK=e.i(1116271),eQ=e.i(5955443),eX=e.i(691329),e0=e.i(1360174),e1=e.i(8320377),e5=e.i(9286433);function e2(e){let{label:n,latestLog:r,creationFlow:i,afterLabel:l}=e,[o,d]=(0,s.useState)(void 0),[u,p]=(0,s.useState)(!0),m=(0,s.useRef)((0,e0.default)(e=>{d(e)},250,{trailing:!0}));return(0,s.useEffect)(()=>{u||r?.text===""||(r?.text===void 0?d(void 0):m.current(r.text))},[u,r?.text]),(0,s.useEffect)(()=>{let e=m.current;return()=>{e.cancel()}},[]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{p(!1)},1e3);return()=>{clearInterval(e)}},[]),(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)("span",{children:n}),l,(0,t.jsx)(eQ.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:o?(0,t.jsx)("div",{className:e5.default.mask,id:"deploy-log-preview",children:(0,t.jsx)(eQ.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:(0,t.jsx)(eX.motion.div,{animate:{y:0},className:(0,a.clsx)(e5.default.logPreviewText,{[e5.default.creationFlow]:i}),exit:{y:-24},initial:{y:24},style:{color:"var(--ds-gray-900)"},transition:{type:"tween",duration:.225},children:(0,t.jsx)(c.Text,{as:"span",color:"gray-900",monospace:!0,size:14,children:(0,t.jsx)(e1.Ansi,{disableColors:!0,children:o})})},o)})}):null})]})}var e4=e.i(8529990),e3=e.i(1991452),e9=e.i(2455417),e7=e.i(3627160),e8=e.i(7479067),e6=e.i(7637508),te=e.i(3322724),tt=e.i(3408876),tn=e.i(7402201),ts=e.i(3915723),ta=e.i(5423128),tr=e.i(8189834),ti=e.i(4178896),tl=e.i(3978952),to=s.forwardRef((e,n)=>{let{pressed:s,defaultPressed:a=!1,onPressedChange:r,...i}=e,[l=!1,o]=(0,tl.useControllableState)({prop:s,onChange:r,defaultProp:a});return(0,t.jsx)(ta.Primitive.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:n,onClick:(0,ti.composeEventHandlers)(e.onClick,()=>{e.disabled||o(!l)})})});to.displayName="Toggle";var tc=e.i(6218234),td="ToggleGroup",[tu,tp]=(0,ts.createContextScope)(td,[tr.createRovingFocusGroupScope]),tm=(0,tr.createRovingFocusGroupScope)(),th=s.default.forwardRef((e,n)=>{let{type:s,...a}=e;if("single"===s)return(0,t.jsx)(tx,{...a,ref:n});if("multiple"===s)return(0,t.jsx)(ty,{...a,ref:n});throw Error(`Missing prop \`type\` expected on \`${td}\``)});th.displayName=td;var[tg,tf]=tu(td),tx=s.default.forwardRef((e,n)=>{let{value:a,defaultValue:r,onValueChange:i=()=>{},...l}=e,[o,c]=(0,tl.useControllableState)({prop:a,defaultProp:r,onChange:i});return(0,t.jsx)(tg,{scope:e.__scopeToggleGroup,type:"single",value:o?[o]:[],onItemActivate:c,onItemDeactivate:s.default.useCallback(()=>c(""),[c]),children:(0,t.jsx)(tC,{...l,ref:n})})}),ty=s.default.forwardRef((e,n)=>{let{value:a,defaultValue:r,onValueChange:i=()=>{},...l}=e,[o=[],c]=(0,tl.useControllableState)({prop:a,defaultProp:r,onChange:i}),d=s.default.useCallback(e=>c(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...t,e]}),[c]),u=s.default.useCallback(e=>c(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(t=>t!==e)}),[c]);return(0,t.jsx)(tg,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:d,onItemDeactivate:u,children:(0,t.jsx)(tC,{...l,ref:n})})});th.displayName=td;var[tj,tv]=tu(td),tC=s.default.forwardRef((e,n)=>{let{__scopeToggleGroup:s,disabled:a=!1,rovingFocus:r=!0,orientation:i,dir:l,loop:o=!0,...c}=e,d=tm(s),u=(0,tc.useDirection)(l),p={role:"group",dir:u,...c};return(0,t.jsx)(tj,{scope:s,rovingFocus:r,disabled:a,children:r?(0,t.jsx)(tr.Root,{asChild:!0,...d,orientation:i,dir:u,loop:o,children:(0,t.jsx)(ta.Primitive.div,{...p,ref:n})}):(0,t.jsx)(ta.Primitive.div,{...p,ref:n})})}),t_="ToggleGroupItem",tb=s.default.forwardRef((e,n)=>{let a=tf(t_,e.__scopeToggleGroup),r=tv(t_,e.__scopeToggleGroup),i=tm(e.__scopeToggleGroup),l=a.value.includes(e.value),o=r.disabled||e.disabled,c={...e,pressed:l,disabled:o},d=s.default.useRef(null);return r.rovingFocus?(0,t.jsx)(tr.Item,{asChild:!0,...i,focusable:!o,active:l,ref:d,children:(0,t.jsx)(tw,{...c,ref:n})}):(0,t.jsx)(tw,{...c,ref:n})});tb.displayName=t_;var tw=s.default.forwardRef((e,n)=>{let{__scopeToggleGroup:s,value:a,...r}=e,i=tf(t_,s),l={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},o="single"===i.type?l:void 0;return(0,t.jsx)(to,{...o,...r,ref:n,onPressedChange:e=>{e?i.onItemActivate(a):i.onItemDeactivate(a)}})}),tk=e.i(7087273),tS=e.i(1230902),tN=function(e){return e.All="all",e.Errors="errors",e.Warnings="warnings",e}({});function tT(e,t){return!!t&&e>=t.from&&e<=t.to}function tI(e){return!!e&&"logs"in e}function tA(e,t){return(0,tS.format)(e,t?"HH:mm:ss":"HH:mm:ss.SSS")}function tR(e){return e.map(e=>{let{created:t,text:n}=e;return`[${tA(t)}] ${n}`}).join("\n")}function tP(e,t){if(null===t)return{index:"LAST"};let n="number"==typeof t?t:t.from,s=n;for(let t of e)if(tI(t))s-=t.logs.length-1;else if(t.index>=n)break;return{index:s,offset:tE}}let tE=-10;function tL(e){let{countByFilter:n,value:s,onChange:r}=e;return(0,t.jsx)("div",{className:"flex w-1 flex-1 flex-row",children:(0,t.jsx)(tk.Scroller,{gradient:"var(--ds-background-200) 0, transparent 20px",children:(0,t.jsx)(th,{"aria-label":"Filter logs by type",className:"flex-1 p-3",defaultValue:tN.All,onValueChange:e=>{e&&r(e)},type:"single",value:s,children:(0,t.jsx)("div",{className:"flex w-full flex-row flex-nowrap gap-2 overflow-y-hidden",children:[tN.All,tN.Errors,tN.Warnings].map(e=>{let s=n[e],r=0===s;return(0,t.jsx)(tb,{className:(0,a.clsx)("flex items-center whitespace-nowrap rounded-full py-0.5 border-none bg-gray-400 font-sans text-xs font-medium data-[state=on]:bg-gray-1000 data-[state=on]:text-background-100",{"hover:bg-gray-1000 hover:text-background-100 cursor-pointer":!r},e===tN.Errors?"pl-1 pr-2":"px-2"),disabled:r,value:e,children:function(e,n){let{label:s,Icon:a}=tM.get(e)??{label:"",Icon:null};return(0,t.jsxs)(t.Fragment,{children:[a?(0,t.jsx)(a,{size:14}):null,(0,t.jsxs)("span",{className:"pl-1",children:[s," (",n,")"]})]})}(e,s)},e)})})})})})}let tM=new Map([[tN.All,{label:"All Logs",Icon:null}],[tN.Errors,{label:"Errors",Icon:b.CrossCircle}],[tN.Warnings,{label:"Warnings",Icon:R.Warning}]]);var tW=e.i(9130958);function tD(e){let{log:n,text:s}=e;return(0,t.jsx)(e1.Ansi,{disableColors:!!n.level,linkifyInternalLink:!0,children:s})}function tB(e){let{children:n}=e;return(0,t.jsx)("span",{className:"inline-block whitespace-pre py-0.5 pr-3 md:pr-6",children:n})}let tF=(0,s.memo)(function(e){let{log:n,searchPosition:s}=e;if(!n.text)return null;if(!s)return(0,t.jsx)(tB,{children:(0,t.jsx)(tD,{log:n,text:n.text})});let a=(0,tW.highlightString)(n.text,s.text),r=0;return(0,t.jsx)(tB,{children:a.map(e=>e.highlighted?(0,t.jsx)("mark",{className:s.line===n.index&&s.column===r++?"bg-amber-800 dark:text-background-100":"bg-amber-400 dark:text-gray-1000",children:(0,t.jsx)(tD,{log:n,text:e.text})},e.id):(0,t.jsx)(tD,{log:n,text:e.text},e.id))})});var tH=e.i(6357175),tz=e.i(9689002),tO=e.i(8835183),tV=e.i(6942035),tU=e.i(1663964),tq=e.i(3285452),t$=e.i(7921976);let tG=(0,s.forwardRef)(function(e,n){let{logs:a,onNavigate:r,onClear:i}=e,l=(0,s.useRef)(null),[o,c]=(0,s.useState)(),[d,u]=(0,s.useState)(0),[p,h]=(0,s.useState)(),g=(0,tH.useDebouncedValue)(o,300),f=(0,s.useCallback)(()=>{c(""),h(void 0),i?.()},[i]),x=(0,s.useCallback)(e=>{u(0);let t=e.target.value;t?c(t):f()},[f]),y=(0,s.useCallback)(()=>{if(p?.count){let e=(d+1)%p.count;u(e),r?.(p.positions[e])}},[p,d,r]),j=(0,s.useCallback)(()=>{if(p?.count){let e=(0===d?p.count:d)-1;u(e),r?.(p.positions[e])}},[p,d,r]),v=(0,s.useCallback)(e=>{"Enter"===e.key&&(e.shiftKey?j():y())},[y,j]);return(0,s.useImperativeHandle)(n,()=>({clear:f}),[f]),(0,s.useEffect)(()=>{let e=function(e,t){if(!e||!t.length)return;let n=e.toLowerCase(),s={count:0,positions:[]},a=(t,a)=>{let r=t.text.toLowerCase().split(n);if(r.length>1){let n=r.length-1;s.count+=n,s.positions.push(...Array.from({length:n},(n,s)=>({line:t.index,column:s,groupIndex:a,text:e})))}};for(let e of t)if("logs"in e)for(let t of e.logs)a(t,e.index);else a(e);return s}(o,a);h(e),e?.count?r?.(e.positions[d]):r?.(void 0)},[g,a,r]),(0,s.useEffect)(()=>{function e(e){let t=document.activeElement?.tagName;(0,t$.isModifierPressed)(e)&&"f"===e.key&&l.current&&function(e){let{top:t,left:n,bottom:s,right:a}=e.getBoundingClientRect();return t>=10&&n>=0&&s<=window.innerHeight&&a<=window.innerWidth}(l.current)&&(document.activeElement===document.body||"INPUT"!==t&&"TEXTAREA"!==t)&&(e.preventDefault(),l.current.select(),l.current.focus())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,t.jsx)(tO.SearchInput,{clearable:!1,onChange:x,onKeyDown:v,placeholder:"Find in logs",ref:l,size:"small",suffix:(0,t.jsx)(eQ.AnimatePresence,{children:(o?.length??0)>0?(0,t.jsxs)(eX.motion.div,{animate:{marginTop:0,opacity:1},className:"-mr-1 flex items-center gap-1 whitespace-nowrap",exit:{marginTop:-10,opacity:0},initial:{marginTop:-10,opacity:0},transition:{duration:.1},children:[p?.count===0&&"No results",p?.count?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"pr-1",children:[d+1,"/",p.count]}),(0,t.jsx)(m.Button,{"aria-label":"find previous occurence",onClick:j,shape:"square",size:"tiny",svgOnly:!0,type:"secondary",children:(0,t.jsx)(tU.ArrowUp,{})}),(0,t.jsx)(m.Button,{"aria-label":"find next occurence",className:"text-red-500",onClick:y,shape:"square",size:"tiny",svgOnly:!0,type:"secondary",children:(0,t.jsx)(tq.ArrowDown,{})})]}):null,(0,t.jsx)(m.Button,{"aria-label":"clear results",onClick:f,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(tV.Cross,{className:"text-gray-900"})})]}):(0,t.jsx)(tz.Kbd,{className:"-mr-1",meta:!0,children:"F"})}),suffixStyling:!1,value:o,width:"270px"})});var tY=e.i(5499338),tZ=e.i(1201436),tJ=e.i(5356862),tK=e.i(545405);function tQ(e){let{range:n,logs:s}=e,r=(0,eV.useToasts)(),i=n.to-n.from+1;return(0,t.jsx)(eQ.AnimatePresence,{children:(0,t.jsxs)(eX.motion.div,{animate:{opacity:1},className:(0,a.clsx)("absolute left-3 z-10 my-3 flex flex-row gap-2 font-sans",n.to===s.length-1?"bottom-full":"top-full"),exit:{opacity:0},initial:{opacity:0},children:[(0,t.jsxs)(tY.Badge,{size:"lg",variant:"inverted",children:[(0,tJ.formatDuration)(s[n.to].created-s[n.from].created)," ","selected"]}),(0,t.jsx)(m.Button,{onClick:()=>{(0,tK.copyToClipboard)(tR(s.slice(n.from,n.to+1))),r.message(`Copied ${i} log lines to clipboard`)},prefix:(0,t.jsx)(tZ.Copy,{color:"gray-600"}),shape:"rounded",size:"small",children:(0,t.jsxs)("span",{children:["Copy ",i," lines..."]})})]})})}function tX(e){let{logs:n,enableLineHighlighting:r,startedAt:l,status:o,isLoading:c}=e,d=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),h=!(0,e3.useRouter)().pathname.includes("[teamCreateStatus]")&&o!==ed.InProgress,g=(0,te.useIsMobile)(),[f,x]=(0,s.useState)(function(){let{hash:e}=window.location,t=/^#L(?<start>[0-9]+)(?:-L(?<end>[0-9]+))?/.exec(e);return t?.groups?{from:Number(t.groups.start)-1,to:Number(t.groups.end||t.groups.start)-1}:null}()),[y,j]=(0,s.useState)(),[v,C]=(0,s.useState)(!0),[_,b]=(0,s.useState)(!0),w=(0,s.useRef)(n.length);(0,s.useEffect)(()=>{n.length!==w.current&&"complete"!==o&&_&&setTimeout(()=>p.current?.scrollTo(0,p.current.scrollHeight),0),w.current=n.length},[n,o,_]);let[k,S]=(0,s.useState)([]),[N,T]=(0,s.useState)();(0,s.useEffect)(()=>{if(r){let e=f?`#L${f.from+1}${f.from!==f.to?`-L${f.to+1}`:""}`:null;if(e)window.location.hash=e;else{let e=new URL(window.location.href);e.hash="",history.replaceState(void 0,document.title,e)}}},[r,f]);let[I,A]=(0,i.useQueryState)("filter",(0,e8.parseAsStringEnum)(Object.values(tN)).withDefault(tN.All));(0,s.useEffect)(()=>{o===ed.Error&&A(tN.Errors)},[o,A]);let{filteredLogs:R,countByFilter:P}=(0,s.useMemo)(()=>(function(e){let{logs:t,expandedGroupIds:n,filter:s,selectedRange:a}=e,r=[],i={all:t.length,warnings:0,errors:0},l={index:0,logs:[]};function o(){l.logs.length&&(r.push(...l.logs.length<5||n.includes(l.index)||l.logs.some(e=>{let{index:t}=e;return tT(t,a)})?l.logs:[l]),l={index:l.index+1,logs:[]})}for(let[e,n]of t.entries())"index"in n||(n.index=e),n.level&&i["error"===n.level?"errors":"warnings"]++,"errors"===s&&"error"!==n.level||"warnings"===s&&"warning"!==n.level?l.logs.push(n):(o(),r.push(n));return o(),{countByFilter:i,filteredLogs:r}})({logs:n,expandedGroupIds:k,filter:I,selectedRange:f}),[I,n,k]),E=(0,s.useCallback)((e,t)=>{let n=null;t&&f?n=e<f.from?{from:e,to:f.to}:{from:f.from,to:e}:f?.from!==e&&(n={from:e,to:e}),x(n)},[f]),L=(0,s.useCallback)(e=>{A(e===tN.All?null:e,{scroll:!1}),S([]),x(null),d.current?.scrollToIndex(tP([],null)),u.current?.clear()},[A]),M=(0,s.useCallback)(e=>{if(T(e),e?.groupIndex!==void 0){let{groupIndex:t}=e;S(e=>[...e,t])}else e&&d.current?.scrollToIndex(tP(R,e.line))},[R]),W=(0,s.useCallback)(e=>{e instanceof Window||(p.current=e)},[]),D=(0,s.useCallback)(e=>{let{item:s}=e;return tI(s)?(0,t.jsxs)(m.Button,{className:"w-full font-mono",onClick:()=>{S(e=>[...e,s.index])},prefix:(0,t.jsx)(e7.Code,{className:"rotate-90"}),style:{justifyContent:"start",paddingLeft:"520px"},type:"secondary",children:["Expand ",s.logs.length," Lines"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:(0,a.clsx)("relative"),children:f?.from!==f?.to&&s.index===f?.to?(0,t.jsx)(tQ,{logs:n,range:f}):null}),(0,t.jsx)("span",{"aria-hidden":!0,className:(0,a.clsx)(r?"cursor-pointer":void 0,"relative w-[148px] select-none px-3 py-0.5 md:px-6"),onClick:r?e=>(e.stopPropagation(),e.preventDefault(),E(s.index,e.shiftKey),!1):void 0,children:(0,t.jsx)(tn.EllapsedTimeTooltip,{content:{timestamp:s.created,startTimestamp:s.index>0?l:void 0,previousTimestamp:s.index>0?n[s.index-1].created:void 0},children:tA(s.created,g)})}),(0,t.jsx)(tF,{log:s,searchPosition:N})]})},[r,g,n,E,N,f,l]);return(0,t.jsx)("div",{className:"relative bg-background-200",children:R.length&&!c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:(0,a.clsx)(v&&"border-b-transparent","flex min-h-11 w-full items-center justify-end gap-2 border-b pr-1.5"),children:[h?(0,t.jsx)(tL,{countByFilter:P,onChange:L,value:I}):null,g?null:(0,t.jsx)(tG,{logs:R,onClear:()=>T(void 0),onNavigate:M,ref:u}),(0,t.jsx)(tt.default,{label:"Copy",size:"small",textToCopy:tR(n),title:"Copy logs to the clipboard",type:"tertiary"})]}),(0,t.jsx)("div",{className:(0,a.clsx)("relative","overflow-hidden","before:content-['']","before:absolute","before:h-5","before:w-full","before:top-0","before:left-0","before:right-4","before:z-10","before:pointer-events-none","before:translate-y-0","before:bg-gradient-to-b","before:from-background-200","after:content-['']","after:absolute","after:h-5","after:w-full","after:bottom-0","after:left-0","after:right-4","after:z-10","after:pointer-events-none","after:translate-y-0","after:bg-gradient-to-t","after:from-background-200",v?"before:!-translate-y-5":null,_?"after:!translate-y-5":null),children:(0,t.jsx)(e6.Virtuoso,{atBottomStateChange:b,atBottomThreshold:44,atTopStateChange:C,components:{List:t0,Item:t1,Footer:t5},context:{selectedRange:f},data:R,defaultItemHeight:22,initialTopMostItemIndex:tP(R,f),itemContent:(e,t)=>D({item:t,data:R,index:e}),ref:d,scrollerRef:W,style:{height:"60vh",maxHeight:y},totalListHeightChanged:j})})]}):(0,t.jsx)("div",{className:"p-4 text-center",children:c?(0,t.jsx)("span",{className:"flex items-center justify-center gap-2 text-gray-900",children:(0,t.jsx)(e9.LoadingDots,{size:4,children:"Loading"})}):(0,t.jsx)("span",{children:"No logs to show"})})})}function t0(e){let{context:n,...s}=e;return(0,t.jsx)("div",{className:"inline-flex min-w-full flex-col",...s})}function t1(e){let{item:n,context:s,style:r,...i}=e;return tI(n)?(0,t.jsx)("div",{className:(0,a.clsx)("p-2",{"pt-px":0===i["data-item-index"]}),...i}):(0,t.jsx)("div",{className:(0,a.clsx)("error"===n.level&&"bg-red-200 text-red-700 hover:bg-red-400","warning"===n.level&&"bg-amber-200 text-amber-900 hover:bg-amber-400",tT(n.index,s?.selectedRange)&&"!bg-amber-500 hover:!bg-amber-700 hover:!text-gray-1000 dark:hover:!text-gray-100","inline-block text-pretty align-top font-mono text-xs hover:bg-gray-300 md:text-sm"),style:{...r,whiteSpace:"nowrap",height:"22px"},...i})}function t5(){return(0,t.jsx)("span",{className:"inline-block"})}function t2(e){return(0,t.jsx)(tX,{...e})}var t4=e.i(7921739),t3=e.i(5338940),t9=e.i(7808943),t7=e.i(4450569),t8=e.i(4080109);function t6(e){let{type:n}=e;switch(n){case"warning":return(0,t.jsx)(t7.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,t.jsx)(A.Stop,{})});case"error":return(0,t.jsx)(t7.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,t.jsx)(Q.WarningFill,{})});case"success":return(0,t.jsx)(t7.default,{className:"text-gray-900",noWrap:!0,row:!0,vcenter:!0,children:(0,t.jsx)(K.CheckCircleFill,{className:"size-5",color:"green-700"})});case"spinner":case"loading":return(0,t.jsx)(t7.default,{row:!0,style:{color:"var(--geist-secondary)"},vcenter:!0,children:(0,t.jsx)(es.Spinner,{size:18})});default:return null}}function ne(e){let{domain:n,type:s,status:a,note:r}=e,i=(0,e3.useRouter)(),l={automatic:{name:"Learn More",href:"/docs/deployments/generated-urls"},custom:{name:"Manage",href:`/${i.query.teamSlug}/${i.query.project}/settings/domains`},user:{name:"Learn More",href:"/docs/domains/add-a-domain"}}[s];return(0,t.jsx)("div",{className:t8.default.wrapper,children:(0,t.jsxs)("div",{className:t8.default.header,children:[(0,t.jsx)(t6,{type:a}),(0,t.jsxs)("div",{className:t8.default.heading,children:[(0,t.jsxs)(y.Stack,{align:{sm:"start",md:"center",lg:"center"},direction:{sm:"column",md:"row",lg:"row"},gap:{sm:0,md:2,lg:2},style:{overflow:"hidden"},children:[(0,t.jsx)("div",{className:t8.default.domainContainer,children:(0,t.jsx)(o.Link,{as:"a",className:t8.default.domain,external:!0,href:`http://${n.name}`,variant:"highlight",children:(0,t.jsx)(c.Text,{as:"span",color:"blue-900",truncate:!0,weight:500,children:n.name})})}),(0,t.jsx)(c.Text,{as:"span",className:t8.default.separator,color:"gray-900",children:"Â·"}),(0,t.jsx)(c.Text,{color:"gray-900",size:14,truncate:!0,children:r||({automatic:"Automatic URL",custom:"Custom Domain",user:"Custom Domain"})[s]})]}),(0,t.jsx)(o.Link,{className:t8.default.action,external:!0,href:l.href,variant:"secondary",children:l.name})]})]})})}var nt=e.i(7784834);function nn(e){let{id:n,name:a,deployment:r,disabled:i,skeleton:l,status:c,onComplete:d,startedAt:u,finishedAt:p}=e;(0,s.useEffect)(()=>{d&&(c===ed.Complete||c===ed.Skipped)&&d()},[c,d]);let{team:m}=(0,t3.useTeam)(),h=function(e,t,n){let s=(n.automaticAliases??[]).filter(t=>t.endsWith(".vercel.app")||t.endsWith(".now.sh")||e?.previewDeploymentSuffix&&t.endsWith(e?.previewDeploymentSuffix)).map(e=>({name:e,type:"automatic"})),a=t.filter(e=>void 0===s.find(t=>t.name===e)).map(e=>({name:e,type:"custom"})),r=[];if(r=r.concat(...a),"production"===n.target){let e=n.userAliases||[];r.concat(e.map(e=>({name:e,type:"user"})))}return r}(m,r.alias.filter(e=>!(r.automaticAliases||[]).includes(e)),r);function g(){return r.checks?.["deployment-alias"]?.state??null}function f(e){return"pending"===g()?"running checks":"failed"===g()?"failed checks":c===ed.Pending||c===ed.InProgress?"loading":c===ed.Error||c===ed.Warning?r.aliasWarning&&r.aliasWarning.message.includes(e.name)?"warning":r.aliasError&&r.aliasError.message.includes(e.name)?"error":"success":c===ed.Complete?"success":"loading"}function x(e){return r.aliasWarning&&r.aliasWarning.message.includes(e.name)?r.aliasWarning.message:r.aliasError&&r.aliasError.message.includes(e.name)?r.aliasError.message:void 0}let y=c===ed.Skipped,j="failed"===g()||"pending"===g();return(0,t.jsx)(em,{disabled:i,finishedAt:"succeeded"!==g()?void 0:p,id:n,name:a,skeleton:l,startedAt:"succeeded"!==g()?void 0:u,status:function(){let e=g();return j&&"PROMOTED"===r.readySubstate?ed.Warning:"pending"===e?ed.Pending:"failed"===e?ed.Error:c}(),children:j&&"PROMOTED"===r.readySubstate?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:nt.default.stepMessage,children:"The deployment was force promoted, bypassing Promotion Requirements."}),h.map(e=>(0,t.jsx)(ne,{domain:e,note:x(e),status:f(e),type:e.type},e.name))]}):j?(0,t.jsxs)("div",{className:nt.default.stepMessage,children:["Aliasing to custom domains is blocked by"," ",g()," Promotion Requirements."]}):y?(0,t.jsxs)("div",{className:nt.default.stepMessage,children:["No custom domains have been assigned. This will happen if there are none defined in Project Settings or a Vercel CLI deploy was made with"," ",(0,t.jsx)(t9.default,{children:"vercel deploy --skip-domain"}),"."," ",(0,t.jsx)(o.Link,{external:!0,href:"https://vercel.com/docs/domains/add-a-domain",variant:"highlight",children:"Learn More"})]}):(0,t.jsx)(t.Fragment,{children:h.map(e=>(0,t.jsx)(ne,{domain:e,note:x(e),status:f(e),type:e.type},e.name))})})}var ns=e.i(4303122),na=e.i(3993360),nr=e.i(6280036),ni=e.i(4585051),nl=e.i(1727580),no=e.i(9907554),nc=e.i(4519214);let nd=(0,T.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.57072 4.5H11C12.933 4.5 14.5 6.067 14.5 8C14.5 9.933 12.933 11.5 11 11.5H8.57072C9.45484 10.5981 10 9.36273 10 8C10 6.63727 9.45484 5.40188 8.57072 4.5ZM5 4.5C3.067 4.5 1.5 6.067 1.5 8C1.5 9.933 3.067 11.5 5 11.5C6.933 11.5 8.5 9.933 8.5 8C8.5 6.067 6.933 4.5 5 4.5ZM0 8C0 5.23858 2.23858 3 5 3H11C13.7614 3 16 5.23858 16 8C16 10.7614 13.7614 13 11 13H5C2.23858 13 0 10.7614 0 8Z" fill="currentColor"/>');var nu=e.i(7807066),np=e.i(787358),nm=e.i(4333930),nh=e.i(2259462),ng=e.i(3487134),nf=e.i(1160917);function nx(e){let{children:n,onClick:s,active:r}=e;return(0,t.jsx)("button",{className:(0,a.clsx)(nf.default.badge,"invert-theme",{[nf.default.active]:r}),onClick:s,type:"button",children:(0,t.jsx)(c.Text,{className:nf.default.badgeContent,size:12,weight:500,children:n})})}var ny=e.i(9822914),nj=e.i(9645681);let nv=(0,T.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00736 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83579 1.5 1.5 1.83579 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00736 16 0 14.9926 0 13.75V2.25ZM9.24618 5C8.41986 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40882 12.5 4.75439 12.5H4.00439V11H4.75439C5.58039 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 11.875C11.5 11.6679 11.6679 11.5 11.875 11.5H15.25H16V10H15.25H11.875C10.8395 10 10 10.8395 10 11.875C10 12.2971 10.1395 12.6866 10.3749 13C10.1395 13.3134 10 13.7029 10 14.125C10 15.1605 10.8395 16 11.875 16H15.25H16V14.5H15.25H11.875C11.6679 14.5 11.5 14.3321 11.5 14.125C11.5 13.9179 11.6679 13.75 11.875 13.75H14.25H15V12.25H14.25H11.875C11.6679 12.25 11.5 12.0821 11.5 11.875Z" fill="var(--ds-purple-700)"/>
  `);var nC=e.i(4830423);let n_=(0,T.withNewIcon)(`<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
`),nb=(0,T.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>`);var nw=e.i(6307178),nk=e.i(9655125),nS=e.i(559696),nN=e.i(1502273),nT=e.i(2988836),nI=e.i(1637579),nA=e.i(5166685),nR=e.i(3126613),nP=e.i(4006531),nE=e.i(2608999);let nL=["^/.*$","/:path*"],nM="All paths";function nW(e){let{asset:n}=e;return(0,t.jsx)("div",{style:{paddingLeft:34},title:n.matcher,children:(0,t.jsx)(c.Text,{className:(0,a.clsx)(nE.default.staticAssetGrid,nE.default.copyIconWrapper),color:"gray-900",monospace:!0,size:14,weight:500,children:n.matcher!==nM?(0,t.jsxs)("button",{className:nE.default.pathWrapper,onClick:()=>{(0,tK.copyToClipboard)(n.matcher),eV.toasts.message("Copied to clipboard")},type:"button",children:[(0,t.jsx)("span",{children:n.matcher}),(0,t.jsx)("span",{className:nE.default.copyIcon,children:(0,t.jsx)(tZ.Copy,{size:20})})]}):(0,t.jsx)("div",{className:(0,a.clsx)(nE.default.pathWrapper,nE.default.allPathsMiddlewareRow),children:(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(c.Text,{as:"span",monospace:!1,children:n.matcher}),(0,t.jsx)(v.Tooltip,{text:(0,t.jsxs)(t.Fragment,{children:["Middleware is invoked on every path. This behavior can be modified by"," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/edge-middleware/middleware-api#match-paths-based-on-custom-matcher-config",type:"highlight",children:"configuring a matcher"}),"."]}),children:(0,t.jsx)(nT.InformationFillSmall,{className:nE.default.middlewareInfoIcon})})]})})})})}function nD(e){let{asset:n}=e;return(0,t.jsx)("div",{title:n.key,children:(0,t.jsx)(c.Text,{className:(0,a.clsx)(nE.default.variantItemGrid,nE.default.copyIconWrapper),monospace:!0,size:14,children:"string"==typeof n.origin?(0,t.jsx)(o.Link,{as:"a",className:nE.default.variantItemUpstream,external:!0,href:n.origin,rel:"noopener noreferrer",target:"_blank",children:n.key}):n.key})})}function nB(e){let{asset:n}=e,s=(0,ny.toString)(n.schedule);return(0,t.jsx)("div",{className:(0,a.clsx)(nE.default.copyIconWrapper),style:{paddingLeft:36},children:(0,t.jsxs)(c.Text,{className:(0,a.clsx)(nE.default.cronJobItem),monospace:!0,size:14,children:[(0,t.jsx)("div",{title:n.path,children:n.path}),(0,t.jsx)("div",{title:n.schedule,children:n.schedule.split(" ").map(e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:(0,a.clsx)({[nE.default.cronJobItemAsterisk]:"*"===e,[nE.default.singleDigit]:1===e.length&&"*"!==e}),children:e}),"Â "]}))}),(0,t.jsx)("div",{title:s,children:s})]})},`${n.path}/${n.schedule}`)}function nF(e){let{asset:n}=e,s=(0,nP.sizeFormatter)(n.size),r=s.split(" ");return(0,t.jsx)("div",{style:{paddingLeft:34},title:n.path,children:(0,t.jsxs)(c.Text,{className:(0,a.clsx)(nE.default.staticAssetGrid,nE.default.copyIconWrapper),color:"gray-900",monospace:!0,size:14,weight:500,children:[(0,t.jsxs)("button",{className:nE.default.pathWrapper,onClick:()=>{(0,tK.copyToClipboard)(n.path),eV.toasts.message("Copied to clipboard")},type:"button",children:[(0,t.jsx)("span",{children:n.path}),(0,t.jsx)("div",{className:nE.default.copyIcon,children:(0,t.jsx)(tZ.Copy,{size:20})})]}),(0,t.jsx)("span",{style:{whiteSpace:"nowrap",textAlign:"right",minWidth:60,fontWeight:400},children:1===r[1].length?(0,t.jsxs)(t.Fragment,{children:[`${r[0]} ${r[1]}`,"Â "]}):s})]})})}function nH(e){let{type:n}=e;switch(n){case"ISR":return(0,t.jsx)(nw.AcronymIsr,{className:nE.default.typeIcon});case"PPR":return(0,t.jsx)(nk.AcronymPpr,{className:nE.default.typeIcon});case"API":case"Serverless":return(0,t.jsx)(nN.AcronymApi,{className:nE.default.typeIcon});case"Page":return(0,t.jsx)(nS.AcronymPage,{className:nE.default.typeIcon});default:return(0,t.jsx)("div",{className:nE.default.typeBadgeContainer})}}function nz(e){let{asset:n}=e,s="size"in n&&"Meta"!==n.type?(0,nP.sizeFormatter)(n.size,"long",1):"-";return(0,t.jsx)("div",{className:nE.default.copyIconWrapper,title:n.path,children:(0,t.jsxs)(c.Text,{color:"gray-900",monospace:!0,style:{display:"flex",alignItems:"center",gap:4},children:[(0,t.jsx)("div",{className:"w-6",children:(0,t.jsx)(nH,{type:n.type})}),(0,t.jsxs)("button",{className:(0,a.clsx)(nE.default.pathWrapper),onClick:()=>{(0,tK.copyToClipboard)(n.path),eV.toasts.message("Copied to clipboard")},type:"button",children:[(0,t.jsx)(nR.RouteHighlighter,{className:"!overflow-visible",route:n.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),(0,t.jsx)("div",{className:nE.default.copyIcon,children:(0,t.jsx)(tZ.Copy,{size:20})})]}),(0,t.jsx)(nq,{runtime:"runtime"in n?n.runtime:void 0}),(0,t.jsx)("span",{className:nE.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",marginLeft:4,fontWeight:400},children:s}),(0,t.jsx)(y.Stack,{align:"center",className:nE.default.regionBadgeContainer,direction:"row",children:(0,t.jsx)(nG,{passiveRegions:Array.isArray(n.passiveRegions)?n.passiveRegions:void 0!==n.passiveRegions?[n.passiveRegions]:void 0,regions:n.regions})})]})})}function nO(e){let{asset:n}=e;return(0,t.jsxs)("div",{className:"flex flex-row justify-between",title:n.path,children:[(0,t.jsxs)(c.Text,{color:"gray-900",monospace:!0,style:{display:"flex",alignItems:"center",gap:4},children:[(0,t.jsxs)("button",{className:(0,a.clsx)(nE.default.pathWrapper,nE.default.copyIconWrapper),onClick:()=>{(0,tK.copyToClipboard)(n.path),eV.toasts.message("Copied to clipboard")},style:{flexBasis:"fit-content",flexGrow:0},type:"button",children:[(0,t.jsx)(nR.RouteHighlighter,{className:"!overflow-visible",route:n.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),"/*"===n.path?(0,t.jsx)(c.Text,{className:"ml-4 italic",children:"(this application serves any path not matched below)"}):null,(0,t.jsx)("div",{className:nE.default.copyIcon,children:(0,t.jsx)(tZ.Copy,{size:20})})]}),n.flag?(0,t.jsx)(y.Stack,{className:nE.default.copyFlagIconWrapper,direction:"row",gap:2,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",height:"20px",fontWeight:400},title:n.flag,children:(0,t.jsxs)("button",{className:(0,a.clsx)(nE.default.pathWrapper),onClick:()=>{n.flag&&((0,tK.copyToClipboard)(n.flag),eV.toasts.message("Copied to clipboard"))},type:"button",children:[(0,t.jsx)(y.Stack,{align:"center",direction:"row",gap:3,children:(0,t.jsx)(v.Tooltip,{text:(0,t.jsxs)(c.Text,{children:["requires flag"," ",(0,t.jsx)(c.Text,{as:"span",monospace:!0,children:n.flag})]}),children:(0,t.jsx)(tY.Badge,{size:"sm",style:{textTransform:"none"},variant:"purple-subtle",children:n.flag})})}),(0,t.jsx)("div",{className:nE.default.copyFlagIcon,children:(0,t.jsx)(tZ.Copy,{size:20})})]})}):null]}),n.appName?(0,t.jsx)(tY.Badge,{className:"mr-2 normal-case",size:"sm",variant:"gray-subtle",children:n.appName}):null]})}function nV(e){let{isrFunction:s,accordionValue:r,setAccordionValue:i}=e,l="size"in s?(0,nP.sizeFormatter)(s.size,"long",1):"-",o=s.staticRoutes.length>0,d=`ISR-${s.type}-${s.path}`,u=r.includes(d);return(0,t.jsxs)(n.Item,{className:nE.default.isrFunctionRow,disabled:!o,value:d,children:[(0,t.jsx)(n.Header,{children:(0,t.jsxs)(y.Stack,{className:(0,a.clsx)(nE.default.headerContent,{[nE.default.hasTrigger]:o}),direction:"row",children:[o?(0,t.jsx)(n.Trigger,{className:nE.default.trigger,children:(0,t.jsx)("div",{style:{transform:u?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,t.jsx)(nu.ChevronRight,{})})}):null,(0,t.jsx)("button",{className:nE.default.button,onClick:e=>{!e.defaultPrevented&&o&&(r.includes(d)?i(r.filter(e=>e!==d)):i([...r,d]))},style:{paddingLeft:o?5:void 0},type:"button",children:(0,t.jsx)("div",{className:nE.default.copyIconWrapper,title:s.path,children:(0,t.jsxs)(c.Text,{color:"gray-900",monospace:!0,style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("span",{className:(0,a.clsx)(nE.default.pathWrapper),children:(0,t.jsx)("span",{children:s.path})}),(0,t.jsx)(nq,{runtime:"runtime"in s?s.runtime:void 0}),(0,t.jsx)("span",{className:nE.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",fontWeight:400},children:l}),(0,t.jsx)(y.Stack,{align:"center",className:nE.default.regionBadgeContainer,direction:"row",children:(0,t.jsx)(nG,{passiveRegions:Array.isArray(s.passiveRegions)?s.passiveRegions:void 0!==s.passiveRegions?[s.passiveRegions]:void 0,regions:s.regions})})]})})})]})}),(0,t.jsx)(eQ.AnimatePresence,{children:u?(0,t.jsx)(n.Content,{forceMount:!0,children:(0,t.jsx)(nc.m.div,{animate:{height:"auto",opacity:1},className:nE.default.staticRoutesContainer,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:s.staticRoutes.map(e=>(0,t.jsxs)("button",{className:nE.default.staticRouteButton,onClick:()=>{(0,tK.copyToClipboard)(e.path),eV.toasts.message("Copied to clipboard")},type:"button",children:[(0,t.jsx)("span",{className:(0,a.clsx)(nE.default.pathWrapper,nE.default.staticRoute),children:(0,t.jsx)("span",{children:e.path})}),(0,t.jsx)("div",{className:nE.default.copyIconContainer,children:(0,t.jsx)(tZ.Copy,{})})]},e.path))})}):null})]})}let nU={nodejs:{logo:(0,t.jsx)(nj.FunctionNode,{}),label:"Node.js"},ruby:{logo:(0,t.jsx)(nb,{}),label:"Ruby"},go:{logo:(0,t.jsx)(n_,{}),label:"Go"},python:{logo:(0,t.jsx)(nC.FunctionPython,{}),label:"Python"}};function nq(e){var n;let{runtime:s}=e,[a,r]=(n=s||"",[/[a-zA-Z]+/.exec(n)?.[0]||"",/\d+(?<version>\.\w+)?/.exec(n)?.[0]||""]),i=a in nU?nU[a]:void 0;return(0,t.jsx)(y.Stack,{direction:"row",gap:2,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",height:"20px",fontWeight:400},children:(0,t.jsx)(y.Stack,{align:"center",direction:"row",gap:3,children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:[i?.label||a," ",r]}),(0,t.jsx)("span",{style:{color:"var(--gray-1000)"},children:i?.logo})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Edge"}),(0,t.jsx)("span",{children:(0,t.jsx)(nv,{color:"gray-100",size:16})})]})})})}function n$(e){let{items:r}=e,[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(!0),d=(0,s.useRef)(null),[u,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{d.current?.scrollToIndex({index:0})},[r]);let m=26.5*r.length,h=Math.min(530,m),g=(0,nl.isISRFunction)(r[0]),f=(0,s.useMemo)(()=>g&&0!==u.length?Math.min(20*r.filter(e=>{let t=`ISR-ISR-${e.path}`;return u.includes(t)}).reduce((e,t)=>e+t.staticRoutes.length,0)+26.5*r.length+12+6,530):h,[u,g,r,h]);return(0,t.jsx)(n.Root,{onValueChange:p,type:"multiple",value:u,children:(0,t.jsx)("div",{className:(0,a.clsx)(nE.default.list,{[nE.default.virtualListAtTop]:!(m<530)&&!i,[nE.default.virtualListAtBottom]:!(m<530)&&!o}),children:(0,t.jsx)(e6.Virtuoso,{atBottomStateChange:e=>c(e),atTopStateChange:e=>l(e),data:r,itemContent:(e,n)=>(0,nl.isVariant)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nD,{asset:n},n.key)}):(0,nl.isCronJob)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nB,{asset:n})}):(0,nl.isMiddleware)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nW,{asset:n},n.matcher)}):(0,nl.isMicrofrontendRoute)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nO,{asset:n},n.path)}):(0,nl.isStaticAsset)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nF,{asset:n},n.path)}):(0,nl.isISRFunction)(n)?(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nV,{accordionValue:u,isrFunction:n,setAccordionValue:p},n.path)}):(0,t.jsx)("div",{className:nE.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,t.jsx)(nz,{asset:n},n.path)}),ref:d,style:{height:f}})})})}function nG(e){let{regions:n,passiveRegions:s}=e;if(!(n&&n.length>0))return(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:nE.default.regionBadge,children:"Global"})});let a=Array.isArray(n)?n:[n],r=void 0===s?void 0:s.length,i=void 0!==r&&r>0,l=i&&s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Text,{weight:500,children:["Function Failover Region",`${1===r?"":"s"}`]}),(0,t.jsx)(c.Text,{children:`${(0,nA.toListSentence)(s.map(e=>e.toUpperCase()))}`})]}):void 0;return 1===a.length?(0,t.jsx)(v.Tooltip,{text:l,children:(0,t.jsx)("div",{children:(0,t.jsxs)("span",{className:nE.default.regionBadge,title:nI.FriendlyRegionNameMapping[a[0]],children:[a[0],i?` +${r}`:""]})})}):(0,t.jsx)(v.Tooltip,{text:`${(0,nA.toListSentence)(a.map(e=>e.toUpperCase()))}`,children:(0,t.jsx)("div",{children:(0,t.jsxs)("span",{className:nE.default.regionBadge,children:[a.length," Regions"]})})})}function nY(e){switch(e){case nl.ArtefactTypes.StaticAssets:return{name:"Static Assets",icon:(0,t.jsx)(nh.File,{})};case nl.ArtefactTypes.ServerlessFunctions:return{name:"Functions",icon:(0,t.jsx)(nm.FunctionSquare,{})};case nl.ArtefactTypes.IncrementalStaticRegeneration:return{name:"ISR Functions",icon:(0,t.jsx)(nZ,{children:"ISR"})};case nl.ArtefactTypes.PartialPrerender:return{name:"Partial Prerender Functions",icon:(0,t.jsx)(nZ,{children:"PPR"})};case nl.ArtefactTypes.EdgeMiddleware:return{name:"Edge Middleware",icon:(0,t.jsx)(np.FunctionMiddleware,{})};case nl.ArtefactTypes.Variant:return{name:"Variants",icon:(0,t.jsx)(nd,{})};case nl.ArtefactTypes.CronJobs:return{name:"Cron Jobs",icon:(0,t.jsx)(_.Clock,{})};case nl.ArtefactTypes.MicrofrontendRoutes:return{name:"Microfrontend Routes",icon:(0,t.jsx)(ng.Microfrontends,{})};default:return{name:"Unknown",icon:(0,t.jsx)(nh.File,{})}}}function nZ(e){let{children:n}=e;return(0,t.jsx)(c.Text,{as:"span",className:no.default.badge,color:"inherit",size:10,weight:700,children:n})}function nJ(e){let{type:r,artefacts:i,isOpen:l,open:o,toggleOpen:d}=e,[u,p]=(0,s.useState)("all"),{name:m,icon:h}=nY(r),g=function(e,t){if(0===e.length)return[];if((0,nl.isMiddleware)(e[0]))return[{type:"Custom Matcher",count:`${e.length} Paths`}];if(t===nl.ArtefactTypes.MicrofrontendRoutes)return[...new Set(e.map(e=>(0,nl.isMicrofrontendRoute)(e)?e.appName:void 0))].filter(Boolean).toSorted().map(t=>({type:t,count:e.filter(e=>(0,nl.isMicrofrontendRoute)(e)&&e.appName===t).length}));let n=e.reduce((e,t)=>((e[t.type]=e[t.type]||[]).push(t),e),{}),s=[],a=Object.keys(n);return t===nl.ArtefactTypes.StaticAssets&&(a=nl.STATIC_TYPES.filter(e=>e in n)),a.forEach((e,t)=>{s[t]={type:e,count:n[e].length}}),s}(i,r),f=(0,s.useMemo)(()=>{if("all"===u||r===nl.ArtefactTypes.EdgeMiddleware){if(i[0]&&(0,nl.isMiddleware)(i[0])){let e=new Set;for(let t of i)if(Array.isArray(t.rawMatchers)&&t.rawMatchers.length)for(let n of t.rawMatchers)e.add(n);else e.add(t.matcher);let t=Array.from(e).sort().map(e=>({matcher:e}));return 1===t.length&&nL.includes(t[0].matcher)?[{matcher:nM}]:t}return i}return r===nl.ArtefactTypes.MicrofrontendRoutes?i.filter(e=>"all"===u||(0,nl.isMicrofrontendRoute)(e)&&e.appName===u):i.filter(e=>e.type===u)},[u,i,r]);return(0,s.useEffect)(()=>{l||p("all")},[l]),(0,t.jsxs)(n.Item,{className:no.default.wrapper,value:r,children:[(0,t.jsxs)(n.Header,{className:no.default.header,children:[(0,t.jsx)(n.Trigger,{className:no.default.radixTrigger}),(0,t.jsxs)("button",{className:no.default.trigger,onClick:e=>{e.defaultPrevented||d()},type:"button",children:[(0,t.jsxs)(t7.default,{flex:"0 0 auto",row:!0,vcenter:!0,children:[(0,t.jsx)("div",{style:{transform:l?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,t.jsx)(nu.ChevronRight,{})}),(0,t.jsx)("div",{className:(0,a.clsx)(no.default.iconWrapper,{[no.default.isrIconWrapper]:r===nl.ArtefactTypes.PartialPrerender||r===nl.ArtefactTypes.PartialPrerenderDynamicContent}),children:h}),(0,t.jsx)(c.Text,{lineHeight:14,size:14,weight:500,children:m})]}),0===f.length?null:(0,t.jsx)(tk.Scroller,{gradient:"var(--ds-background-200) 0, transparent 20px",overlayClassName:no.default.scroller,children:(0,t.jsxs)("div",{className:no.default.badgesWrapper,children:[g.length>=1&&(0,t.jsxs)(nx,{active:"all"===u&&l,onClick:e=>{e.preventDefault(),p("all"),o(),e.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:["All (",i.length.toLocaleString(),")"]}),g.length>1&&g.map(e=>(0,t.jsxs)(nx,{active:e.type===u||1===g.length&&l,onClick:t=>{t.preventDefault(),p(e.type),o(),t.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:[e.type," (",e.count.toLocaleString(),")"]},e.type))]})})]})]}),(0,t.jsx)(eQ.AnimatePresence,{initial:!1,children:l?(0,t.jsx)(n.Content,{forceMount:!0,children:(0,t.jsx)(nc.m.div,{animate:{height:"auto",opacity:1},className:no.default.content,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:(0,t.jsx)(n$,{items:f})})}):null})]})}function nK(e){let{resolvedTheme:s}=(0,nr.useTheme)(),{selectedArtefacts:r,artefactGroups:i,filterArtefactsBy:l,setSelectedArtefacts:o,deployment:d,framework:u}=e;return(0,t.jsxs)(n.Root,{defaultValue:[],onValueChange:e=>{o(e)},type:"multiple",value:r,children:[l?null:(0,t.jsxs)("div",{className:(0,a.clsx)(no.default.wrapper,no.default.frameworkWrapper),style:{display:"flex",alignItems:"center",gap:5},children:[u?(0,t.jsxs)(t.Fragment,{children:[u.logo?(0,t.jsx)(ni.Avatar,{size:20,src:"dark"===s?u.darkModeLogo:u.logo,title:u.name}):null,(0,t.jsx)(c.Text,{lineHeight:14,size:14,weight:500,children:u.name}),u.version?(0,t.jsxs)(c.Text,{lineHeight:14,size:14,weight:500,children:["(",u.version,")"]}):null]}):(0,t.jsx)(c.Text,{lineHeight:14,size:14,weight:500,children:"No framework detected"}),(0,t.jsx)(v.Tooltip,{desktopOnly:!0,maxWidth:400,style:{marginLeft:"auto"},text:"Download Deployment Data",children:(0,t.jsx)(m.Button,{"aria-label":"Download Deployment Data",className:no.default.downloadButton,onClick:()=>{((e,t)=>{let n=e.map(e=>e.artefacts.map(e=>(0,nl.isVariant)(e)||(0,nl.isCronJob)(e)||(0,nl.isMiddleware)(e)||(0,nl.isMicrofrontendRoute)(e)?null:(0,nl.isStaticAsset)(e)||(0,nl.isServerlessFunction)(e)?`${e.path},${e.size}`:`${e.path},${Array.isArray(e.regions)?e.regions.join(","):e.regions||""}`)),s=`path_name,size
`,a=encodeURI(`data:text/csv;charset=utf-8,${s}${n.flat().join("\n")}`),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)})(i,`${d.host.replace("-","_").replace(/\./g,"_")}_logs`)},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(na.Download,{})})})]}),i.map(e=>{let{type:n,artefacts:s}=e;return(0,t.jsx)(nJ,{artefacts:s,isOpen:r.includes(n),open:()=>{r.includes(n)||o([...r,n])},toggleOpen:()=>{r.includes(n)?o(r.filter(e=>e!==n)):o([...r,n])},type:n},n)})]})}var nQ=e.i(1475672);function nX(e){let{active:n,onChange:s,items:r,open:i}=e;return(0,t.jsx)("div",{className:(0,a.clsx)(ns.default.collapsedBadgesWrapper,{[ns.default.closed]:!i}),children:(0,t.jsx)(nQ.default,{active:n,className:ns.default.switcher,items:[...r.map(e=>{let{name:n,value:s,tooltip:a,buttonProps:r}=e;return{name:a?(0,t.jsx)(v.Tooltip,{className:ns.default.tooltip,text:a,children:n}):n,value:s,buttonProps:r}})],onChange:(e,t)=>{s(e,t)},size:"small"})})}var n0=e.i(1918911),n1=e.i(3277920),n5=e.i(7432042),n2=e.i(1594052),n4=e.i(6618181);function n3(e){let{title:n,metric:s}=e;return(0,t.jsxs)("div",{className:n4.default.headerStatContainer,children:[(0,t.jsx)("div",{className:n4.default.headerStatTitle,children:n}),(0,t.jsx)("div",{className:n4.default.headerStatMetric,children:s})]})}function n9(e){let{cachedTasks:n,totalTasks:s,timeSaved:a,totalDuration:r}=e;return(0,t.jsxs)("header",{className:n4.default.header,children:[(0,t.jsxs)("div",{className:n4.default.headerTitle,children:[(0,t.jsx)(n2.LogoTurborepo,{size:44}),(0,t.jsx)("div",{className:n4.default.headerTitleContainer,children:(0,t.jsx)("h1",{children:"Turborepo Run Summary"})})]}),(0,t.jsxs)("div",{className:n4.default.headerStats,children:[void 0!==n&&void 0!==s&&(0,t.jsx)(n3,{metric:`${n}/${s}`,title:"Cached Tasks"}),void 0!==a&&a>0&&(0,t.jsx)(n3,{metric:(0,n5.default)(a),title:"Time Saved"}),void 0!==r&&(0,t.jsx)(n3,{metric:(0,n5.default)(r),title:"Duration"})]})]})}var n7=e.i(6912485);function n8(e){let{cached:n,total:s}=e;return void 0!==n&&void 0!==s?(0,t.jsx)(n7.Progress,{className:"m-0 border border-solid border-gray-700 !bg-background-100",max:s,value:n,colors:{0:"linear-gradient(to right, #0096ff, #ff1e56)"},width:"50%"}):null}var n6=e.i(6881349);function se(e){let{isCached:n}=e,s=n?K.CheckCircleFill:S.MinusCircle;return(0,t.jsx)("span",{className:(0,a.clsx)({"text-turbo-blue":n,"text-turbo-red":!n}),children:(0,t.jsx)(s,{})})}function st(e){let{taskId:n}=e,s=n.split("#");return 1===s.length?(0,t.jsx)("span",{children:n}):(0,t.jsxs)("span",{children:[s[0],(0,t.jsxs)("span",{className:"text-gray-900",children:["#",s[1]]})]})}function sn(e){let{taskId:t,isGlobal:n}=e;return n?'"globalCacheInputs": {':t?`"taskId": "${t}"`:void 0}function ss(e){let{onScrollToLine:n,taskId:s,taskStats:a}=e;return(0,t.jsx)(m.Button,{align:"flex-grow",className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{n(sn({taskId:s})),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},prefix:(0,t.jsx)(se,{isCached:a.isCached}),size:"small",title:`${s} - cache ${a.isCached?"hit":"miss"} ${a.cacheSource?`(${a.cacheSource.toLowerCase()})`:""}`,type:"tertiary",children:(0,t.jsxs)("span",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"w-3/4 overflow-hidden truncate text-left",children:(0,t.jsx)(st,{taskId:s})}),void 0!==a.duration?(0,t.jsx)("span",{children:(0,n5.default)(a.duration)}):void 0]})})}function sa(e){let{taskId:n,taskStats:s}=e;return(0,t.jsx)(n6.Combobox.Option,{prefix:(0,t.jsx)(se,{isCached:s.isCached}),suffix:void 0!==s.duration?(0,t.jsx)("span",{children:(0,n5.default)(s.duration)}):void 0,value:n,children:(0,t.jsx)(st,{taskId:n})},n)}function sr(e){let{onScrollToLine:n}=e;return(0,t.jsx)(m.Button,{className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{n(sn({isGlobal:!0})),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},size:"small",type:"tertiary",children:"Global Hash Summary"})}var si=e.i(7935689);function sl(e){let{onScrollToLine:n,stats:s}=e,{summary:r,tasks:i={}}=s||{};return(0,t.jsxs)("aside",{className:si.default.sidebar,children:[(0,t.jsxs)("div",{className:(0,a.clsx)(si.default.sidebarTitle,"mb-2"),children:["Cache Analysis"," ",r?.cachedTasks!==void 0&&void 0!==r.totalTasks?`(${r.cachedTasks}/${r.totalTasks})`:void 0,(0,t.jsx)(n8,{cached:r?.cachedTasks,total:r?.totalTasks})]}),(0,t.jsx)(sr,{onScrollToLine:n}),(0,t.jsx)("hr",{className:si.default.sidebarDivider}),(0,t.jsx)("div",{className:si.default.sidebarTaskContainer,children:Object.keys(i).map(e=>(0,t.jsx)(ss,{onScrollToLine:n,taskId:e,taskStats:i[e]},e))}),(0,t.jsx)("div",{className:si.default.sidebarFooter,children:(0,t.jsx)(o.Link,{external:!0,href:"/docs/monorepos/turborepo#debug-turborepo-cache-misses",variant:"highlight",children:"Learn More"})})]})}let so=(0,T.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.25H11C11.4142 4.25 11.75 4.58579 11.75 5V11C11.75 11.4142 11.4142 11.75 11 11.75H5C4.58579 11.75 4.25 11.4142 4.25 11V5C4.25 4.58579 4.58579 4.25 5 4.25ZM3 5C3 3.89543 3.89543 3 5 3H11C12.1046 3 13 3.89543 13 5V11C13 12.1046 12.1046 13 11 13H5C3.89543 13 3 12.1046 3 11V5ZM7.375 10.375V9.75V8.625H6.25H5.625V7.375H6.25H7.375V6.25V5.625H8.625V6.25V7.375H9.75H10.375V8.625H9.75H8.625V9.75V10.375H7.375Z" fill="currentColor"/>');var sc=e.i(3500331);function sd(e){var n,s;let{summary:a}=e,{isReady:r,team:i}=(0,t3.useTeam)();return(0,t.jsx)(m.Button,{Component:"a",disabled:!r,download:`turborepo_summary_${a.source.id}.json`,href:(n=a.source.id,(s=i?new URLSearchParams({teamId:i.id}):void 0)?`/api/v6/deployments/${n}/files/turborepo-summary?${s.toString()}`:`/api/v6/deployments/${n}/files/turborepo-summary`),onClick:()=>eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_DOWNLOAD),size:"small",suffix:(0,t.jsx)(na.Download,{}),target:"_blank",type:"secondary",children:"Download"},"download")}function su(e){let{summaryData:n,isComparing:r,onCompare:i,onScrollToLine:l,hasPreviousSummary:o,onComparePrevious:c,stats:d}=e,[u,p]=(0,s.useState)(null),{summary:h,tasks:g={}}=d||{};return(0,t.jsxs)("div",{className:(0,a.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 lg:px-6","bg-background-100"),children:[(0,t.jsxs)("div",{className:"flex flex-col lg:hidden",children:[(0,t.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,t.jsx)("span",{children:"Cache Analysis"}),(0,t.jsx)(n8,{cached:h?.cachedTasks,total:h?.totalTasks})]}),(0,t.jsxs)(n6.Combobox,{clearable:!1,onChange:e=>{e&&(p(e),l(sn({taskId:e})),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK))},placeholder:"Jump to task",value:u,children:[(0,t.jsx)(n6.Combobox.Input,{}),(0,t.jsx)(n6.Combobox.List,{children:Object.keys(g).map(e=>(0,t.jsx)(sa,{taskId:e,taskStats:g[e]},e))})]})]}),(0,t.jsx)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:(0,t.jsx)("span",{children:"Cache Inputs"})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 max-md:flex-wrap",children:[(0,t.jsx)("div",{className:"grow",children:(0,t.jsx)(sc.Input,{"aria-labelledby":"Label",disabled:!0,prefix:"This deployment",value:n.source.id})}),r?void 0:(0,t.jsx)(m.Button,{className:"max-md:w-full",onClick:o?c:i,suffix:(0,t.jsx)(so,{}),children:o?"Compare to Previous":"Compare"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between max-lg:hidden",children:[(0,t.jsxs)("div",{className:"font-mono text-sm font-normal leading-4",children:["turbo@",n.summary.turboVersion]}),(0,t.jsx)(sd,{summary:n})]})]})}var sp=e.i(6318858),sm=e.i(7749291),sh=e.i(7218483),sg=e.i(6625227),sf=e.i(8216525);function sx(e){let{item:n,isMainDeployment:s,isPrevDeployment:a,isComparisonDeployment:r,status:i,createdAt:l}=e,o=(0,sh.useAgo)(l,{justNowLabel:"just now"});return s?o="CURRENT":a&&(o="PREVIOUS"),(0,t.jsx)(n6.Combobox.Option,{className:"font-mono",disabled:s||r,prefix:(0,t.jsx)(sf.DeploymentStatus,{deployment:{readyState:i??"INITIALIZING",createdAt:l??0}}),suffix:(0,t.jsx)("span",{className:"text-xs text-gray-900",children:o}),value:n.source.id,children:(0,t.jsxs)("span",{className:"flex gap-1 text-xs text-foreground",children:[n.source.id,r?(0,t.jsx)(sp.Check,{}):void 0]})},n.source.id)}function sy(e){let{comparisons:n,comparisonsLoading:s,searchLoading:r,summaryData:i,deployment:l,onSelectCompare:o,onRemoveCompare:c,onSearch:d,prevDeploymentId:u}=e,{data:p}=(0,sg.default)(i?.source.id);return(0,t.jsxs)("div",{className:(0,a.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 lg:px-6","border-0 border-l border-solid border-gray-200 bg-background-200","max-lg:border-l-0 max-lg:border-t","max-sm:w-screen"),children:[(0,t.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-mono text-sm text-red-500",children:"-"}),(0,t.jsx)("span",{className:"ml-1 mr-2 font-mono text-sm text-green-500",children:"+"}),"Comparing with:"]}),(0,t.jsx)(m.Button,{"aria-label":"Remove Comparison",onClick:c,size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(tV.Cross,{})})]}),(0,t.jsxs)(n6.Combobox,{clearable:!1,disabled:s,onChange:o,placeholder:i?i.source.id:"Select a deployment",value:i?.source.id,children:[(0,t.jsx)(n6.Combobox.Input,{loading:s||r,onChange:e=>{""===e.target.value?d(void 0):d(e.target.value)}}),(0,t.jsx)(n6.Combobox.List,{emptyMessage:r?"Searching":"No previous deployments found",children:n.map((e,n)=>(0,t.jsx)(sx,{createdAt:e.source.meta.createdAt,isComparisonDeployment:e.source.id===i?.source.id,isMainDeployment:e.source.id===l.id,isPrevDeployment:e.source.id===u,item:e,status:e.source.meta.status},r?e.source.id:`${e.source.id}-${n}`))})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between max-lg:hidden",children:[(0,t.jsx)("div",{className:"font-mono text-sm font-normal leading-4",children:i?`turbo@${i.summary.turboVersion}`:void 0}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[p?.inspectorUrl?(0,t.jsx)(m.Button,{Component:"a","aria-label":`Open deployment with ID ${p.id} in a new tab`,href:p.inspectorUrl,onClick:()=>eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_VIEW_DEPLOYMENT),size:"small",svgOnly:!0,target:"_blank",type:"secondary",children:(0,t.jsx)(sm.ExternalSmall,{})}):void 0,i?(0,t.jsx)(sd,{summary:i}):void 0]})]})]})}function sj(e){let{deployment:n,showCompareHeader:s,hasPreviousSummary:a,isComparing:r,stats:i,onScrollToLine:l,onCompareRemove:o,onComparePrevious:c,onCompare:d,onCompareSelect:u,onCompareSearch:p,baseline:m,comparison:h,comparisons:g,comparisonsLoading:f,searchLoading:x,prevDeploymentId:y}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(su,{hasPreviousSummary:a,isComparing:r,onCompare:d,onComparePrevious:c,onScrollToLine:l,stats:i,summaryData:m}),s?(0,t.jsx)(sy,{comparisons:g,comparisonsLoading:f,deployment:n,onRemoveCompare:o,onSearch:p,onSelectCompare:u,prevDeploymentId:y,searchLoading:x,summaryData:h}):null]})}var sv=e.i(3218771),sC=e.i(6440337);function s_(e){let{className:n="",isEnabled:s,onClick:a,mobileBreakpoint:r=600}=e,i=(0,te.useMediaQuery)(r);return s?(0,t.jsx)(m.Button,{"aria-label":"Turborepo Run Summary",className:n,onClick:a,prefix:i?void 0:(0,t.jsx)(n2.LogoTurborepo,{size:20}),shape:i?"square":void 0,size:"small",svgOnly:i||void 0,type:"secondary",children:i?(0,t.jsx)(n2.LogoTurborepo,{size:20}):(0,t.jsx)("span",{children:"Run Summary"})}):null}function sb(e){return(0,t.jsxs)("span",{className:sv.default.codeFoldMessage,children:[(0,t.jsx)(n0.ChevronUpDown,{className:"text-sm"}),"Expand ",e," Lines"]})}function sw(e){let{size:n}=e;return(0,t.jsxs)("svg",{height:n,style:{color:"currentcolor",stroke:"currentcolor"},viewBox:"0 0 24 24",width:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("title",{children:"Reset Folding"}),(0,t.jsx)("path",{d:"M17 3L12 8.517L9.5 5.7585L7 3M7 20.997L12 15.48L17 20.997",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}function sk(e){let{onView:n}=e;return(0,t.jsxs)("div",{className:sv.default.noDifference,children:[(0,t.jsx)(K.CheckCircleFill,{size:54}),(0,t.jsx)("span",{children:"No Difference"}),(0,t.jsx)(m.Button,{onClick:n,size:"small",type:"secondary",children:"View"})]})}function sS(e){let{active:n,deployment:a,baseline:r,comparison:l,previous:o,initialLine:c,onClose:u}=e,[p,h]=(0,i.useQueryState)("line"),[g,f]=(0,i.useQueryState)("comparisonId",i.queryTypes.string.withDefault(l?.source.id??"")),{expandedBlocks:x,resetCodeBlocks:y,virtualizer:j,getIndex:v,items:C}=(0,d.useCodeCompare)(),_=(0,te.useMediaQuery)(1024),b=(0,n1.useMounted)(),w=(0,s.useRef)(null),[k,S]=(0,s.useState)([]),[N,T]=(0,s.useState)(!c),[I,A]=(0,s.useState)(void 0),R=(0,tH.useDebouncedValue)(I,400),[P,E]=(0,s.useState)(l),[L,M]=(0,s.useState)(!0),[W,D]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[H,z]=(0,s.useState)(!!c),[O,V]=(0,s.useState)(),{resolvedTheme:U}=(0,nr.useTheme)(),{data:q,isLoading:$}=function(e){let{since:t,projectId:n,deploymentId:s,refType:a,refValue:r}=e,i=(0,eG.useTeamSlug)();return(0,e$.default)(()=>i&&s&&n?`/api/turborepo/run-summary/comparisons${(0,eP.encode)({deploymentId:s,projectId:n,since:t,teamId:i,refType:a,refValue:r})}`:null,e=>(0,eU.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:0,revalidateOnFocus:!1})}({since:a.createdAt,projectId:a.projectId,deploymentId:a.id,...eY(a)}),{data:G,isLoading:Y}=function(e){let{search:t}=e,n=(0,eG.useTeamSlug)();return(0,e$.default)(()=>n&&t?`/api/turborepo/run-summary/query${(0,eP.encode)({search:t,teamId:n})}`:null,e=>(0,eU.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1})}({search:R}),Z=async()=>{await u(),await h(null),await f(null)},J=e=>{if(e){let t=k.find(t=>t.source.id===e);t&&(E(t),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_SELECT_COMPARISON,{comparisonId:t.source.id,comparisonType:t.source.type}))}},K=()=>{D(!1),E(void 0),M(!1),z(!1),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_REMOVE_COMPARISON)},Q=(0,s.useCallback)(e=>{e>=0&&(j?.scrollToIndex(e,{align:"center"}),V(void 0))},[V,j]),X=()=>{o?.source.id!==P?.source.id&&(E(o),M(!0),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COMPARE_PREVIOUS))},ee=e=>{if(e){let t=v(e);t<0?(F(!1),V(e)):Q(t)}};(0,s.useEffect)(()=>{if(b&&!N&&c&&P?.summary){let[e,t]=c.split("-"),n=C.find(n=>"skipped"!==n.type&&n.data.line["L"===e?"left":"right"]?.lineNumber===Number(t));if(void 0!==n&&"skipped"!==n.type){let{index:e}=n.data;Q(e),T(!0)}}},[N,c,b,P,C,Q]),(0,s.useEffect)(()=>{!$&&q?.length&&S(q)},[$]),(0,s.useEffect)(()=>{if(!Y&&G?.result!==void 0){let e=G.result;k.find(t=>t.source.id===e.source.id)||S(t=>[e,...t])}},[Y,k]),(0,s.useEffect)(()=>{f(P?.source.id?P.source.id:null),P?.summary&&!c?F(!0):F(!1)},[P,f,c]),(0,s.useEffect)(()=>{!B&&O&&Q(v(O))},[O,B,Q,v]),(0,s.useEffect)(()=>{P?.summary&&!_?M(!0):M(!1)},[_,P]),(0,s.useEffect)(()=>{P?.summary&&z(!1)},[P]);let et=!!o,{totalTasks:en,cachedTasks:es,totalDuration:ea,timeSaved:er}=r.stats.summary,ei=JSON.stringify(P?.summary)===JSON.stringify(r.summary),el=ei&&!H;return(0,t.jsxs)(ez.Modal,{active:!!n,drawerClassname:sv.default.drawerStyles,drawerHeight:"max",drawerVerticalScroll:!1,onClickOutside:Z,style:{width:P?.summary||W||_?"90vw":"80vw",maxWidth:"1600px",height:"80vh"},children:[(0,t.jsx)(n9,{cachedTasks:es,timeSaved:er,totalDuration:ea,totalTasks:en}),(0,t.jsxs)("div",{className:sv.default.body,children:[(0,t.jsx)(sl,{onScrollToLine:ee,stats:r.stats}),(0,t.jsxs)("div",{className:sv.default.content,children:[(0,t.jsx)("div",{className:sv.default.contentHeader,children:(0,t.jsx)(sj,{baseline:r,comparison:P,comparisons:k,comparisonsLoading:$,deployment:a,hasPreviousSummary:et,isComparing:!!P?.summary||W,onCompare:()=>D(!0),onComparePrevious:X,onCompareRemove:K,onCompareSearch:A,onCompareSelect:J,onScrollToLine:ee,prevDeploymentId:o?.source.id,searchLoading:Y,showCompareHeader:!!(P?.summary||W),stats:r.stats})}),(0,t.jsxs)("div",{className:sv.default.diffViewer,id:"DiffViewer",ref:w,children:[(0,t.jsx)("div",{className:sv.default.contentHeaderMobile,children:(0,t.jsx)(sj,{baseline:r,comparison:P,comparisons:k,comparisonsLoading:$,deployment:a,hasPreviousSummary:et,isComparing:!!P?.summary||W,onCompare:()=>D(!0),onComparePrevious:X,onCompareRemove:K,onCompareSearch:A,onCompareSelect:J,onScrollToLine:ee,prevDeploymentId:o?.source.id,searchLoading:Y,showCompareHeader:!!(P?.summary||W),stats:r.stats})}),el?(0,t.jsx)(sk,{onView:()=>{F(!1),z(!0)}}):void 0,b&&!el?(0,t.jsx)(d.ComparisonView,{codeFoldMessageRenderer:sb,compareMethod:d.DiffMethod.WORDS_WITH_SPACE,hideLineNumbers:!P?.summary,highlightLines:p?[p]:[],newValue:JSON.stringify(P?.summary?P.summary:r.summary,null,2),oldValue:JSON.stringify(r.summary,null,2),onLineNumberClick:(e,t)=>{p===e?h(null):h(e)},parentRef:w,renderContent:e=>(0,sC.SyntaxHighlighter)(e,r.stats.tasks),showDiffOnly:B,splitView:L,styles:(()=>{let e="dark"===U?"dark":"light";return P?.summary?L?(0,sC.splitViewStyles)({theme:e}):(0,sC.unifiedViewStyles)({theme:e}):(0,sC.noComparisonStyles)()})(),useDarkTheme:"dark"===U,useVirtual:!0,virtualizerOptions:{estimateSize:()=>20,overscan:15,scrollPaddingStart:_?-300:0},xSpacer:!0}):void 0,(0,t.jsx)(sC.SyntaxHighlightingStyles,{})]}),P?.summary&&!el?(0,t.jsxs)("div",{className:sv.default.diffViewerBackground,children:[(0,t.jsx)("div",{className:sv.default.diffViewerBackgroundLeft}),(0,t.jsx)("div",{className:sv.default.diffViewerBackgroundRight})]}):null]}),!ei&&x.length>0&&P?.summary||!ei&&!B&&P?.summary?(0,t.jsx)(m.Button,{className:sv.default.resetFoldingButton,onClick:()=>{y(),F(!0),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COLLAPSE_LINES)},size:"small",type:"secondary",children:(0,t.jsxs)("span",{className:sv.default.resetCodeFold,children:[(0,t.jsx)(sw,{size:14}),"Collapse Lines"]})}):void 0]})]})}function sN(e){let{shimmer:n=!1}=e;return(0,t.jsx)(t.Fragment,{children:Z.map(e=>{let s=e,a=e;return(e!==G||n||(a="Assigning Domains",s="Assigning Custom Domains"),n)?(0,t.jsx)(ep,{id:a,name:s},a):(0,t.jsx)(em,{disabled:!0,id:a,name:s,status:ed.Pending},a)})})}function sT(e){let{resource:n,team:s}=e;return(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:4,children:[(0,t.jsx)(o.Link,{external:!0,href:`/${s.slug}/~/stores/integration/${n.resourceId}`,children:(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:1,children:[n.icon?(0,t.jsx)(ni.Avatar,{hash:n.icon,size:20}):null,n.name]})}),(0,t.jsx)(sI,{status:n.status})]})}function sI(e){let{status:n}=e;return(0,t.jsx)(v.Tooltip,{text:function(e){if(!e)return"Resource status is unknown";switch(e){case"ready":case"resumed":return"Resource is ready";case"pending":return"Resource is initializing";case"error":return"Resource has errors";case"skipped":return"Resource has been skipped or not configured";case"suspended":return"Resource has been suspended";case"uninstalled":return"Resource has been uninstalled";case"timeout":return"Resource provisioning timed out"}return null}(n),children:(0,t.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-secondary)";switch(e){case"ready":case"resumed":return"var(--geist-success)";case"pending":return"var(--geist-warning)";case"timeout":case"error":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(n)}})})}function sA(e){let{action:n,deployment:s,team:a}=e;return(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:4,children:[n.resource?(0,t.jsx)(sR,{action:n,deployment:s,resource:n.resource,team:a}):(0,t.jsx)(sP,{action:n,deployment:s,team:a}),n.startedAt?(0,t.jsx)(sE,{action:n}):null,(0,t.jsx)(sL,{status:n.status}),(0,t.jsx)(c.Text,{children:n.statusText})]})}function sR(e){let{action:n,resource:s,deployment:a,team:r}=e,i=n.statusUrl?(0,F.getIntegrationAbsoluteOrSsoLink)(n.statusUrl,{teamIdOrSlug:r.id,integrationConfigurationId:n.integrationConfigurationId,externalResourceId:s.externalResourceId,projectId:a.projectId,action:n.slug}):`/${r.slug}/~/stores/integration/${s.resourceId}`;return(0,t.jsx)(o.Link,{external:!0,href:i,children:(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:1,children:[n.icon?(0,t.jsx)(ni.Avatar,{hash:n.icon,size:20}):null,s.name,": ",n.name]})})}function sP(e){let{action:n,deployment:s,team:a}=e,r=n.statusUrl?(0,F.getIntegrationAbsoluteOrSsoLink)(n.statusUrl,{teamIdOrSlug:a.id,integrationConfigurationId:n.integrationConfigurationId,projectId:s.projectId,action:n.slug}):`/${a.slug}/~/integrations/${n.integrationConfigurationId}`;return(0,t.jsx)(o.Link,{external:!0,href:r,children:(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:1,children:[n.icon?(0,t.jsx)(ni.Avatar,{hash:n.icon,size:20}):null,n.name]})})}function sE(e){let{action:n}=e,{startedAt:a,completedAt:r}=n,[i,l]=(0,s.useState)(null);return((0,er.useInterval)(()=>{a&&l(Date.now()-a)},r?null:1e3,!0),(0,s.useEffect)(()=>{null===i&&a&&r&&l(r-a)},[i,r,a]),i)?(0,t.jsx)(c.Text,{as:"span",color:"gray-900",weight:400,children:(0,ei.age)(i||0,{includeSeconds:!0})}):null}function sL(e){let{status:n}=e;return(0,t.jsx)(v.Tooltip,{text:function(e){if(!e)return"Action has not started yet";switch(e){case"succeeded":return"Action has completed";case"running":return"Action is running";case"failed":return"Action has completed with errors";case"skipped":return"Action has been skipped or not configured";case"uninstalled":return"Action or resource have been uninstalled";case"timeout":return"Action has timed out"}return null}(n),children:(0,t.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-warning)";switch(e){case"succeeded":return"var(--geist-success)";case"running":return"var(--geist-warning)";case"timeout":case"failed":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(n)}})})}function sM(e){let{deployment:n}=e,{team:s}=(0,t3.useTeam)(),a=n.integrations;return s&&a?(0,t.jsx)(em,{action:(0,t.jsx)(sD,{deployment:n}),finishedAt:a.completedAt,id:"Integrations",name:"Provisioning Integrations",paddingType:"vertical",showDurationWhenSkipped:!0,startedAt:a.startedAt,status:function(e){if(!e)return ed.NoData;switch(e){case"pending":return ed.InProgress;case"ready":return ed.Complete;case"error":case"timeout":return ed.Error;case"skipped":return ed.Skipped}return ed.NoData}(a.status),children:(0,t.jsx)(sW,{deployment:n,team:s})}):null}function sW(e){let{team:n,deployment:s}=e,{data:a}=(0,e$.default)(`/api/v13/deployments/${s.id}/integrations?teamId=${s.ownerId}`,eU.fetchAPI);return(0,t.jsx)(y.Stack,{direction:"column",gap:4,paddingX:6,children:a?(0,t.jsxs)(t.Fragment,{children:[a.resources?.map(e=>(0,t.jsx)(sT,{resource:e,team:n},e.resourceId)),a.actions?.map(e=>(0,t.jsx)(sA,{action:e,deployment:s,team:n},`${e.integrationConfigurationId}:${e.slug}`))]}):(0,t.jsx)(c.Text,{children:"Loading..."})})}function sD(e){let{deployment:n}=e,s=n.integrations;return s?.status!=="pending"?null:(0,t.jsx)(m.Button,{onClick:()=>{(0,eU.fetchAPI)(`/api/v13/deployments/${n.id}/integrations/skip`,{method:"POST",throwOnHTTPError:!0,body:{}})},size:"small",type:"secondary",children:"Skip"})}e.s(["DeployStepsSkeleton",()=>sN],1367170);var sB=e.i(1288475),sF=e.i(1000921);function sH(e){let{check:n}=e;return n?.status==="running"?(0,t.jsx)(sB.Status,{size:16,color:"amber-700"}):n?.status==="completed"&&"succeeded"===n.conclusion?(0,t.jsx)(sp.Check,{size:16,color:"green-700"}):n?.status==="completed"&&"failed"===n.conclusion?(0,t.jsx)(tV.Cross,{size:16,color:"red-700"}):n?.status==="completed"&&"neutral"===n.conclusion?(0,t.jsx)(R.Warning,{size:16,color:"amber-700"}):n?.status==="completed"&&"canceled"===n.conclusion?(0,t.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 20 20",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_3889:22791)",children:[(0,t.jsx)("path",{d:"M9.99984 18.3338C14.6022 18.3338 18.3332 14.6028 18.3332 10.0004C18.3332 5.39807 14.6022 1.66711 9.99984 1.66711C5.39746 1.66711 1.6665 5.39807 1.6665 10.0004C1.6665 14.6028 5.39746 18.3338 9.99984 18.3338Z",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M12.5 7.50049H7.5V12.5005H12.5V7.50049Z",fill:"#999999",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_3889:22791",children:(0,t.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.000488281)",width:"20"})})})]}):n?.status==="completed"&&"skipped"===n.conclusion?(0,t.jsx)(sF.ArrowCircleRight,{color:"gray-500",size:20}):n?.status==="completed"&&"stale"===n.conclusion?(0,t.jsx)(S.MinusCircle,{color:"gray-500",size:20}):(0,t.jsx)(b.CrossCircle,{color:"gray-500",size:20})}function sz(e){let{checks:n,isExpanded:s,filterChecksBy:r,onChange:i}=e,l=n.filter(e=>"succeeded"===e.conclusion).length,o=n.filter(e=>"running"===e.status).length,d=n.filter(e=>"failed"===e.conclusion).length,u=[{name:(0,t.jsx)(c.Text,{as:"span",color:"gray-900",weight:500,children:"All"}),value:"all"},l?{name:(0,t.jsx)(sO,{count:l,type:"succeeded"}),value:"succeeded"}:void 0,o?{name:(0,t.jsx)(sO,{count:o,type:"running"}),value:"running"}:void 0,d?{name:(0,t.jsx)(sO,{count:d,type:"failed"}),value:"failed"}:void 0].filter(Boolean);return u.length>2?(0,t.jsx)(j.Switch,{name:"ci-checks-filter",onClick:e=>{s&&e.stopPropagation()},size:"small",children:u.map(e=>(0,t.jsx)(j.Switch.Control,{checked:r===e.value,className:(0,a.clsx)({"[&>div]:px-0":"all"!==e.value},{"[&>div]:px-2":"all"===e.value}),label:e.name,onChange:()=>{i(e.value)},value:e.value},e.value))}):(0,t.jsxs)("span",{children:[l?(0,t.jsx)(sO,{count:l,suffix:"completed",type:"succeeded"}):null,o?(0,t.jsx)(sO,{count:o,suffix:"running",type:"neutral"}):null,d?(0,t.jsx)(sO,{count:d,suffix:"failed",type:"failed"}):null]})}function sO(e){let{count:n,suffix:s,type:a}=e;return(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:1,justify:"center",style:{padding:"0 6px"},children:[(0,t.jsx)(sH,{check:{conclusion:a,status:"running"===a?"running":"completed"}}),(0,t.jsxs)(c.Text,{as:"span",color:"gray-900",weight:500,children:[n,s?` ${s}`:""]})]})}var sV=e.i(8159863);function sU(e){let{checks:n,filterChecksBy:s,teamSlug:a,rerequestTimeout:r,setRerequestTimeout:i,mutate:l}=e,{data:o}=(0,sV.useCurrentDashboardDeploymentInterval)(),{can:c,isLoading:d}=(0,u.default)(),m=!d&&c(p.Action.Update,null===o.target?p.Resource.DeploymentCheckPreivew:p.Resource.DeploymentCheck),h=async e=>{await (0,eU.fetchAPI)(`/v1/deployments/${o.id}/checks/${e}/rerequest${(0,eP.encode)({teamId:a,autoUpdate:!0})}`,{method:"POST"}),await l(),r&&clearTimeout(r);let t=window.setTimeout(()=>{i(0)},5e3);i(t)},g=n.filter(e=>"failed"===e.conclusion),f=n.filter(e=>"succeeded"===e.conclusion),x=n.filter(e=>"running"===e.status);return(0,t.jsxs)(t.Fragment,{children:[("all"===s||"failed"===s)&&g.length>0?(0,t.jsx)(s$,{checks:g,expanded:"failed"===s,type:"failed",canUpdateDeploymentCheck:m,onRerequest:h,rerequestTimeout:r}):null,("all"===s||"running"===s)&&x.length>0?(0,t.jsx)(s$,{checks:x,expanded:"running"===s,type:"running"}):null,("all"===s||"succeeded"===s)&&f.length>0?(0,t.jsx)(s$,{checks:f,expanded:"succeeded"===s,type:"succeeded"}):null]})}function sq(e){let{children:n,className:s,onClick:r,size:i="lg"}=e;return(0,t.jsx)(y.Stack,{className:(0,a.clsx)("hsla(var(--ds-gray-200-value),1) px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===i},{"py-[var(--geist-space-gap-half)]":"sm"===i},s),direction:"row",gap:2,justify:"space-between",onClick:r,children:n})}function s$(e){let{checks:n,type:r,expanded:i,canUpdateDeploymentCheck:l,onRerequest:o,rerequestTimeout:d}=e,[u,p]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{p(i)},[i]),(0,t.jsxs)(y.Stack,{className:(0,a.clsx)({"[&:not(:last-child)]:border-b ":u}),direction:"column",children:[(0,t.jsx)(sq,{className:(0,a.clsx)("cursor-pointer",{"border-b":!u},{"border-none":u}),onClick:()=>p(e=>!e),children:(0,t.jsxs)(y.Stack,{align:"center",direction:"row",gap:2,className:"pl-2",children:[(0,t.jsx)(nu.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:u?"rotate(90deg)":"rotate(0deg)"}}),(0,t.jsx)(sH,{check:{conclusion:r,status:"running"===r?"running":"completed"}}),"failed"===r?(0,t.jsxs)(c.Text,{as:"span",weight:500,children:[n.length," Failing"]}):null,"running"===r?(0,t.jsxs)(c.Text,{as:"span",weight:500,children:[n.length," Running"]}):null,"succeeded"===r?(0,t.jsxs)(c.Text,{as:"span",weight:500,children:[n.length," Successful"]}):null]})}),(0,t.jsx)(y.Stack,{className:(0,a.clsx)("max-h-0 overflow-hidden transition-all duration-300",{"overflow-y-scroll max-h-96":u}),direction:"column",gap:0,children:n.map(e=>(0,t.jsx)(sG,{...e,canUpdateDeploymentCheck:l,onRerequest:o,rerequestTimeout:d},e.id))})]})}function sG(e){let{name:n,status:a,conclusion:r,detailsUrl:i,externalUrl:l,integrationId:d,canUpdateDeploymentCheck:u,onRerequest:p,id:h,rerequestTimeout:g}=e,{data:f,isLoading:x}=(0,z.useIntegration)(d),{data:j}=(0,sV.useCurrentDashboardDeploymentInterval)(),[v,C]=(0,s.useTransition)(),_="skipped"===j.checksConclusion,b=l||i;return(0,t.jsxs)(sq,{className:"hover:bg-[var(--ds-gray-100)]",size:"sm",children:[(0,t.jsxs)(y.Stack,{align:"center",className:"pl-5 ml-4",direction:"row",gap:2,children:[(0,t.jsx)(sH,{check:{conclusion:r,status:a}}),f?.icon?(0,t.jsx)(ni.Avatar,{hash:f.icon,size:18}):x?(0,t.jsx)("div",{className:"size-[16px]"}):(0,t.jsx)(P.LogoGithub,{}),(0,t.jsx)(c.Text,{as:"span",variant:"label-14",weight:500,children:n})]}),(0,t.jsxs)(y.Stack,{direction:"row",gap:4,children:[f&&"failed"===r&&u&&p?(0,t.jsx)(m.Button,{onClick:()=>C(()=>p(h)),size:"small",type:"secondary",disabled:v||_||!!g,loading:v,children:"Rerun"}):null,b?(0,t.jsx)(o.Link,{className:"flex flex-row items-center gap-2 text-gray-900",external:!0,href:b,children:(0,t.jsx)(c.Text,{className:"text-gray-900",children:"View details"})}):null]})]})}var sY=e.i(5838262);function sZ(e){let{expandedSteps:n,deployment:a,checks:r,mutateDeployment:i,teamSlug:o,rerequestTimeout:c,setRerequestTimeout:d,mutate:m}=e,[h,g]=(0,s.useState)("all"),f=(0,l.useServerFlag)("enable-deployment-checks-empty-state",!1),x=ed.Pending;0===r.length?ed.Pending:r.some(e=>"failed"===e.conclusion)?x=ed.Error:r.some(e=>"running"===e.status)?x=ed.InProgress:r.every(e=>"succeeded"===e.conclusion)&&(x=ed.Complete);let y=n.includes("CI Checks"),{areChecksRunning:j}=(0,eF.getDeploymentStatus)(a),{can:v,isLoading:C}=(0,u.default)(),[_,b]=(0,s.useState)(!1),w=!C&&v(p.Action.Update,null===a.target?p.Resource.DeploymentCheckPreivew:p.Resource.DeploymentCheck),k="failed"===a.checksConclusion||j,S="READY"!==a.readyState,N=!!a.checksState,{checksFinishedAt:T,checksStartedAt:I}=(0,tJ.getChecksTimes)(r,a);return N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sJ,{canSkipChecks:k,canUpdateDeploymentCheck:w,onSkip:()=>{k&&b(!0)},filterChecksBy:h,isExpanded:y,handleChecksFilterChange:e=>{g(e)},checksStartedAt:I,checksFinishedAt:T,isChecksDisabled:S,combinedStatus:x,checks:r,teamSlug:o,rerequestTimeout:c,setRerequestTimeout:d,mutate:m}),k?(0,t.jsx)(eq,{active:_,deployment:a,mutateDeployment:i,onClose:()=>b(!1)}):null]}):f?(0,t.jsx)(em,{id:q,name:q,status:ed.Pending,children:(0,t.jsx)(sY.EmptyChecksCard,{})}):null}function sJ(e){let{canSkipChecks:n,canUpdateDeploymentCheck:s,onSkip:a,filterChecksBy:r,isExpanded:i,handleChecksFilterChange:l,checksStartedAt:o,checksFinishedAt:c,isChecksDisabled:d,combinedStatus:u,checks:p,teamSlug:h,rerequestTimeout:g,setRerequestTimeout:f,mutate:x}=e;return(0,t.jsx)(em,{action:(0,t.jsxs)(t.Fragment,{children:[n?(0,t.jsx)(v.Tooltip,{forceHide:s,text:s?null:"Missing required permission to skip checks",children:(0,t.jsx)(m.Button,{disabled:!s,onClick:a,size:"small",type:"secondary",children:"Skip"})}):null,(0,t.jsx)(sz,{checks:p,filterChecksBy:r,isExpanded:i,onChange:l})]}),id:q,startedAt:o,finishedAt:c,disabled:d,name:q,paddingType:"none",status:u,children:(0,t.jsx)(sU,{checks:p,filterChecksBy:r,teamSlug:h,rerequestTimeout:g,setRerequestTimeout:f,mutate:x})})}let sK=e=>e===eo.Building?"Build Logs":"Unknown",sQ=(e,t)=>{let n="finishedAt"in e?e.finishedAt:null,s=t.errorStep??null,a="CANCELED"===t.readyState,r="READY"===t.readyState,i="ERROR"===t.readyState;return"placeholder"in e&&!(a||r||i)?ed.Pending:n&&r?ed.Complete:n&&i||e.name===s?ed.Error:a?ed.Canceled:ed.InProgress},sX=[eo.Building],s0=[eo.Building,U,Y,G,$];function s1(e){let{creationFlow:m,deployment:h,teamSlug:g,mutateDeployment:f,onComplete:x,onExpandedStepsChange:y,expandedSteps:j,enableLineHighlighting:v}=e,{can:C,isLoading:_}=(0,u.default)(),b=(0,E.useSearchParams)(),[w,k]=(0,i.useQueryState)("turboRunSummary",i.queryTypes.boolean),[S,N]=(0,s.useState)({}),[T,I]=(0,s.useState)(0),[A,R]=(0,s.useState)([]),P=(0,eT.useFeedbackVariantsDeployStep)(),L=(0,eT.useShowCronJobsSummary)(),W=(0,eh.useCiChecksAndPoliciesFlag)(),D=(0,eh.useChecksPrivateBetaFlag)(),B=(0,l.useServerFlag)("enable-deployment-resources-page",!1),F=(0,e4.getGitInfoFromDeployment)(h),{steps:H,loading:O}=function(e){let[t,n]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),i=(0,s.useRef)(void 0),l=(0,s.useRef)([]),o=(0,s.useRef)(void 0),c=(0,s.useRef)(void 0);c.current=e;let d=e?.createdAt,u=e?.id,p=(0,s.useCallback)(e=>{let t=[...l.current,e];1e4===t.length&&(t[0].level="warning",t[0].text="Warning: You're seeing the last 10000 lines of logs. Any lines before that were automatically truncated."),l.current=t,n(l.current)},[]),m=u?(0,eL.API_DEPLOYMENT_EVENTS)(u):"";return(0,s.useEffect)(()=>{if(!u){n([]),l.current=[];return}r(!0),d!==i.current&&(i.current=d,n([]),l.current=[]);let e=new AbortController,t=e.signal;return o.current&&(o.current.abort(),n([]),l.current=[]),o.current=e,eD({url:m,onLog:p,onResponse:()=>r(!1),signal:t,deploymentRef:c}).catch(e=>{r(!1),e instanceof Error&&"AbortError"===e.name||(0,eE.captureError)(e,{attributes:{"extras.type":"Log Stream"}})}),()=>e.abort()},[p,d,u,m]),{steps:(0,s.useMemo)(()=>{let n=[];for(let s of t)if(!eW(s)){n[0]||n.push({finishedAt:null,logs:[],name:eo.Building,startedAt:e?.buildingAt??s.created});let t=n[0];t.logs.push(s),t.finishedAt=e?.buildContainerFinishedAt??null}return n},[e?.buildingAt,t,e?.buildContainerFinishedAt]),loading:a}}(h),[V,q]=(0,s.useState)(!1),[$,Z]=(0,s.useState)(""),{data:J}=function(e,t){let{since:n,projectId:s,deploymentId:a,comparisonId:r,refType:i,refValue:l}=e,o=(0,eG.useTeamSlug)();return(0,e$.default)(()=>o&&a&&s?`/api/turborepo/run-summary${(0,eP.encode)({deploymentId:a,projectId:s,comparisonId:r,since:n,teamId:o,refType:i,refValue:l})}`:null,e=>(0,eU.fetchAPI)(e,{throwOnHTTPError:!0}),t)}({since:h?.createdAt,projectId:h?.projectId,deploymentId:h?.id,comparisonId:S.comparisonId,...eY(h)},{keepPreviousData:!0});(0,s.useEffect)(()=>{b&&N({comparisonId:b.get("comparisonId")??void 0,selectedLine:b.get("line")??void 0})},[b]);let{data:K,isLoading:Q}=(0,eZ.useDeployLogs)({deployment:h,throwOnHTTPError:!h?.public}),{data:X}=(0,eK.useMicrofrontendsConfig)({deploymentId:h?.microfrontends?h?.id:void 0}),{data:ee}=(0,eJ.useFrameworks)(),et=function(e,t){if(!t?.framework)return;let n=e?.find(e=>e.slug===t.framework),s=n?.name||t.framework,a=n?.slug||void 0,r=n?.logo,i=n?.darkModeLogo;return{name:s,slug:a,logo:r||i,darkModeLogo:i||r,version:t.frameworkVersion}}(ee,K||null),en=H.length>=1;(0,s.useEffect)(()=>{f&&h?.readyState==="QUEUED"&&en&&f({...h,readyState:"BUILDING"})},[f,h,en]);let{areChecksRunning:es}=(0,eF.getDeploymentStatus)(h),ea=h?.checks?.["deployment-alias"]!==void 0,{checks:er,mutate:ei}=(0,eB.default)({deploymentId:h?.id,teamId:g},{refreshInterval:2e3*!!es}),el=er.length>0,ec=((e,t)=>{if(t&&"running"===t.checksState||t?.checksState==="registered"&&t?.readyState==="READY")return ed.InProgress;if(t&&"checksConclusion"in t)switch(t.checksConclusion){case"succeeded":case"skipped":return ed.Complete;case"failed":return ed.Error;default:return ed.Pending}return t?.readyState==="READY"?e?ed.Complete:ed.Skipped:ed.Pending})(el,h),eu=(e=>{if(!e)return ed.Pending;if(e.aliasError)return ed.Error;if(e.aliasWarning)return ed.Warning;if("READY"!==e.readyState||"running"===e.checksState||"registered"===e.checksState)return ed.Pending;if(0===e.alias.filter(t=>!(e.automaticAliases||[]).includes(t)).length)return ed.Skipped;if(e&&"checksConclusion"in e)switch(e.checksConclusion){case"succeeded":case"skipped":return ed.Complete;default:return ed.Pending}return e?.aliasAssigned?ed.Complete:ed.InProgress})(h),{checksFinishedAt:ep}=(0,tJ.getChecksTimes)(er,h),eg=h?.readyState==="QUEUED",ex=h?.readyState==="READY",ey=(0,eH.getFinishedState)(h),ej=!!h?.buildSkipped,ev=!ex,eC=ec!==ed.Pending&&ec!==ed.Skipped&&ec!==ed.Complete||h?.readyState!=="READY"||es,e_=h&&("failed"===h.checksConclusion||es),eb=!h||eg,ew=C(p.Action.Read,p.Resource.Logs),eR=h?.flags,eM=h?.crons;(0,s.useEffect)(()=>{0!==er.length&&Promise.all([...new Set(er.map(e=>e.integrationId))].map(z.prefetchIntegration)).catch(console.error)},[er,h?.id]);let ez=(0,s.useMemo)(()=>X?.config&&"applications"in X.config?X.config.applications:{},[X]),eO=Object.values(ez).find(e=>e.projectId===h?.projectId),eV=(0,s.useMemo)(()=>K?(0,tJ.mapTechnicalPrimitivesToPlatformPrimitives)(Object.entries(K).filter(e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0}).map(e=>{let[t,n]=e;return{type:t,artefacts:n}}),P?eR:void 0,L?eM:void 0,eO,ez):[],[K,eR,P,eM,L,eO,ez]),eQ=(0,s.useMemo)(()=>{let e=eV;return $&&(e=[eV.find(e=>{let{type:t}=e;return t===$})]),e.map(e=>({...e,artefacts:e.artefacts.sort((e,t)=>{if((0,nl.isMicrofrontendRoute)(e)&&(0,nl.isMicrofrontendRoute)(t))return e.appName===t.appName?e.path.localeCompare(t.path):e.appName?t.appName?e.appName.localeCompare(t.appName):1:-1;let n=(0,nl.isVariant)(e)?e.key:(0,nl.isMiddleware)(e)?e.rawMatchers?.[0]||e.matcher:e.path,s=(0,nl.isVariant)(t)?t.key:(0,nl.isMiddleware)(t)?t.rawMatchers?.[0]||t.matcher:t.path;return!n.includes("_next")&&s.includes("_next")?-1:n.includes("_next")&&!s.includes("_next")?1:n.localeCompare(s)})}))},[$,eV]);(0,s.useEffect)(()=>{if(!j.includes(Y)){let e=setTimeout(()=>{Z("")},100);return()=>clearTimeout(e)}},[j]);let eX=H.find(e=>e.name===eo.Building),e0=void 0!==K&&eQ.length>0;(0,s.useEffect)(()=>{(async()=>{await ei()})().catch(e=>console.error(e))},[h?.readyState,ei]);let e1=(0,s.useMemo)(()=>s5({hasDeployData:e0,hasFinished:ey,logs:K||null,deployment:h,deployStep:eX,isLoading:Q}),[e0,eX,h,K,ey,Q]),e5=(0,s.useCallback)(()=>{let e=window.location.hash;/^#L(?<start>[0-9]+)(?:-L(?<end>[0-9]+))?/.exec(e)&&!j.includes(s0[0])&&y([s0[0],...j])},[j,y]),e3=()=>{k(!0),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_OPEN)},e9=async()=>{await k(null),eS.analytics.track(eN.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_CLOSE)};(0,s.useEffect)(()=>{v&&e5()},[]);let e7=!ey||e1===ed.Pending,e8=(0,s.useMemo)(()=>j.filter(e=>e===Y?!e7:e===U?!ev:e!==G||!eC),[eC,j,ev,e7]),{track:e6}=(0,eI.useTrackActivity)();return(0,t.jsxs)(n.Root,{className:t4.default.accordion,defaultValue:[],disabled:ej,onValueChange:e=>{(0,ek.awaitPaint)().then(()=>{e.includes(U)&&!j.includes(U)&&eS.analytics.track(eN.AnalyticsEvent.DEPLOYMENT_CHECK_STEP_CLICKED,{source:m?"project creation flow":"deployment view"}),!e.includes(Y)&&j.includes(Y)&&R([]),e.includes(Y)&&!j.includes(Y)&&e6(eA.VercelActivityAction.DeploymentOverviewSummaryClick,{}),y(e)})},type:"multiple",value:e8,children:[eb?(0,t.jsx)(sN,{shimmer:!m}):(0,t.jsxs)(t.Fragment,{children:[h.integrations?(0,t.jsx)(sM,{deployment:h}):null,H.map(e=>{let n=sQ(e,h),s=e.logs,a=n===ed.InProgress?s.at(-1):void 0;return(0,t.jsx)(em,{action:(0,t.jsx)(s_,{className:"flex-none",isEnabled:!!J?.baseline,onClick:e3}),finishedAt:Q?void 0:((e,t)=>{if(e.finishedAt)return e.finishedAt;let n="CANCELED"===t.readyState||"ERROR"===t.readyState;if(e.logs.length&&n)return e.logs[e.logs.length-1].created})(e,h),id:e.name,name:e.name===eo.Building?(0,t.jsx)(e2,{creationFlow:m,label:sK(e.name),latestLog:a}):sK(e.name),paddingType:"none",startedAt:Q?void 0:e.startedAt,status:n,children:(0,t.jsx)(t2,{enableLineHighlighting:v,isLoading:O,logs:s,startedAt:Math.min(s.at(0)?.created||h.buildingAt,h.buildingAt),status:n})},e.name)}),sX.slice(H.length).map(e=>{let n=sQ({name:e,placeholder:!0},h),s=!_&&!ew;return(0,t.jsx)(em,{id:e,name:sK(e),paddingType:"none",status:s?ed.MissingPermissions:n,disabled:s,children:(0,t.jsx)(t2,{isLoading:!0,logs:[],startedAt:h.createdAt,status:n})},e)}),(0,t.jsx)(em,{action:e0&&e1===ed.Complete?B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.DashboardButtonLink,{className:"md:hidden",route:"/[teamSlug]/[project]/[id]/resources",shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(r.ListFilter,{color:"gray-900"})}),(0,t.jsx)(M.DashboardButtonLink,{className:"hidden md:flex",prefix:(0,t.jsx)(r.ListFilter,{color:"gray-900"}),route:"/[teamSlug]/[project]/[id]/resources",size:"small",type:"secondary",children:"Resources"})]}):(0,t.jsx)(nX,{active:$,items:[{name:(0,t.jsx)("span",{className:(0,a.clsx)(ns.default.tooltip,{[ns.default.closedAll]:!open}),children:"All"}),value:"",buttonProps:{"aria-label":"All"}},...eV.map(e=>{let{type:n,artefacts:s}=e,{icon:a,name:r}=nY(n),i=[r,[n===nl.ArtefactTypes.IncrementalStaticRegeneration?"ISR":void 0,n===nl.ArtefactTypes.PartialPrerender?"PPR":void 0,n===nl.ArtefactTypes.EdgeMiddleware?void 0:s.length.toLocaleString()].filter(Boolean).join("")].filter(Boolean).join(" ");return{name:(0,t.jsxs)("span",{className:ns.default.iconLabel,children:[a,n!==nl.ArtefactTypes.EdgeMiddleware&&s.length.toLocaleString()]}),value:n,tooltip:r,buttonProps:{"aria-label":i}}})],onChange:(e,t)=>{j.includes(Y)&&t.stopPropagation(),Z(e),R([e])},open:j.includes(Y)}):void 0,customDuration:K?.deployStepTime,disabled:e7,id:Y,name:Y,paddingType:"none",status:e1,children:e0?(0,t.jsx)(nK,{artefactGroups:eQ,deployment:h,filterArtefactsBy:$,framework:et,selectedArtefacts:A,setSelectedArtefacts:R}):(0,t.jsx)("div",{className:t4.default.noData,children:(0,t.jsx)(c.Text,{color:"gray-900",children:(0,t.jsxs)(t.Fragment,{children:["This deployment does not have a deployment summary."," ",(0,t.jsx)(o.Link,{external:!0,href:"https://vercel.com/docs/deployments#deployment-summary",target:"_blank",type:"highlight",children:"Learn more"})]})})})}),F&&h?(0,t.jsx)(sZ,{expandedSteps:j,checks:er,deployment:h,rerequestTimeout:T,setRerequestTimeout:I,mutate:ei,teamSlug:g}):null,"production"===h.target&&ea&&W?(0,t.jsx)(ef,{withChecksFromCi:W,checksPrivateBeta:D,expandedSteps:j,deployment:h,teamSlug:g,onExpandedStepsChange:y}):null,(0,t.jsx)(nn,{deployment:h,disabled:eC,finishedAt:eC?void 0:h.aliasAssignedAt,id:G,name:"Assigning Custom Domains",onComplete:x,startedAt:eC?void 0:el&&ep?ep:eX?.finishedAt||void 0,status:eu})]}),h&&e_?(0,t.jsx)(eq,{active:V,deployment:h,mutateDeployment:f,onClose:()=>q(!1)}):null,J&&h&&w?(0,t.jsx)(d.CodeCompareProvider,{children:(0,t.jsx)(sS,{active:w,baseline:J.baseline,comparison:J.other||J.previous,deployment:h,initialLine:S.selectedLine,onClose:e9,previous:J.previous})}):void 0]},h?.id)}let s5=e=>{let{deployStep:t,deployment:n,hasDeployData:s,hasFinished:a,logs:r,isLoading:i}=e;return n?.buildSkipped?ed.Canceled:n?.readyState==="READY"?ed.Complete:i?ed.InProgress:t?n&&(!r||"error"in r)&&a&&sQ(t,n)===ed.Complete?ed.NoData:n&&!s?sQ(t,n)===ed.Complete?(0,eH.getFinishedState)(n)?ed.Complete:ed.InProgress:ed.Pending:ed.Complete:ed.Pending};function s2(e){let[t,n]=(0,s.useState)([]),a=e?.readyState==="ERROR",r=!!e?.buildSkipped;return(0,s.useEffect)(()=>{!r&&a&&(0,s.startTransition)(()=>{n([s0[0]])})},[a,r]),{expandedSteps:t,setExpandedSteps:n}}e.s(["useExpandedSteps",()=>s2],855127)}]);

//# sourceMappingURL=bc4157e3a5f9d4dd.js.map
//# debugId=9326836a-d88e-5c7b-934c-7f5ebbb8e8db
