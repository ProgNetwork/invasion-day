
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8484441a-3feb-5b23-b84e-741d26392cfc")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2483720,e=>{"use strict";e.s(["default",()=>t2],2483720);var t=e.i(751170),i=e.i(4099374),l=e.i(9722978),n=e.i(5756088),r=e.i(6401841),a=e.i(8893913),s=e.i(8876434),o=e.i(5499338),d=e.i(2504781),c=e.i(6846064),u=e.i(779588),m=e.i(6870754),p=e.i(8674454),x=e.i(6694387),h=e.i(4991687),j=e.i(8459493),g=e.i(7448864),f=e.i(8522580),y=e.i(5255926),v=e.i(9318197),b=e.i(9508212),k=e.i(1344973),w=e.i(5468328),S=e.i(455575),C=e.i(1019550),D=e.i(3679047),R=e.i(4004502),N=e.i(7780974),P=e.i(7837522),L=e.i(3322724),A=e.i(57106),I=e.i(9716741),T=e.i(8062867),B=e.i(8994597),M=e.i(4043190),$=e.i(7151748),_=e.i(3870297),U=e.i(4396019),F=e.i(6613731),O=e.i(1681029),E=e.i(4110415);let W=(0,i.memo)(e=>{let{project:l,hideOnMobile:n=!0,onClick:r,...a}=e,{domain:s,loaded:o,deployment:c}=(0,U.useProjectProductionDeployment)(l?.id),u=(0,E.useShouldVisitWithTheToolbar)(c),{onClick:m,...p}=(0,F.useWrappedToolbarAuthLinkHandler)({via:"project-overview-visit-button",deployment:c}),x=(0,i.useCallback)(e=>{$.analytics.track(_.AnalyticsEvent.PROJECT_OVERVIEW_CLICKED_VISIT_BUTTON,{projectId:l?.id}),r?.(e)},[l,r]),h=s?.name?(0,O.domainToUrl)(s.name):void 0;return o?h?u?(0,t.jsx)(E.VisitWithToolbarButton,{Component:A.ButtonLink,buttonProps:{className:n?"geist-hide-on-mobile":void 0,href:h,onClick:x,passthroughOnClick:m,tab:!0,width:70,...p,...a},url:h,via:"project-overview-visit-button",children:"Visit"}):(0,t.jsx)(A.ButtonLink,{className:n?"geist-hide-on-mobile":void 0,href:h,onClick:x,passthroughOnClick:m,tab:!0,width:110,...p,...a,children:"Visit"}):(0,t.jsx)(w.Tooltip,{delay:!1,text:"To deploy to production, push to the Repository Default branch.",children:(0,t.jsx)(d.Button,{className:n?"geist-hide-on-mobile":void 0,disabled:!0,onClick:x,width:110,...a,children:"Visit"})}):(0,t.jsx)(y.Skeleton,{height:40,width:110})});var z=e.i(5758916),V=e.i(9592842),H=e.i(369178),G=e.i(4450569),Y=e.i(7808943);let K=e=>{let{branch:i,onClearBranch:l}=e;return(0,t.jsxs)(H.default,{children:[(0,t.jsxs)(G.default,{center:!0,className:"empty-preview",hcenter:!0,vcenter:!0,children:[(0,t.jsx)(I.default,{h3:!0,children:"No Preview Deployments"}),(0,t.jsxs)(G.default,{flex:0,style:{color:"var(--accents-5)"},children:[(0,t.jsx)(I.default,{noMargin:!0,preset:"body-2",children:i?(0,t.jsxs)(t.Fragment,{children:["Commit to the ",(0,t.jsx)(Y.default,{children:i})," branch to deploy."]}):"Commit using our Git connections."}),!!i&&!!l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{}),(0,t.jsx)(I.default,{noMargin:!0,preset:"body-2",children:(0,t.jsx)(A.Link,{onClick:l,style:{fontWeight:700},variant:"highlight",children:"View All Deployments"})})]})]})]}),(0,t.jsx)(V.default,{id:"c1a77c3a387314ef",children:".empty-preview{text-align:center;padding:var(--geist-gap-double);border:1px dashed var(--accents-2);border-radius:var(--geist-radius);min-height:calc(300px + var(--geist-gap-double)*1.5)}"})]})};var Q=e.i(7137884),q=e.i(4245131),J=e.i(8517043),X=e.i(6850581),Z=e.i(9334091),ee=e.i(3496900),et=e.i(6090862),ei=e.i(7218483),el=e.i(9375869),en=e.i(4904548),er=e.i(6226725),ea=e.i(3959677),es=e.i(5371931),eo=e.i(9222994),ed=e.i(8529990),ec=e.i(7417898),eu=e.i(8216525);function em(e){let{children:i,isPrevious:n,style:r}=e;return(0,t.jsx)("span",{className:(0,l.clsx)("truncate text-[var(--accents-3)]","[&>a]:inline-block","[&>a]:truncate","[&>a]:max-w-[250px]","[&>a]:align-top","[&>a]:no-underline","[&>a:hover]:underline","[&>a]:text-[var(--geist-foreground)]","max-[480px]:[&>a]:max-w-[120px]","[&>a.via-fork]:font-medium",n&&"text-[var(--accents-5)]"),style:{...r},children:i})}function ep(e){let{message:i,commitUrl:n,style:r}=e;return(0,t.jsx)("a",{className:(0,l.clsx)("geist-ellipsis","text-[var(--accents-5)]","no-underline","inline-block","leading-6","hover:underline","max-[480px]:max-w-full"),href:n,style:r,target:"_blank",title:i,children:i})}let ex=i.default.memo(e=>{let{type:i,children:n,commitUrl:r,message:s,icon:o,isPrevious:d,deployment:c,isStale:u,style:m,noPadding:p=!1,showCommit:x}=e,h=(0,el.useDeploymentLink)(c);return u?(0,t.jsxs)(b.Stack,{align:"center",className:(0,l.clsx)("rounded px-3 py-2",{"bg-gray-100":d}),direction:"row",gap:4,style:m,children:[d?(0,t.jsx)(er.CrossCircle,{color:"gray-900",style:{flexShrink:0}}):(0,t.jsx)(a.RotateCounterClockwise,{color:"gray-900",style:{flexShrink:0}}),(0,t.jsxs)(b.Stack,{className:"flex-wrap truncate",children:[(0,t.jsxs)("div",{className:"flex w-full items-center gap-1",children:[(0,t.jsx)("span",{className:"px-[3px]",children:(0,t.jsx)(eu.DeploymentStatus,{deployment:c})}),(0,t.jsx)(k.Text,{className:(0,l.clsx)("text-label-14 truncate",{"line-through":d}),weight:500,children:(0,t.jsx)(A.Link,{className:(0,l.clsx)("flex items-center gap-2.5 text-inherit no-underline hover:underline",{"text-accents-5":d}),href:h,children:(0,t.jsx)("span",{children:c.url})})})]}),(0,t.jsx)(ec.DeploymentSourceLinks,{deployment:c,singleLine:!0,textStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textDecoration:d?"line-through":void 0}})]})]}):(0,t.jsxs)(G.default,{style:{padding:p?0:"12px 0",lineHeight:"24px"},children:[(0,t.jsxs)(G.default,{row:!0,vcenter:!0,children:[o?(0,t.jsxs)(t.Fragment,{children:[((e,i)=>{switch(e){case"github":return(0,t.jsx)(ea.default,{...i,style:{marginLeft:1}});case"gitlab":return(0,t.jsx)(es.default,{...i,style:{marginLeft:1}});case"bitbucket":return(0,t.jsx)(eo.default,{...i,style:{marginLeft:1}})}})(i),(0,t.jsx)(v.Spacer,{x:.25})]}):null,(0,t.jsx)(em,{children:n})]}),x?(0,t.jsx)(ep,{commitUrl:r,message:s}):null]})}),eh=i.default.memo(e=>{let{deployment:i,icon:l,isStale:n,noPadding:r,isPrevious:a,style:s,showCommit:o}=e,d=(0,ed.getGitInfoFromDeployment)(i);return d?.type!=="github"?null:(0,t.jsx)(ex,{commitUrl:d.commitUrl,deployment:i,icon:l,isPrevious:a,isStale:n,message:d.commitMessage,noPadding:r,showCommit:o,style:s,type:"github",children:d.viaFork&&d.prId&&d.prUrl?(0,t.jsxs)(t.Fragment,{children:["( ",(0,t.jsx)("a",{href:d.commitUrl,target:"_blank",children:d.commitSha.slice(0,7)})," ","in ",(0,t.jsxs)("a",{href:d.prUrl,target:"_blank",children:["forked PR#",d.prId]}),")"]}):(0,t.jsx)("a",{href:d.refUrl,target:"_blank",title:d.commitRef,children:d.commitRef})})}),ej=i.default.memo(e=>{let{deployment:i,icon:l,isStale:n,noPadding:r,isPrevious:a,showCommit:s}=e,o=(0,ed.getGitInfoFromDeployment)(i);return o?.type!=="gitlab"?null:(0,t.jsx)(ex,{commitUrl:o.commitUrl,deployment:i,icon:l,isPrevious:a,isStale:n,message:o.commitMessage,noPadding:r,showCommit:s,type:"gitlab",children:(0,t.jsx)("a",{href:o.refUrl,target:"_blank",title:o.commitRef,children:o.commitRef})})}),eg=i.default.memo(e=>{let{deployment:i,icon:l,isStale:n,noPadding:r,isPrevious:a,showCommit:s}=e,o=(0,ed.getGitInfoFromDeployment)(i);return o?.type!=="bitbucket"?null:(0,t.jsx)(ex,{commitUrl:o.commitUrl,deployment:i,icon:l,isPrevious:a,isStale:n,message:o.commitMessage,noPadding:r,showCommit:s,type:"bitbucket",children:(0,t.jsx)("a",{href:o.refUrl,target:"_blank",title:o.commitRef,children:o.commitRef})})}),ef=i.default.memo(e=>{let{deployment:i,icon:l=!1,isStale:n=!1,noPadding:r,previousDeployment:a,showCommit:s=!0}=e;return i?.meta?i.meta.githubDeployment?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh,{deployment:i,icon:l,isStale:n,noPadding:r,showCommit:s}),n&&a?(0,t.jsx)(eh,{deployment:a,icon:l,isPrevious:!0,isStale:n,noPadding:r,showCommit:s,style:{margin:"8px 0"}}):null]}):i.meta.gitlabDeployment?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{deployment:i,icon:l,isStale:n,noPadding:r,showCommit:s}),n&&a?(0,t.jsx)(ej,{deployment:a,icon:l,isPrevious:!0,isStale:n,noPadding:r,showCommit:s}):null]}):i.meta.bitbucketDeployment?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg,{deployment:i,icon:l,isStale:n,noPadding:r,showCommit:s}),n&&a?(0,t.jsx)(eg,{deployment:a,icon:l,isPrevious:!0,isStale:n,noPadding:r,showCommit:s}):null]}):(0,t.jsx)("span",{style:{color:"var(--accents-3)",fontWeight:"normal",minHeight:72,lineHeight:"48px"},children:"-"}):null});var ey=e.i(3896684),ev=e.i(2457794),eb=e.i(2348990),ek=e.i(1138941),ew=e.i(8053957),eS=e.i(7917902),eC=e.i(277234),eD=e.i(5269510);let eR=function(e){let{project:i,link:l=!0}=e,n=(0,ek.useProjectUrl)(i),{isLoading:r,data:a}=(()=>{let{isTeam:e,team:t}=(0,eS.useAccount)(),{data:i,error:l,isLoading:n}=(0,ew.default)(`/api/v0/speed-insights/latest-scores?${(0,eD.stringify)({teamId:e?t?.id:void 0})}`,e=>(0,eC.fetchAPI)(e));return{data:i,isLoading:n,isError:!!l}})(),s=a?.find(e=>{let{projectId:t}=e;return t===i?.id})?.value,o=r||!(0,eb.isSpeedInsightsEnabled)(i)||void 0===s?(0,t.jsx)(w.Tooltip,{delay:!1,text:"Get detailed performance metrics with Insights.",children:(0,t.jsx)(ev.default,{size:"small",children:(0,t.jsx)(ey.ChartActivity,{color:"gray-900"})})}):(0,t.jsx)(ev.default,{size:"small",value:s,children:s.toString()});return n&&l?(0,t.jsx)(A.Link,{href:`${n}/speed-insights`,style:{display:"flex"},children:o}):o};var eN=e.i(5143983),eP=e.i(5484396),eL=e.i(8652250),eA=e.i(5566974),eI=e.i(5051969);function eT(e){var t,i;let l=(0,D.useParams)()??{teamSlug:"",project:""};return t=l.teamSlug,i=l.project,(0,eI.usePromiseSWR)(`/api/v1/projects/${i}/production-deployment?teamId=${t}`,e)}function eB(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(eA.DeploymentConfigurationSkeleton,{}),children:(0,t.jsx)(eM,{})})}function eM(){let{data:e}=eT();return e?.deployment?(0,t.jsx)(eA.DeploymentConfiguration,{deploymentId:e.deployment.id}):(0,t.jsx)(eA.DeploymentConfigurationRoot,{disabled:!0})}var e$=e.i(4585051),e_=e.i(8651268);let eU=i.memo(function(){let{deployment:e,size:i=24}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?.creator?(0,t.jsx)(e_.PrincipalAvatar,{size:i,principalId:e.creator.uid,principal:{type:"user",uid:e.creator.uid,username:e.creator.username},showProviderIcon:!1,deploymentMeta:e.meta?.originalDeploymentId?void 0:e.meta}):(0,t.jsx)(e$.Avatar,{placeholder:!0,size:i})});var eF=e.i(2381001),eO=e.i(4040097),eE=e.i(1298796),eW=e.i(2982888),ez=e.i(1717203),eV=e.i(7557283),eH=e.i(8227242),eG=e.i(5802506),eY=e.i(930810),eK=e.i(3401384);e.i(3182268);var eQ=e.i(7849855),eq=e.i(9830371),eJ=e.i(5338940),eX=e.i(4244280),eZ=e.i(8042625),e0=e.i(1173672);let e1=(0,et.default)(()=>e.A(2124931).then(e=>e.UndoRollbackModal),{loadableGenerated:{modules:[5755381]}});function e2(e){let{rollbackDescription:l,project:n,deploymentId:r}=e,[a,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(l.description),[u,m]=(0,i.useState)(!1),p=function(){let{mutate:e}=(0,eq.useSWRConfig)(),{team:t}=(0,eJ.useTeam)();return async(i,l,n)=>{if(!t)throw Error("Team not found");let r=`${(0,eX.API_DEPLOYMENT_UPDATE_ROLLBACK_DESCRIPTION)(i.id,l)}${(0,eZ.encode)({teamId:t.id})}`;await (0,eC.fetchAPI)(r,{method:"PATCH",body:JSON.stringify({description:n}),throwOnHTTPError:!0}),await e((0,e0.getProjectProductionDeploymentKey)({projectIdOrName:i.id,teamId:t.slug})),await e((0,e0.getProjectProductionDeploymentKey)({projectIdOrName:i.name,teamId:t.slug}))}}(),x=(0,S.useToasts)(),{can:h}=(0,ez.default)(),j=void 0!==n&&void 0!==r&&h(eV.Action.Create,eV.Resource.DeploymentRollback),g=async()=>{if(n&&r){m(!0);try{await p(n,r,o),s(!1)}catch(e){x.error({text:"Something went wrong updating rollback description.",key:"update-rollback-description"}),(0,eG.captureError)(e)}finally{m(!1)}}};if(a){let e=o.length>=eY.REASON_MAX_CHARACTER_LENGTH;return(0,t.jsxs)(b.Stack,{gap:2,className:"mb-4 w-full rounded bg-gray-200 px-3 py-2",children:[(0,t.jsx)(Z.Textarea,{autoFocus:!0,className:"min-h-20 text-sm",value:o,onChange:e=>c(e.target.value),placeholder:"Production is not behaving as expected...",error:e?`Reason cannot be longer than ${eY.REASON_MAX_CHARACTER_LENGTH} characters.`:void 0}),(0,t.jsxs)(b.Stack,{direction:"row",gap:2,justify:"end",children:[(0,t.jsx)(d.Button,{onClick:()=>s(!1),type:"secondary",size:"small",children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:g,loading:u,size:"small",disabled:e,children:"Update Reason"})]})]})}return(0,t.jsxs)(b.Stack,{direction:"row",gap:2,className:"mb-4 w-full rounded bg-gray-100 px-3 py-2 break-words",children:[(0,t.jsx)(k.Text,{className:"flex-1 min-w-0",children:l.description.length>0?(0,t.jsx)(eH.LinkParser,{text:l.description}):"No rollback explanation provided"}),j?(0,t.jsx)("div",{className:"grid place-content-center",children:(0,t.jsx)(w.Tooltip,{className:"w-full md:w-auto",desktopOnly:!0,text:"Update rollback reason",children:(0,t.jsx)(A.Link,{onClick:()=>{c(l.description),s(!0)},children:(0,t.jsx)(ee.PencilEdit,{color:"gray-900"})})})}):null]})}function e4(e){let{project:i,productionDeployment:l,productionAliases:n,isLoading:r}=e,a=(0,F.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:l??void 0}),s=(0,ei.useAgo)(l?.createdAt),o=(0,eW.getDeploymentCreatorUsername)({deployment:l}),d=l&&n&&!r;return(0,t.jsxs)("div",{className:"flex flex-col gap-[22px]",children:[(0,t.jsxs)(b.Stack,{align:"center",direction:"row",flex:"0",children:[(0,t.jsx)(c.ContentWrapper,{full:!0,children:(0,t.jsx)(q.Description,{className:"[&>dd>span]:flex [&>dd>span]:overflow-hidden [&>dd>span_a]:inline-block [&>dd>span_a]:truncate",content:d?(0,t.jsx)(eP.default,{children:(0,t.jsx)(el.default,{deployment:l})}):(0,t.jsx)(y.Skeleton,{height:16,width:190}),title:"Deployment"})}),(0,t.jsx)(b.Stack,{align:"center",direction:"row",gap:2,style:{marginLeft:"8px",marginRight:"8px"},children:d?(0,t.jsx)(eR,{project:i}):(0,t.jsx)(y.Skeleton,{boxHeight:32,height:32,rounded:!0,width:32})})]}),(0,t.jsx)(c.ContentWrapper,{full:!0,children:(0,t.jsx)(q.Description,{content:d?(0,t.jsx)(eP.default,{children:(0,t.jsx)(en.default,{defaultRoute:l.defaultRoute,domains:n,linkProps:a})}):(0,t.jsx)(y.Skeleton,{boxHeight:20,height:16,width:220}),title:(0,t.jsx)(c.ContentWrapper,{full:!0,children:"Domains"})})}),(0,t.jsxs)("div",{className:"relative block min-w-px max-w-full flex-[0_1_auto] items-stretch justify-start sm:flex sm:flex-row lg:flex-wrap",children:[(0,t.jsx)(q.Description,{content:d?(0,t.jsx)(eP.default,{children:(0,t.jsx)("div",{className:"relative flex h-[22px] min-w-px max-w-full flex-row items-center lg:flex-wrap",children:(0,t.jsx)(eu.DeploymentStatus,{deployment:l,label:!0,labelStyle:{fontWeight:500}})})}):(0,t.jsx)(y.Skeleton,{boxHeight:22,height:16,width:60}),title:"Status"}),(0,t.jsx)(v.Spacer,{x:1,y:.75}),(0,t.jsx)(q.Description,{content:d?(0,t.jsx)(eP.default,{children:(0,t.jsx)(X.RelativeTimeCard,{asChild:!0,date:l.createdAt,side:"top",children:(0,t.jsxs)("div",{className:"flex items-center gap-[0.4rem]",children:[(0,t.jsxs)(I.default,{className:"inline-block truncate",noMargin:!0,preset:"body-2",children:[s,o?` by ${o}`:null]}),(0,t.jsx)(eU,{deployment:l,size:22})]})})}):(0,t.jsx)(y.Skeleton,{boxHeight:22,height:16,width:180}),title:"Created"})]}),(0,t.jsx)(c.ContentWrapper,{full:!0,children:(0,t.jsx)(q.Description,{content:d?(0,t.jsx)(eP.default,{children:(0,t.jsx)(ec.DeploymentSourceLinks,{deployment:l,gap:.5})}):(0,t.jsxs)(b.Stack,{gap:.5,children:[(0,t.jsx)(y.Skeleton,{boxHeight:22,height:16,width:120}),(0,t.jsx)(y.Skeleton,{boxHeight:22,height:16,width:240})]}),title:"Source"})})]})}function e5(e){let{productionDeployment:i,productionAliases:l,isLoading:n}=e,r=i&&l&&!n,a=(0,F.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:i??void 0}),{projectSlug:s,teamSlug:o}=(0,eQ.useProjectAndTeamSlug)();return o&&s?(0,t.jsxs)("div",{className:"flex min-h-[258px] flex-col gap-[22px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)(k.Text,{className:"text-copy-14 text-gray-900",children:"Rolling release in progress"}),(0,t.jsx)(A.Link,{variant:"highlight",href:`/${o}/${s}/deployments/rolling-release`,children:"Manage"})]}),(0,t.jsx)(eK.RollingReleaseDetails,{variant:"overview",projectSlug:s,teamSlug:o})]}),(0,t.jsx)(q.Description,{content:r?(0,t.jsx)(en.default,{defaultRoute:i.defaultRoute,domains:l,linkProps:a}):(0,t.jsx)(y.Skeleton,{boxHeight:20,height:16,width:220}),title:"Domains"})]}):null}function e9(e){let{project:i,productionDeployment:l,previousDeployment:n,productionAliases:r,rollbackDescription:a,isLoading:s}=e,o=(0,F.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:l??void 0}),d=(0,ei.useAgo)(a?.createdAt),c=l&&r&&!s;return(0,t.jsxs)("div",{className:"flex min-h-[258px] flex-col gap-[22px]",children:[(0,t.jsx)(q.Description,{content:c?(0,t.jsxs)(t.Fragment,{children:[a?(0,t.jsx)(e2,{rollbackDescription:a,project:i,deploymentId:l.id}):null,(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)(ef,{deployment:l,icon:!0,isStale:!0,noPadding:!0,previousDeployment:n})})]}):(0,t.jsxs)("div",{className:"mb-8 flex flex-col gap-2",children:[(0,t.jsx)(y.Skeleton,{autoSize:!0,className:"h-[58px] w-full"}),(0,t.jsx)(y.Skeleton,{autoSize:!0,className:"h-[58px] w-full"})]}),title:a?(0,t.jsxs)("div",{style:{textTransform:"none"},className:"flex items-center gap-1",children:["Instant Rollback ",d,a.username?(0,t.jsxs)(t.Fragment,{children:[" ","by ",(0,t.jsxs)(k.Text,{weight:500,children:["@",a.username]}),(0,t.jsx)(e_.PrincipalAvatar,{size:22,principalId:a.userId,principal:{type:"user",uid:a.userId,username:a.username}})]}):null]}):"Instant Rollback"}),(0,t.jsx)(q.Description,{content:c?(0,t.jsx)(en.default,{defaultRoute:l.defaultRoute,domains:r,linkProps:o}):(0,t.jsx)(y.Skeleton,{boxHeight:20,height:16,width:220}),title:"Domains"})]})}function e8(e){let{scope:n,project:r,productionAliases:a,productionDeployment:s,previousDeployment:o,upcomingDeployment:d,projectLink:u,isLoading:m,onCancelUpcomingDeployment:p,productionDeploymentIsStale:x,refreshPreviewImage:h,rollbackDescription:j,rollingReleaseResponse:g}=e,f=!!(!m&&r&&!s),[y,v]=(0,i.useState)(!1),b=g?.rollingRelease,k=r&&b&&"ACTIVE"===b.state,w=(0,t.jsx)(eN.ProductionDeploymentBar,{aliasError:d?.aliasError,loading:m,onCancelUpcomingDeployment:p,previousDeployment:o,productionDeployment:s,productionDeploymentIsStale:x,project:r,projectLink:u&&"type"in u&&u.type?u:null,upcomingDeployment:d});return(0,t.jsx)(c.ContentWrapper,{children:(0,t.jsxs)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start",children:[f?(0,t.jsxs)(eE.DeploymentCardContainer,{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(eO.ProductionDeploymentCardSkeleton,{visible:!1}),(0,t.jsx)(eF.NoDeploymentCard,{className:"rounded-md border-none shadow-[0_1px_0_0_rgba(0,0,0,0.08),0_2px_2px_rgba(0,0,0,0.04)]",project:r,scope:n,style:{position:"absolute",inset:0,zIndex:1,boxShadow:"none",height:"auto"}})]}),w]}):(0,t.jsxs)(eE.DeploymentCardContainer,{variant:(0,eE.getStatusBarVariant)({productionDeploymentIsStale:x,upcomingDeployment:d,isLoading:m}),children:[(0,t.jsxs)(J.Fieldset,{className:(0,l.clsx)("z-[1] border-none","!shadow-[0_1px_0_0_rgba(0,0,0,0.08),_0_2px_2px_rgba(0,0,0,0.04)]","!rounded-md","[&>div:first-child]:p-4","dark:!shadow-[0_1px_0_0_var(--ds-gray-alpha-400)]","bg-clip-padding"),children:[(0,t.jsx)(Q.FieldsetContent,{children:(0,t.jsxs)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start gap-6 lg:flex-row lg:flex-wrap",children:[(0,t.jsx)("div",{className:"relative flex w-full min-w-px max-w-full flex-none flex-col items-stretch justify-start lg:max-w-[38%]",children:(0,t.jsx)(eL.ProjectScreenshot,{project:r,refresh:h})}),(0,t.jsx)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start pt-2",children:(()=>{switch(k?"rollingRelease":x&&!m?"rollback":"deployment"){case"rollback":return(0,t.jsx)(e9,{project:r,previousDeployment:o,productionAliases:a,productionDeployment:s,rollbackDescription:j,isLoading:m});case"rollingRelease":return(0,t.jsx)(e5,{productionAliases:a,productionDeployment:s,isLoading:m});default:return(0,t.jsx)(e4,{productionAliases:a,productionDeployment:s,project:r,isLoading:m})}})()})]})}),(0,t.jsx)(eB,{})]}),w]}),(0,t.jsx)(i.Suspense,{children:y?(0,t.jsx)(e1,{open:y,setOpen:v}):null})]})})}var e3=e.i(9974972),e7=e.i(9584282),e6=e.i(6619197),te=e.i(5129431),tt=e.i(2645806),ti=e.i(4029500),tl=e.i(5598924),tn=e.i(6119682),tr=e.i(3023251),ta=e.i(1903055),ts=e.i(2941917),to=e.i(6625227),td=e.i(100247);let tc=function(e){let{project:t,productionDeployment:l,revalidateProject:n}=e,r=t?.targets?.production,a=(0,to.default)(r?.url,{refreshInterval:3e3}),s=a.data,[o,d]=i.useState(s),{areChecksRunning:c,areDomainsAssigning:u}=(0,td.getDeploymentStatus)(s);i.useEffect(()=>{if(s!==o&&s?.readyState==="READY"&&n(),!r)return void d(null);s&&s!==o&&d(s)},[r,s,n,o]);let m=!!(!r||a.error||o),p=o&&l?o.createdAt>l.createdAt:o&&!l;return{mutate:a.mutate,isLoading:!m,data:p&&(["QUEUED","BUILDING","ERROR"].includes(s?.readyState??"")||c||s?.checksConclusion==="failed"||u)?s:null}};var tu=e.i(2652226),tm=e.i(58194),tp=e.i(6516601),tx=e.i(4218798),th=e.i(5442212),tj=e.i(1122901),tg=e.i(5771992),tf=e.i(7401972),ty=e.i(5326905),tv=e.i(1201436),tb=e.i(1991452),tk=e.i(7674801),tw=e.i(6015702),tS=e.i(6107899),tC=e.i(4345845),tD=e.i(8172029),tR=e.i(545405),tN=e.i(3907048),tP=e.i(5071474);let tL=(0,i.memo)(function(e){let{branch:n,redeploy:r,project:a,feedbackState:s}=e,{branch:o,deployment:d}=n,c=(0,i.useMemo)(()=>({...d,uid:d.id,readyState:d.readyState,ready:d.readyAt,created:d.createdAt,creator:{...d.creator,uid:d.creator?.uid??d.userId}}),[d]),m=(0,ed.getGitInfoFromDeployment)(d),p=function(e){if(!(0,ed.getGitInfoFromDeployment)(e))return;if(e.alias?.length===1)return e.alias[0];let t=`${e.name}-git-`,i=e.alias?.find(e=>e.startsWith(t));if(i)return i;let l=e.alias?.find(t=>{let i=t.indexOf("-git-");return -1!==i&&e.name.startsWith(t.substring(0,i))});return l||e.alias?.[e.alias.length-1]}(d)??d.url,x="ERROR"===d.readyState||"failed"===d.checksConclusion||d.aliasError,{latestSuccessfulDeployment:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=function(e){let{meta:t={}}=e??{};return"githubCommitRef"in t?{"meta-githubCommitRef":t.githubCommitRef}:"gitlabCommitRef"in t?{"meta-gitlabCommitRef":t.gitlabCommitRef}:"bitbucketCommitRef"in t?{"meta-bitbucketCommitRef":t.bitbucketCommitRef}:void 0}(t),l=t?.readyState==="READY",{data:n,isLoading:r}=(0,tg.default)({limit:l||!i?0:1,projectId:e,state:"READY",...i});if(l)return{latestSuccessfulDeployment:t,isLoading:!1};if(!i)return{isLoading:!1};let[a]=n?.deployments??[];return{latestSuccessfulDeployment:a,isLoading:r}}(a?.id,x?void 0:c),{query:j}=(0,tb.useRouter)(),g=(0,tD.getQueryParam)(j.teamSlug)??"",f=(0,tD.getQueryParam)(j.project)??"",y=`/${g}/${f}/deployments${(0,eZ.encode)({filterBranch:o})}`,v=`/${g}/${f}/logs?branches=${o}`,b=(0,el.useDeploymentLink)(d),{can:w}=(0,ez.default)({projectIdOrName:a?.name}),S=null!==d.target?eV.Resource.Deployment:eV.Resource.DeploymentPreview,C=w(eV.Action.Update,S),D=w(eV.Action.Read,S),R=h?`https://${p}`:b,N=m?.prUrl??m?.refUrl??m?.commitUrl,P=n.meta?.number??m?.prId?`#${n.meta?.number??m?.prId}`:"Source",L=(0,ei.useAgo)(d.createdAt),I=(0,F.useWrappedToolbarAuthLinkHandler)({via:"active-branches",deployment:d});return(0,t.jsxs)("div",{className:(0,l.default)("group/branch-row relative grid grid-flow-row items-start gap-2 px-4 py-3","first:rounded-t last:rounded-b [&:has(.link-overlay:hover)]:bg-gray-100","md:flex md:flex-row md:items-center md:justify-between"),children:[(0,t.jsx)(A.Link,{className:"link-overlay absolute inset-0 z-[1]",href:R,...I}),(0,t.jsxs)("div",{className:"flex min-w-[110px] max-w-[230px] shrink items-center gap-x-2 sm:max-w-max md:max-w-[500px]",children:[(0,t.jsx)(tC.GitBranch,{className:"hidden md:inline-block",color:"gray-900",size:16}),(0,t.jsx)(k.Text,{className:"text-gray-alpha-1000",monospace:!0,truncate:!0,variant:"label-14",children:o})]}),(0,t.jsxs)("div",{className:(0,l.default)("grid w-full shrink-0 auto-cols-fr grid-flow-col gap-x-4 md:w-auto","lg:grid-cols-[var(--first-column)_var(--base-columns)]","grid-cols-[70px_90px_70px]"),style:{"--first-column":"minmax(0, 72px)","--base-columns":"minmax(0, 87px) 75px minmax(0, 120px) 60px 24px","--comment-column":"38px"},children:[(0,t.jsx)(tA,{href:R,...I,icon:(0,t.jsx)(tS.PreviewEye,{size:12}),label:"Preview"}),s&&s.unresolved>0?(0,t.jsx)(tA,{className:(0,l.default)("hidden md:flex"),"data-type":"comments",href:R,icon:(0,t.jsx)(tw.Message,{color:"gray-900",size:12}),label:s.unresolved.toString()}):null,(0,t.jsx)(tA,{className:"!gap-0.5",href:b,icon:(0,t.jsx)("div",{className:"flex items-center h-[10px]",children:(0,t.jsx)(eu.DeploymentStatus,{deployment:c,className:"-my-0.5 pl-0.5"})}),label:(0,t.jsx)("span",{className:"font-mono",children:(0,tP.getDeploymentHash)(d)})}),N?(0,t.jsx)(tA,{href:N,icon:(0,t.jsx)(tk.LogoGithub,{size:12}),label:P}):null,(0,t.jsxs)("div",{className:"relative hidden items-center gap-x-2 lg:flex",children:[(0,t.jsx)(tN.CreatorAvatar,{deployment:d,size:20}),(0,t.jsx)(k.Text,{color:"gray-900",truncate:!0,variant:"label-14",children:!d.meta?.originalDeploymentId&&m?.commitAuthorLogin?m.commitAuthorLogin:d.creator?.username})]}),(0,t.jsx)("div",{className:"text-label-14 z-[2] hidden self-center whitespace-nowrap text-right text-gray-900 lg:block",children:(0,t.jsx)(X.RelativeTimeCard,{date:d.createdAt,ignoreCardPointerEvents:!0,side:"top",children:(0,t.jsx)(k.Text,{color:"gray-900",variant:"label-14",children:L})})}),(0,t.jsx)(u.DotsMenu,{iconSize:14,menuButtonClassName:"z-[2] !h-full place-self-end",children:(0,t.jsx)(tI,{buildLogsUrl:b,canReadDeployment:D,canUpdateDeployment:C,deploymentsLink:y,gitAlias:p,redeploy:()=>{r?.(d)},runtimeLogsUrl:v})})]})]})}),tA=e=>{let{href:i,linkProps:n,label:r,icon:a,className:s}=e;return(0,t.jsxs)(A.Link,{className:(0,l.default)("flex items-center gap-1.5 bg-background-100","border border-solid border-gray-200 px-1.5 pr-2 py-1 rounded-full","text-gray-900 [&>p]:text-gray-900 z-[2] size-fit","hover:bg-gray-100 hover:border-gray-500","hover:text-gray-1000","group-has-[.link-overlay:hover]/branch-row:border-gray-500",s),href:i,...n,children:[a,(0,t.jsx)(k.Text,{variant:"label-12",className:"!text-current",children:r})]})};function tI(e){let{canReadDeployment:i,canUpdateDeployment:l,deploymentsLink:n,gitAlias:r,redeploy:a,buildLogsUrl:s,runtimeLogsUrl:o}=e,d=(0,S.useToasts)(),{track:c}=(0,P.useTrackActivity)();return(0,t.jsxs)(t.Fragment,{children:[l?(0,t.jsx)(j.MenuItem,{onClick:()=>{a(),c(N.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentRedeployClicked,{})},children:"Redeploy"}):null,i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.MenuItem,{href:n,isLink:!0,onClick:()=>void c(N.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewBuildLogsClicked,{}),shouldOnClickWhenLink:!0,children:"View All Deployments"}),(0,t.jsx)(j.MenuItem,{href:s,isLink:!0,onClick:()=>void c(N.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewBuildLogsClicked,{}),shouldOnClickWhenLink:!0,children:"View Build Logs"}),(0,t.jsx)(j.MenuItem,{href:o,isLink:!0,onClick:()=>void c(N.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewRuntimeLogsClicked,{}),shouldOnClickWhenLink:!0,children:"View Runtime Logs"}),(0,t.jsx)(j.MenuItem,{onClick:()=>{(0,tR.copyToClipboard)(r),d.message("Copied deployment url to clipboard!"),c(N.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentCopyBranchUrlClicked,{})},suffix:(0,t.jsx)(tv.Copy,{}),children:"Copy Branch URL"})]}):null,i&&l?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ty.MenuDivider,{}),l?null:(0,t.jsx)(g.MenuItemLocked,{children:"Redeploy"}),i?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.MenuItemLocked,{children:"View Build Logs"}),(0,t.jsx)(g.MenuItemLocked,{children:"View Runtime Logs"}),(0,t.jsx)(g.MenuItemLocked,{children:"View Source"}),(0,t.jsx)(g.MenuItemLocked,{children:"Copy Branch URL"})]})]})]})}var tT=e.i(4173901),tB=e.i(9014736),tM=e.i(6532114),t$=e.i(9365163),t_=e.i(424862),tU=e.i(1754766),tF=e.i(8610291),tO=e.i(2695633),tE=e.i(4656243);function tW(e){let{widths:i=[50,15,10]}=e;return(0,t.jsxs)("div",{className:"relative flex flex-col justify-between gap-3 px-4 py-3.5 first:rounded-t-sm last:rounded-b-sm md:flex-row md:items-center md:gap-2","data-testid":(0,R.tid)("deployments","deployment-entity","no-uid"),children:[(0,t.jsxs)("div",{className:"flex grow flex-col gap-2 md:flex-row md:items-center",children:[(0,t.jsx)(tC.GitBranch,{className:"hidden md:inline-block",color:"gray-900",size:16}),(0,t.jsx)(y.Skeleton,{height:20,width:`${i[0]}%`})]}),(0,t.jsxs)("div",{className:"flex min-w-64 items-center gap-2",children:[(0,t.jsx)(y.Skeleton,{className:"rounded-full",height:20,width:73.2}),(0,t.jsx)(y.Skeleton,{className:"rounded-full",height:20,width:71.02}),(0,t.jsx)(y.Skeleton,{className:"rounded-full",height:20,width:90.08}),(0,t.jsx)("span",{className:"ml-auto",children:(0,t.jsx)(y.Skeleton,{height:20,width:24})})]})]})}function tz(){return(0,t.jsxs)(b.Stack,{className:"geist-wrapper",gap:3,paddingBottom:6,paddingTop:9,paddingX:6,children:[(0,t.jsxs)(b.Stack,{align:"flex-start",gap:3,justify:{lg:"space-between"},children:[(0,t.jsx)(y.Skeleton,{height:26,width:245}),(0,t.jsxs)(b.Stack,{className:"w-full",direction:{sm:"column",md:"row",lg:"row"},gap:2,children:[(0,t.jsx)(y.Skeleton,{height:40,style:{flexGrow:0,flexShrink:1},width:"100%"}),(0,t.jsx)(y.Skeleton,{className:"!w-full md:!w-[192px]",height:40})]})]}),(0,t.jsx)(T.EntityGroup,{children:(0,t.jsxs)("div",{className:"flex flex-col !divide-solid rounded-md bg-background-100 !divide-x-0 !divide-y !divide-gray-alpha-400",children:[(0,t.jsx)(tW,{widths:[50,15,8]}),(0,t.jsx)(tW,{widths:[60,20,6]}),(0,t.jsx)(tW,{widths:[40,25,10]}),(0,t.jsx)(tW,{widths:[30,20,8]}),(0,t.jsxs)("div",{className:"hidden !divide-solid !divide-x-0 !divide-y !divide-gray-alpha-400 md:contents",children:[(0,t.jsx)(tW,{widths:[70,25,10]}),(0,t.jsx)(tW,{widths:[60,15,12]}),(0,t.jsx)(tW,{widths:[30,20,8]}),(0,t.jsx)(tW,{widths:[40,15,8]}),(0,t.jsx)(tW,{widths:[50,25,6]}),(0,t.jsx)(tW,{widths:[70,20,10]})]})]})})]})}var tV=e.i(244384),tH=e.i(1391409),tG=e.i(3645729);function tY(){let{project:e="",teamSlug:n=""}=(0,D.useParams)()??{},{can:r,isLoading:a}=(0,ez.default)(),s=r(eV.Action.Read,eV.Resource.ObservabilityData),o=r(eV.Action.Read,eV.Resource.WebAnalytics);return(0,t.jsx)(b.Stack,{className:"geist-wrapper",children:(0,t.jsx)("div",{className:(0,l.clsx)("mt-4 grid grid-cols-1 gap-4 lg:grid-cols-3"),children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tV.ProjectFirewallCardSkeleton,{}),(0,t.jsx)(tG.ProjectObservabilityCardSkeleton,{}),(0,t.jsx)(tH.ProjectAnalyticsCardSkeleton,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(tV.ProjectFirewallCardSkeleton,{}),children:(0,t.jsx)(tV.ProjectFirewallCard,{projectSlug:e,teamSlug:n})}),(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(tG.ProjectObservabilityCardSkeleton,{}),children:s?(0,t.jsx)(tG.ProjectObservabilityCard,{teamSlug:n,projectSlug:e}):(0,t.jsx)(tG.ProjectObservabilityCardNoAccess,{})}),(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(tH.ProjectAnalyticsCardSkeleton,{}),children:o?(0,t.jsx)(tH.ProjectAnalyticsCard,{projectSlug:e,teamSlug:n}):(0,t.jsx)(tH.ProjectAnalyticsCardNoAccess,{})})]})})})}var tK=e.i(7132425),tQ=e.i(3748432),tq=e.i(5709282);function tJ(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Skeleton,{height:40,width:110}),(0,t.jsx)(y.Skeleton,{height:40,width:90}),(0,t.jsx)(y.Skeleton,{height:40,width:75}),(0,t.jsx)(y.Skeleton,{height:40,width:126})]})}function tX(e){let{isLoadingDeployment:i,...n}=e,{data:r}=(0,tm.default)(n.productionDeployment?.url);return!i&&r&&n.project&&n.productionDeployment?(0,t.jsx)(tZ,{buildsData:r.builds,...n}):(0,t.jsx)(b.Stack,{className:(0,l.clsx)("geist-show-on-tablet"),children:(0,t.jsx)(u.DotsMenu,{})})}let tZ=i.default.memo(e=>{let{project:i,productionDeployment:s,canRollbackDeployment:o,openRollbackModal:c,rollbackTooltip:m}=e,p=(0,D.useRouter)(),x=(0,D.useParams)(),h=(0,el.useDeploymentLink)(s),{link:f}=function(){let e,{deploymentUrl:t,branchName:i,project:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:n,user:r,isLoading:a}=(0,eS.useAccount)(),s=a?void 0:n?.slug||r?.username;return s&&(e=l?`/${[s,l].map(encodeURIComponent).join("/")}/logs?${t?`deploymentDomains=${t}`:""}${i?`&branches=${i}`:""}`:`/${encodeURIComponent(s)}/~/logs?${t?`deploymentDomains=${t}`:""}${i?`&branches=${i}`:""}`),{link:e}}({deploymentUrl:s?.url,branchName:i?.link?.productionBranch??"",project:x?.project});if(null===s)return(0,t.jsx)("div",{style:{width:88}});let y=f||"",v="View Runtime Logs",k=null,S=null;return!o||m?(k=(0,t.jsx)(w.Tooltip,{text:m||"You do not have permission to rollback this project",children:(0,t.jsx)(d.Button,{disabled:!0,size:"small",type:"secondary",children:(0,t.jsxs)(b.Stack,{align:"center",direction:"row",gap:2,children:[m?(0,t.jsx)(r.Stop,{color:"gray-500"}):(0,t.jsx)(n.LockClosed,{color:"gray-500"}),(0,t.jsx)("span",{children:"Instant Rollback"})]})})}),S=(0,t.jsx)(j.MenuItem,{disabled:!0,suffix:m?(0,t.jsx)(r.Stop,{color:"gray-500"}):(0,t.jsx)(g.MenuItemLocked,{color:"gray-500"}),children:"Instant Rollback"})):(k=(0,t.jsx)(d.Button,{onClick:c,size:"small",type:"secondary",typeName:"button",children:(0,t.jsxs)(b.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(a.RotateCounterClockwise,{}),(0,t.jsx)("span",{children:"Instant Rollback"})]})}),S=(0,t.jsx)(j.MenuItem,{onClick:c,suffix:(0,t.jsx)(a.RotateCounterClockwise,{}),children:"Instant Rollback"})),(0,t.jsx)(b.Stack,{flex:"0 0 auto",style:{marginTop:0},children:(0,t.jsxs)(b.Stack,{direction:"row",flex:"0 0 auto",children:[(0,t.jsxs)(b.Stack,{align:"center",className:"geist-hide-on-tablet",direction:"row",flex:"0 0 auto",gap:3,children:[(0,t.jsx)(A.ButtonLink,{href:h,size:"small",title:"View Build Logs",type:"secondary",children:"Build Logs"}),(0,t.jsx)(A.ButtonLink,{href:y,size:"small",title:v,type:"secondary",children:"Runtime Logs"}),k]}),(0,t.jsx)(b.Stack,{align:"center",className:(0,l.clsx)("geist-show-on-tablet"),direction:"row",children:(0,t.jsxs)(u.DotsMenu,{children:[(0,t.jsx)(j.MenuItem,{onClick:()=>p.push(h),children:"View Build Logs"}),(0,t.jsx)(j.MenuItem,{"data-testid":(0,R.tid)("production-links","function-logs-button"),onClick:()=>p.push(y),children:v}),S]})})]})})});function t0(e){let{branches:l,handleCancelDeployment:n,handleClickCreateAlias:r,handleClickRedeploy:a,project:s,productionDeploymentId:o}=e,[d]=function(e){let{projectId:t,branches:l=[]}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:r,team:a}=(0,eJ.useTeam)(),s=(0,i.useRef)(new Map),o=(0,tB.default)(()=>t&&r&&0!==l.length?`/api/feedback/branch-state${(0,eZ.encode)({projectId:t,teamId:a?.id,branch:l})}`:null,e=>fetch(e).then(e=>e.json()),n);return(0,i.useEffect)(()=>{if(o.data)for(let e of o.data)s.current.set(e.branch,e)},[o.data]),[(0,i.useMemo)(()=>{let e={};for(let t of l)e[t]=o.data?.find(e=>e.branch===t)??s.current.get(t);return e},[o.data,l]),o]}({projectId:s?.id,branches:l.map(e=>e.branch)});return(0,t.jsx)(t.Fragment,{children:l.map(e=>(0,t.jsx)(tL,{branch:e,feedbackState:d[e.branch],handleCancelDeployment:n,handleClickCreateAlias:r,isCurrentProductionDeployment:o===e.deployment.id,project:s,redeploy:a},e.deployment.id))})}function t1(e){let{projectLink:i,project:l,prodDeploymentLoading:n,gitType:r,gitHref:a,git:o,domainsHref:d,usagePageLink:c,repositoryUrl:u}=e,m=(0,D.useParams)(),g=()=>u?(0,t.jsx)(A.ButtonLink,{href:u,type:"secondary",children:"Repository"}):"vercel"!==r?(0,t.jsx)(A.ButtonLink,{href:a,prefix:o?.logo??(0,t.jsx)(tO.GitLogo,{gitType:r}),tab:!0,type:"secondary",width:126,children:"Repository"}):(0,t.jsx)(A.ButtonLink,{href:`/${m?.teamSlug}/${m?.project}/settings/git`,type:"secondary",children:"Connect Git"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"block md:hidden",children:(0,t.jsxs)(b.Stack,{direction:"row",gap:3,children:[(0,t.jsx)(W,{hideOnMobile:!1,project:l}),i&&l&&!n?g():(0,t.jsx)(y.Skeleton,{height:40,width:126}),(0,t.jsxs)(h.MenuContainer,{children:[(0,t.jsx)(x.MenuButton,{"aria-label":"Menu",shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(s.MoreHorizontal,{})}),(0,t.jsxs)(p.Menu,{children:[(0,t.jsx)(j.MenuItem,{href:d,isLink:!0,children:"Domains"}),c?(0,t.jsx)(j.MenuItem,{href:c,isLink:!0,children:"Usage"}):null]})]})]})}),(0,t.jsx)(b.Stack,{className:"hidden md:flex",direction:{sm:"row",md:"row",lg:"row-reverse"},gap:4,style:{flexWrap:"wrap"},children:i&&l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W,{hideOnMobile:!1,project:l}),(0,t.jsx)(A.ButtonLink,{href:d,type:"secondary",width:90,children:"Domains"}),(0,t.jsx)(t8,{project:l}),g()]}):(0,t.jsx)(tJ,{})})]})}tZ.displayName="ProductionLinks";let t2=function(e){let n=(0,L.useIsMobile)()?5:10,r=(0,D.useParams)(),a=r?.project,[s,d]=(0,i.useState)(!1),u=(0,i.useCallback)(()=>{d(!0)},[]),{data:m,isLoading:p,error:x,mutate:h}=function(e){var t,i;let l=(0,D.useParams)()??{teamSlug:"",project:""};return t=l.teamSlug,i=l.project,(0,eI.usePromiseSWR)(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=!(arguments.length>4)||void 0===arguments[4]||arguments[4];return`/api/v10/projects/${t}?teamId=${e}&activeBranches=${i}&latestDeployments=${l}&rollbackInfo=${n}`}(t,i),e)}({refreshInterval:15e3});(0,tp.default)("newCreated","Your project was created and is deploying."),(0,tp.default)("deploymentDeleted","The deployment was deleted."),(0,tp.default)("fromTransfer","Transferred Project successfully.","success",!!m?.transferCompletedAt);let j=m?.link,g=j?.type||"vercel",f=(0,tr.getRepoFromLink)(j,{includeOrg:!0}),w="bitbucket"===g?"bitbucket.org":`${g}.com`,S=`https://${w}/${f}`;if(m?.link?.productionBranch&&m.rootDirectory){let e=(0,tM.getRepoTree)(g);S+=`/${e}/${m.link.productionBranch}/${m.rootDirectory}`}let{data:C,isLoading:R}=eT(),{deployment:N,deploymentIsStale:P,rollbackDescription:A}=C??{},T=(0,tO.getGitMeta)(N?.meta),M=tc({project:m,productionDeployment:N,revalidateProject:h}),{data:$,isLoading:_}=function(e){let{project:t,productionDeploymentIsStale:i}=e,{data:l,mutate:n,...r}=(0,tg.default)({projectId:i&&t?t.id:"",limit:10,rollbackCandidate:!0}),a=l?.deployments.filter(e=>e.isRollbackCandidate),s=a?.[0];return{...r,data:s,mutate:()=>n()}}({project:m,productionDeploymentIsStale:P}),{data:U,isLoading:F}=function(e){var t,i,l;let n=(0,D.useParams)()??{teamSlug:"",project:""};return t=n.teamSlug,i=n.project,l=void 0,(0,eI.usePromiseSWR)(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ASC",n=!(arguments.length>4)||void 0===arguments[4]||arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=!(arguments.length>6)||void 0===arguments[6]||arguments[6];return`/api/v9/projects/${t}/domains?teamId=${e}&limit=${i}&order=${l}&production=${n}&redirects=${r}&verified=${a}`}(t,i),l)}(),O=U?.domains??[],E=(0,i.useMemo)(()=>(0,tq.getSortedNonRedirectDomains)(O).map(e=>e.name),[O,F]),{data:W,isLoading:z}=function(e){var t,i,l;let n=(0,D.useParams)()??{teamSlug:"",project:""};return t=n.teamSlug,i=n.project,l=void 0,(0,eI.usePromiseSWR)(`/api/v1/projects/${i}/rolling-release?teamId=${t}`,l)}(),V=(0,tx.useProjectTransferring)(m),H=p||R||F||z,G=`/${encodeURIComponent(r?.teamSlug??"")}/${encodeURIComponent(r?.project??"")}/settings/domains`,[Y,K]=(0,i.useState)(0),Q=(0,i.useCallback)(()=>{K(e=>e+1)},[]),{canRollbackDeployment:q,rollbackModal:J,openRollbackModal:X}=(0,t$.useInstantRollbackModal)(m,{onClose:Q});(0,ta.default)(x);let Z=t3(m),ee=(0,i.useCallback)(()=>a?(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(k.Text,{truncate:!0,variant:"heading-32",children:a}),(0,t.jsx)(tK.MicrofrontendsBadge,{className:"relative top-px",project:m??null})]}):(0,t.jsx)(y.Skeleton,{height:40,width:220}),[a,m]);return(0,t.jsxs)("div",{style:{background:"var(--ds-background-200)",minHeight:"calc(100vh - 85px)"},children:[(0,t.jsx)(B.HeadTitle,{title:m?`${m.name} â€“ Overview`:"Overview",titlePostfix:!0}),(0,t.jsx)(t5,{projectId:m?.id,projectPaused:!!m?.paused,teamSlug:r?.teamSlug??""}),V?(0,t.jsxs)(c.ContentWrapper,{children:[(0,t.jsx)(v.Spacer,{y:2}),(0,t.jsx)(e3.default,{})]}):null,m&&!V?(0,t.jsx)(tn.DiscontinuedNodeBanner,{project:m,teamSlug:r?.teamSlug??""}):null,(0,t.jsx)(tu.default,{buttons:(0,t.jsx)(t1,{domainsHref:G,git:T,gitHref:S,gitType:g,prodDeploymentLoading:R,project:m,projectLink:j,repositoryUrl:e.repositoryUrl,usagePageLink:Z}),title:(0,t.jsx)(ee,{}),truncateTitle:!0,updatedStyles:!0}),V?(0,t.jsx)(c.ContentWrapper,{className:"min-h-[calc(100vh-280px)] bg-[var(--ds-background-200)] px-0 py-[var(--geist-gap-double)]",full:!0,children:(0,t.jsx)(c.ContentWrapper,{children:(0,t.jsx)(e7.default,{})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.ContentWrapper,{className:"pt-6",full:!0,children:[(0,t.jsx)(c.ContentWrapper,{children:(0,t.jsxs)(b.Stack,{align:"center",direction:"row",style:{justifyContent:"space-between"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(I.default,{h3:!0,noMargin:!0,style:{flex:"0 1 auto"},children:["Production"," ",(0,t.jsx)("span",{className:(0,l.clsx)({"hidden md:inline":P&&!H}),children:"Deployment"})]}),P&&!H?(0,t.jsx)(o.Badge,{variant:"amber-subtle",children:"Rolled Back"}):null]}),(0,t.jsx)(tX,{canRollbackDeployment:q,isLoadingDeployment:R,openRollbackModal:()=>X(),productionDeployment:N??(0,ek.getProductionDeployment)(m),project:m,rollbackTooltip:""})]})}),(0,t.jsx)(v.Spacer,{y:1}),(0,t.jsx)(tQ.ConditionalNavigationMarker,{enabled:H,label:"ProductionDeploymentCard",phase:"skeleton"}),(0,t.jsx)(tQ.ConditionalNavigationMarker,{enabled:!H,label:"ProductionDeploymentCard",phase:"content",children:(0,t.jsx)(e8,{isLoading:H,onCancelUpcomingDeployment:u,previousDeployment:$,productionAliases:E,productionDeployment:N,productionDeploymentIsStale:!!P,project:m,projectLink:j,refreshPreviewImage:Y,rollbackDescription:A,scope:r?.teamSlug||"",upcomingDeployment:M.data,rollingReleaseResponse:W})})]}),(0,t.jsx)(tY,{}),(0,t.jsx)(t4,{cancelModal:(0,t.jsx)(tt.default,{active:!!(M.data&&s),deployment:M.data,onClose:()=>{d(!1),M.mutate()},teamId:r?.teamSlug??""}),projectIdOrName:a,rowLimit:n,project:m,teamSlug:r?.teamSlug??"",isProjectLoading:p,rollbackModal:J})]})]})};function t4(e){let{rowLimit:l,project:n,projectIdOrName:r,teamSlug:a,isProjectLoading:s,cancelModal:o,rollbackModal:d}=e,[u,p]=(0,i.useState)(l),{data:x}=(0,ts.default)({project:n,limit:u}),[h,j]=(0,i.useState)(null),g=x?.aliases||h,{modal:f,open:y}=(0,te.default)(n),{modal:w,open:S}=(0,e6.default)(r,n),{track:D}=(0,P.useTrackActivity)(),R=(0,i.useCallback)((e,t)=>{t?S(e):y(e)},[S,y]),{filteredBranch:L,setFilteredBranch:A,clearBranch:I,showBranchFilterBar:B}=(0,th.useProjectFilteredBranch)({project:n}),{isInitialStatusItems:$,selectedStatusItems:_,handleSelectStatusItem:U}=(0,tj.useFilterStatus)(),[F,O]=(0,i.useState)(""),[E,{size:W,isLoading:V},H]=function(e){let{limit:t,project:i,users:l,readyStateFilter:n,branchSearch:r,branch:a}=e,s=!!i?.hasActiveBranches,o=(0,tg.useDeploymentsInfinite)({limit:t,project:s?void 0:i,requireProject:!0,users:l,target:"preview",branch:a,readyStateFilter:n},{refreshInterval:5e3}),d=(0,tf.useProjectDeployedBranches)({limit:t,project:s?i:void 0,includeDeploymentInfo:!0,active:!0,includeProductionBranch:!1,query:r,readyStateFilter:n},{refreshInterval:5e3,keepPreviousData:!0,revalidateFirstPage:!0,persistSize:!0});return s?[!0,...d]:[!1,...o]}({limit:l,project:n,branch:L??void 0,readyStateFilter:(0,tj.getReadyStateFilter)(_),branchSearch:F}),{isLoadingMore:G,isReachingEnd:Y,initialDataLoaded:Q,isEmpty:q,loadMore:J,mutate:X}=H,[Z,ee]=(0,i.useState)(null),{data:et}=(0,to.default)(Z),ei=(0,i.useCallback)(e=>{ee("uid"in e?e.uid:e.id)},[]),[el,en]=(0,i.useState)(!1),er=(0,i.useCallback)(()=>{en(!0)},[]),ea=(0,i.useCallback)(()=>{en(!1)},[]);return(0,t.jsx)(t.Fragment,{children:n&&Q?(0,t.jsxs)(c.ContentWrapper,{children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:1.5}),(0,t.jsxs)(b.Stack,{id:"preview-deployments",justify:{lg:"space-between"},children:[(0,t.jsx)(b.Stack,{direction:"column",gap:1,children:(0,t.jsx)(k.Text,{variant:"heading-20",children:E?"Active Branches":"Preview Deployments"})}),(0,t.jsx)(v.Spacer,{y:.5}),!!(!q||!$||L||F)&&(0,t.jsx)(b.Stack,{className:"[&_[data-geist-input-wrapper]]:items-start",direction:{sm:"column",md:"row",lg:"row"},children:E?(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)("div",{className:"grow",children:(0,t.jsx)(tT.DebouncedSearchInput,{disabled:q&&!F,loading:V&&F.length>0,onFocus:()=>void D(N.VercelActivityAction.ProjectOverviewActiveBranchesSearchFocused,{}),setSearch:O})}),(0,t.jsx)(tj.default,{handleSelectStatusItem:U,menuButtonClassName:"w-full md:w-auto",position:"none",selectedStatusItems:_})]}):(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)(tj.default,{handleSelectStatusItem:U,position:"none",selectedStatusItems:_}),(0,t.jsx)(tl.BranchSearchCombobox,{onSelect:A,project:n,skeleton:!n,value:L||""})]})})]}),B&&!E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsx)(ti.FilteredBranchEntityBar,{branch:L,deployments:H.deployments,isLoading:!Q,onClearBranch:I,project:n})]}):(0,t.jsx)(v.Spacer,{y:.5}),q?(0,t.jsx)(K,{branch:L,onClearBranch:I}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.EntityGroup,{children:(0,t.jsxs)(t.Fragment,{children:[!s&&E?(0,t.jsx)("div",{className:"flex flex-col !divide-solid rounded bg-background-100 !divide-x-0 !divide-y !divide-gray-alpha-400",children:(0,C.default)(H.branches,l).map(e=>(0,t.jsx)(t0,{branches:e,handleCancelDeployment:ei,handleClickCreateAlias:er,handleClickRedeploy:R,project:n},e[0].deployment.id))}):null,s||E?null:H.deployments.map(e=>(0,t.jsx)(z.DeploymentRow,{deployment:e,handleCancelDeployment:ei,handleClickCreateAlias:er,redeploy:R,projectIdOrName:r},e.uid)),s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{}),(0,t.jsx)(z.DeploymentRow,{})]}):null]})}),Y?(0,t.jsx)(m.LoadMoreButton,{placeholder:!0}):(0,t.jsx)(m.LoadMoreButton,{loading:G&&W>1,onClick:()=>{J(),j(g),p(u+l)}})]}),(0,t.jsx)(M.default,{active:el,onCancel:ea}),o,(0,t.jsx)(tt.default,{active:!!et,deployment:et,onClose:()=>{ee(null),X()},teamId:a}),d,f,w]}),(0,t.jsx)(v.Spacer,{y:2})]}):(0,t.jsx)(tz,{})})}function t5(e){let{projectId:l,projectPaused:n,teamSlug:r}=e,[a,s]=(0,i.useState)(!1),o=(0,i.useCallback)(async()=>{if(l&&r)try{await (0,tF.resumeProject)(l,r),S.toasts.success("Resumed project")}catch(e){S.toasts.error("Error resuming project")}finally{s(!1)}},[l,r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(t9,{handleSetShowResumeModal:s,projectPaused:n}),(0,t.jsx)(tU.ResumeServiceModal,{active:a,hide:()=>s(!1),save:o,teamSlug:r})]})}function t9(e){let{projectPaused:i,handleSetShowResumeModal:l}=e;return i?(0,t.jsx)(b.Stack,{padding:4,children:(0,t.jsx)(f.Note,{action:(0,t.jsx)(d.Button,{onClick:()=>l(!0),size:"small",children:"Resume Service"}),fill:!0,type:"warning",children:(0,t.jsxs)(k.Text,{color:"amber-900",children:[(0,t_.noOrphan)("The project is paused and your Production Deployment is currently unavailable. "),(0,t.jsx)(A.Link,{external:!0,href:"/docs/projects/overview#pausing-a-project",underline:!0,children:"Learn More"})]})})}):null}function t8(e){let{project:i}=e,l=t3(i);return null===l?null:(0,t.jsx)(A.ButtonLink,{href:l,type:"secondary",width:75,children:"Usage"})}let t3=e=>{let t=(0,D.useParams)(),i=t?.teamSlug;return void 0===i||void 0===e?null:`/${i}/~/usage?${tE.USAGE_TAB_PROJECT_QUERY_PARAM_KEY}=${e.id}`}}]);

//# sourceMappingURL=375db014407357ef.js.map
//# debugId=8484441a-3feb-5b23-b84e-741d26392cfc
