
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0209c7c8-a50c-5f3d-b8e9-96259712c8a1")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2126772,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=t.defaultOrigin,l=void 0===n?"":n,o=t.allowedLinkPrefixes,c=void 0===o?[]:o,u=t.allowedImagePrefixes,d=void 0===u?[]:u,g=t.components,h=i(t,["defaultOrigin","allowedLinkPrefixes","allowedImagePrefixes","components"]),f=c.length&&!c.every(function(e){return"*"===e}),m=d.length&&!d.every(function(e){return"*"===e});if(!l&&(f||m))throw Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");var p=function(e){if("string"!=typeof e)return null;try{var t=new URL(e);return t}catch(n){if(l)try{var t=new URL(e,l);return t}catch(e){}return null}},x=function(e){return"string"==typeof e&&e.startsWith("/")},y=function(e,t){if(!e||!p(e))return null;if(t.includes("*")){var n=x(e),r=p(e);return r?n?r.pathname+r.search+r.hash:r.href:null}var i=x(e),s=p(e);return s&&t.some(function(e){var t=p(e);return!!t&&t.origin===s.origin&&s.href.startsWith(t.href)})?i?s.pathname+s.search+s.hash:s.href:null},v=r(r({},g),{a:function(e){var t=e.href,n=e.children,l=e.node,o=i(e,["href","children","node"]),u=y(t,c);return null!==u?(null==g?void 0:g.a)?(0,a.createElement)(g.a,r({href:u,children:n,node:l,target:"_blank",rel:"noopener noreferrer"},o)):(0,s.jsx)("a",r({href:u},o,{target:"_blank",rel:"noopener noreferrer",children:n})):(0,s.jsxs)("span",{className:"text-gray-500",title:"Blocked URL: ".concat(t),children:[n," [blocked]"]})},img:function(e){var t=e.src,n=e.alt,l=e.node,o=i(e,["src","alt","node"]),c=y(t,d);return null!==c?(null==g?void 0:g.img)?(0,a.createElement)(g.img,r({src:c,alt:n,node:l},o)):(0,s.jsx)("img",r({src:c,alt:n},o)):(0,s.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",children:["[Image blocked: ",n||"No description","]"]})}}),j=r(r({},h),{components:v});return(0,a.createElement)(e,j)}};var s=e.r(751170),a=e.r(4099374)},4233469,e=>{"use strict";e.s(["computeLink",()=>n,"computeResourceLink",()=>r]);var t=e.i(8690335);function n(e){let{teamSlug:t,page:n,env:r,to:i,from:s,detailPage:a}=e,l=[t,"projectName"in e&&e.projectName?e.projectName:"~","observability",n,a].filter(Boolean),o=new URLSearchParams;return r&&o.set("environment",r),i&&s&&(o.set("to",`${Math.floor(i.getTime()/1e3)}`),o.set("from",`${Math.floor(s.getTime()/1e3)}`)),`/${l.join("/")}${o.size?`?${o.toString()}`:""}`}function r(e,n){let{dimension:r,value:i,event:s,startTime:a,endTime:l}=n,o=function(e){let t="project"===e.type?e.projectNames[0]??"~":"~";return[e.teamSlug,t,"observability"]}(e),c=`/${o.join("/")}`,u=new URLSearchParams;switch(a&&l&&(u.set("to",`${Math.floor(l.getTime()/1e3)}`),u.set("from",`${Math.floor(a.getTime()/1e3)}`)),r){case"route":return`${c}/route/${encodeURIComponent(i)}?${u.toString()}`;case"requestPath":return`${c}/requestPath/${encodeURIComponent(i)}?${u.toString()}`;default:return`${c}?${(0,t.prefillQuery)({aggregation:"sum",metric:s?`${s}.count`:"incomingRequest.count",by:[r],time:a&&l?{from:a,to:l}:void 0})}`}}Symbol("RELATIVE_LINK")},6957906,e=>{"use strict";e.s(["DynamicHeaderActions",()=>n]);var t=e.i(1857939);function n(e){let{loggedInHeaderActions:n,loggedOutHeaderActions:r}=e,{isLoggedIn:i,isLoading:s}=(0,t.useIsLoggedIn)();return s?null:i?n:r}},2405943,e=>{"use strict";e.s(["ThumbUp",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.89531 2.23972C6.72984 2.12153 6.5 2.23981 6.5 2.44315V5.25001C6.5 6.21651 5.7165 7.00001 4.75 7.00001H2.5V13.5H12.1884C12.762 13.5 13.262 13.1096 13.4011 12.5532L14.4011 8.55318C14.5984 7.76425 14.0017 7.00001 13.1884 7.00001H9.25H8.5V6.25001V3.51458C8.5 3.43384 8.46101 3.35807 8.39531 3.31114L6.89531 2.23972ZM5 2.44315C5 1.01975 6.6089 0.191779 7.76717 1.01912L9.26717 2.09054C9.72706 2.41904 10 2.94941 10 3.51458V5.50001H13.1884C14.9775 5.50001 16.2903 7.18133 15.8563 8.91698L14.8563 12.917C14.5503 14.1412 13.4503 15 12.1884 15H1.75H1V14.25V6.25001V5.50001H1.75H4.75C4.88807 5.50001 5 5.38808 5 5.25001V2.44315Z" fill="currentColor"/>')},6572610,e=>{"use strict";e.s(["TimeAgo",()=>s]);var t=e.i(751170),n=e.i(5468328),r=e.i(609109),i=e.i(7218483);function s(e){let{date:s,...a}=e;return(0,t.jsx)(n.Tooltip,{text:(0,r.formatDateAndTime)(s),...a,children:(0,i.useAgo)(s)})}},9583081,e=>{"use strict";e.s(["LogoButton",()=>p,"LogoButtonSkeleton",()=>x]);var t=e.i(751170),n=e.i(5232300),r=e.i(8148719),i=e.i(5004848),s=e.i(5180023),a=e.i(7993600),l=e.i(4519214),o=e.i(4004502),c=e.i(9722978),u=e.i(7151748),d=e.i(3870297),g=e.i(57106),h=e.i(6417808),f=e.i(7592809),m=e.i(827385);function p(e){let{hideOnMobile:r,disabled:i,fixed:s=!0}=e,{actions:{setOpen:a},state:{buttonId:p,buttonRef:x,menuId:y,open:b,popperAttributes:w,popperStyles:N}}=(0,n.useMenu)(),{translateY:k,scale:S,position:I}=j(),L=(0,m.useNorthstarDashboardHref)();return(0,t.jsx)(g.Link,{"aria-label":"Vercel logo",className:(0,c.clsx)({"[&:has(~nav>ul>li)]:hidden md:[&:has(~nav>ul>li)]:inline-flex [&>span]:focus-visible:focus-ring":r,"pointer-events-none cursor-default":i,"flex mr-[-21px] max-md:mr-0":!s}),"data-testid":(0,o.tid)("header","navbar","logo"),href:L,id:p,passHref:!0,children:(0,t.jsx)(l.m.span,{"aria-controls":y,"aria-expanded":b,"aria-haspopup":"true",className:(0,c.clsx)("left-6 top-[23px] z-[var(--header-zindex)] inline-flex size-5 rounded-sm no-underline outline-offset-2",{fixed:s},{static:!s}),id:p,onClick:e=>{u.analytics.track(d.AnalyticsEvent.BRAND_HEADER_LOGO_LEFT_CLICKED);let{height:t}=e.currentTarget.getBoundingClientRect();t<v&&(e.preventDefault(),(0,f.default)())},onContextMenu:e=>{u.analytics.track(d.AnalyticsEvent.BRAND_HEADER_LOGO_RIGHT_CLICKED),e.preventDefault(),a(e=>!e)},ref:x,role:"button",style:s?{translateY:k,scale:S,position:I,...N.reference}:{...N.reference},...w.reference,children:(0,t.jsx)(h.default,{height:v})})},`logo-${s?"fixed":"static"}`)}function x(e){let{hideOnMobile:n,disabled:r,fixed:i=!0}=e,{translateY:s,scale:a,position:u}=j();return(0,t.jsx)(g.Link,{className:(0,c.clsx)({"[&:has(~nav>ul>li)]:hidden md:[&:has(~nav>ul>li)]:inline-flex":n,"pointer-events-none cursor-default":r,"flex mr-[-21px] max-md:mr-0":!i}),"data-testid":(0,o.tid)("header","navbar","logo"),href:"/",children:(0,t.jsx)(l.m.span,{className:(0,c.clsx)("left-6 top-[23px] z-[var(--header-zindex)] inline-flex no-underline",{fixed:i},{static:!i}),style:i?{translateY:s,scale:a,position:u}:void 0,children:(0,t.jsx)(h.default,{height:v})})})}let y=[0,54],v=18;function j(){let{scrollY:e}=(0,r.useScroll)(),t=(0,i.useTransform)(e,y,[0,-8]),n=(0,i.useTransform)(e,y,[1,.8]),l=(0,s.useMotionValue)("absolute");return(0,a.useMotionValueEvent)(e,"change",e=>{l.set(e>0?"fixed":"absolute")}),{translateY:t,scale:n,position:l}}},4065937,e=>{"use strict";e.s(["Logo",()=>g,"LogoSkeleton",()=>f],4065937);var t=e.i(751170),n=e.i(4991687),r=e.i(6090862),i=e.i(5155984),s=e.i(4099374),a=e.i(3679047);function l(){let e=(0,a.useSelectedLayoutSegments)();return(e?.includes("domains")??!1)&&e?.length===1}let o=/^\/new\/?(?:clone|import|.+\/success)?$/;function c(){let e=(0,a.usePathname)();return null!==e&&o.test(e)}var u=e.i(9583081);let d=(0,r.default)(()=>e.A(6581467).then(e=>e.BrandingContextMenu),{loadableGenerated:{modules:[4192470]},ssr:!1});function g(e){let{hideOnMobile:r}=e;return(0,t.jsx)(i.CompatRouterAllowed,{children:(0,t.jsxs)(n.MenuContainer,{children:[(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(u.LogoButtonSkeleton,{hideOnMobile:r}),children:(0,t.jsx)(h,{hideOnMobile:r})}),(0,t.jsx)(d,{})]})})}function h(e){let{hideOnMobile:n}=e,r=l(),i=c();return(0,t.jsx)(u.LogoButton,{fixed:!r&&!i,hideOnMobile:n})}function f(e){let{hideOnMobile:n}=e,r=l(),i=c();return(0,t.jsx)(u.LogoButtonSkeleton,{fixed:!r&&!i,hideOnMobile:n})}},5180023,e=>{"use strict";e.s(["useMotionValue",()=>s]);var t=e.i(2813219),n=e.i(4099374),r=e.i(8311587),i=e.i(1170252);function s(e){let s=(0,i.useConstant)(()=>(0,t.motionValue)(e)),{isStatic:a}=(0,n.useContext)(r.MotionConfigContext);if(a){let[,t]=(0,n.useState)(e);(0,n.useEffect)(()=>s.on("change",t),[])}return s}},5004848,e=>{"use strict";e.s(["useTransform",()=>o],5004848);var t=e.i(2682505),n=e.i(1170252),r=e.i(8176014),i=e.i(9879178),s=e.i(5180023);function a(e,t){let n=(0,s.useMotionValue)(t()),a=()=>n.set(t());return a(),(0,i.useIsomorphicLayoutEffect)(()=>{let t=()=>r.frame.preRender(a,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),(0,r.cancelFrame)(a)}}),n}var l=e.i(2813219);function o(e,n,r,i){if("function"==typeof e){l.collectMotionValues.current=[],e();let t=a(l.collectMotionValues.current,e);return l.collectMotionValues.current=void 0,t}let s="function"==typeof n?n:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=!Array.isArray(n[0]),s=i?0:-1,a=n[0+s],l=n[1+s],o=n[2+s],c=n[3+s],u=(0,t.interpolate)(l,o,c);return i?u(a):u}(n,r,i);return Array.isArray(e)?c(e,s):c([e],e=>{let[t]=e;return s(t)})}function c(e,t){let r=(0,n.useConstant)(()=>[]);return a(e,()=>{r.length=0;let n=e.length;for(let t=0;t<n;t++)r[t]=e[t].get();return t(r)})}},7993600,e=>{"use strict";e.s(["useMotionValueEvent",()=>n]);var t=e.i(4099374);function n(e,n,r){(0,t.useInsertionEffect)(()=>e.on(n,r),[e,n,r])}},8148719,e=>{"use strict";let t,n;e.s(["useScroll",()=>F],8148719);var r=e.i(2813219),i=e.i(6348367),s=e.i(4099374),a=e.i(7175602),l=e.i(8176014);function o(e,t){let n,r=()=>{let{currentTime:r}=t,i=(null===r?0:r.value)/100;n!==i&&e(i),n=i};return l.frame.preUpdate(r,!0),()=>(0,l.cancelFrame)(r)}var c=e.i(2645816),u=e.i(7005421),d=e.i(8225578);let g=new WeakMap,h=(e,t,n)=>(r,i)=>i&&i[0]?i[0][e+"Size"]:(0,u.isSVGElement)(r)&&"getBBox"in r?r.getBBox()[t]:r[n],f=h("inline","width","offsetWidth"),m=h("block","height","offsetHeight");function p(e){let{target:t,borderBoxSize:n}=e;g.get(t)?.forEach(e=>{e(t,{get width(){return f(t,n)},get height(){return m(t,n)}})})}function x(e){e.forEach(p)}let y=new Set;var v=e.i(6747113),j=e.i(5795153);let b=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),w={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function N(e,t,n,r){let i=n[t],{length:s,position:a}=w[t],l=i.current,o=n.time;i.current=e[`scroll${a}`],i.scrollLength=e[`scroll${s}`]-e[`client${s}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=(0,v.progress)(0,i.scrollLength,i.current);let c=r-o;i.velocity=c>50?0:(0,j.velocityPerSecond)(i.current-l,c)}e.i(1477032);var k=e.i(2682505),S=e.i(5805331),I=e.i(9483032),L=e.i(3443390);let C={start:0,center:.5,end:1};function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(e in C&&(e=C[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(r=t*e),n+r}let A=[0,0],z={All:[[0,0],[1,1]]},B={x:0,y:0},R=new WeakMap,M=new WeakMap,E=new WeakMap,O=e=>e===document.scrollingElement?window:e;function q(e){let{container:r=document.scrollingElement,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r)return a.noop;let s=E.get(r);s||(s=new Set,E.set(r,s));let o=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{measure:t=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0;if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,r.target,n),N(e,"x",n,t),N(e,"y",n,t),n.time=t,(r.offset||r.target)&&function(e,t,n){let{offset:r=z.All}=n,{target:i=e,axis:s="y"}=n,a="y"===s?"height":"width",l=i!==e?function(e,t){let n={x:0,y:0},r=e;for(;r&&r!==t;)if((0,L.isHTMLElement)(r))n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if("svg"===r.tagName){let e=r.getBoundingClientRect(),t=(r=r.parentElement).getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else if(r instanceof SVGGraphicsElement){let{x:e,y:t}=r.getBBox();n.x+=e,n.y+=t;let i=null,s=r.parentNode;for(;!i;)"svg"===s.tagName&&(i=s),s=r.parentNode;r=i}else break;return n}(i,e):B,o=i===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in i&&"svg"!==i.tagName?i.getBBox():{width:i.clientWidth,height:i.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let u=!t[s].interpolate,d=r.length;for(let e=0;e<d;e++){let n=function(e,t,n,r){let i=Array.isArray(e)?e:A,s=0;return"number"==typeof e?i=[e,e]:"string"==typeof e&&(i=(e=e.trim()).includes(" ")?e.split(" "):[e,C[e]?e:"0"]),(s=T(i[0],n,r))-T(i[1],t)}(r[e],c[a],o[a],l[s]);u||n===t[s].interpolatorOffsets[e]||(u=!0),t[s].offset[e]=n}u&&(t[s].interpolate=(0,k.interpolate)(t[s].offset,(0,S.defaultOffset)(r),{clamp:!1}),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=(0,I.clamp)(0,1,t[s].interpolate(t[s].current))}(e,n,r)},notify:()=>t(n)}}(r,e,{time:0,x:b(),y:b()},i);if(s.add(o),!R.has(r)){let e=()=>{for(let e of s)e.measure(l.frameData.timestamp);l.frame.preUpdate(i)},i=()=>{for(let e of s)e.notify()},a=()=>l.frame.read(e);R.set(r,a);let o=O(r);window.addEventListener("resize",a,{passive:!0}),r!==document.documentElement&&M.set(r,"function"==typeof r?(y.add(r),n||(n=()=>{let e={get width(){return window.innerWidth},get height(){return window.innerHeight}};y.forEach(t=>t(e))},window.addEventListener("resize",n)),()=>{y.delete(r),y.size||"function"!=typeof n||(window.removeEventListener("resize",n),n=void 0)}):function(e,n){t||"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(x));let r=(0,d.resolveElements)(e);return r.forEach(e=>{let r=g.get(e);r||(r=new Set,g.set(e,r)),r.add(n),t?.observe(e)}),()=>{r.forEach(e=>{let r=g.get(e);r?.delete(n),r?.size||t?.unobserve(e)})}}(r,a)),o.addEventListener("scroll",a,{passive:!0}),a()}let c=R.get(r);return l.frame.read(c,!1,!0),()=>{(0,l.cancelFrame)(c);let e=E.get(r);if(!e||(e.delete(o),e.size))return;let t=R.get(r);R.delete(r),t&&(O(r).removeEventListener("scroll",t),M.get(r)?.(),window.removeEventListener("resize",t))}}let P=new Map;function $(e){let{source:t,container:n,...r}=e,{axis:i}=r;t&&(n=t);let s=P.get(n)??new Map;P.set(n,s);let a=r.target??"self",l=s.get(a)??{},o=i+(r.offset??[]).join(",");return l[o]||(l[o]=!r.target&&(0,c.supportsScrollTimeline)()?new ScrollTimeline({source:n,axis:i}):function(e){let t={value:0},n=q(n=>{t.value=100*n[e.axis].progress},e);return{currentTime:t,cancel:n}}({container:n,...r})),l[o]}var H=e.i(1170252),_=e.i(9879178);let D=()=>({scrollX:(0,r.motionValue)(0),scrollY:(0,r.motionValue)(0),scrollXProgress:(0,r.motionValue)(0),scrollYProgress:(0,r.motionValue)(0)}),V=e=>!!e&&!e.current;function F(){let{container:e,target:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,H.useConstant)(D),l=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=(0,s.useCallback)(()=>(l.current=function(e){var t,n;let{axis:r="y",container:i=document.scrollingElement,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i)return a.noop;let l={axis:r,container:i,...s};return"function"==typeof e?(t=e,n=l,2===t.length?q(e=>{t(e[n.axis].progress,e)},n):o(t,$(n))):function(e,t){let n=$(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:e=>(e.pause(),o(t=>{e.time=e.duration*t},n))})}(e,l)}((e,t)=>{let{x:n,y:i}=t;r.scrollX.set(n.current),r.scrollXProgress.set(n.progress),r.scrollY.set(i.current),r.scrollYProgress.set(i.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0}),()=>{l.current?.()}),[e,t,JSON.stringify(n.offset)]);return(0,_.useIsomorphicLayoutEffect)(()=>{if(c.current=!1,!(V(e)||V(t)))return u();c.current=!0},[u]),(0,s.useEffect)(()=>c.current?((0,i.invariant)(!V(e),"Container ref is defined but not hydrated","use-scroll-ref"),(0,i.invariant)(!V(t),"Target ref is defined but not hydrated","use-scroll-ref"),u()):void 0,[u]),r}},7592809,e=>{"use strict";e.s(["default",()=>t]);let t=()=>{window.scrollTo({top:0,behavior:"smooth"})}},6417808,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(751170),n=e.i(192534);let r=function(e){let{color:r="var(--geist-foreground)",height:i,inverted:s,width:a,...l}=e;return(0,t.jsx)(n.VercelLogo,{fill:s?"var(--geist-background)":r,height:a?void 0:i||65,width:i?void 0:a||75,...l})}},827385,e=>{"use strict";e.s(["getNorthstarDashboardHref",()=>s,"useNorthstarDashboardHref",()=>a]);var t=e.i(4099374),n=e.i(9668517),r=e.i(5140444),i=e.i(7917902);function s(e){let{isUnrecognizedTeamSlug:t=!1,teamSlug:n,user:r}=e;return!t&&n?n===r?.username?"/dashboard":`/${Array.isArray(n)?n[0]:n}`:r?"northstar"!==r.version||r.defaultTeamId?"/dashboard":"/account":"/home"}function a(){let{user:e}=(0,r.useUser)(),a=(0,n.useTeamSlug)()||"",l=function(e){let{team:n,user:r}=(0,i.useAccount)();return(0,t.useMemo)(()=>{if(!e)return!0;let t=e===n?.slug,i=e===r?.username;return!(t||i)},[n?.slug,e,r?.username])}(a);return(0,t.useMemo)(()=>s({isUnrecognizedTeamSlug:l,user:e,teamSlug:a}),[l,e,a])}},7070055,e=>{"use strict";e.s(["LoggedOutHeaderActions",()=>d]);var t=e.i(751170),n=e.i(9508212),r=e.i(1344973),i=e.i(5255926),s=e.i(4004502),a=e.i(3679047),l=e.i(4099374),o=e.i(57106);function c(e){let n=(0,a.usePathname)(),i=(0,a.useSearchParams)(),l=e.autoNext?i?.toString()?`${n}?${i.toString()}`:n:i?.get("next"),c=e.hideLoginButton||n?.startsWith("/login"),u=e.hideSignUpButton||n?.startsWith("/signup");return(0,t.jsxs)(t.Fragment,{children:[c?null:(0,t.jsx)(o.ButtonLink,{"data-testid":(0,s.tid)("header","login"),href:l?`/login?next=${encodeURIComponent(l)}`:"/login",size:"small",type:"secondary",rel:"nofollow",children:(0,t.jsx)(r.Text,{color:"inherit",weight:500,children:"Login"})}),u?null:(0,t.jsx)(o.ButtonLink,{"data-testid":(0,s.tid)("header","sign-up"),href:l?`/signup?next=${encodeURIComponent(l)}`:"/signup",size:"small",type:c?"secondary":"default",rel:"nofollow",children:(0,t.jsx)(r.Text,{color:"inherit",weight:500,children:"Sign Up"})})]})}function u(){return(0,t.jsx)(i.Skeleton,{height:32,width:75})}function d(e){return(0,t.jsxs)(n.Stack,{align:"center",as:"nav",direction:"row",gap:3,justify:"end",children:[!e.hideContactButton&&(0,t.jsx)(o.Link,{href:"/contact",children:(0,t.jsx)(r.Text,{color:"gray-900",children:"Contact"})}),(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(u,{}),children:(0,t.jsx)(c,{...e})})]})}},9620876,e=>{"use strict";e.s(["FeedbackButton",()=>l]);var t=e.i(751170),n=e.i(4557026),r=e.i(4099374),i=e.i(5140444),s=e.i(5338940);let a=["hobby","pro","enterprise"];function l(e){let{buttonType:l}=e,{user:o}=(0,i.useUser)(),{teams:c}=(0,s.useTeam)(),u=(0,r.useMemo)(()=>a[Math.max(0,...(c??[]).map(e=>a.indexOf(e.billing?.plan??"hobby")))],[c]);return(0,t.jsx)(n.Feedback,{buttonType:l,email:o?.email??void 0,label:"front",planName:u,showTopics:!0})}},1501978,e=>{"use strict";e.s(["Incognito",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill="currentColor" d="M5.5 12.5a2 2 0 1 0-4 0 2 2 0 0 0 4 0Zm9 0a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM4.145 0l.133.054L7.894 1.5h.212L11.722.054 11.855 0h1.335l.5 6H16v1.5H0V6h2.31l.5-6h1.335Zm4.383 2.946L8.395 3h-.79l-.133-.054L4.179 1.63 3.814 6h8.372l-.366-4.371-3.292 1.317ZM16 12.5a3.5 3.5 0 1 1-7 0 .713.713 0 0 0-.713-.713h-.574A.713.713 0 0 0 7 12.5a3.5 3.5 0 1 1-.521-1.838 2.205 2.205 0 0 1 1.234-.375h.574c.457 0 .881.138 1.234.375A3.5 3.5 0 0 1 16 12.5Z"/>')},1957261,e=>{"use strict";e.s(["InvestigationsMenu",()=>j],1957261);var t=e.i(751170),n=e.i(9722978),r=e.i(2504781),i=e.i(8674454),s=e.i(6694387),a=e.i(4991687),l=e.i(8459493),o=e.i(8735244),c=e.i(2155064),u=e.i(8761240),d=e.i(199192),g=e.i(6572610),h=e.i(6143247);function f(e){let{active:n}=e;return(0,t.jsx)("div",{className:(0,h.cn)("absolute -inset-px  rounded-full p-px",{"animate-[spin_2500ms_linear_infinite]":n}),style:{background:n?"conic-gradient(from 0deg, transparent, transparent 240deg, var(--ds-blue-600))":void 0,animationDuration:"2500ms"},children:(0,t.jsx)("div",{className:"size-full rounded-full bg-background-100"})})}function m(){return(0,t.jsx)("div",{className:"pointer-events-none absolute z-0 translate-x-[-87.5%] opacity-50",children:(0,t.jsxs)("div",{className:"relative z-0 size-16",children:[(0,t.jsx)("div",{className:"absolute size-12 -translate-x-1/2 -translate-y-1/2 animate-[northern-lights-float_6s_ease-in-out_infinite]",style:{background:"radial-gradient(circle at 40% 40%, var(--ds-amber-400), var(--ds-amber-600) 50%, transparent 70%)"}}),(0,t.jsx)("div",{className:"absolute size-14 -translate-x-1/2 -translate-y-1/2 animate-[northern-lights-float_7s_ease-in-out_infinite]",style:{background:"radial-gradient(circle at 60% 40%, var(--ds-pink-500), var(--ds-pink-700) 50%, transparent 70%)"}}),(0,t.jsx)("div",{className:"absolute size-10 -translate-x-1/2 -translate-y-1/2 animate-[northern-lights-float_5.5s_ease-in-out_infinite]",style:{background:"radial-gradient(circle at 50% 60%, var(--ds-purple-200), var(--ds-purple-400) 50%, transparent 70%)"}})]})})}var p=e.i(1501978),x=e.i(5406549);let y=e=>e.investigations.some((e,t)=>t.isInProgress),v=e=>e.investigations.some((e,t)=>t.isUnread);function j(){let e=(0,x.useAIInvestigationsStore)(e=>e.updateInvestigation),h=(0,x.useAIInvestigationsStore)(e=>e.openSheet),j=(0,x.useAIInvestigationsStore)(e=>e.investigations),b=(0,x.useAIInvestigationsStore)(v),w=(0,x.useAIInvestigationsStore)(y);return(0,t.jsxs)(a.MenuContainer,{onClose:()=>{if(b)for(let[t]of j.filter((e,t)=>t.isUnread&&!t.isInProgress))e(t,{isUnread:!1})},children:[(0,t.jsxs)(s.MenuButton,{svgOnly:!0,"aria-label":"open investigations",shape:"circle",size:"small",type:"secondary",className:(0,n.clsx)("relative",{"animate-[northern-lights-undulate_ease-in-out_infinite]":b&&!w}),style:{animationDuration:"3000ms"},children:[(0,t.jsx)(f,{active:w}),(0,t.jsx)("div",{className:"relative z-10 flex h-full items-center",children:(0,t.jsx)(p.Incognito,{color:"gray-1000"})})]}),(0,t.jsxs)(i.Menu,{width:300,style:{"--geist-space-gap-quarter":0},children:[(0,t.jsxs)("header",{className:"flex items-center justify-between px-4 py-2",children:[(0,t.jsx)("p",{className:"text-label-14 m-0 font-medium",children:"Agent Tasks"}),(0,t.jsx)(r.Button,{svgOnly:!0,"aria-label":"archive tasks",shape:"circle",size:"small",type:"tertiary",children:(0,t.jsx)(c.Archive,{color:"gray-800"})})]}),j.size?j.collect((e,n)=>(0,t.jsxs)(l.MenuItem,{innerMenuItemClassName:"flex h-auto gap-3 px-4 py-3 items-center  bg-transparent border-0 border-t border-solid border-gray-300 !rounded-none hover:bg-gray-alpha-100 overflow-hidden relative",onClick:()=>h(n.id),children:[n.isUnread&&!n.isInProgress?(0,t.jsx)(m,{}):null,n.isInProgress?(0,t.jsx)(o.Spinner,{color:"var(--ds-gray-900)"}):(0,t.jsx)(u.CheckCircleFill,{color:"gray-900"}),(0,t.jsxs)("section",{className:"flex grow flex-col  *:m-0",children:[(0,t.jsx)("p",{className:"text-label-14 !h-auto font-medium",children:n.title}),(0,t.jsxs)("div",{className:"text-label-14 flex items-center gap-0.5  text-gray-800",children:[(0,t.jsxs)("p",{className:"m-0",children:[n.isInProgress?"Active for":"Finished ·"," "]}),(0,t.jsx)(g.TimeAgo,{date:n.createdAt})]})]}),(0,t.jsx)(d.ChevronRightSmall,{color:"gray-900"})]},e)):(0,t.jsx)("div",{className:"grid h-28 place-items-center",children:(0,t.jsx)("p",{className:"text-copy-13 text-gray-700",children:"No active tasks"})})]})]})}},2332347,e=>{"use strict";e.s(["InvestigationSheet",()=>em],2332347);var t=e.i(751170),n=e.i(4099374),r=e.i(5806401),i=e.i(4585051),s=e.i(2504781),a=e.i(5499338),l=e.i(8522580),o=e.i(6942035),c=e.i(9424270),u=e.i(9386557),d=e.i(6143247),g=e.i(8248823),h=e.i(5203356),f=e.i(8690335),m=e.i(1233856),p=e.i(1111237),x=e.i(7437286),y=e.i(5255926),v=e.i(1344973);function j(e){let{widget:r}=e,i=(0,n.useRef)(null),s=(0,x.useIntersectionObserver)(i,{threshold:.1,freezeOnceVisible:!0});return(0,t.jsxs)("div",{className:"flex flex-col gap-2",ref:i,children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(v.Text,{className:"break-all",variant:"heading-16",children:r.title})}),s?.isIntersecting?(0,t.jsx)(p.ResultsChart,{hideTableSearch:!0,horizontal:!0,query:r.query,chartHeight:200}):(0,t.jsx)(y.Skeleton,{height:200,style:{width:"100%"}})]})}var b=e.i(8761240),w=e.i(762945),N=e.i(1501978),k=e.i(222158),S=e.i(2455417),I=e.i(5406549);let L=e=>!!(e.activeSheet&&e.investigations.has(e.activeSheet)),C=e=>e.activeSheet&&e.investigations.has(e.activeSheet)?e.investigations.get(e.activeSheet)??null:null;function T(e){let{widget:n}=e,r=(0,I.useAIInvestigationsStore)(e=>!!C(e)?.error);return(0,t.jsxs)("div",{className:"text-label-14 flex items-center gap-3 tabular-nums",children:[r?(0,t.jsx)(w.Warning,{color:"gray-900",size:16}):(0,t.jsx)(N.Incognito,{color:"gray-900",size:16}),0===n.searches.length?(0,t.jsxs)("span",{className:"text-label-14 flex items-center gap-2 text-gray-800 group-data-[state=open]:hidden",children:[r?"Investigation failed before streaming":"Starting investigation","…"]}):(0,t.jsxs)("div",{children:["Investigated"," ",(0,t.jsxs)("span",{className:"font-medium",children:[n.searches.length," chart",1===n.searches.length?"":"s"]})," ",void 0!==n.startTime?(0,t.jsxs)(t.Fragment,{children:["in"," ",(0,t.jsx)(z,{startTime:n.startTime,endTime:n.endTime})]}):null]})]})}function A(e){let{widget:n}=e;return n.searches.findLast(e=>"analysis-completed"!==e.state),(0,t.jsx)(k.Root,{className:"group border-b border-gray-alpha-200 bg-background-100 px-8 py-2.5",type:"single",collapsible:!0,children:(0,t.jsxs)(k.Item,{value:"summary",children:[(0,t.jsx)(k.Trigger,{className:(0,d.cn)("group flex w-full items-center justify-between bg-transparent transition-transform ease-in-out px-0",{"pointer-events-none":0===n.searches.length}),children:(0,t.jsx)(T,{widget:n})}),(0,t.jsx)(k.Content,{children:(0,t.jsx)("ol",{className:"mt-4 space-y-2",children:n.searches.map(e=>(0,t.jsxs)("li",{className:"text-label-14 flex list-none flex-row items-center gap-3 px-1.5",children:["analysis-completed"===e.state?(0,t.jsx)(b.CheckCircleFill,{}):(0,t.jsx)("span",{className:"flex size-4 items-center",children:(0,t.jsx)(S.LoadingDots,{size:3})}),(0,t.jsx)("p",{children:e.summary})]},e.summary))})})]})})}function z(e){let{startTime:r,endTime:i}=e,s=(0,n.useRef)(null),[a,l]=(0,n.useState)(i||Date.now());return(0,n.useEffect)(()=>{if(i){s.current&&clearInterval(s.current);return}return s.current=setInterval(()=>l(Date.now()),500),()=>s.current?clearInterval(s.current):void 0},[i]),(0,t.jsxs)("span",{children:[Math.floor((a-r)/1e3)," seconds"]})}var B=e.i(57106),R=e.i(7807066),M=e.i(2375916),E=e.i(4233469),O=e.i(4337458),q=e.i(1283928),P=e.i(7385492),$=e.i(9741133);let H={log:{label:"Log"},deny:{label:"Deny"},challenge:{label:"Challenge"},bypass:{label:"Bypass"},rate_limit:{label:"Rate Limit"},redirect:{label:"Redirect"}};var _=e.i(2126772),D=e.i(4597921),V=e.i(691329),F=e.i(5955443),U=e.i(2405943),W=e.i(2924363),G=e.i(3500331);function Z(e){let{className:r="",activityId:i}=e,[a,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1),f=e=>{a===e?(l(null),d(!1)):(l(e),d(!0)),c("")};return(0,t.jsxs)("div",{className:`flex flex-col gap-2 ${r}`,children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(s.Button,{"aria-label":"Feedback: thumbs up",onClick:()=>f("positive"),disabled:g,type:"tertiary",shape:"square",svgOnly:!0,style:{opacity:1},children:(0,t.jsx)(U.ThumbUp,{color:a&&"positive"!==a?"gray-500":"gray-1000"})}),(0,t.jsx)(s.Button,{"aria-label":"Feedback: thumbs down",onClick:()=>f("negative"),disabled:g,type:"tertiary",shape:"square",svgOnly:!0,style:{opacity:1},children:(0,t.jsx)(W.ThumbDown,{color:a&&"negative"!==a?"gray-500":"gray-1000"})}),(0,t.jsx)(F.AnimatePresence,{children:g&&(0,t.jsx)(V.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"text-sm font-medium",children:"Thanks for your feedback!"})})]}),(0,t.jsx)(F.AnimatePresence,{children:u&&(0,t.jsx)(V.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden p-2",children:(0,t.jsxs)("div",{className:"-p-2",children:[(0,t.jsx)(G.Input,{"aria-label":"Comment",value:o,onChange:e=>c(e.target.value),placeholder:"Share your feedback (optional)...",className:"w-full"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,t.jsx)(s.Button,{onClick:()=>{a&&(fetch("/api/agent/feedback",{method:"POST",body:JSON.stringify({activityId:i,thumbsUp:"positive"===a,comment:o.trim()})}),d(!1),h(!0))},type:"default",children:"Submit"}),(0,t.jsx)(s.Button,{onClick:()=>{l(null),d(!1),c("")},type:"secondary",children:"Cancel"})]})]})})})]})}let K=(0,_.default)(P.default);function X(e){let{widget:n}=e,r=(0,D.useServerFlag)("enable-firewall-agent-recommendations",!1);return(0,t.jsx)("div",{className:"flex gap-8 border-y border-gray-200 bg-background-200 px-8 py-4",children:(0,t.jsx)("div",{className:"text-label-13 grow",children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,t.jsx)("div",{className:"@container",children:n.summary?(0,t.jsx)(K,{className:"prose prose-sm dark:prose-invert prose-headings:text-heading-14 prose-strong:font-medium prose-headings:mb-0 prose-p:break-before-avoid prose-li:break-before-avoid prose-li:my-0 prose-ul:my-0 prose-li:list-['-'] prose-li:marker:text-gray-900 prose-ul:ps-2 prose-code:before:content-none prose-code:after:content-none prose-code:text-amber-1000",children:n.summary}):(0,t.jsx)(y.Skeleton,{className:"h-4 w-32"})}),n.affectedResources.length>0?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-heading-14",children:["Affected Resource",n.affectedResources.length>1?"s":""]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 max-w-[60ch]",children:n.affectedResources.map(e=>(0,t.jsx)(Q,{value:e},e.value))})]}):null,r&&n.recommendedActions.length>0?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-heading-14",children:["Recommended Action",n.recommendedActions.length>1?"s":""]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-4",children:n.recommendedActions.map(e=>(0,t.jsx)(ee,{rule:e},e.id))})]}):null,n.feedbackActivityId?(0,t.jsx)(Z,{activityId:n.feedbackActivityId}):null]})})})}function Y(e){let{value:n}=e;return(0,t.jsx)("div",{className:"inline-flex size-4 items-center justify-center rounded-full bg-gray-300 font-mono text-[11px] font-medium text-gray-800",children:n})}function Q(e){let{value:n,referenceNumber:r}=e,i=(0,O.useSlugScope)(n.scope),a=q.AllDimensions[n.dimension]?.label;return(0,t.jsxs)("div",{className:"inline-flex items-center justify-between rounded border border-gray-200 bg-background-100 p-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsxs)("p",{className:"text-gray-800",children:[a," ",void 0!==r?(0,t.jsx)(Y,{value:r}):null]}),(0,t.jsx)(J,{transparent:!0,children:n.value})]}),(0,t.jsx)(s.Button,{svgOnly:!0,"aria-label":"Investigate Affected Resources",size:"small",type:"secondary",className:"ml-4 !shadow-none",href:i?(0,E.computeResourceLink)(i,n):void 0,children:(0,t.jsx)(R.ChevronRight,{})})]})}function J(e){let{children:n,subtle:r,transparent:i}=e;return(0,t.jsx)("div",{className:(0,d.cn)("my-px inline-flex min-h-4 min-w-4 items-center justify-center gap-1.5 rounded font-mono font-medium",{"text-gray-800":r,"bg-gray-300 px-1 py-0.5":!i}),children:n})}function ee(e){let{rule:n}=e,r=n.action?.mitigate?.action,i=r?H[r]:void 0,s=n.conditionGroup.flatMap(e=>e.conditions);return(0,t.jsxs)("div",{className:"flex max-h-[300px] min-h-[150px] w-[300px] flex-col gap-2.5 rounded border border-gray-200 bg-background-100 px-4 py-5",children:[(0,t.jsxs)("div",{className:"grow space-y-3",children:[(0,t.jsxs)("p",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-label-12 text-gray-900",children:"Firewall Rule"}),i?(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",capitalize:!0,children:i.label}):null]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 text-sm",children:[i?.label,s.map((e,n)=>{let r=$.baseModules[e.type],i=Array.isArray(e.value)?e.value.length:1;return(0,t.jsxs)("span",{className:"font-medium",children:[1===i?`1 ${r.title}`:`${i} ${r.title}s`,n<s.length-1?", ":""]},n)})]})]}),n.firewallRuleUrl?(0,t.jsx)(B.ButtonLink,{prefix:(0,t.jsx)(M.Shield,{color:"gray-100"}),href:n.firewallRuleUrl,children:"Configure Firewall Rule"}):null]},n.id)}var et=e.i(5182595),en=e.i(2923544),er=e.i(9179929),ei=e.i(9031477);function es(e){let{query:r,result:i,height:s,rollup:a,shareTitle:l,allowTooltipEscape:o,emptyState:c}=e,u=(0,m.getRollup)(r,a)??{name:"value",measure:"count",aggregation:"sum"},d=(0,en.labelForMeasure)(r.event,u.measure),g=(0,f.getFormatter)(u.aggregation,q.AllMeasures[u.measure].unit),h=(0,n.useMemo)(()=>0===r.groupBy.length?{singleCategoryName:d,rollupName:u.name}:1===r.groupBy.length?{category:r.groupBy[0]}:{category:e=>r.groupBy.map(t=>e[t]).join(", ")},[r.groupBy,d,u.name]),p=(0,er.useTimeseriesData)(i,h);return(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(y.Skeleton,{show:void 0===i,children:(0,t.jsx)(ei.ShareDomCopy,{title:l??d,children:(0,t.jsx)("div",{style:{height:s??"230px"},children:(0,t.jsx)(et.LineChart,{allowTooltipEscape:o,data:p??[],disableLegend:!0,disableZoom:!0,emptyState:c??"No data in this time range",formatValue:g,maxLines:ea,title:null,xTickCount:5})})})})})}let ea=25;var el=e.i(9722978);function eo(e){let{query:n,rollup:r,groupByDisplay:i="show-all",filterDisplay:s="show-all",className:a}=e,l=(0,m.getRollup)(n,r),o=l?(0,en.labelForMeasure)(n.event,l.measure):void 0;return(0,t.jsxs)("div",{className:(0,el.default)("text-sm break-words flex-row items-center gap-2 leading-6",a),children:[o,(0,t.jsx)(ec,{groupBy:n.groupBy,groupByDisplay:i}),(0,t.jsx)(eu,{filter:n.filter,filterDisplay:s})]})}function ec(e){let{groupBy:n,groupByDisplay:r}=e;return 0===n.length?null:"show-all"===r||"count-if-multiple"===r&&1===n.length?(0,t.jsxs)("span",{className:"ms-1",children:[(0,t.jsx)("span",{className:"text-gray-900",children:"by"})," ",n.map(e=>(0,en.labelForDimension)(e)).join(", ")]}):(0,t.jsxs)("span",{className:"bg-gray-200 text-gray-800 rounded-md px-2 py-1 ms-2 break-words",title:n.map(e=>e).join(", "),children:["by ",n.length," Group",n.length>1?"s":""]})}function eu(e){let{filter:n,filterDisplay:r}=e,i=n?(0,f.parseFilters)(n):[];return 0===i.length?null:"count"===r||"count-if-multiple"===r&&i.length>1?(0,t.jsxs)("span",{className:"ms-2 bg-gray-200 text-gray-900 rounded-md px-2 py-1 whitespace-nowrap",title:n,children:[i.length," Filter",i.length>1?"s":""]}):(0,t.jsx)("span",{className:"max-w-full truncate font-mono",children:n})}var ed=e.i(2560270);let eg=(0,_.default)(P.default);function eh(e){let{widget:n}=e;return(0,t.jsx)(k.Root,{type:"single",collapsible:!0,className:"flex flex-col bg-background-200",value:n.collapsed?void 0:"item-1",children:(0,t.jsxs)(k.Item,{value:"item-1",children:[(0,t.jsxs)(k.Trigger,{className:"group text-label-14 sticky top-0 z-50 flex w-full list-none flex-row items-center justify-between gap-3 bg-background-200 px-8 py-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 truncate",children:["analysis-completed"===n.state?(0,t.jsx)(b.CheckCircleFill,{}):(0,t.jsx)("span",{className:"flex size-4 items-center",children:(0,t.jsx)(S.LoadingDots,{size:3})}),(0,t.jsx)("p",{className:"truncate",children:n.tagline})]}),(0,t.jsx)(ed.ChevronDown,{className:"transition-transform ease-in-out group-data-[state='open']:-rotate-180"})]}),(0,t.jsx)(k.Content,{className:"@container overflow-y-clip data-[state=closed]:animate-content-close data-[state=open]:animate-content-open",children:(0,t.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 px-8 py-2 pb-4",children:[n.charts.map((e,n)=>void 0!==e.query?(0,t.jsxs)("div",{className:"self-start rounded-md border border-gray-200 px-2 pb-2 min-w-96",children:[(0,t.jsx)(eo,{className:"p-2",query:e.query,filterDisplay:"count"}),(0,t.jsx)(es,{allowTooltipEscape:!0,query:e.query,result:e.result,height:200,emptyState:"Querying..."})]},n):null),(0,t.jsx)(eg,{className:(0,el.default)("prose prose-sm max-h-[400px] overflow-y-auto dark:prose-invert",n.charts.length>1?"col-span-full":"col-span-1"),children:n.analysis??""})]})})]})})}function ef(e){let{widget:n}=e;switch(n.type){case"query-visualization":return(0,t.jsx)(j,{widget:n});case"investigation-steps":return(0,t.jsx)(A,{widget:n});case"investigation-digest":return(0,t.jsx)(X,{widget:n});case"analyzed-query":return(0,t.jsx)(eh,{widget:n});default:return null}}function em(){let e,p,x=(0,I.useAIInvestigationsStore)(L),y=(0,I.useAIInvestigationsStore)(C),v=(0,I.useAIInvestigationsStore)(e=>e.closeSheet),j=(0,I.useAIInvestigationsStore)((e=y?.chatId,t=>e?t.chatMessages.get(e)??[]:[])),b=(0,I.useAIInvestigationsStore)((p=y?.chatId,e=>p?e.chatStatuses.get(p)??null:null)),w=(0,n.useMemo)(()=>(function(e){let t,n,r,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"complete",l=e.filter(e=>"assistant"===e.role),o=[],c=[],u=[],d=[],g=[],h=0;for(let e of l)for(let l of e.parts){if("data-start-section"===l.type){i=l.data.section;continue}let e=o.at(o.length-1),p=function(e){if("tool-query"===e.type||"tool-queryFirewallTraffic"===e.type){let t=e.output;return{result:void 0===t?void 0:(0,m.fromApiSonarResult)(t),query:e.output?.query,tagline:e.input?.tagline}}if("data-query-results"===e.type){let t=e.data.results;return{result:void 0===t?void 0:(0,m.fromApiSonarResult)(t),query:e.data?.query,tagline:e.data?.tagline}}}(l);if(p&&(void 0!==e&&"analyzed-query"===e.type&&void 0===e.analysis?(e.charts.push({query:p.query,result:p.result}),p.tagline&&(e.tagline+=`, ${p.tagline}`)):o.push({type:"analyzed-query",id:`widget-${h++}`,charts:[{query:p.query,result:p.result}],tagline:p.tagline,state:"analysis-started",collapsed:!1}),p.query&&c.push({type:"query-visualization",id:`widget-${h++}`,query:(0,f.fromSonarQuery)(p.query),title:p.tagline??""}),u.push({summary:p.tagline??"",state:"streaming"===a?"analysis-started":"analysis-completed"})),"data-start-time"===l.type&&(n=l.data.startTime),"data-end-time"===l.type&&(r=l.data.endTime),"data-activity-id"===l.type&&(s=l.data.activityId),"data-related-resource"===l.type&&d.push(l.data),"data-rule-recommendation"===l.type&&g.push(l.data),"text"===l.type)if("summary"===i)t=l.text;else{let e=o.at(-1);e&&"analyzed-query"===e.type&&void 0===e.analysis&&(e.analysis=l.text)}}let p=void 0!==t||d.length>0||g.length>0;p&&(o.push({type:"investigation-digest",id:"widget-investigation-digest",summary:t,affectedResources:d,recommendedActions:g,feedbackActivityId:"complete"===a?s:void 0}),o.push(...c)),o.unshift({id:"widget-investigation-steps",type:"investigation-steps",startTime:n,endTime:r,searches:u});let x=o.findLastIndex(e=>"analyzed-query"===e.type&&(e.charts?.length>0||void 0!==e.analysis));for(let e=0;e<o.length;e++){let t=o[e];"analyzed-query"===t.type&&(e<x||p)&&(t.collapsed=!0)}let y=o.findLastIndex(e=>"analyzed-query"===e.type);for(let e=0;e<o.length;e++){let t=o[e];"analyzed-query"===t.type&&(e<y||p)&&(t.state="analysis-completed")}return{widgets:o,messages:e,status:a}})(j??[],b&&"ready"===b?"complete":"streaming"),[j,b,y]),[N,k]=(0,n.useMemo)(()=>{let e=[],t=[];return w.widgets.forEach(n=>{"investigation-digest"===n.type||"investigation-steps"===n.type||"analyzed-query"===n.type?e.push(n):t.push(n)}),[e,t]},[w]),S=!!y?.error;return y?(0,t.jsx)(r.Sheet,{open:x,children:(0,t.jsx)(r.SheetContent,{className:(0,d.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] overflow-y-auto rounded-[1rem] bg-white p-0 lg:w-2/3 sm:max-w-[auto]"),side:"right",children:(0,t.jsxs)("main",{className:"flex h-full shrink-0 grow-0 flex-col",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-50 bg-background-100 pt-7",children:[(0,t.jsxs)("section",{className:"flex items-center justify-start gap-4 px-8",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[S?(0,t.jsx)(u.WarningFill,{color:"red-900",size:24}):null,(0,t.jsx)("p",{className:"text-heading-24",children:y.title})]}),(0,t.jsx)(a.Badge,{variant:"pink",children:"Beta"}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(s.Button,{svgOnly:!0,"aria-label":"dismiss notebook",shape:"circle",size:"tiny",onClick:()=>v(),className:"!border-0 !bg-transparent",children:(0,t.jsx)(o.Cross,{color:"gray-1000"})})})]}),(0,t.jsxs)("div",{className:"text-label-14 flex items-center justify-start gap-0 border-b border-gray-200 px-8 pb-2.5",children:[(0,t.jsx)("span",{children:(0,h.getWorkflowContext)(y.workflow)}),(0,t.jsx)(c.SlashForward,{color:"gray-700"}),(0,t.jsx)("span",{children:(0,h.getInvestigationTimeRange)({startTime:y.input.startTime,endTime:y.input.endTime})}),(0,t.jsx)(c.SlashForward,{color:"gray-700"}),(0,t.jsx)("span",{children:(0,h.formatInvestigationDateRange)(y.input.startTime,y.input.endTime)}),(0,t.jsx)(c.SlashForward,{color:"gray-700"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Triggered by"," ",(0,t.jsx)(i.Avatar,{size:16,uid:y.createdBy.uid,title:y.createdBy.username}),y.createdBy.username]})]}),N.map(e=>(0,t.jsx)("div",{children:(0,t.jsx)(ef,{widget:e})},e.id))]}),(0,t.jsxs)("div",{className:"grow bg-background-200",children:[k.map(e=>(0,t.jsx)("div",{className:"px-8 py-4",children:(0,t.jsx)(ef,{widget:e})},e.id)),S?(0,t.jsx)("div",{className:"px-8 py-4",children:(0,t.jsxs)(l.Note,{fill:!0,type:"error",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"An error occurred while streaming:"}),(0,g.errorToString)(y.error,"Unknown error")]})}):null]})]})})}):null}}]);

//# sourceMappingURL=008f9bc5aab8cc54.js.map
//# debugId=0209c7c8-a50c-5f3d-b8e9-96259712c8a1
