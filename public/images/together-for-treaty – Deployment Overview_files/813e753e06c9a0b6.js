
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9aef0e30-eee3-555b-8377-a255cf2aab11")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2466450,e=>{"use strict";e.s(["formatCurrency",()=>i]);let t={long:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,maximumFractionDigits:3}),short:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0})};function i(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Number(e)*r,s=100;return"string"==typeof e&&(s=1),"auto"===n&&(n=a%s==0?"short":"long"),(0,t[n])(i).format(a/s)}},4905664,e=>{"use strict";e.s(["differenceInDays",()=>n]);var t=e.i(539392),i=e.i(870429);function n(e,n,a){let[s,o]=(0,t.normalizeDates)(a?.in,e,n),l=r(s,o),c=Math.abs((0,i.differenceInCalendarDays)(s,o));s.setDate(s.getDate()-l*c);let d=Number(r(s,o)===-l),u=l*(c-d);return 0===u?0:u}function r(e,t){let i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}},1412448,e=>{"use strict";e.s(["useUpcomingUsage",()=>c]);var t=e.i(9014736),i=e.i(8042625),n=e.i(277234),r=e.i(4244280),a=e.i(9668517),s=e.i(7917902),o=e.i(1717203),l=e.i(7557283);function c(){let{enabled:e,throwOnHTTPError:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=(0,a.useTeamSlug)(),{account:u}=(0,s.useAccount)(),{can:m,isLoading:f}=(0,o.default)(),y=m(l.Action.Read,l.Resource.BillingInvoice),p=(e??!0)&&!!u&&!f&&y;return(0,t.default)(()=>p&&u?.billing?.plan!=="hobby"?`${r.API_STRIPE_NEXT_INVOICE}${(0,i.encode)({slug:d})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:c??!0}),{shouldRetryOnError:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1})}},7074873,e=>{e.v({container:"textarea-module__lD6d8G__container "+e.i(3934080).container,error:"textarea-module__lD6d8G__error "+e.i(3934080).error,large:"textarea-module__lD6d8G__large",noOutline:"textarea-module__lD6d8G__noOutline",rounded:"textarea-module__lD6d8G__rounded",small:"textarea-module__lD6d8G__small",textarea:"textarea-module__lD6d8G__textarea "+e.i(3934080).input})},9334091,e=>{"use strict";e.s(["Textarea",()=>f]);var t=e.i(751170),i=e.i(4099374),n=e.i(9722978),r=e.i(4185741),a=e.i(4004502),s=e.i(9544652),o=e.i(3671642),l=e.i(4030453),c=e.i(2446691),d=e.i(692265),u=e.i(3934080),m=e.i(7074873);let f=(0,i.forwardRef)((e,i)=>{let{bypassLabelCasing:f=!1,disabled:p,label:g,resize:h,width:b,error:x,type:v,size:A,className:S,wrapperClassName:j,showOutline:C=!0,spellCheck:_=!1,autoCapitalize:w="off",autoComplete:D="off",autoCorrect:E="off",rounded:O,...k}=e,{focusProps:I,isFocusVisible:P}=(0,r.useFocusRing)({isTextInput:!0}),N=g?o.Label:"label",M={...g?{value:g,withInput:!0,wrapperClassName:j,bypassCasing:f}:{className:j}},T=(0,s.useDisabled)()||p,L=(0,d.useId)("textarea-");v=x?"error":v;let B=(0,c.useType)(v);return(0,t.jsxs)(N,{"data-version":"v1",...M,children:[(0,t.jsx)("div",{className:(0,n.clsx)(m.default.container,B,{[String(u.default.error)]:x,[String(u.default.keyboardFocus)]:P,[String(m.default.rounded)]:O,[String(m.default.noOutline)]:!C}),"data-geist-textarea-wrapper":"",children:(0,t.jsx)("textarea",{...I,autoCapitalize:w,autoComplete:D,autoCorrect:E,className:(0,n.clsx)(m.default.textarea,B,{[String(m.default.large)]:"large"===A,[String(m.default.small)]:"small"===A,[String(u.default.keyboardFocus)]:P},S),disabled:T,ref:i,spellCheck:_,style:{...k.style,resize:h,width:b},...k,onBlur:e=>{I.onBlur?.(e),k.onBlur?.(e)},onFocus:e=>{I.onFocus?.(e),k.onFocus?.(e)}})}),x?(0,t.jsx)(l.Error,{"data-testid":k["data-testid"]?(0,a.tid)(k["data-testid"],"error"):void 0,error:x,id:`${L}-error`,size:y[A||"small"],style:{width:b,marginTop:"var(--geist-gap-quarter)"}}):null]})});f.displayName="Textarea";let y={xSmall:"small",small:"small",mediumSmall:"small",large:"large"}},4677774,e=>{"use strict";e.s(["getHeapUserId",()=>n,"getHeapUserIdentity",()=>r,"useHeap",()=>i]);var t=e.i(4099374);function i(){return{userId:function(){let[e,i]=(0,t.useState)();return(0,t.useEffect)(()=>{i(n())},[]),e}(),identity:function(){let[e,i]=(0,t.useState)();return(0,t.useEffect)(()=>{i(r())},[]),e}()}}function n(){if(window?.heap&&"string"==typeof window.heap.userId)return window.heap.userId}function r(){if(window?.heap&&"string"==typeof window.heap.identity)return window.heap.identity}},7921976,e=>{"use strict";e.s(["isModifierPressed",()=>i]);var t=e.i(9024696);let i=e=>(0,t.isAppleDevice)()?e.metaKey:e.ctrlKey},2151290,e=>{e.v({container:"index-module__L77N5G__container",icon:"index-module__L77N5G__icon"})},9736132,e=>{"use strict";e.s(["FrameworkAvatar",()=>o,"FrameworkAvatarSkeleton",()=>l]);var t=e.i(751170),i=e.i(5255926),n=e.i(4585051),r=e.i(1138941),a=e.i(2151290),s=e.i(9722978);function o(e){let{project:i,size:o=24,isDisabled:c=!1}=e,d=(0,r.useFramework)(i);return d?(0,t.jsx)(n.Avatar,{className:(0,s.clsx)(a.default.icon,c&&"grayscale(100%) opacity-40"),size:o,src:d.logo,title:`${d.name}`}):(0,t.jsx)(l,{})}function l(e){let{size:n=24}=e;return(0,t.jsx)(i.Skeleton,{height:n,rounded:!0,style:{flexShrink:0},width:24})}},6998974,e=>{"use strict";e.s(["billingFeatureSupported",()=>i]);let t={"speedInsights.sampling":new Set([1]),"billing.proratedAddOns":new Set([2])};function i(e,i){let n;if(!e)return!1;if("plan"in e)n=e;else{if(!e.billing)return!1;n=e.billing}return t[i].has(n.billingVersion)}},7982125,e=>{e.v({fixedHeight:"index-module__aVxx7q__fixedHeight"})},4883159,e=>{e.v({description:"index-module__HZL5qG__description",item:"index-module__HZL5qG__item"})},3343142,8548383,3515598,9773598,7719396,e=>{"use strict";e.s(["createSurveyEntry",()=>s],3343142);var t=e.i(8042625),i=e.i(277234),n=e.i(4244280),r=e.i(8248823),a=e.i(4677774);let s=async e=>{let{data:s}=e,o=function(e){let t=new Map;return e.fields.forEach(e=>{switch(e.type){case"text":if(!e.value)return;t.set(e.id,e.value);break;case"select":{let i=[];e.options.forEach(e=>{if(e.selected){if(e.reveals)return void i.push(`${e.id}: ${e.reveals.value??""}`);i.push(e.id)}}),t.set(e.id,i.join("; "));break}default:(0,r.exhaustivenessCheck)(e)}}),{name:e.surveyName,person:{email:e.user?.email,id:e.user?.uid},...e.team?.id&&{team:{id:e.team.id}},form:Object.fromEntries(t),heapUserId:(0,a.getHeapUserId)(),heapIdentity:(0,a.getHeapUserIdentity)()}}(s);try{return await (0,i.fetchAPI)(`${n.API_SURVEYS}${(0,t.encode)({teamId:o.team?.id})}`,{method:"POST",body:JSON.stringify(o)})}catch(e){console.error(e)}};e.s(["ADD_ON_DESCRIPTIONS",()=>m,"ADD_ON_DISPLAY_NAMES",()=>u,"ADD_ON_IDS",()=>c,"ADD_ON_LEARN_MORE_LINKS",()=>f,"ADD_ON_PERMISSIONS",()=>y,"getAddOnDisplayName",()=>d],8548383);var o=e.i(751170),l=e.i(7557283);let c={passwordProtection:"advanced-deployment-protection",concurrentBuilds:"concurrent-builds",previewDeploymentSuffix:"preview-deployment-suffix",analytics:"speed-insights",monitoring:"monitoring",observabilityBase:"observability",webAnalytics:"web-analytics",saml:"saml-sso",hipaaAddon:"hipaa-baa"};function d(e,t){let i=u[e];return"string"==typeof i?i:t?i[t]??i.modal:i.fieldset}let u={passwordProtection:"Advanced Deployment Protection",concurrentBuilds:{fieldset:"Additional Concurrent Builds",modal:"Concurrent Builds"},previewDeploymentSuffix:"Preview Deployment Suffix",analytics:"Speed Insights",monitoring:"Monitoring",observabilityBase:{postConfirmConfiguration:"Configure Observability Plus",fieldset:"Observability Plus",modal:"Observability Plus"},webAnalytics:"Web Analytics Plus",saml:"SAML SSO",hipaaAddon:"HIPAA BAA"},m={passwordProtection:"Allows you to provide fine-grained control over who can access your deployments. Includes Password Protection, Deployment Protection Exceptions, and Private Production Deployments for all projects.",concurrentBuilds:"Determines how many builds you can run at the same time. By increasing the number ($50 per Slot, per month), you are increasing the level of concurrency (maximum 12).",previewDeploymentSuffix:(0,o.jsxs)(o.Fragment,{children:["Choose your own custom domain for Preview Deployments, in place of the default ",(0,o.jsx)("code",{children:".vercel.app"})," suffix."]}),analytics:"Detailed view of your website's performance metrics, facilitating informed decisions for its optimization.",monitoring:"Monitoring is a query editor that allows you to visualize errors, debug bandwidth issues, and monitor usage and web traffic for the past 30 days.",observabilityBase:"Gain comprehensive visibility into your application's health and performance.",webAnalytics:"Learn even more about your website's visitors a longer reporting window, more custom event properties and all advanced UI features.",saml:"Enable SAML Single Sign-On (SSO) for your team to provide secure, centralized authentication through your identity provider.",hipaaAddon:"Enter into a Business Associate Agreement (BAA) with Vercel to enable storing, processing, or transmitting Protected Health Information (PHI) in compliance with HIPAA."},f={passwordProtection:"/docs/security/deployment-protection#advanced-deployment-protection",concurrentBuilds:"/docs/deployments/concurrent-builds",previewDeploymentSuffix:"/docs/deployments/generated-urls#preview-deployment-suffix",analytics:"/docs/speed-insights",monitoring:"/docs/observability/monitoring",observabilityBase:"/docs/observability",webAnalytics:"/docs/analytics",saml:"/docs/saml",hipaaAddon:"/docs/security/shared-responsibility"},y={passwordProtection:l.Resource.PasswordProtection,concurrentBuilds:l.Resource.ConcurrentBuilds,previewDeploymentSuffix:l.Resource.PreviewDeploymentSuffix,analytics:l.Resource.SpeedInsights,monitoring:l.Resource.MonitoringSettings,observabilityBase:l.Resource.ObservabilityConfiguration,webAnalytics:l.Resource.WebAnalytics,saml:l.Resource.BillingInformation,hipaaAddon:l.Resource.BillingInformation};e.s(["DisableModalBody",()=>x],3515598);var p=e.i(9508212),g=e.i(1344973),h=e.i(6891161),b=e.i(7982125);function x(e){let{name:t,disable:i,closeModal:n,loading:r,customCopy:a,overrideContent:s,invoiceItem:l,newQuantity:c,includedQuantity:u}=e,m=c===(u??0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.Modal.Body,{className:"analytics"===t?b.default.fixedHeight:void 0,children:[(0,o.jsx)(p.Stack,{paddingBottom:4,children:(0,o.jsxs)(h.Modal.Title,{children:[m?"Turn off":"Decrease"," ",d(t)]})}),s??(0,o.jsx)(h.Modal.Subtitle,{children:(0,o.jsxs)(p.Stack,{as:"span",className:"my-4",gap:4,paddingTop:2,style:{margin:0},children:[m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.Text,{children:["Your team is currently utilizing"," ",(0,o.jsx)("b",{children:d(t)}),"."]}),(0,o.jsx)(g.Text,{children:a??"Disabling it will prevent your team members from accessing it in the dashboard and turn off any related functionality immediately."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.Text,{children:["By clicking ",(0,o.jsx)("b",{children:"Confirm"}),", your team will update from having"," ",(0,o.jsxs)("b",{children:[l.quantity," ",d(t,"configure")]})," ","to having"," ",(0,o.jsxs)("b",{children:[c," ",d(t,"configure")]}),"."]}),(0,o.jsx)(g.Text,{children:"This is effective immediately upon confirmation."})]}),(0,o.jsx)(g.Text,{children:"Are you sure you want to proceed?"})]})})]}),(0,o.jsxs)(h.Modal.Actions,{children:[(0,o.jsx)(h.Modal.Action,{fullWidth:!!s,onClick:()=>n("disable"),type:"secondary",children:"Cancel"}),s?null:(0,o.jsx)(h.Modal.Action,{buttonType:"button",loading:r,onClick:i,children:"Confirm"})]})]})}e.s(["ConfirmationInvoice",()=>w],9773598);var v=e.i(4099374),A=e.i(4905664),S=e.i(3738416),j=e.i(9358876),C=e.i(2466450),_=e.i(4883159);function w(e){let{lineItems:t,currency:i,nonProratedCustomCopy:n,customCopy:r,invoiceItem:a,name:s,addOnValue:l,prorate:c,billingPeriod:d,unit:u,includedQuantity:m}=e,f=(0,v.useMemo)(()=>{if("analytics"===s)return l.map(e=>({name:e.name,price:a.price}));if(m){let e=Math.max(l-a.quantity,0);if(e>0)return[...t,{name:`${e} additional ${(0,j.pluralize)(u??"item",e)}`,price:a.price*e}]}return t},[l,m,a,t,s,u]),{subscriptionQuantityDelta:y,immediateQuantityDelta:h}=(0,v.useMemo)(()=>{if("analytics"===s){let e=l.filter(e=>{let t=e.speedInsights??e.analytics,i=t?.disabledAt;return!i||!d||i<=d.start});return{subscriptionQuantityDelta:l.length,immediateQuantityDelta:e.length}}let e=1;return"number"==typeof l&&(e=l),{subscriptionQuantityDelta:e-a.quantity,immediateQuantityDelta:e-(a.highestQuantity??a.quantity)}},[l,d,a.highestQuantity,a.quantity,s]),b=y*a.price,x=(e=>{if(!c||!d)return e;let t=(0,A.differenceInDays)(d.end,d.start);return Math.round((0,A.differenceInDays)(d.end,function(e,t){let i=(0,S.startOfDay)(t),[n,r]=i.toLocaleDateString("en-US",{timeZone:e,timeZoneName:"longOffset",day:"2-digit",month:"2-digit",year:"numeric"}).split(", "),[a,s,o]=[(i.getMonth()+1).toString().padStart(2,"0"),i.getDate().toString().padStart(2,"0"),i.getFullYear()],l=r.replace("GMT","");return new Date(`${o}-${a}-${s}T00:00:00.00${l}`)}("America/Los_Angeles",new Date))/t*e)})(h*a.price),w=(0,v.useMemo)(()=>{if(!c)return(0,o.jsxs)(o.Fragment,{children:["By clicking ",(0,o.jsx)("b",{children:"Confirm and Pay"}),", the amount of"," ",(0,o.jsx)("b",{children:(0,C.formatCurrency)(b,i)})," will be added to your invoice",n??".",r]});let e=(0,o.jsxs)(o.Fragment,{children:["By clicking ",(0,o.jsx)("b",{children:"Confirm and Pay"}),", the amount of"," ",(0,o.jsx)("b",{children:(0,C.formatCurrency)(b,i)})," will be added to your subscription."]});return x>0?(0,o.jsxs)(o.Fragment,{children:[e," and your credit card will be charged"," ",(0,o.jsxs)("b",{children:[(0,C.formatCurrency)(x,i)," immediately"]})," for the remaining days in your billing cycle.",r]}):(0,o.jsxs)(o.Fragment,{children:[e," and there will be no immediate charge because you have already enabled this within your current billing cycle.",r]})},[i,n,r,x,c,b]);return(0,o.jsxs)(p.Stack,{gap:2,children:[(0,o.jsx)(g.Text,{className:_.default.description,children:w}),(0,o.jsxs)(p.Stack,{children:[f.map(e=>{let{name:t,price:n,removal:r=!1,priceDescriptor:s="/ month",shortDescription:l}=e;return(0,o.jsxs)(p.Stack,{align:"center",className:_.default.item,direction:"row",justify:"space-between",paddingY:4,children:[(0,o.jsxs)(p.Stack,{children:[(0,o.jsx)(g.Text,{className:r?"line-through":"",color:"gray-800",weight:500,children:t}),l?(0,o.jsx)(g.Text,{color:"gray-800",children:l}):null]}),(0,o.jsxs)(g.Text,{align:"right",className:r?"line-through":"",color:"gray-800",children:[(0,C.formatCurrency)("from_invoice_item"===n?a.price:n,i)," ",s]})]},t)}),(0,o.jsxs)(p.Stack,{direction:"row",justify:"space-between",paddingY:4,children:[(0,o.jsx)(g.Text,{weight:500,children:"Total"}),(0,o.jsxs)(g.Text,{weight:500,children:[(0,C.formatCurrency)(b,i)," / month"]})]})]})]})}e.s(["trackAddOnEvent",()=>O],7719396);var D=e.i(7151748),E=e.i(3870297);let O=e=>{let{eventName:t,addOn:i,source:n,step:r,value:a}=e,s=k[t],o=u[i];D.analytics.track(s,{addOn:"string"==typeof o?o:o.modal,source:n,step:r,value:a})},k={toggle_on:E.AnalyticsEvent.ADD_ONS_TOGGLE_ENABLE_CLICKED,toggle_off:E.AnalyticsEvent.ADD_ONS_TOGGLE_DISABLE_CLICKED,open_update_modal:E.AnalyticsEvent.ADD_ONS_OPEN_UPDATE_MODAL,learn_more:E.AnalyticsEvent.ADD_ONS_LEARN_MORE_CLICKED,exit_modal:E.AnalyticsEvent.ADD_ONS_MODAL_EXITED,change_step:E.AnalyticsEvent.ADD_ONS_MODAL_STEP_CHANGED,enable:E.AnalyticsEvent.ADD_ONS_ENABLED,update:E.AnalyticsEvent.ADD_ONS_UPDATED,disable:E.AnalyticsEvent.ADD_ONS_DISABLED,more_details:E.AnalyticsEvent.ADD_ONS_MORE_DETAILS_EXPANDED,project_list_cta:E.AnalyticsEvent.ADD_ONS_PROJECT_LIST_CTA_CLICKED}},364898,9477971,e=>{"use strict";e.s(["useTogglePaidAddOn",()=>w],364898);var t=e.i(751170),i=e.i(4099374),n=e.i(9508212),r=e.i(6891161),a=e.i(455575),s=e.i(7917902),o=e.i(1412448),l=e.i(2466450);e.i(1585898);var c=e.i(2066827),d=e.i(3343142),u=e.i(6998974),m=e.i(8548383),f=e.i(3515598),y=e.i(9773598);e.s(["ProjectList",()=>S],9477971);var p=e.i(2064047),g=e.i(1344973),h=e.i(57106),b=e.i(4450694),x=e.i(7719396),v=e.i(9736132),A=e.i(2151290);function S(e){let{addOn:i,description:r,ctaCopy:a,ctaHrefBase:s,team:o}=e,{data:l,isLoading:c}=(0,b.useSpeedInsightsEnabledProjects)(),d=l?.projects||[],u=o?.slug;return(0,t.jsxs)(n.Stack,{className:A.default.stack,gap:6,children:[(0,t.jsx)(g.Text,{children:r}),c||!u?(0,t.jsx)(j,{ctaCopy:a}):(0,t.jsx)(t.Fragment,{children:d.length>0?(0,t.jsx)(p.Entity.List,{className:A.default.container,children:d.map(e=>(0,t.jsxs)(p.Entity,{padding:2,children:[(0,t.jsx)(p.Entity.Content,{fill:!0,title:(0,t.jsxs)(n.Stack,{direction:"row",gap:2,paddingLeft:1,children:[(0,t.jsx)(v.FrameworkAvatar,{project:e}),(0,t.jsx)(g.Text,{weight:500,children:e.name})]})}),(0,t.jsx)(p.Entity.Content,{title:(0,t.jsx)(h.ButtonLink,{href:`/${u}/${e.name}${s||""}`,onClick:()=>(0,x.trackAddOnEvent)({eventName:"project_list_cta",source:"billing-settings-add-ons",value:`/${u}/${e.name}${s||""}`,addOn:i}),type:"secondary",children:a})})]},e.id))}):null})]})}function j(e){let{ctaCopy:i}=e;return(0,t.jsxs)(n.Stack,{gap:6,children:[(0,t.jsxs)(p.Entity.List,{children:[(0,t.jsxs)(p.Entity,{padding:2,children:[(0,t.jsx)(p.Entity.Content,{fill:!0,title:(0,t.jsx)(n.Stack,{direction:"row",gap:2,paddingLeft:1,children:(0,t.jsx)(v.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(p.Entity.Content,{title:(0,t.jsx)(h.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]}),(0,t.jsxs)(p.Entity,{padding:2,children:[(0,t.jsx)(p.Entity.Content,{fill:!0,title:(0,t.jsx)(n.Stack,{direction:"row",gap:2,paddingLeft:1,children:(0,t.jsx)(v.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(p.Entity.Content,{title:(0,t.jsx)(h.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]}),(0,t.jsxs)(p.Entity,{padding:2,children:[(0,t.jsx)(p.Entity.Content,{fill:!0,title:(0,t.jsx)(n.Stack,{direction:"row",gap:2,paddingLeft:1,children:(0,t.jsx)(v.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(p.Entity.Content,{title:(0,t.jsx)(h.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]})]}),(0,t.jsx)(h.ButtonLink,{disabled:!0,href:"/",type:"secondary",width:"100%"})]})}function C(e){let{instructions:i,children:r}=e;return(0,t.jsxs)(n.Stack,{gap:6,children:[i?(0,t.jsx)(g.Text,{children:i}):null,r]})}var _=e.i(7982125);function w(e){let{name:n,price:r,enable:c,disable:d,isEnabled:m,enableSteps:f,disableSteps:y,analyticsEventSource:p,update:g,currentAddOnValue:h,includedQuantity:b,unit:x,onStart:v,onSuccess:A,onClose:S}=e,j=(0,a.useToasts)(),{team:C,user:_,isLoading:w,mutate:E}=(0,s.useAccount)(),O=(0,u.billingFeatureSupported)(C,"billing.proratedAddOns"),k=(0,i.useMemo)(()=>{let e=C?.billing?.invoiceItems?.[n],t=e&&"highestQuantity"in e?e.highestQuantity:null;return"webAnalytics"!==n&&e?e:{price:r,quantity:e?.quantity??b??0,highestQuantity:t??b??0}},[b,n,r,C?.billing?.invoiceItems]),[I,P]=(0,i.useState)(null),{mutate:N}=(0,o.useUpcomingUsage)({enabled:!!I}),M=(0,i.useCallback)(()=>Promise.race([E(),N()]),[E,N]),T=m?.(C)??(k.quantity>(b??0)||!!C?.enabledInvoiceItems?.[n]?.enabled),L=C?.billing?.currency,B=(0,i.useMemo)(()=>(0,l.formatCurrency)(k.price,L),[k,L]),[F,R]=(0,i.useState)(h),$=(0,i.useCallback)(e=>{e&&R(e),P("enableOrUpdate")},[R,P]),H=(0,i.useCallback)(()=>{"analytics"!==n&&R(b??0),P("disable")},[R,P,b,n]),U=(0,i.useMemo)(()=>null!==I?(0,t.jsx)(D,{addOnValue:F,analyticsSource:p,currency:L,disable:d,disableSteps:y,enable:c,enableSteps:f,includedQuantity:b,invoiceItem:k,isEnabled:T,modalType:I,mutate:M,name:n,onClose:S,onStart:v,onSuccess:A,prorate:O,setAddOnValue:R,setModalType:P,team:C,toasts:j,unit:x,update:g}):null,[I,F,p,L,d,y,c,f,b,k,T,M,n,S,v,A,O,C,j,x,g]);return!w&&_&&C?{isEnabled:T,AddOnModal:U,openEnableOrUpdateModal:$,openDisableModal:H,formattedPrice:B}:{isEnabled:!1,formattedPrice:B}}function D(e){let{prorate:a,addOnValue:s,analyticsSource:o,currency:l,disable:u,enable:p,isEnabled:g,mutate:h,name:b,invoiceItem:v,setAddOnValue:A,modalType:j,setModalType:w,enableSteps:D,disableSteps:E,team:O,toasts:k,update:I,unit:P,includedQuantity:N,onStart:M,onSuccess:T,onClose:L}=e,B=(0,i.useMemo)(()=>"number"==typeof s?s:Array.isArray(s)?s.length:0,[s]),[F,R]=(0,i.useState)(!1),[$,H]=(0,i.useState)(function(e,t,i){if("enableOrUpdate"===t){if("postConfirmConfiguration"in e&&i)return"postConfirmConfiguration";if("configure"in e)return"configure"}else if("disable"===t)return"disable";return"confirm"}(D,j,g)),[U,G]=(0,i.useState)(null),q=(0,i.useCallback)(e=>{H(e),(0,x.trackAddOnEvent)({eventName:"change_step",addOn:b,source:o,step:e,value:s})},[s,o,b]),Q=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(s&&!g||"disable"===e)&&A(void 0),(0,x.trackAddOnEvent)({eventName:"exit_modal",addOn:b,source:o,step:e,value:s}),w(null),L?.(t)},[s,o,g,b,A,w,L]),V=(0,i.useCallback)(async()=>{if(O&&u){M?.();try{R(!0),await u({team:O,addOnValue:s}),await h(),T?.(),k.success(`Disabled ${(0,m.getAddOnDisplayName)(b,$)}.`),(0,x.trackAddOnEvent)({eventName:"disable",addOn:b,source:o})}catch(e){Q($),e instanceof Error?k.error(e.message):k.error(`We ran into an unexpected issue disabling ${(0,m.getAddOnDisplayName)(b,$)}. Please try again later.`)}finally{R(!1)}}},[O,Q,u,s,h,k,b,o,$,T,M]),z=(0,i.useCallback)(async()=>{if(O){M?.();try{return g&&I?(G(null),await I({team:O,addOnValue:s})):await p({team:O,addOnValue:s}),await h(),T?.(),k.success(`${g?"Updated":"Enabled"} ${(0,m.getAddOnDisplayName)(b,$)}.`),(0,x.trackAddOnEvent)({eventName:g&&I?"update":"enable",addOn:b,source:o,value:s}),!0}catch(e){g&&"previewDeploymentSuffix"===b?G(e instanceof Error?e.message:"Unexpected error updating Preview Deployment Suffix"):(Q($),e instanceof Error?k.error(e.message):k.error(`We ran into an unexpected issue enabling ${(0,m.getAddOnDisplayName)(b,$)}. Please try again later.`))}}},[O,g,I,s,p,h,k,b,o,Q,$,T,M]),K=(0,i.useCallback)(()=>{switch($){case"configure":Q("configure",!0);break;case"confirm":"configure"in D?q("configure"):Q("confirm",!0);break;case"postConfirmProjectList":Q("postConfirmProjectList",!0);break;case"postConfirmConfiguration":Q("postConfirmConfiguration",!0);break;default:w(null)}},[$,Q,D,w,q]),Y=(0,i.useMemo)(()=>{switch($){case"postConfirmConfiguration":case"configure":return"Cancel";case"confirm":if("configure"in D)return"Back";return"Cancel"}},[$,D]),W=(0,i.useCallback)(async()=>{switch($){case"configure":a&&"number"==typeof s&&s<v.quantity?q("disable"):q("confirm");break;case"confirm":R(!0),await z(),R(!1),"postConfirmProjectList"in D?q("postConfirmProjectList"):"postConfirmConfiguration"in D?q("postConfirmConfiguration"):Q("confirm");break;case"postConfirmProjectList":Q("postConfirmProjectList");break;case"postConfirmConfiguration":{if(!I){Q("postConfirmConfiguration");break}R(!0);let e=await z();R(!1),e&&Q("postConfirmConfiguration");break}case"disable":await V(),"exitSurvey"in E?q("exitSurvey"):Q("disable");break;case"exitSurvey":Q("exitSurvey");break;default:w(null)}},[$,a,s,v.quantity,z,D,Q,w,q,I,V,E]),Z=(0,i.useMemo)(()=>{switch($){case"configure":return"Next";case"confirm":return"Confirm and Pay";case"postConfirmProjectList":return"Close";case"postConfirmConfiguration":if(!I)return"Close";return"Save"}},[$,I]),X=(0,i.useMemo)(()=>{switch($){case"postConfirmConfiguration":case"configure":{let e=D[$]?.content;if(!e){q("confirm");break}let i=D[$]?.instructions||"";return(0,t.jsx)(C,{instructions:i,children:"function"==typeof e?(0,t.jsx)(e,{addOnValue:s,configureError:U,setAddOnValue:A}):e})}case"confirm":{let e=D[$];return(0,t.jsx)(y.ConfirmationInvoice,{addOnValue:s,billingPeriod:O?.billing?.period??null,currency:l,customCopy:e.customCopy,includedQuantity:N,invoiceItem:v,lineItems:e.lineItems,name:b,nonProratedCustomCopy:e.nonProratedCustomCopy,prorate:a,unit:P})}case"postConfirmProjectList":return(0,t.jsx)(S,{addOn:b,ctaCopy:D[$]?.ctaCopy,ctaHrefBase:D[$]?.ctaHrefBase,description:D[$]?.description,team:O})}},[$,b,D,O,s,U,A,q,l,N,v,a,P]),J=(0,i.useMemo)(()=>"configure"===$&&(!!("number"==typeof s&&s===v.quantity||Array.isArray(s)&&0===s.length)||!s),[s,v.quantity,$]),ee="postConfirmProjectList"===$||"postConfirmConfiguration"===$&&!I;return"exitSurvey"===$?(0,t.jsx)(c.SurveyModal,{active:!0,enableSkip:!0,onDismiss:()=>{Q($)},onSubmit:async e=>{await W(),e.hasResponses&&await (0,d.createSurveyEntry)({data:e})},setActive:()=>{},showThankYouToast:!1,submitOnSkip:!0,surveyInfo:E[$]}):(0,t.jsx)(r.Modal.Modal,{active:!0,allowOverflow:!0,onClickOutside:()=>Q($),style:{maxHeight:"540px"},width:"540px",children:"disable"===$?(0,t.jsx)(f.DisableModalBody,{closeModal:Q,customCopy:E[$].customDisableCopy,disable:W,includedQuantity:N,invoiceItem:v,loading:F,name:b,newQuantity:B,overrideContent:E[$].customDisableModal}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.Body,{className:"analytics"===b?_.default.fixedHeight:void 0,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Stack,{paddingBottom:4,children:(0,t.jsxs)(r.Modal.Title,{children:[(0,m.getAddOnDisplayName)(b,$),"postConfirmProjectList"===$?" Added":""]})}),X]})}),(0,t.jsxs)(r.Modal.Actions,{children:[ee?null:(0,t.jsx)(r.Modal.Action,{onClick:K,type:"secondary",children:Y}),(0,t.jsx)(r.Modal.Action,{disabled:J,fullWidth:ee,loading:F,onClick:W,children:Z})]})]})})}}]);

//# sourceMappingURL=beec78bbbc97ec59.js.map
//# debugId=9aef0e30-eee3-555b-8377-a255cf2aab11
