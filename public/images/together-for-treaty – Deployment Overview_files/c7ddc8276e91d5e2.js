
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f933b97e-8480-510b-a987-7d412537450e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5463680,6769352,e=>{"use strict";e.s([],5463680),e.i(6356390),e.i(15312);var t=e.i(7897830);e.i(39509),e.s(["CreateResourceButton",()=>d],6769352);var r=e.i(751170),n=e.i(2504781),i=e.i(5468328);e.i(3182268);var a=e.i(7849855);e.i(6887680);var o=e.i(6810699),s=e.i(1414602),l=e.i(5074599);function d(e){let{onSuccess:d,protocolType:u,label:g}=e,{projectSlug:m}=(0,a.useProjectAndTeamSlug)(),{data:p}=(0,o.useResourceList)({projectSlug:m,protocolType:u}),{openBrowseProducts:h}=(0,t.useResourceModals)({onSuccess:d}),{permissions:f,isLoading:v}=(0,s.useResourcePermissions)();return v?(0,r.jsx)(c,{}):p&&p.stores.length>0?(0,r.jsx)(i.Tooltip,{disableTriggers:f.create,text:(0,l.missingPermissionLabel)("create",u),children:(0,r.jsx)(n.Button,{disabled:!f.create,onClick:()=>h("browse-new"),type:"default",typeName:"button",children:g??(0,l.createResourceButtonLabel)(u)})}):(0,r.jsx)(c,{})}function c(){return(0,r.jsx)("div",{style:{height:40}})}},7037808,e=>{"use strict";e.s([]),e.i(2014455),e.i(8824424),e.i(7137779),e.i(5098510),e.i(2483721)},5377189,e=>{"use strict";e.s(["useStorePermissions",()=>i],5377189);var t=e.i(9830371),r=e.i(1717203);e.i(717172);var n=e.i(5993275);function i(e){let{storeType:i,teamSlug:a}=e,{fallback:o}=(0,t.useSWRConfig)(),{can:s,isLoading:l}=(0,r.default)(),d=a?o[i?`store:preload-data:${a}`:`store:list-preload-data:${a}`]:null;return{permissions:d?.permissions??(0,n.getStoreItemPermissions)({storeType:i,can:s,isLoading:l})}}},7812221,e=>{"use strict";e.s(["CONTACT_SALES_DASHBOARD_HREF",()=>t]);let t="/contact/sales?p=1"},1000921,e=>{"use strict";e.s(["ArrowCircleRight",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>')},8556491,e=>{"use strict";e.s(["AdditionalPermissionsRequiredModal",()=>i]);var t=e.i(751170),r=e.i(4723202),n=e.i(1235157);function i(e){let{role:i,team:a,actionLabel:o,dataTestId:s}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 md:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":s,children:(0,t.jsxs)("div",{className:"shadow-lg md:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:i?(0,n.getRoleName)(i):"Viewer"})," on the"," ",(0,t.jsx)("strong",{children:a?.name})," team, you don't have the required permission to ",o,"."]}),(0,t.jsx)("div",{children:"To access you need to request additional permissions."})]}),"VIEWER_FOR_PLUS"===i?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(r.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}},8587921,7873387,e=>{"use strict";e.s(["MEMBERS_LIMIT",()=>g,"default",()=>p,"useMembersForTeam",()=>h,"useMembersInfinite",()=>m],8587921);var t=e.i(4099374),r=e.i(9014736),n=e.i(406579),i=e.i(8042625),a=e.i(277234),o=e.i(4244280),s=e.i(9668517),l=e.i(5338940),d=e.i(1717203),c=e.i(7557283);e.s(["default",()=>u],7873387);let u=e=>(r,n,i)=>{let a=(0,t.useRef)(void 0),o=e(r,n,i);(0,t.useEffect)(()=>{void 0!==o.data&&(a.current=o.data)},[o.data]);let s=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...o,data:void 0===o.data?a.current:o.data,isLagging:void 0===o.data&&void 0!==a.current,resetLaggy:s}},g=20;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:p,role:h,eligibleMembersForProjectId:f,sort:v="date_desc",filterByUserIds:E,includeEntitlements:C,mfaStateFilter:x,includePermissionRequests:T}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:y,team:S}=(0,l.useTeam)(),{isLoading:R,can:P}=(0,d.default)(),I=!R&&P(c.Action.List,c.Resource.TeamFellowMembership),A=(0,s.useTeamSlug)(),w=p||g,M=(0,n.default)((e,t)=>{if(!y||!S||!I)return null;if(0===e)return`${o.API_TEAMS_MEMBERS_V3}/${S.id}/members${(0,i.encode)({sort:v,limit:w,search:m,role:h,eligibleMembersForProjectId:f,filterByUserIds:E,includeEntitlements:!!C||void 0,filterByMfaState:"all"!==x?x:void 0,includePermissionRequests:T})}`;let r=t?.pagination.nextPageCursor;return r?`${o.API_TEAMS_MEMBERS_V3}/${S.id}/members${(0,i.encode)({sort:v,limit:w,nextPageCursor:r,search:m,role:h,eligibleMembersForProjectId:f,includeEntitlements:!!C||void 0,filterByMfaState:"all"!==x?x:void 0,includePermissionRequests:T})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:j?[u]:[]});(0,t.useEffect)(()=>{j&&M.resetLaggy()},[A,j]);let _=(0,t.useMemo)(()=>M.data?.flatMap(e=>e.members.slice(0,w))||[],[M.data,w]),k=(0,t.useMemo)(()=>M.data?.flatMap(e=>e.permissionRequests||[])||[],[M.data]),O=!!M.data,L=O&&0===_.length,N=!!(O&&M.data&&M.size>M.data.length),$=!!(O&&M.data&&!M.data[M.data.length-1]?.pagination?.nextPageCursor);return(0,r.default)(()=>{if(!b||!M.data||$||!y||!S)return null;let e=M.data[M.data.length-1].pagination.nextPageCursor;return`${o.API_TEAMS_MEMBERS_V3}/${S.id}/members${(0,i.encode)({sort:v,limit:w,nextPageCursor:e,search:m,role:h,eligibleMembersForProjectId:f,includeEntitlements:C,filterByMfaState:"all"!==x?x:void 0,includePermissionRequests:T})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[M,{members:_,permissionRequests:k.filter(e=>null!=e),initialDataLoaded:O,isEmpty:L,loadMore:()=>M.setSize(M.size+1),isLoadingMore:N,isReachingEnd:$,isLagging:M.isLagging}]}function p(){let{sort:e="date_desc",limit:t=20,filterByUserIds:n,until:s,role:u,includeEntitlements:g,includePermissionRequests:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:f}=(0,l.useTeam)(),{isLoading:v,can:E}=(0,d.default)(),C=!v&&E(c.Action.List,c.Resource.TeamFellowMembership);return(0,r.default)(()=>h&&f&&C?`${o.API_TEAMS_MEMBERS_V3}/${f.id}/members${(0,i.encode)({sort:e,until:s,limit:t,role:u,filterByUserIds:n,includeEntitlements:g,includePermissionRequests:m})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),p)}function h(e){let{limit:t=20,until:n,role:s,sort:l="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,r.default)(()=>e?`${o.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,i.encode)({until:n,limit:t,role:s,sort:l})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),d)}},1235157,e=>{"use strict";e.s(["getRoleName",()=>r,"orderedTeamRoles",()=>t,"rolesMeta",()=>n,"v0Roles",()=>i,"v0RolesMeta",()=>a]);let t=["OWNER","MEMBER","DEVELOPER","SECURITY","VIEWER","VIEWER_FOR_PLUS","BILLING","CONTRIBUTOR"];function r(e){return n[e]?.label||e}let n={OWNER:{label:"Owner",description:"Full team access"},MEMBER:{label:"Member",description:"Create deployments, manage integrations, and domains"},DEVELOPER:{label:"Developer",description:"Create non-production deployments"},SECURITY:{label:"Security",description:"Manage security settings and secrets"},VIEWER:{label:"Viewer",description:"Read-only team access"},VIEWER_FOR_PLUS:{label:"Viewer",description:"View projects and collaborate on deployments"},BILLING:{label:"Billing",description:"Manage billing settings and invoices"},CONTRIBUTOR:{label:"Contributor",description:"Only has access to assigned projects"}},i=["V0Builder","V0Viewer","V0Chatter"],a={V0Builder:{key:"V0Builder",name:"Builder",description:"Can create and manage v0 projects."},V0Chatter:{key:"V0Chatter",name:"Chatter",description:"Can chat with v0 projects."},V0Viewer:{key:"V0Viewer",name:"Viewer",description:"Can view v0 projects."}}},4723202,e=>{"use strict";e.s(["RequestRoleButton",()=>m]);var t=e.i(751170),r=e.i(4099374),n=e.i(2504781),i=e.i(5255926),a=e.i(455575),o=e.i(5468328),s=e.i(277234),l=e.i(5338940),d=e.i(8587921),c=e.i(5140444),u=e.i(8248823),g=e.i(57106);function m(e){let{teamRole:s,variant:m="card"}=e,{team:h,isLoading:f}=(0,l.useTeam)(),{hasRequestedRole:v,mutate:E,isLoading:C}=function(e){let{user:t,isLoading:r}=(0,c.useUser)(),{data:n,mutate:i,isLoading:a}=(0,d.default)({includePermissionRequests:!0}),o=n?.permissionRequests;return{hasRequestedRole:o?.some(r=>r.uid===t?.uid&&r.requestedTeamRole.includes(e))??!1,mutate:i,isLoading:r||a}}(s),[x,T]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1);if(h?.membership?.role!=="VIEWER_FOR_PLUS")return null;let y=v||j;return(0,t.jsx)(i.Skeleton,{show:C||f,children:(0,t.jsx)(o.Tooltip,{disableTriggers:!y,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(g.Link,{href:`/${h?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(n.Button,{disabled:y,loading:x,className:"card"===m?"text-label-14 font-medium":void 0,onClick:async()=>{if(h?.id){T(!0);try{await p(h.id,s),E(),b(!0),a.toasts.success("Request for the Member role has been sent")}catch(e){a.toasts.error((0,u.errorToString)(e,"Failed to send request"))}finally{T(!1)}}},size:"card"===m?"small":void 0,type:"card"===m?"tertiary":void 0,children:y?"Access Requested":"Request Access"})})})}async function p(e,t){await (0,s.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}},1068837,e=>{"use strict";e.s(["AdditionalPermissionsRequiredModalClient",()=>i]);var t=e.i(751170),r=e.i(1717203),n=e.i(8556491);function i(e){let{actionLabel:i,permissionChecks:a}=e,{can:o,isLoading:s,accessInfo:l}=(0,r.default)(),d=a.every(e=>{let[t,r]=e;return o(t,r)});return s||d?null:(0,t.jsx)(n.AdditionalPermissionsRequiredModal,{role:l?.role,team:l?.team??void 0,actionLabel:i})}},5919007,e=>{"use strict";function t(e){if("number"==typeof e.resourceConfig?.edgeConfigSize)return 1e3*e.resourceConfig.edgeConfigSize;switch(e.billing?.plan){case"enterprise":return 512e3;case"pro":return 64e3;default:return 8e3}}function r(e){if("number"==typeof e.resourceConfig?.edgeConfigs)return e.resourceConfig.edgeConfigs;switch(e.billing?.plan){case"enterprise":return 10;case"pro":return"trialing"===e.billing.status?1:3;default:return 1}}e.s(["EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH",()=>n,"getMaxEdgeConfigs",()=>r,"getSizeLimitInBytes",()=>t]);let n=52},2843591,e=>{"use strict";e.s(["mapEdgeConfigToStoreType",()=>f,"useEdgeConfig",()=>u,"useEdgeConfigBackup",()=>h,"useEdgeConfigBackupsInfinite",()=>p,"useEdgeConfigItems",()=>g,"useEdgeConfigSchema",()=>d,"useEdgeConfigTokens",()=>m,"useEdgeConfigs",()=>c]);var t=e.i(9014736),r=e.i(4099374),n=e.i(406579),i=e.i(8042625),a=e.i(277234),o=e.i(4244280),s=e.i(5338940);e.i(6887680);var l=e.i(6810699);function d(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/schema${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function c(){let e=(0,l.useResourceList)({protocolType:"storage"});return{data:(0,r.useMemo)(()=>e.data?.stores.filter(e=>"edge-config"===e.type),[e.data?.stores])}}function u(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function g(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/items${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function m(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/tokens${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function p(e,t,r){let{isReady:l,team:d}=(0,s.useTeam)();return(0,n.default)((t,n)=>{if(!e||!l||n&&!n.pagination.hasNext)return null;let a={teamId:d?.id,metadata:r?.metadata?"true":void 0,limit:r?.limit||25,next:n?.pagination.next};0===t&&(a.limit+=1);let s=`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups`;return`${s}${(0,i.encode)(a)}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateFirstPage:!1,revalidateOnFocus:!1,...t})}function h(e,r,n){let{isReady:l,team:d}=(0,s.useTeam)();return(0,t.default)(()=>e&&r&&"current"!==r&&l?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups/${encodeURIComponent(r)}${(0,i.encode)({teamId:d?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)}function f(e){let{edgeConfig:t,project:r}=e;return{...t,type:"edge-config",projectsMetadata:r?[{projectId:r.id,name:r.name,framework:r.framework,id:"",environments:[],environmentVariables:[],envVarPrefix:null}]:[],name:t.slug,status:"available",totalConnectedProjects:+!!r}}},8564753,e=>{"use strict";e.s([]),e.i(9584471)},4348614,e=>{e.v({expanderWrapper:"store-advanced-options-expander-module__QIqk3G__expanderWrapper",expanderWrapperExpanded:"store-advanced-options-expander-module__QIqk3G__expanderWrapperExpanded"})},1261558,e=>{"use strict";e.s(["StoreAdvancedOptionsExpander",()=>s]);var t=e.i(751170),r=e.i(9508212),n=e.i(1344973),i=e.i(9722978);e.i(8703064);var a=e.i(7507521),o=e.i(4348614);function s(e){let{children:s,isExpandedDefault:l}=e;return(0,t.jsx)(a.Expander,{className:(0,i.clsx)(o.default.expanderWrapper),expandedClassName:o.default.expanderWrapperExpanded,isExpandedDefault:l,title:(0,t.jsxs)(r.Stack,{direction:"row",gap:1,paddingX:3,paddingY:2,children:[(0,t.jsx)(a.ExpanderTrigger,{}),(0,t.jsx)(n.Text,{color:"gray-900",size:13,weight:500,children:"Advanced Options"})]}),children:(0,t.jsx)(r.Stack,{paddingX:3,paddingY:2,children:s})})}},8206804,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(751170);let r=function(e){let{margin:r=50,className:n}=e;return(0,t.jsx)("hr",{className:n,style:{border:"0",borderTop:"1px solid var(--accents-2)",margin:"number"==typeof r?`${r}px 0`:`${r} 0`}})}},9512272,e=>{"use strict";e.s(["addEncryptedEnvs",()=>o,"addEnvs",()=>s,"isSystemEnv",()=>a,"legacyRemoveEnv",()=>l]);var t=e.i(8042625),r=e.i(277234),n=e.i(4244280),i=e.i(5927860);function a(e){return e.startsWith("VERCEL_")}function o(e){return e.map(e=>{let t,r=e.type;return void 0===r&&(r=a(e.name)?i.EnvType.System:i.EnvType.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:r,key:e.name,value:r===i.EnvType.System?e.name:e.value,target:t??[i.EnvTarget.Production,i.EnvTarget.Preview,i.EnvTarget.Development],gitBranch:e.gitBranch,comment:e.comment,customEnvironmentIds:e.customEnvironmentIds}})}async function s(e,i,a){let s=o(i);return(0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v10")}/${e}/env${(0,t.encode)({teamId:a})}`,{method:"POST",body:JSON.stringify(s),throwOnHTTPError:!0})}async function l(e,i,a){await (0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v4")}/${e}/env/${i.key}${(0,t.encode)({teamId:a,target:i.target})}`,{method:"DELETE",throwOnHTTPError:!0})}},4429570,e=>{"use strict";e.s(["ConnectEdgeConfigModal",()=>y,"CreateEdgeConfigConnectionModalStep",()=>b],4429570);var t=e.i(751170),r=e.i(9508212),n=e.i(6891161),i=e.i(455575),a=e.i(4030453),o=e.i(4099374),s=e.i(8042625),l=e.i(277234),d=e.i(4244280),c=e.i(5927860),u=e.i(7917902),g=e.i(4422059),m=e.i(4004502),p=e.i(5919007),h=e.i(9512272);e.i(7037808);var f=e.i(8824424);e.i(8564753);var v=e.i(9584471),E=e.i(3500331),C=e.i(8206804),x=e.i(2014455),T=e.i(1261558);function j(e){let{advancedOptions:n,tokenLabelPlaceholder:i,onAdvancedOptionsChange:a,isLoading:o}=e;return(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsx)(x.ResourceEnvironmentSelector,{environments:n.environments,error:n.error?.environments,onChange:e=>a({...n,environments:e,error:{...n.error,environments:void 0}}),resourceTitle:"store"}),(0,t.jsx)(T.StoreAdvancedOptionsExpander,{isExpandedDefault:!!n.error,children:(0,t.jsxs)(r.Stack,{gap:3,children:[(0,t.jsx)(r.Stack,{gap:3,children:(0,t.jsx)(E.Input,{"aria-label":"Environment Variable",disabled:o,error:n.error?.envVarName,label:"Environment Variable",onChange:e=>a({...n,envVarName:e.currentTarget.value,error:{...n.error,envVarName:void 0}}),placeholder:"EDGE_CONFIG",value:n.envVarName,width:"100%"})}),(0,t.jsx)(C.default,{margin:0}),(0,t.jsx)(r.Stack,{gap:3,children:(0,t.jsx)(E.Input,{"aria-label":"Token label",disabled:o,label:"Token label",maxLength:p.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH,onChange:e=>a({...n,tokenName:e.currentTarget.value}),placeholder:i,value:n.tokenName,width:"100%"})})]})})]})}function b(e){let{backOrCancelLabel:f,edgeConfig:E,title:C,subtitle:x,ProjectSelector:T,onClickOutside:b,onConnectionCreated:y,onBack:S,project:R}=e,{mutateByProtocol:P}=(0,v.useMutateResourceCache)(),[I,A]=(0,o.useState)({envVarName:"",tokenName:"",environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...R?.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}}),[w,M]=(0,o.useState)(!1),[_,k]=(0,o.useState)(null),{team:O}=(0,u.useAccount)(),L=(0,g.usePrevious)(R);(0,o.useEffect)(()=>{null!==I.error&&(!R||L&&R.id!==L.id)&&A({...I,error:null}),R&&(null===L||L&&R.id!==L.id)&&A({...I,environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...R.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}})},[I,L,R]);let N=(0,o.useMemo)(()=>{if(!R)return"";let e=R.name.slice(0,p.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH-6);return`${e.replace(/-*$/g,"")}-token`},[R]),$=I.tokenName||N,B=I.envVarName||"EDGE_CONFIG",V=(0,o.useCallback)(async e=>{if(e.preventDefault(),!E||w||!R)return;let t=[c.EnvTarget.Production,c.EnvTarget.Preview,c.EnvTarget.Development,...R.customEnvironments?.map(e=>e.slug)||[]].filter(e=>I.environments[e]);try{if(k(null),M(!0),A({...I,error:null}),0===t.length){A({...I,error:{environments:"Select at least one Environment for your Environment Variable"}}),M(!1);return}if(R.env&&R.env.some(e=>e.key===B&&("string"==typeof e.target?t.includes(e.target):e.target.some(e=>t.includes(e))))){A({...I,error:{envVarName:1===t.length?`This project already has an environment variable called ${B} in the chosen environment.`:`This project already has an environment variable called ${B} in one of the chosen environments.`}}),M(!1);return}let e=await (0,l.fetchAPI)(`${d.API_EDGE_CONFIG}/${E.id}/token${(0,s.encode)({teamId:O?.id})}`,{method:"POST",throwOnHTTPError:!0,body:{label:$}});await (0,h.addEnvs)(R.id,[{name:B,value:`https://edge-config.vercel.com/${E.id}?token=${e.token}`,type:c.EnvType.Encrypted,target:t.filter(e=>(0,c.isSystemEnvTarget)(e)),customEnvironmentIds:t.filter(e=>!(0,c.isSystemEnvTarget)(e)).map(e=>{let t=R.customEnvironments?.find(t=>t.slug===e);return t?.id}).filter(e=>void 0!==e)}],O?.id),await y(),b(),i.toasts.success({text:`Connected Project ${R.name} to Edge Config ${E.slug}`,key:E.slug}),await P("storage")}catch(e){if(e instanceof Error)k(e);else throw e}finally{M(!1)}},[E,w,R,I,O?.id,$,B,y,b,P]);return(0,t.jsxs)("form",{onSubmit:e=>void V(e),children:[(0,t.jsx)(n.Modal.Body,{children:(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsxs)(r.Stack,{gap:2,children:[(0,t.jsx)(n.Modal.Title,{center:!0,children:C}),x?(0,t.jsx)(n.Modal.Subtitle,{children:x}):null]}),(0,t.jsx)(n.Modal.Inset,{last:!0,children:(0,t.jsxs)(r.Stack,{gap:6,children:[T,(0,t.jsx)(j,{advancedOptions:I,isLoading:w,onAdvancedOptionsChange:A,tokenLabelPlaceholder:R?N:""}),_?(0,t.jsx)(a.Error,{children:_.message}):null]})})]})}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:S,type:"secondary",children:f}),(0,t.jsx)(n.Modal.Action,{buttonType:"submit","data-testid":(0,m.tid)("connect-edge-config-modal","connect-button"),disabled:!R||""===B.trim()||""===$.trim(),loading:w,children:"Connect"})]})]})}function y(e){let{active:r,edgeConfig:i,onClickOutside:a,onConnectionCreated:s,onAnimationDone:l}=e,[d,c]=(0,o.useState)(null),{team:g,user:m}=(0,u.useAccount)(),p=g?g.slug:m?.username;return(0,t.jsx)(n.Modal.Modal,{active:r,allowOverflow:!0,onAnimationDone:l,onClickOutside:a,width:540,children:(0,t.jsx)(b,{ProjectSelector:(0,t.jsx)(f.ResourceProjectSelector,{account:p,allowSelectConnectedProjects:!0,includedInConnectedProjects:e=>e?.env?.some(e=>e.edgeConfigId===i?.id)??!1,onProjectSelected:e=>{c(e)},resourceTitle:"store",selectedProject:d}),backOrCancelLabel:"Cancel",edgeConfig:i,onBack:a,onClickOutside:a,onConnectionCreated:s,project:d,title:"Connect Project"})})}},1758334,e=>{"use strict";e.s(["MAX_STORE_NAME_LENGTH",()=>i,"getStoreNameLengthByType",()=>a,"useStoreName",()=>o]);var t=e.i(4099374);e.i(6887680);var r=e.i(6810699),n=e.i(3798983);let i=32;function a(e){return"edge-config"===e?64:i}let o=e=>{let{storeType:i,storeId:o,...s}=e,l=(0,t.useMemo)(()=>{if("projectName"in s&&s.projectName){let e=n.storeDefaultNameSuffix[i];return[s.projectName.replaceAll("_","-").slice(0,a(i)-e.length),e].join("")}return"storeName"in s?s.storeName??"":""},[s,i]),[d,c]=(0,t.useState)(),[u,g]=(0,t.useState)(),{isNameTaken:m}=(0,r.useResourceList)({protocolType:"storage"});return{storeNameError:d,name:u??l,setName:(0,t.useCallback)(e=>{let t=e.trim(),r=a(i),n="edge-config"===i?1:5;c(void 0),g(t),t.length<n?c(`The name must be at least ${n} characters.`):t.length>r?c(`The name must be at most ${r} characters.`):/^[a-zA-Z0-9_-\s]*$/.test(t)?m({name:t,storeType:i,storeId:o})&&c("This name is already in use by another store"):c("The name can only contain letters, numbers, and the following characters: _ - ")},[m,i,o]),touched:!!u&&u!==l}}},562291,e=>{"use strict";e.s(["BrowseStoresCards",()=>g],562291);var t=e.i(751170),r=e.i(9508212),n=e.i(8522580),i=e.i(1717203),a=e.i(7557283),o=e.i(57106);e.i(6887680);var s=e.i(6810699);e.i(8703064);var l=e.i(6798946),d=e.i(4981413),c=e.i(3798983),u=e.i(3703009);function g(e){let{onClickStore:g,storeTypeWithProduct:m,showCreateButton:p=!1}=e,{data:h}=(0,s.useResourceList)({protocolType:"storage"}),{can:f,isLoading:v}=(0,i.default)(),E={"edge-config":f(a.Action.Create,a.Resource.EdgeConfig),blob:f(a.Action.Create,a.Resource.Blob),integration:f(a.Action.Create,a.Resource.Integration)};return(0,t.jsxs)(r.Stack,{gap:4,children:[(0,t.jsxs)(r.Stack,{gap:2,children:[["edge-config","blob"].map(e=>(0,t.jsx)(l.CreateResourceCard,{Icon:(0,t.jsx)(u.StoreIcon,{size:"large",type:e,useColor:!0}),description:c.storeDescription[e],isDisabled:v||!E[e],isSelected:m?.type===e,name:c.storeTitle[e],onClick:()=>{g({type:e})},showCreateButton:p,tooltip:{text:`You need additional permission to create a ${c.storeTitleFull[e]}.`,isEnabled:!E[e]}},e)),(0,t.jsxs)(n.Note,{fill:!0,type:"secondary",children:["KV and Postgres are now available through the Marketplace."," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/storage",target:"_blank",children:"Learn more"})]})]}),(0,t.jsx)(d.BrowseProducts,{onClickProduct:g,protocolType:"storage",selectedProduct:m,showCreateButton:p})]})}},3322174,e=>{"use strict";e.s(["ConnectStoreSwitch",()=>m,"ConnectStoreSwitchWithoutProject",()=>p]);var t=e.i(751170),r=e.i(4099374),n=e.i(9508212),i=e.i(1344973),a=e.i(6060673);e.i(7037808);var o=e.i(7137779);e.i(5463680);var s=e.i(39509);e.i(3182268);var l=e.i(7849855);e.i(2886798);var d=e.i(3183079),c=e.i(4429570),u=e.i(3703009),g=e.i(2782729);function m(e){let{store:m}=e,{projectSlug:p}=(0,l.useProjectSlug)(),h=(0,a.useProject)(p),{onBack:f,onClose:v,state:E,onResourceUpdated:C}=(0,d.useResourceModalsContext)(),{type:x}=m,T=(0,r.useCallback)(()=>{C({resource:m,isConnected:!0})},[m,C]);if(E.type!==s.ResourceModalsActionTypes.CreateEnvs)return null;switch(x){case"edge-config":return(0,t.jsx)(c.CreateEdgeConfigConnectionModalStep,{backOrCancelLabel:E.backOrCancelLabel,edgeConfig:{id:m.id,slug:m.name},onBack:f,onClickOutside:v,onConnectionCreated:T,project:h.data,subtitle:(0,t.jsxs)(n.Stack,{align:"center",direction:"row",gap:1.5,justify:"center",children:[(0,t.jsx)(i.Text,{color:"gray-900",children:"Connect to"}),(0,t.jsx)(u.StoreIconOrAvatar,{icon:(0,g.getStoreIcon)(m),size:"small",type:m.type,useColor:!0}),(0,t.jsx)(i.Text,{color:"gray-1000",weight:500,children:m.name})]}),title:`Configure ${h.data?.name??""}`});case"blob":case"integration":return(0,t.jsx)(o.CreateResourceConnectionModalStep,{backOrCancelLabel:E.backOrCancelLabel,onBack:f,onClickOutside:v,onConnectionCreated:T,project:h.data,resourceId:m.id,store:m,subtitle:(0,t.jsxs)(n.Stack,{align:"center",direction:"row",gap:1.5,justify:"center",children:[(0,t.jsx)(i.Text,{color:"gray-900",children:"Connect to"}),(0,t.jsx)(u.StoreIconOrAvatar,{icon:(0,g.getStoreIcon)(m),size:"small",type:m.type,useColor:!0}),(0,t.jsx)(i.Text,{color:"gray-1000",weight:500,children:m.name})]}),title:`Configure ${h.data?.name??""}`});default:return null}}function p(e){let{active:r,store:n,key:i}=e,{onClose:a,onAnimationDone:s,onResourceUpdated:l}=(0,d.useResourceModalsContext)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.ConnectEdgeConfigModal,{active:"edge-config"===n.type&&r,edgeConfig:n,onAnimationDone:s,onClickOutside:a,onConnectionCreated:a},i),(0,t.jsx)(o.CreateResourceConnectionModal,{active:"edge-config"!==n.type&&r,onAnimationDone:s,onClickOutside:a,onConnectionCreated:()=>l({resource:n,isConnected:!0}),resourceId:n.id,store:n},i)]})}},4174946,e=>{"use strict";e.s(["StoreListLayout",()=>R],4174946);var t=e.i(751170),r=e.i(4099374),n=e.i(5155984),i=e.i(9508212),a=e.i(1344973),o=e.i(57106),s=e.i(1000921),l=e.i(2652226),d=e.i(3798983),c=e.i(5551580);e.i(2886798);var u=e.i(7512194),g=e.i(2782729),m=e.i(8922739),p=e.i(4004502),h=e.i(2504781),f=e.i(5468328),v=e.i(5377189);e.i(3182268);var E=e.i(7849855);e.i(6887680);var C=e.i(6810699);e.i(5463680);var x=e.i(7897830),T=e.i(9906957);function j(){let{handleResourceModalSucceeded:e}=(0,T.usePushToStorePath)(),{projectSlug:r,teamSlug:n}=(0,E.useProjectAndTeamSlug)(),{data:i}=(0,C.useResourceList)({projectSlug:r,protocolType:"storage"}),{openBrowseProducts:a}=(0,x.useResourceModals)({onSuccess:e}),{permissions:o}=(0,v.useStorePermissions)({teamSlug:n});return o.isLoading?(0,t.jsx)(b,{}):i&&i.stores.length>0?(0,t.jsx)(f.Tooltip,{disableTriggers:o.createAnyStore,text:"You need additional permissions to create a Database.",children:(0,t.jsx)(h.Button,{"data-testid":(0,p.tid)("storage","create-resource-button"),disabled:!o.createAnyStore,onClick:()=>a("browse-new"),type:"default",typeName:"button",children:"Create Database"})}):(0,t.jsx)(b,{})}function b(){return(0,t.jsx)("div",{style:{height:40}})}var y=e.i(1068837),S=e.i(7557283);function R(e){let{teamSlug:i,project:a,children:o}=e;return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(P,{buttons:null,projectSlug:a,teamSlug:i,children:(0,t.jsx)(c.ResourceListPlaceholder,{protocolType:"storage"})}),children:(0,t.jsx)(n.CompatRouterAllowedWithoutSuspense,{children:(0,t.jsx)(u.ResourceModalsProviderBase,{Modal:(0,t.jsx)(m.CreateStoreModal,{}),protocolType:"storage",children:(0,t.jsx)(P,{buttons:(0,t.jsx)(j,{}),projectSlug:a,teamSlug:i,children:o})})})})}function P(e){let{teamSlug:r,projectSlug:n,children:c,buttons:u}=e,m=(0,g.hasProjectSlug)(n);return(0,t.jsx)(l.default,{buttons:u,title:(0,t.jsxs)(i.Stack,{gap:4,children:[(0,t.jsx)(i.Stack,{direction:"row",gap:3,children:(0,t.jsx)(a.Text,{as:"h1",size:32,weight:500,children:"Storage"})}),m?(0,t.jsxs)(a.Text,{color:"gray-900",children:["Read and write directly to databases and stores connected to this project."," ",(0,t.jsx)(o.Link,{href:r?`/${r}/~/stores`:"/dashboard/stores",type:"highlight",children:(0,t.jsxs)(i.Stack,{align:"center",as:"span",direction:"row",gap:1,style:{display:"inline-flex"},children:[(0,t.jsx)("span",{children:"View All Databases"}),(0,t.jsx)(s.ArrowCircleRight,{})]})})]}):(0,t.jsxs)(a.Text,{color:"gray-900",children:["Read and write directly to databases and stores from your projects."," ",(0,t.jsx)(o.Link,{external:!0,href:d.docs.createDatabase,type:"highlight",children:"Learn more"})]})]}),children:(0,t.jsxs)(i.Stack,{gap:4,children:[(0,t.jsx)(y.AdditionalPermissionsRequiredModalClient,{actionLabel:"view Storage",permissionChecks:[[S.Action.Read,S.Resource.EdgeConfig],[S.Action.Read,S.Resource.Blob]]}),c]})})}}]);

//# sourceMappingURL=7cbb6b872fae7959.js.map
//# debugId=f933b97e-8480-510b-a987-7d412537450e
