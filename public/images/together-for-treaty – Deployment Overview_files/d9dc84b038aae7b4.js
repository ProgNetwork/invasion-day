
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c8626e04-7597-59d6-a483-acf88931392d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5254778,4049612,e=>{"use strict";e.s(["DefaultValuesSetter",()=>h,"WebAnalyticsContextProvider",()=>p,"useWebAnalyticsContext",()=>m],5254778);var t=e.i(751170),a=e.i(4099374);e.s(["useWebAnalyticsStatus",()=>d],4049612);var s=e.i(7432042),i=e.i(9014736),r=e.i(8042625),n=e.i(277234),l=e.i(7917902),o=e.i(1138941),c=e.i(6060673);function d(){let{team:e}=(0,l.useAccount)(),{data:t}=(0,c.useProject)((0,o.useProjectIdOrName)(),{apiVersion:"v13"}),{isFeatureEnabled:d,hasData:u}=m(),p=!!(d&&t?.microfrontends?.enabled&&!t.microfrontends.isDefaultApp&&!t.microfrontends.routeObservabilityToThisProject),{data:h,mutate:x,isLoading:y}=(0,i.default)(t&&`/api/v1/web/insights/enabled${(0,r.encode)({projectId:t.id,teamId:e?.id})}`,n.fetchAPI,{refreshInterval:e=>e?.isEnabled&&!e.hasData?(0,s.default)("5s"):0});return{isEnabled:h?.isEnabled??d,hasData:h?.hasData??u,isLoading:y||!h,enabledAt:h?.enabledAt??0,showPlaceholder:!d||p,revalidateStatus:(0,a.useCallback)(()=>{x()},[x])}}let u=(0,a.createContext)({setDefaultValues:()=>{},upgradeModalSource:null,setUpgradeModalSource:()=>{},isLoadingDefaults:!0,isFeatureEnabled:!1,hasData:!1,microfrontendsDataInDefaultApp:!1,enableBreakdown:!1});function p(e){let{children:s}=e,[i,r]=(0,a.useState)({hasData:!0,isLoadingDefaults:!0,isFeatureEnabled:!0,microfrontendsDataInDefaultApp:!1}),[n,l]=(0,a.useState)(null),o=(0,a.useMemo)(()=>({setDefaultValues:r,setUpgradeModalSource:l,upgradeModalSource:n,...i}),[n,i]);return(0,t.jsx)(u.Provider,{value:o,children:s})}function m(){return(0,a.useContext)(u)}function h(e){let{defaultValues:t}=e,s=d(),i=s.isLoading||s.hasData,{setDefaultValues:r}=m();return(0,a.useEffect)(()=>{r({...t,hasData:i})},[t,i,r]),null}u.displayName="WebAnalyticsContext"},9022191,e=>{"use strict";e.s(["useProject",()=>s]);var t=e.i(215852),a=e.i(7952834);function s(e,s){let{latestDeployments:i=0,activeBranches:r,config:n,apiVersion:l="v10",fetchOptions:o,fetchParams:c={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=(0,a.getProjectKey)(s,{teamId:e,apiVersion:l,latestDeployments:i,activeBranches:r,fetchParams:c});return(0,t.useIsomorphicSuspenseSWR)(d,(e,t)=>t(e,{throwOnScopeAuthError:o?.throwOnScopeAuthError}),n)}},3614209,e=>{"use strict";e.s(["ContextLoader",()=>n]);var t=e.i(751170),a=e.i(9022191),s=e.i(85322),i=e.i(3679047),r=e.i(5254778);function n(){let e=(0,i.useParams)()||{teamSlug:"",project:""},{data:n}=(0,a.useProject)(e.teamSlug,e.project),l=(0,s.isFeatureEnabled)(n.webAnalytics),o=!!(l&&n.microfrontends?.enabled&&!n.microfrontends.isDefaultApp&&!n.microfrontends.routeObservabilityToThisProject);return(0,t.jsx)(r.DefaultValuesSetter,{defaultValues:{isLoadingDefaults:!1,isFeatureEnabled:l,microfrontendsDataInDefaultApp:o}})}},6024373,e=>{"use strict";e.s(["DynamicPageWrapper",()=>j],6024373);var t=e.i(751170),a=e.i(4099374),s=e.i(9722978),i=e.i(60582),r=e.i(5254778),n=e.i(5838627),l=e.i(57106),o=e.i(4575960),c=e.i(6292193),d=e.i(3969752),u=e.i(4049612);let p=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { Analytics } from "@vercel/analytics/next"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your app's layout."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { Analytics } from "@vercel/analytics/remix"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your root file."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { Analytics } from "@vercel/analytics/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your main app file."]})}},{id:"sveltekit",name:"Sveltekit",addStep:{snippet:"import { injectAnalytics } from '@vercel/analytics/sveltekit'",title:"Add injectAnalytics()",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"injectAnalytics()"})," function in your main layout file."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:"import { Analytics } from '@vercel/analytics/nuxt'",title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Vue component into main component."]})}},{id:"astro",name:"Astro",addStep:{snippet:"import Analytics from '@vercel/analytics/astro'",title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Astro component into your base layout."]})}},{id:"other",name:"Other",addStep:{snippet:'import { inject } from "@vercel/analytics"',title:"Call inject()",description:(0,t.jsxs)(t.Fragment,{children:["Import the ",(0,t.jsx)(c.InlineCode,{children:"inject()"})," function and call it in your app's layout or main component."]})}}].map(e=>{let{id:a,name:s,addStep:i}=e;return{id:a,name:s,icon:(0,t.jsx)("div",{}),steps:function(e){let{snippet:a,title:s,description:i}=e;return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/analytics in your existing project."}),(0,t.jsx)(d.DependencySnippet,{dependency:"@vercel/analytics"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:s}),content:(0,t.jsxs)("span",{children:[i,(0,t.jsx)(n.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:a,children:a}),(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/analytics/quickstart#add-the-analytics-component-to-your-app",variant:"highlight",children:"documentation"})]})]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your page views."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(i)}});function m(e){let{hasData:a,isEnabled:s}=e,{isEnabled:i,isLoading:r,hasData:n}=(0,u.useWebAnalyticsStatus)();return(0,t.jsx)(o.Onboarding,{description:"To start counting visitors and page views, follow these steps.",frameworks:p,title:"Get Started",visible:r?s&&!a:i&&!n})}var h=e.i(8522580),x=e.i(5255926),y=e.i(9307255),g=e.i(9148191);function f(e){let{hasData:a}=e,{defaultProjectName:s,defaultProjectBaseUrl:i,groupName:r,isLoading:n}=(0,g.useMicrofrontendsProjectInfo)(),{getProjectUrl:o}=(0,y.useDashboardNavigation)();return n?(0,t.jsx)(v,{children:(0,t.jsx)(x.Skeleton,{height:124,width:512})}):(0,t.jsxs)(v,{children:[(0,t.jsxs)("span",{className:"inline-block",children:[(0,t.jsx)("span",{className:"font-medium",children:"Web Analytics"})," is enabled for this project, ",a?"but data is being":"and data will be"," sent to"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/analytics`,children:s}),", the default app for the"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/settings/microfrontends`,children:r})," ","microfrontends group.",(0,t.jsx)("br",{}),"To send data to this project instead, visit the"," ",(0,t.jsx)(l.Link,{className:"underline",href:o("/settings/microfrontends#observability-routing"),children:"microfrontends settings"}),"."]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(l.ButtonLink,{href:`${i}/analytics`,children:"View Default App"}),(0,t.jsx)(l.ButtonLink,{href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",tab:!0,type:"secondary",children:"Learn More"})]}),a?null:(0,t.jsxs)(h.Note,{type:"warning",children:["You still need to install the package in your project.",(0,t.jsx)("br",{})]})]})}function v(e){let{children:a}=e;return(0,t.jsx)("div",{className:"bg-background-100 border rounded-lg py-10",children:(0,t.jsx)("span",{className:"flex flex-col items-center text-center gap-4 mx-auto max-w-[360px] md:max-w-[512px]",children:a})})}function j(e){let{children:n}=e,{hasData:l,isFeatureEnabled:o,microfrontendsDataInDefaultApp:c}=(0,r.useWebAnalyticsContext)();return(0,t.jsxs)("div",{className:(0,s.clsx)("container",{"-mt-6":!i.IS_DASH,"mt-8":i.IS_DASH,"max-h-[880px] overflow-y-hidden pt-px":!o}),children:[o?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(m,{hasData:l,isEnabled:o})}):null,c?(0,t.jsx)(f,{hasData:l}):n,o?null:(0,t.jsx)("div",{className:"absolute inset-0 -mt-6 bg-gradient-to-b from-transparent from-0% via-background-100 to-background-100"})]})}},5721441,e=>{"use strict";e.s(["UpgradeModalEntry",()=>l]);var t=e.i(751170),a=e.i(4099374),s=e.i(1138941),i=e.i(6060673),r=e.i(5254778),n=e.i(8483205);function l(){let{upgradeModalSource:e,setUpgradeModalSource:l}=(0,r.useWebAnalyticsContext)(),o=(0,s.useProjectIdOrName)(),{data:c}=(0,i.useProject)(o),d=(0,a.useCallback)(()=>l(null),[l]);return(0,t.jsx)(n.UpgradeModal,{onClose:d,projectId:c?.id,source:e})}},9789867,e=>{"use strict";e.s(["useFilterProps",()=>n]);var t=e.i(751170),a=e.i(2590593),s=e.i(690612),i=e.i(224612);let r=["flags"],n=e=>{let{filter:n={},removeFilter:l,toggleFilter:o}=(0,s.useWebAnalyticsFilter)(),[c,d]=(0,i.useWebAnalyticsQueryState)(),u=r.includes(e),p=n[e],m=[];return p&&(m=(0,i.isPropertiesFilterValue)(p)?Object.entries(p.properties):p.values.map(e=>[e])),{filterTags:m,enableBreakdown:u,activeBreakdown:c.group_by===e,onRowClick:t=>{o({[e]:{values:[t.key],operator:"eq"}})},onBreakdownClick:()=>{if(c.group_by===e)return void d({group_by:null});d({group_by:e})},getKey:e=>e[1]?.toString()||e[0],renderFilterTag:s=>2===s.length?(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{l(e,s[0])},value:s[0],children:s.join(": ")}):(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{l(e)},value:s[0],children:"Clear Filter"})}}},6051304,e=>{"use strict";e.s(["EmptyState",()=>r]);var t=e.i(751170),a=e.i(57106),s=e.i(992159),i=e.i(2640326);function r(e){let{emptyIcon:r,emptyMessage:n}=function(e){let{hasFilter:r,type:n}=e;return r?{emptyIcon:(0,t.jsx)(s.Filter,{className:"!text-gray-700"}),emptyMessage:"No data for active filter"}:{emptyIcon:(0,t.jsx)(i.Analytics,{className:"!text-gray-700"}),emptyMessage:"route"===n?(0,t.jsxs)(t.Fragment,{children:["No route data found.",(0,t.jsx)("br",{}),"If you have not already, please"," ",(0,t.jsx)(a.Link,{external:!0,href:"/docs/analytics/quickstart#add-@vercel/analytics-to-your-project",children:"upgrade"})," ","to the latest version of ",(0,t.jsx)("code",{children:"@vercel/analytics"})]}):"No data found for selected period."}}(e);return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-2",children:[r,(0,t.jsx)("span",{className:"px-8 text-center text-sm text-gray-900",children:n})]})}},6492834,e=>{"use strict";e.s(["isBreakdownData",()=>m,"useAsyncSearchTopStats",()=>f,"useOverviewData",()=>x,"useRealtimeData",()=>h,"useTimeseriesData",()=>y,"useTopStatsData",()=>g,"useUserEvents",()=>j,"useUserList",()=>v]);var t=e.i(4099374),a=e.i(9014736),s=e.i(8042625),i=e.i(277234),r=e.i(5338940),n=e.i(1138941),l=e.i(7946377),o=e.i(4049612),c=e.i(224612),d=e.i(7884422),u=e.i(5254778),p=e.i(2415772);let m=e=>"topGroups"in e,h=(e,t)=>{let{filter:l,environment:c}=e,{isReady:d,team:u}=(0,r.useTeam)(),p=(0,n.useProjectIdOrName)(),{isEnabled:m,isLoading:h}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(d&&m&&!h?`/api/web-analytics/realtime${(0,s.encode)({teamId:u?.id,projectId:p,filter:JSON.stringify(l),environment:c})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,...t})},x=(e,t)=>{let{range:c,filter:d,environment:u}=e,{isReady:p,team:m}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:x,isLoading:y}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(p&&x&&!y?`/api/web-analytics/overview${(0,s.encode)({from:c.from.toISOString(),to:c.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:m?.id,projectId:h,filter:JSON.stringify(d),environment:u})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,...t})},y=(e,c,d)=>{let{range:u,filter:p,environment:m,groupBy:h,jsonProperty:x}=e,{isReady:y,team:g}=(0,r.useTeam)(),f=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:j}=(0,o.useWebAnalyticsStatus)(),b=!!h,{data:S,isLoading:w}=(0,a.default)(y&&v&&!j&&!c.pause?`${b?"/api/web-analytics/timeseries-breakdown":"/api/web-analytics/timeseries"}${(0,s.encode)({from:u.from.toISOString(),to:u.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:g?.id,projectId:f,groupBy:h,filter:JSON.stringify(p),jsonProperty:x,environment:m})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,...d}),k=(0,t.useMemo)(()=>c.showPlaceholder?[76,73,80,75,40,56,58,60,65,56,52,48,34,40,40,35,33,25,30,16,12,10].map(e=>e/5).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:1e3*e,total:1e4*e,bounceRate:50})).reverse():[],[c.showPlaceholder]);return{data:S?.data??k,isLoading:!y||w}},g=(e,c)=>{let{range:d,filter:u,environment:p,limit:m=250,pause:h,...x}=e,{isReady:y,team:g}=(0,r.useTeam)(),f=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:j}=(0,o.useWebAnalyticsStatus)(),b=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.encode)({from:d.from.toISOString(),to:d.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:g?.id,projectId:f,filter:JSON.stringify(u),environment:p,limit:m,...x,...e})},[p,u,m,f,d.from,d.to,x,g?.id]),S="/api/web-analytics/stats",w=(0,t.useCallback)(async e=>{let{type:t,search:a}=e;return(0,i.fetchAPI)(`${S}${b({type:t,search:a})}`,{throwOnHTTPError:!0})},[S,b]),{data:k,isLoading:T}=(0,a.default)(y&&v&&!j&&!h?`${S}${b()}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,...c});return{data:(0,t.useMemo)(()=>k?.data||[],[k]),isLoading:!y||T||j,searchTopStats:w}},f=()=>{let{hasData:e}=(0,u.useWebAnalyticsContext)(),[a]=(0,c.useWebAnalyticsQueryState)(),s=(0,d.useGenericOptions)(),{searchTopStats:i}=g({type:a.client_type,...s},{fallbackData:e?void 0:{data:[]}});return(0,t.useCallback)(async(e,t)=>(await i({search:e,type:t})).data,[i])},v=(e,t)=>{let{range:l,filter:c,environment:d}=e,{isReady:u,team:m}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:x,isLoading:y}=(0,o.useWebAnalyticsStatus)(),g=(0,a.default)(u&&x&&!y?`/api/web-analytics/users/list${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:m?.id,projectId:h,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,...t});return{isLoading:g.isLoading,data:{users:g.data?.users.map(e=>({...e,lastActivity:(0,p.fromTbDateTimeString)(e.lastActivity)}))||[]}}},j=(e,t)=>{let{range:l,filter:c,environment:d,userId:u}=e,{isReady:m,team:h}=(0,r.useTeam)(),x=(0,n.useProjectIdOrName)(),{isEnabled:y,isLoading:g}=(0,o.useWebAnalyticsStatus)(),f=(0,a.default)(m&&y&&!g&&u&&""!==u?`/api/web-analytics/users/${u}/events${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:h?.id,projectId:x,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...t});return{isLoading:f.isLoading,data:{events:f.data?.events.map(e=>({...e,timestamp:(0,p.fromTbDateTimeString)(e.timestamp)}))||[]}}}},1919174,e=>{"use strict";e.s(["TopReferrers",()=>N]);var t=e.i(751170),a=e.i(3162826),s=e.i(5756088),i=e.i(2504781),r=e.i(57106),n=e.i(4099374),l=e.i(2590593),o=e.i(4394132),c=e.i(205804),d=e.i(376725),u=e.i(1649649),p=e.i(9789867),m=e.i(690612),h=e.i(224612),x=e.i(6051304),y=e.i(6492834),g=e.i(7432042),f=e.i(7884422),v=e.i(7151748),j=e.i(3870297),b=e.i(7917902),S=e.i(4049612),w=e.i(5254778);e.i(6483798);var k=e.i(8287059),T=e.i(1138941),A=e.i(6060673);let P=new Map(Array.from(h.UTMLabelByParam).map(e=>{let[t,a]=e;return[a,t]}));function N(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(I,{loading:!0,items:[],type:o.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{})})}function C(){let{user:e,team:n,isTeam:o}=(0,b.useAccount)(),N=n||e,C=N?.billing?.plan||"hobby",D=(0,T.useProjectIdOrName)(),{data:L}=(0,A.useProject)(D),{isPlus:_,plan:W}=(0,u.useIsWebAnalyticsBilling)(),O=_||"enterprise"===C,{showPlaceholder:E}=(0,S.useWebAnalyticsStatus)(),F=(0,k.useOpenUpgradeModal)(),{setUpgradeModalSource:M,hasData:B}=(0,w.useWebAnalyticsContext)(),U={fallbackData:B?void 0:{data:[]}},R=(0,f.useGenericOptions)(),[$,G]=(0,h.useWebAnalyticsQueryState)(),{data:H,isLoading:q}=(0,y.useTopStatsData)({type:"referrer",...R},{refreshInterval:(0,g.default)("60s"),...U}),{data:V,isLoading:z}=(0,y.useTopStatsData)({type:"query_params",jsonProperty:$.search_param,pause:!O||"utm"!==$.source_type,...R},U),Q=(0,y.useAsyncSearchTopStats)(),J="referrer"===$.source_type?q:z,K=$.tab,Y="referrer"===$.source_type?H:V,Z=R.range,X=!o,ee=()=>{v.analytics.track(j.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:C,projectId:L?.id,teamId:n?.id||e?.uid,type:"utm-parameters"}),o?M("utm_parameters"):F({source:"web-analytics-utm-parameters-upsell",mode:"create"})},et="utm"===$.source_type,ea=et?"query_params":"referrer",es=(0,p.useFilterProps)(ea),{filter:ei,removeFilter:er,toggleFilter:en}=(0,m.useWebAnalyticsFilter)(),el=_||"enterprise"===W,eo="Referrers";return et&&(eo="UTM Parameters"),(0,t.jsx)(I,{...es,items:Y,loading:J,onSearch:e=>Q(e,ea),range:Z,renderEmptyState:()=>el||!et?(0,t.jsx)(x.EmptyState,{hasFilter:Object.keys(ei).length>0}):(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-3",children:[(0,t.jsx)(s.LockClosed,{color:"gray-800"}),(0,t.jsxs)("span",{className:"text-sm text-gray-900",children:[X?"Create a pro team, then upgrade to ":"Upgrade to ",(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Web Analytics Plus"})," ","to access this feature"]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-4",children:["pro"===W?(0,t.jsx)(i.Button,{onClick:ee,size:"small",type:"secondary",children:X?"Create a team":"Upgrade"}):null,(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",title:"Learn more about Web Analytics Plus",type:"highlight",children:"Learn more"})]})]}),renderItemPrefix:e=>"referrer"!==$.source_type?null:""===e.key?(0,t.jsx)(a.CornerDownRight,{color:"gray-700"}):(0,t.jsx)(d.Favicon,{url:e.key},e.key),renderItemTitle:e=>{let a=e.key,s=`https://${a}`;return"referrer"!==$.source_type?(0,t.jsx)(t.Fragment,{children:e.key}):""===a||"unknown"===a?"Direct":ei.referrer&&"values"in ei.referrer&&"t.co"===ei.referrer.values[0]?(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:`https://x.com/search?q=${encodeURIComponent(s)}`,prefetch:!1,referrerPolicy:"no-referrer",children:a}):(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:s,prefetch:!1,referrerPolicy:"no-referrer",children:a})},skeleton:E,title:eo,titleSwitcherItems:["Referrers","UTM Parameters"],..."utm"===$.source_type&&{filterTags:Object.entries(ei.query_params&&(0,h.isPropertiesFilterValue)(ei.query_params)?ei.query_params.properties:{}),onRowClick:e=>{en({query_params:{properties:{[$.search_param]:e.key},operator:"eq"}})},renderFilterTag:e=>(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{er("query_params",e[0])},value:e[0],children:`${h.UTMLabelByParam.get(e[0])||"Unknown"}: ${e[1]||"Unknown"}`}),renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:h.UTMLabelByParam.get($.search_param)??"Source",onSelectTab:e=>{G({search_param:P.get(e)})},tabs:Array.from(h.UTMLabelByParam.values())})},onTitleSwitcherChange:e=>{"Referrers"===e&&G({source_type:"referrer"}),"UTM Parameters"===e&&G({source_type:"utm"})},type:K})}function I(e){return(0,t.jsx)(l.Panel,{description:"Which sites refer the most traffic to your project",filterTags:[],title:"Referrers",titleSwitcherItems:["Referrers","UTM Parameters"],...e})}},6704504,e=>{"use strict";e.s(["useFilterHostname",()=>a]);var t=e.i(224612);function a(){let[e]=(0,t.useWebAnalyticsQueryState)();return e.filter.hostname&&"values"in e.filter.hostname?e.filter.hostname.values[0]:null}},8096228,e=>{"use strict";e.s(["TopPages",()=>f]);var t=e.i(751170),a=e.i(4099374),s=e.i(57106),i=e.i(2590593),r=e.i(4394132),n=e.i(205804),l=e.i(9789867),o=e.i(224612),c=e.i(3126613),d=e.i(6051304),u=e.i(6704504),p=e.i(6492834),m=e.i(7884422),h=e.i(7432042),x=e.i(5254778),y=e.i(4049612),g=e.i(3748432);function f(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(b,{loading:!0,items:[],type:r.AnalyticsType.Visitors}),children:(0,t.jsx)(j,{})})}let v=["Pages","Routes","Hostnames"];function j(){let{showPlaceholder:e}=(0,y.useWebAnalyticsStatus)(),{hasData:i}=(0,x.useWebAnalyticsContext)(),r=(0,m.usePageHostname)(),f=(0,m.useGenericOptions)(),[v,j]=(0,o.useWebAnalyticsQueryState)(),{data:S,isLoading:w}=(0,p.useTopStatsData)({type:v.page_type,...f},{refreshInterval:(0,h.default)("60s"),...{fallbackData:i?void 0:{data:[]}}}),k=(0,p.useAsyncSearchTopStats)(),T=(0,l.useFilterProps)(v.page_type),A=(0,u.useFilterHostname)(),P=(0,a.useMemo)(()=>"route"===v.page_type?"Routes":"hostname"===v.page_type?"Hostnames":"Pages",[v.page_type]),N=A||r;return(0,t.jsx)(g.ConditionalNavigationMarker,{enabled:!w,phase:"content",label:"InternalTopPages",children:(0,t.jsx)(b,{...T,type:v.tab,loading:w,skeleton:e,items:S,range:f.range,onSearch:e=>k(e,v.page_type),onTitleSwitcherChange:e=>{"Pages"===e&&j({page_type:"path"}),"Routes"===e&&j({page_type:"route"}),"Hostnames"===e&&j({page_type:"hostname"})},renderEmptyState:()=>(0,t.jsx)(d.EmptyState,{hasFilter:Object.keys(v.filter).length>0,type:v.page_type}),renderItemTitle:e=>N&&"path"===v.page_type?(0,t.jsx)(s.Link,{className:n.default["hover-link"],href:`https://${N}${e.key}`,prefetch:!1,children:(0,t.jsx)(c.RouteHighlighter,{route:e.key})}):(0,t.jsx)(c.RouteHighlighter,{route:e.key}),title:P})})}function b(e){return(0,t.jsx)(i.Panel,{description:"Which pages are the most visited in your project",filterTags:[],title:v[0],titleSwitcherItems:v,...e})}},4120294,e=>{"use strict";e.s(["TopOperatingSystems",()=>u]);var t=e.i(751170),a=e.i(4099374),s=e.i(2590593),i=e.i(4394132),r=e.i(9789867),n=e.i(5254778),l=e.i(4049612),o=e.i(6492834),c=e.i(7884422),d=e.i(224612);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(m,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(p,{})})}function p(){let e=(0,r.useFilterProps)("os_name"),[a]=(0,d.useWebAnalyticsQueryState)(),{hasData:s}=(0,n.useWebAnalyticsContext)(),{showPlaceholder:i}=(0,l.useWebAnalyticsStatus)(),u=(0,c.useGenericOptions)(),{data:p,isLoading:h}=(0,o.useTopStatsData)({type:"os_name",...u},{fallbackData:s?void 0:{data:[]}});return(0,t.jsx)(m,{...e,items:p,range:u.range,loading:h,skeleton:i,type:a.tab})}function m(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which operating systems your visitors are using",limit:5,title:"Operating Systems",valueDisplayMode:"percentage"})}},3746604,e=>{"use strict";e.s(["TopEvents",()=>k]);var t=e.i(751170),a=e.i(5887909),s=e.i(2504781),i=e.i(9508212),r=e.i(57106),n=e.i(4099374),l=e.i(2590593),o=e.i(205804),c=e.i(4394132),d=e.i(690612),u=e.i(9789867),p=e.i(6051304),m=e.i(5254778),h=e.i(4049612),x=e.i(6492834),y=e.i(7884422),g=e.i(224612),f=e.i(7917902),v=e.i(7151748),j=e.i(3870297),b=e.i(1138941),S=e.i(6060673);e.i(6483798);var w=e.i(8287059);function k(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(P,{loading:!0,items:[],type:c.AnalyticsType.Visitors}),children:(0,t.jsx)(T,{})})}function T(){let{filter:e}=(0,d.useWebAnalyticsFilter)(),{user:a,team:s,isTeam:i}=(0,f.useAccount)(),r=s||a,l=r?.billing?.plan||"hobby",o="hobby"===l,c=(0,w.useOpenUpgradeModal)(),{setUpgradeModalSource:u,hasData:p}=(0,m.useWebAnalyticsContext)(),{showPlaceholder:k}=(0,h.useWebAnalyticsStatus)(),T=(0,y.useGenericOptions)(),{range:P}=T,[N,C]=(0,g.useWebAnalyticsQueryState)(),I=N.tab,D=N.event_property,[L,_]=(0,n.useState)([]),[W,O]=(0,n.useState)(null),{data:E,isLoading:F}=(0,x.useTopStatsData)({type:W||e.event_name?"event_data":"event_name",...T,...W&&{jsonProperty:W},pause:o},{fallbackData:p?void 0:{data:[]}}),M=(0,n.useMemo)(()=>o?[]:E,[E,o]),B=(0,n.useCallback)(e=>{e?C({event_property:e}):C({event_property:null})},[C]);if((0,n.useEffect)(()=>{W&&W!==D&&B(W)},[D,W,B]),e.event_name&&!F&&E.length>0&&!W){let e=E[0];_(E.map(e=>e.key)),D?O(D):e.key===W||D||O(e.key)}!e.event_name&&W&&(O(null),_([]),B(void 0));let U=(0,b.useProjectIdOrName)(),{data:R}=(0,S.useProject)(U);return(0,t.jsx)(A,{data:M,eventProperties:L,loading:F,onClickUpgrade:()=>{v.analytics.track(j.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:l,projectId:R?.id,teamId:s?.id||a?.uid,type:"custom-events"}),i?u("top_events"):c({source:"web-analytics-custom-event-upsell",mode:"create"})},onSelectProperty:O,range:P,requiresCreation:!i,requiresUpgrade:o,selectedProperty:W,skeleton:k,type:I})}function A(e){let{data:a,loading:s,skeleton:i,selectedProperty:r,type:n,range:o,eventProperties:c,onSelectProperty:m,requiresCreation:h,requiresUpgrade:y,onClickUpgrade:g}=e,{filter:f,removeFilter:v,toggleFilter:j}=(0,d.useWebAnalyticsFilter)(),b=(0,u.useFilterProps)("event_name"),S=(0,u.useFilterProps)("event_data"),w=[...b.filterTags||[],...S.filterTags||[]],k=Object.keys(f).length>0,T=(0,x.useAsyncSearchTopStats)();return(0,t.jsx)(l.Panel,{...f.event_name?S:b,description:"Which events are triggered the most",filterTags:w,items:a,limit:5,loading:s,onRowClick:e=>{f.event_name?j({event_data:{properties:{[r??""]:e.key},operator:"eq"}}):j({event_name:{values:[e.key],operator:"eq"}})},onSearch:e=>T(e,r||f.event_name?"event_data":"event_name"),range:o,valueDisplayMode:"all-values",...f.event_name&&r&&m&&c?{renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:r,onSelectTab:m,tabs:c})}:{},renderEmptyState:()=>k?(0,t.jsx)(p.EmptyState,{hasFilter:!0}):(0,t.jsx)(N,{onClickUpgrade:g,requiresCreation:h,requiresUpgrade:y}),renderFilterTag:e=>2===e.length?(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{v("event_data",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{v("event_name")},value:e[0],children:e[0]}),renderItemTitle:e=>e.key||"Unknown",skeleton:i,title:"Events",totalCountLabel:"Total",type:n})}function P(e){return(0,t.jsx)(l.Panel,{filterTags:[],...e,description:"Which events are triggered the most",limit:5,valueDisplayMode:"all-values",renderItemTitle:e=>e.key||"Unknown",title:"Events",totalCountLabel:"Total"})}function N(e){let{requiresUpgrade:n,onClickUpgrade:l,requiresCreation:c}=e;return(0,t.jsx)("div",{className:o.default["empty-state-wrapper"],children:(0,t.jsxs)(i.Stack,{align:"center",gap:3,children:[(0,t.jsx)("div",{className:"rounded-full border border-gray-100 p-2",children:(0,t.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M17.1111 5L6 18.3333H15.9999L14.8889 27.2222L25.9999 13.8889H15.9999L17.1111 5Z",stroke:"var(--accents-5)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No custom events"}),(0,t.jsxs)("div",{className:o.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Set up custom events to gain a deeper understanding of user behavior on your site."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[n?(0,t.jsxs)(t.Fragment,{children:[c?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsxs)(t.Fragment,{children:["Track button clicks, form submissions, and other user actions."," "]}),(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/custom-events",variant:"highlight",children:"Learn more"})]})}),n?(0,t.jsx)("div",{children:(0,t.jsx)(i.Stack,{align:"center",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(s.Button,{onClick:l,size:"small",children:c?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}},9222848,e=>{e.v({flag:"flag-module__9lnOSq__flag"})},7950227,e=>{"use strict";e.s(["Flag",()=>r]);var t=e.i(751170),a=e.i(9135940),s=e.i(4099374),i=e.i(9222848);function r(e){let{countryCode:r}=e,[n,l]=(0,s.useState)(!1);return n?(0,t.jsx)("div",{className:i.default.flag,children:"?"}):(0,t.jsx)(a.default,{alt:r,height:12,onError:()=>l(!0),src:`https://flag.vercel.app/s/${r}.svg`,style:{background:"var(--accents-1)",borderRadius:2,userSelect:"none"},width:16},r)}},449809,e=>{"use strict";e.s(["TopCountries",()=>m]);var t=e.i(751170),a=e.i(4099374),s=e.i(2590593),i=e.i(4394132),r=e.i(7946377),n=e.i(7950227),l=e.i(9789867),o=e.i(5254778),c=e.i(4049612),d=e.i(6492834),u=e.i(7884422),p=e.i(224612);function m(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(x,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(h,{})})}function h(){let e=(0,l.useFilterProps)("country"),{hasData:a}=(0,o.useWebAnalyticsContext)(),{showPlaceholder:s}=(0,c.useWebAnalyticsStatus)(),i=(0,u.useGenericOptions)(),[r]=(0,p.useWebAnalyticsQueryState)(),{data:n,isLoading:m}=(0,d.useTopStatsData)({type:"country",...i},{fallbackData:a?void 0:{data:[]}});return(0,t.jsx)(x,{...e,items:n,range:i.range,loading:m,skeleton:s,type:r.tab})}function x(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which countries your visitors are from",limit:5,renderItemPrefix:e=>(0,t.jsx)(n.Flag,{countryCode:e.key}),renderItemTitle:e=>(0,r.getCountryName)(e.key),title:"Countries",valueDisplayMode:"percentage"})}},881685,e=>{"use strict";e.s(["TopBrowsers",()=>u]);var t=e.i(751170),a=e.i(4099374),s=e.i(2590593),i=e.i(4394132),r=e.i(9789867),n=e.i(224612),l=e.i(5254778),o=e.i(4049612),c=e.i(6492834),d=e.i(7884422);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(m,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(p,{})})}function p(){let[e,s]=(0,n.useWebAnalyticsQueryState)(),i=(0,r.useFilterProps)(e.client_type),{hasData:u}=(0,l.useWebAnalyticsContext)(),{showPlaceholder:p}=(0,o.useWebAnalyticsStatus)(),h=(0,d.useGenericOptions)(),{data:x,isLoading:y}=(0,c.useTopStatsData)({type:e.client_type,...h},{fallbackData:u?void 0:{data:[]}}),g={items:x,range:h.range,loading:y,skeleton:p,type:e.tab},f=(0,a.useMemo)(()=>"device_type"===e.client_type?"Devices":"Browsers",[e.client_type]),v=(0,a.useMemo)(()=>"device_type"===e.client_type?"Which devices your visitors are using":"Which browsers your visitors are using",[e.client_type]);return(0,t.jsx)(m,{...i,...g,description:v,onTitleSwitcherChange:e=>{"Devices"===e&&s({client_type:"device_type"}),"Browsers"===e&&s({client_type:"client_name"})},renderItemTitle:t=>"device_type"===e.client_type&&n.DeviceLabelByValue.get(t.key)||t.key,title:f})}function m(e){return(0,t.jsx)(s.Panel,{description:"Which devices your visitors are using",filterTags:[],title:"Devices",...e,limit:5,titleSwitcherItems:["Devices","Browsers"],valueDisplayMode:"percentage"})}},4432974,e=>{"use strict";e.s(["PlaceholderProvider",()=>c]);var t=e.i(751170),a=e.i(9722978),s=e.i(4099374),i=e.i(691329),r=e.i(9771394),n=e.i(4049612),l=e.i(690612),o=e.i(205804);function c(e){let{children:n}=e,[l,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1);return(0,t.jsx)(i.motion.div,{className:(0,a.clsx)(l&&"no-skeleton-animations",!u&&o.default["fast-filter-tooltip"]),layout:"position",children:(0,t.jsxs)(r.PlaceholderContext.Provider,{value:l,children:[(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(d,{setShowPlaceholder:c,setUsedWebAnalyticsFilter:p})}),n]})})}function d(e){let{setShowPlaceholder:t,setUsedWebAnalyticsFilter:a}=e,{showPlaceholder:i}=(0,n.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{t(i)},[t,i]);let{usedWebAnalyticsFilter:r}=(0,l.useWebAnalyticsFilter)();return(0,s.useEffect)(()=>{a(r)},[a,r]),null}},2970787,e=>{e.v({chart:"page-module__v1iPdG__chart",faded:"page-module__v1iPdG__faded",gray:"page-module__v1iPdG__gray",headerWrapper:"page-module__v1iPdG__headerWrapper"})},3826777,e=>{"use strict";e.s(["TimeseriesChart",()=>z],3826777);var t=e.i(751170),a=e.i(9722978),s=e.i(4099374),i=e.i(7884422),r=e.i(5254778),n=e.i(224612),l=e.i(4049612),o=e.i(690612),c=e.i(6492834),d=e.i(1604149),u=e.i(3933647),p=e.i(951803),m=e.i(8545185),h=e.i(1182390),x=e.i(7219489),y=e.i(3489437),g=e.i(9629316),f=e.i(477712),v=e.i(9879806),j=e.i(2472415),b=e.i(3932545),S=e.i(6016333),w=e.i(7242873),k=e.i(8125826),T=e.i(4085287),A=e.i(388027),P=e.i(7013170),N=e.i(4905664),C=e.i(1230902),I=e.i(351890),D=e.i(1344973),L=e.i(9806773),_=e.i(931197),W=e.i(3322724);e.i(5406151);var O=e.i(1376250),E=e.i(7946377);e.i(7286972);var F=e.i(5693388);let M={top:25,right:30,bottom:50,left:60},B=["var(--ds-blue-700)","var(--ds-amber-700)","var(--ds-purple-700)","var(--ds-pink-700)","var(--ds-blue-600)","var(--ds-amber-500)","var(--ds-purple-600)"],U=e=>B[e%B.length];function R(e){var a,i;let{data:r,width:l,type:o,overwriteUnitLabel:c,height:d,formatKey:B,groupBy:R,groupByProperty:$}=e,G=(0,W.useIsMobile)(),H=(0,s.useMemo)(()=>Object.fromEntries(Object.entries(r.topGroups).map(e=>{let[t,a]=e;return[t,a.map(e=>({...e,date:10===e.key.length?(0,O.toZonedTime)(e.key,(0,E.getClientTimezone)()):new Date(e.key||0)}))]})),[r]),q=(0,s.useMemo)(()=>Object.keys(H).sort((e,t)=>{let a=H[e].reduce((e,t)=>e+t[o],0);return H[t].reduce((e,t)=>e+t[o],0)-a}),[H,o]),V=r.totalGroupCount-q.length,z=l-M.left-M.right,Q=d-M.top-M.bottom,J=q[0],K=e=>e.date,Y=e=>e[o],Z=(0,k.bisector)(e=>e.date).left,X=H[J]??[],ee=(0,T.extent)(X,K),et=(0,g.scaleTime)({range:[0,z],domain:ee}),ea=(0,y.scaleLinear)({domain:[0,1.04*((0,A.max)(X,Y)||100)],range:[Q,0],nice:!0}),{tooltipData:es,tooltipLeft:ei,showTooltip:er,hideTooltip:en}=(0,w.useTooltip)(),el=(a=ee[0],i=ee[1],1>=(0,N.differenceInDays)(i,a)?_.Granularity.Hour:_.Granularity.Day);return(0,t.jsxs)("div",{className:"relative *:select-none",children:[(0,t.jsx)("svg",{height:d,onMouseLeave:en,onMouseMove:e=>{let t=(0,m.localPoint)(e)||{x:0,y:0},a=et.invert(t.x-M.left),s={dataPoints:[],date:new Date(a)};if(q.forEach((e,t)=>{let i,r=H[e],n=Z(r,a,1),l=r[n-1],c=r[n];i=l&&c?a.valueOf()-l.date.valueOf()>c.date.valueOf()-a.valueOf()?c:l:l||c,0===t&&(s.range=(0,F.formatRangeWithGranularity)(i.date,el),s.end=(0,C.format)(i.date,"MMM d, yyyy"),s.relativeTime=(0,F.formatRelativeTime)(i.date,el,"1h"!==el?(0,I.startOfToday)():void 0)),i&&s.dataPoints.push({...i,value:i[o]})}),!s.dataPoints.length)return void en();let i=et(s.dataPoints[0].date),r=ea(Y(s.dataPoints[0]));er({tooltipData:s,tooltipLeft:i,tooltipTop:r})},width:"100%",children:(0,t.jsxs)(x.Group,{left:M.left,top:M.top,children:[(0,t.jsx)(h.GridRows,{numTicks:3,pointerEvents:"none",scale:ea,stroke:"var(--accents-2)",width:z}),q.map((e,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)(f.AreaClosed,{data:H[e]??[],fill:U(a),fillOpacity:.01,x:e=>et(K(e)),y:e=>ea(Y(e)),yScale:ea}),(0,t.jsx)(j.LinePath,{data:H[e]??[],stroke:U(a),strokeWidth:2,x:e=>et(K(e)),y:e=>ea(Y(e))})]},e)),(0,t.jsx)(p.AxisLeft,{hideAxisLine:!0,hideTicks:!0,numTicks:3,scale:ea,tickFormat:e=>Number(e)%1!=0?"":(0,E.formatNumberCompact)(Number(e)),tickLabelProps:()=>({dx:"-0.5em",dy:"0.25em",textAnchor:"end",fontSize:12,fill:"var(--accents-4)"})}),(0,t.jsx)(u.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:G?2:7,scale:et,tickFormat:e=>{var t,a;return t=String(e),a=(0,P.differenceInHours)(ee[1],ee[0]),(0,L.timeToAutomaticLocale)(t,a<24?{hour:"numeric",minute:"numeric",hour12:!1}:{month:"numeric",day:"numeric"})},tickLabelProps:()=>({dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:Q}),es?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(v.Line,{from:{x:ei,y:0},pointerEvents:"none",stroke:"var(--geist-foreground)",strokeWidth:2,to:{x:ei,y:Q+7}})}):null]})}),es?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.TooltipWithBounds,{className:"pointer-events-none absolute flex flex-col justify-center whitespace-nowrap rounded bg-background-100 px-4 py-2 text-sm text-gray-1000 shadow-tooltip",left:(ei??0)+M.left,style:{background:"auto"},top:40,children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("span",{className:"flex-1 font-normal",children:c||(0,E.labelFromType)(o)}),(0,t.jsx)("span",{className:"text-gray-900",children:es.range})]}),(0,t.jsxs)("div",{className:"-mx-4 my-1 flex gap-1 border-y bg-background-200 px-4 py-1",children:[(0,t.jsx)("span",{children:"split by"}),(0,t.jsx)("span",{className:"inline-block max-w-[min(400px,40vw)] truncate font-medium",children:$||n.StatLabelByParam.get(R)||R})]}),q.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1.5",children:[(0,t.jsx)("div",{className:"size-2 rounded-full",style:{backgroundColor:U(a)}}),(0,t.jsx)("span",{className:"max-w-[min(400px,40vw)] flex-1 truncate",title:B?.(e),children:B?.(e)||(0,t.jsx)("span",{className:"text-gray-800",children:"Not set"})}),(0,t.jsx)("span",{className:"self-end pl-2 font-mono font-bold",children:(0,E.formatNumber)("number"==typeof es.dataPoints[a]?.value?es.dataPoints[a].value:0)})]},B?.(e)||a)),V>0&&(0,t.jsxs)("span",{className:"text-gray-800",children:["+",(0,E.formatNumber)(V)," more"]})]},Math.random()),(0,t.jsx)(b.Tooltip,{className:"pointer-events-none absolute flex -translate-x-1/2 flex-col items-center justify-center whitespace-nowrap rounded-[99px] bg-[var(--geist-background)] px-[var(--geist-space-2x)] py-[var(--geist-space)] shadow-[var(--ds-shadow-tooltip)] dark:shadow-none",left:ei??0,offsetLeft:M.left,offsetTop:32,top:d-M.top-M.bottom,unstyled:!0,children:(0,t.jsx)(D.Text,{color:"gray-1000",size:12,weight:500,children:es.relativeTime||es.end||"Now"})})]}):null]})}var $=e.i(9028632);function G(e){let{data:a,type:s,loading:i,range:r,overwriteUnitLabel:l,groupBy:o,formatKey:u,formatYAxis:p}=e,[m,h]=(0,n.useWebAnalyticsQueryState)();return i||Array.isArray(a)&&0===a.length?null:(0,t.jsx)(d.ParentSize,{children:e=>{let{width:i,height:n}=e;return(0,c.isBreakdownData)(a)?(0,t.jsx)(R,{data:a,formatKey:u,groupBy:o||"",height:n,overwriteUnitLabel:l,type:s,width:i}):(0,t.jsx)($.Graph,{data:a,formatYAxis:p,height:n,onSelectionChange:e=>{let[t,a]=e;h({from:t,to:a})},overwriteUnitLabel:l,range:r,type:s,width:i})}})}var H=e.i(4394132),q=e.i(2970787),V=e.i(7432042);function z(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(J,{}),children:(0,t.jsx)(Q,{})})}function Q(){let{hasData:e,microfrontendsDataInDefaultApp:s}=(0,r.useWebAnalyticsContext)(),[d]=(0,n.useWebAnalyticsQueryState)(),{showPlaceholder:u}=(0,l.useWebAnalyticsStatus)(),{filter:p,groupBy:m,groupByProperty:h}=(0,o.useWebAnalyticsFilter)(),x=p.event_name&&!(0,n.isPropertiesFilterValue)(p.event_name)?p.event_name.values[0]:void 0,y=(0,i.useGenericOptions)(),g=!!p.event_name,f=!!(("event_name"===m||"event_data"===m)&&g&&!d.event_property),{data:v,isLoading:j}=(0,c.useTimeseriesData)({...y,groupBy:m||void 0,jsonProperty:h||void 0},{showPlaceholder:u,pause:f},{refreshInterval:(0,V.default)(m?"30s":"10s"),fallbackData:e?void 0:{data:Array(7).fill(0).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:0,total:0})).reverse()}}),b=d.tab;return(0,t.jsxs)("div",{className:(0,a.clsx)((j||f)&&`${q.default.faded} pointer-events-none`,u&&"grayscale"),style:{position:"relative",height:400},children:[(0,t.jsx)(G,{data:s?[]:v,formatKey:e=>"country"===m?(0,E.getCountryName)(e):e,groupBy:h||m||void 0,loading:(0,c.isBreakdownData)(v)?0===Object.keys(v).length:0===v.length,overwriteUnitLabel:b===H.AnalyticsType.TotalCount?x:void 0,range:y.range,type:b,...b===H.AnalyticsType.BounceRate&&{formatYAxis:e=>`${e}%`}}),u&&!s?(0,t.jsx)("div",{className:"absolute right-6 top-2 rounded bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-800",children:"Demo Data"}):null]})}function J(){return(0,t.jsx)("div",{className:(0,a.clsx)(q.default.faded,"pointer-events-none"),style:{position:"relative",height:400}})}},1353544,e=>{"use strict";e.s(["CategoryTabs",()=>g]);var t=e.i(751170),a=e.i(1649649),s=e.i(4099374),i=e.i(7884422),r=e.i(5254778),n=e.i(7433697),l=e.i(224612),o=e.i(4049612),c=e.i(690612),d=e.i(6492834),u=e.i(4394132),p=e.i(9031150),m=e.i(2979333),h=e.i(7300),x=e.i(7432042),y=e.i(6760726);function g(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(v,{}),children:(0,t.jsx)(f,{})})}function f(){let e=(0,y.useBillingPlan)(),{isPlus:g}=(0,a.useIsWebAnalyticsBilling)(),{period:f,range:v}=(0,i.useTimeSelection)(e,"webAnalyticsPlans",g),{hasData:j}=(0,r.useWebAnalyticsContext)(),{setEnvironment:b}=(0,n.useEnvironment)(),[S,w]=(0,l.useWebAnalyticsQueryState)(),{showPlaceholder:k,isEnabled:T,hasData:A,isLoading:P}=(0,o.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{!P&&(A||b("all"))},[A,T,P,b]);let{filter:N}=(0,c.useWebAnalyticsFilter)(),C=N.event_name&&!(0,l.isPropertiesFilterValue)(N.event_name)?N.event_name.values[0]:void 0,I=(0,i.useGenericOptions)(),{data:D}=(0,d.useOverviewData)(I,{refreshInterval:(0,x.default)("10s"),fallbackData:j?void 0:{devices:0,total:0}}),{data:L}=(0,d.useOverviewData)({...I,range:(0,i.getDateRangeBefore)(v)},{revalidateOnFocus:!1}),_=S.tab;return(0,t.jsxs)(h.Tabs,{children:[(0,t.jsx)(h.Tab,{active:_===u.AnalyticsType.Visitors,label:"Visitors",loading:!D||k,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.Visitors})),period:f,trend:L&&D?(0,m.getPercentageTrend)(L.devices,D.devices):void 0,value:k?0:D?.devices??0}),(0,t.jsx)(h.Tab,{active:_===u.AnalyticsType.TotalCount,label:C||"Page Views",loading:!D||k,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.TotalCount})),period:f,trend:L&&D?(0,m.getPercentageTrend)(L.total,D.total):void 0,value:k?0:D?.total??0}),(0,t.jsx)(h.Tab,{active:_===u.AnalyticsType.BounceRate,className:"!border-r",label:"Bounce Rate",loading:!D||k,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.BounceRate})),period:f,trend:L&&D?(0,m.getPercentageTrend)(L.bounceRate,D.bounceRate,{isPercent:!0,isNegativeGood:!0}):void 0,value:k?0:D?.bounceRate??0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}function v(){return(0,t.jsxs)(h.Tabs,{children:[(0,t.jsx)(h.Tab,{active:!1,label:"Visitors",loading:!0,period:"7d",value:0}),(0,t.jsx)(h.Tab,{active:!1,label:"Page Views",loading:!0,period:"7d",value:0}),(0,t.jsx)(h.Tab,{active:!1,className:"!border-r",label:"Bounce Rate",loading:!0,period:"7d",value:0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}},1296369,e=>{"use strict";e.s(["DynamicHeading",()=>eB],1296369);var t=e.i(751170),a=e.i(4099374),s=e.i(5255926),i=e.i(1344973),r=e.i(2652226),n=e.i(5074502),l=e.i(9022191),o=e.i(9239936),c=e.i(4313344),d=e.i(1649649),u=e.i(8876434),p=e.i(8674454),m=e.i(6694387),h=e.i(4991687),x=e.i(8459493),y=e.i(3679047),g=e.i(7151748),f=e.i(3870297),v=e.i(5338940),j=e.i(5254778),b=e.i(1138941),S=e.i(8042625),w=e.i(57106),k=e.i(7722264),T=e.i(277234),A=e.i(4030453),P=e.i(6891161),N=e.i(8522580),C=e.i(9508212),I=e.i(455575);e.i(1585898);var D=e.i(2066827),L=e.i(3343142);let _={surveyName:"Disable Web Analytics User Feedback",surveySlug:"disable-web-analytics-user-feedback",surveySteps:[{title:"Web Analytics has been disabled",description:"Help us improve by sharing your feedback. Select all that apply.",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling Web Analytics?",selectMultiple:!0,options:[{id:"missing-features",label:"Missing features",reveals:{id:"what-were-you-missing",label:"What were you missing?"}},{id:"too-expensive",label:"Too expensive"},{id:"prefer-another-product",label:"I prefer another product",reveals:{id:"preferred-product",label:"Which product do you prefer?"}},{id:"not-working-as-expected",label:"It is not working as expected",reveals:{id:"what-was-not-working",label:"What was not working?"}},{id:"just-looking-around",label:"I was just looking around"},{id:"other",label:"Other",reveals:{id:"other-reason",label:"Additional comments"}}]}]}]};function W(e){let[s,i]=(0,a.useState)(!0);return(0,t.jsx)(D.SurveyModal,{active:s,onSubmit:async t=>{await (0,L.createSurveyEntry)({data:t}),e.onSubmitted?.(),i(!1)},setActive:i,surveyInfo:_})}function O(e){let{active:s,close:r,revalidateFeatureState:n}=e,[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(),h=(0,I.useToasts)(),{team:x}=(0,v.useTeam)(),y=(0,b.useProjectIdOrName)(),{data:j}=(0,l.useProject)(x?.slug??"",y),D=x?.enabledInvoiceItems?.webAnalytics?.enabled;async function L(){try{c(!0),await (0,T.fetchAPI)(`/api/v1/web/insights/toggle${(0,S.encode)({projectId:j.id,teamId:x?.id})}`,{method:"POST",body:{value:!1},throwOnHTTPError:!0}),g.analytics.track(f.AnalyticsEvent.ANALYTICS_DISABLED,{teamId:x?.id,projectId:y}),u(!0),h.success("Disabled Web Analytics successfully."),r()}catch(e){m("Something went wrong."),(0,k.isErrorLike)(e)&&g.analytics.track(f.AnalyticsEvent.ERROR,{message:e.message,name:e.name,teamId:x?.id})}finally{c(!1)}}return d?(0,t.jsx)(W,{onSubmitted:()=>{n()}}):(0,t.jsxs)(P.Modal.Modal,{active:s,onClickOutside:o?()=>void 0:r,children:[(0,t.jsxs)(P.Modal.Body,{children:[(0,t.jsx)(P.Modal.Header,{children:(0,t.jsx)(P.Modal.Title,{children:"Disable Web Analytics"})}),(0,t.jsxs)(C.Stack,{gap:6,children:[(0,t.jsx)(i.Text,{color:"gray-900",children:"Web Analytics tracking for your project will be disabled immediately."}),D?(0,t.jsxs)(N.Note,{children:["This action will not disable Web Analytics Plus. To manage this add-on, please go to"," ",(0,t.jsx)(w.Link,{href:`/${x.slug}/~/settings/billing#web-analytics`,variant:"highlight",children:"Billing"}),"."]}):null,p?(0,t.jsx)(A.Error,{error:p}):null]})]}),(0,t.jsxs)(P.Modal.Actions,{children:[(0,t.jsx)(P.Modal.Action,{disabled:o,onClick:r,type:"secondary",children:"Cancel"}),(0,t.jsx)(P.Modal.Action,{loading:o,onClick:L,children:"Disable"})]})]})}function E(e){let{revalidateFeatureState:s}=e,{setUpgradeModalSource:i}=(0,j.useWebAnalyticsContext)(),[r,n]=(0,a.useState)(!1),l=(0,y.useRouter)(),{team:o,isLoading:c}=(0,v.useTeam)(),{isPlus:b,plan:S}=(0,d.useIsWebAnalyticsBilling)(),w=(0,a.useCallback)(()=>{if("pro"===S&&b)return void l.push(o?`/${o.slug}/~/settings/billing#web-analytics`:"/account/billing#web-analytics");g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:S,teamId:o?.id,type:"three-dots"}),i("menu")},[b,S,l,i,o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(h.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(m.MenuButton,{"aria-label":"More Actions",shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(u.MoreHorizontal,{})}),(0,t.jsxs)(p.Menu,{width:213,children:["enterprise"!==S?(0,t.jsx)(x.MenuItem,{disabled:c,onClick:w,children:"hobby"===S?"Upgrade to Pro":b?"Go to Billing":"Upgrade to Plus"}):null,(0,t.jsx)(x.MenuItem,{external:!0,href:"/docs/analytics",isLink:!0,target:"_blank",children:"Go to Docs"}),(0,t.jsx)(x.MenuItem,{onClick:()=>n(!0),type:"error",children:"Disable Web Analytics"})]})]}),(0,t.jsx)(O,{active:r,close:()=>n(!1),revalidateFeatureState:s})]})}var F=e.i(7952834),M=e.i(7917902),B=e.i(1794286),U=e.i(9830371),R=e.i(7884422),$=e.i(224612),G=e.i(4049612);function H(){let e=(0,y.useRouter)(),[s,i]=(0,$.useWebAnalyticsQueryState)(),{environment:r}=s,{user:u,team:p}=(0,M.useAccount)(),m=p||u,h=m?.billing?.plan||"hobby",x=(0,y.useParams)()||{teamSlug:"",project:""},{data:v}=(0,l.useProject)(x.teamSlug,x.project),{mutate:b}=(0,U.useSWRConfig)(),{isEnabled:S}=(0,G.useWebAnalyticsStatus)(),{setUpgradeModalSource:w,microfrontendsDataInDefaultApp:k}=(0,j.useWebAnalyticsContext)(),{isPlus:T}=(0,d.useIsWebAnalyticsBilling)(),A=(0,R.useTimeSelection)(h,"webAnalyticsPlans",T,"7d"),P=(0,a.useMemo)(()=>(0,n.findAvailablePresets)(h,"webAnalyticsPlans",T),[h,T]);return k?null:(0,t.jsxs)(C.Stack,{align:{sm:"start",md:"start",lg:"end"},direction:"column",gap:2,justify:"center",style:{alignSelf:"stretch"},children:[S?(0,t.jsx)(o.LimitBanner,{onClickUpgrade:()=>{g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:h,projectId:v.id,teamId:p?.id||u?.uid,type:"usage-banner"}),w("limit_banner")}}):null,(0,t.jsxs)(C.Stack,{className:"-mx-4 md:mx-0",direction:"row",gap:2,children:[(0,t.jsx)(c.EnvironmentSelector,{environment:r,onChange:e=>{i({environment:e})}}),(0,t.jsx)(B.Calendar,{compact:!0,minValue:A.minAllowedDate,onChange:(e,t)=>{let{start:a,end:s}=e;t?i({period:t}):i({from:new Date(a),to:new Date(s)})},onLockedClick:()=>{g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:h,projectId:v.id,teamId:p?.id||u?.uid,type:"calendar"}),w("calendar")},presetIndex:Object.values(P).findIndex(e=>e.period===A.period),presets:P,value:{start:A.range.from,end:A.range.to},width:"164px"}),(0,t.jsx)(E,{revalidateFeatureState:()=>{(0,F.revalidateProject)(b,v),e.refresh()}})]})]})}var q=e.i(7432042),V=e.i(6492834),z=e.i(4550318);function Q(e){let{hasData:a}=e,[s]=(0,$.useWebAnalyticsQueryState)(),{data:i}=(0,V.useRealtimeData)({..."all"!==s.environment?{environment:s.environment}:{},...s.filter.hostname?{filter:{hostname:s.filter.hostname}}:{}},{refreshInterval:(0,q.default)("5s"),fallbackData:a?void 0:{devices:0}});return(0,t.jsx)("span",{className:"ml-2 inline-block border-0 border-l border-[var(--accents-2)] pl-2",children:(0,t.jsx)(z.VisitorCount,{count:i?.devices||0,loading:!i})})}var J=e.i(5468328),K=e.i(992159),Y=e.i(376725);function Z(e){let{hostname:a,children:s,withFavicon:i=!0}=e;return(0,t.jsxs)("span",{className:"flex h-6 flex-row items-center gap-1",children:[(0,t.jsx)(w.Link,{external:!0,href:`https://${a}`,style:{paddingTop:1,gap:2},children:(0,t.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[i?(0,t.jsx)(Y.Favicon,{url:a},`favicon-${a}`):null,(0,t.jsx)("p",{className:"max-w-80 truncate font-[500] text-gray-1000",children:a})]})}),(0,t.jsx)("span",{className:"flex flex-row items-center",children:s})]})}function X(e){let{domains:a,production:s,filteredDomain:i,children:r}=e,n=i??s??"";return(0,t.jsxs)(Z,{hostname:n,children:[i?(0,t.jsx)(K.Filter,{}):(0,t.jsx)(ee,{domains:a,production:s}),r]})}function ee(e){let{domains:a,production:s}=e;if(!a||a.length<=1||!s)return null;let i=a.filter(e=>e.name!==s).toSorted((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)(J.Tooltip,{className:"mt-px cursor-pointer text-xs tracking-wider",delay:!1,maxWidth:"auto",position:"bottom",text:(0,t.jsx)("span",{className:"p4",children:i.map(e=>(0,t.jsx)(Z,{hostname:e.name,withFavicon:!1},e.name))}),children:["+",a.length-1]})}var et=e.i(6704504);function ea(e){let{domains:a,production:s,children:i}=e,r=(0,et.useFilterHostname)();return(0,t.jsx)(X,{domains:a,filteredDomain:r,production:s,children:i})}var es=e.i(5343305),ei=e.i(215852),er=e.i(4244280);function en(){return(0,t.jsx)(r.default,{buttons:(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(H,{})}),buttonsClassName:"self-stretch",description:(0,t.jsx)("div",{className:"-mt-1",children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(s.Skeleton,{width:100}),children:(0,t.jsx)(el,{})})}),title:(0,t.jsx)(i.Text,{as:"h1",size:32,weight:500,children:"Web Analytics"})})}function el(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,j.useWebAnalyticsContext)(),{data:s}=(0,es.useCurrentDashboardProject)(),{data:i}=function(){let e=(0,y.useParams)()??{teamSlug:"",project:""};return function(e,t){let{limit:a=10,gitBranch:s,production:i,target:r,redirect:n,redirects:l,verified:o,order:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"v9";return(0,ei.useIsomorphicSuspenseSWR)(`${(0,er.API_PROJECTS_DOMAINS_VERSION)(u)}/${t}/domains${(0,S.encode)({limit:a,gitBranch:s,production:i,target:r,redirects:l,redirect:n,verified:o,order:c,teamId:e})}`,async(e,t)=>(await t(e)).domains,d)}(e.teamSlug,e.project)}();return(0,t.jsx)(ea,{domains:i,production:s.domain||null,children:a?null:(0,t.jsx)(Q,{hasData:e})})}var eo=e.i(4654174),ec=e.i(2504781),ed=e.i(2640326),eu=e.i(1101517),ep=e.i(9658738),em=e.i(3228096),eh=e.i(3884708),ex=e.i(2375916),ey=e.i(8402901),eg=e.i(5155984);e.i(6483798);var ef=e.i(8287059),ev=e.i(6000680),ej=e.i(9957872),eb=e.i(1438473),eS=e.i(1513230);function ew(e){let{plan:a,planIteration:s}=e;return(0,t.jsx)(ej.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:"Included in your plan",tabIndex:0,title:(0,t.jsxs)(i.Text,{weight:500,children:["Web Analytics ","hobby"===a?"on Hobby":""]}),value:"included",children:"pro"===a?(0,t.jsx)(eS.ProFeatures,{isProPlus:"pro"===a&&"plus"===s}):(0,t.jsx)(eS.HobbyFeatures,{})})}var ek=e.i(6450656);function eT(e){let{currency:a}=e;return(0,t.jsx)(ej.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:(0,ek.withPricing)("{fee} / month (once for your entire team)",{currency:a}),tabIndex:0,title:(0,t.jsx)(i.Text,{weight:500,children:"Web Analytics Plus"}),value:"addon",children:(0,t.jsx)(eS.PlusFeatures,{})})}var eA=e.i(2924439),eP=e.i(2466450);function eN(e){let{currency:a,isVercelPlusEnabled:s}=e;return(0,t.jsx)(ej.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:`${(0,eP.formatCurrency)(eA.pricingMenu.pro.price,a)} / month`,tabIndex:0,title:(0,t.jsx)(i.Text,{weight:500,children:"Web Analytics on Pro"}),value:"upgraded",children:(0,t.jsx)(eS.ProFeatures,{isProPlus:s})})}var eC=e.i(8901011);e.i(1307729);var eI=e.i(7416719);let eD="web-analytics-enable-modal",eL={step:"choose",isProcessing:!1,selectedOption:"included"},e_=(0,eC.create)((e,t)=>({...eL,team:null,projectId:null,plan:"hobby",planIteration:void 0,currency:"USD",isPlusEnabled:!1,isTrialing:!1,setProps:t=>{let{isPlusEnabled:a,team:s,projectId:i,source:r,onSuccess:n,onClose:l,onError:o,upgradeTeamModalStore:c}=t,d=s?.billing?.plan??"hobby",u=s?.billing?.planIteration;e({team:s,projectId:i,plan:d,planIteration:u,source:r,currency:s?.billing?.currency??"USD",isTrialing:"pro"===d&&s?.billing?.status==="trialing",isPlusEnabled:a,onSuccess:n,onError:o,onClose:l,upgradeTeamModalStore:c})},open:async a=>{e(eL);let{isPlusEnabled:s,isProcessing:i,doNext:r,plan:n,onClose:l,onSuccess:o}=t();(!1===a||"enterprise"===n||"pro"===n&&s)&&!i&&(l?.(),await r(),o?.("included"))},select:a=>{let{plan:s,projectId:i}=t();e({selectedOption:a,addOnToBeEnabled:{type:"pro"===s?"webAnalyticsPlus":"webAnalytics",additionalConfigurations:{projectId:i,source:"enable-modal"}}})},startProcessing:()=>e({isProcessing:!0}),stopProcessing:()=>e({isProcessing:!1}),doNext:async()=>{let{addOnToBeEnabled:a,isTrialing:s,onClose:i,onSuccess:r,plan:n,projectId:l,selectedOption:o,step:c,team:d,upgradeTeamModalStore:u,source:p,onError:m}=t();function h(){e({isProcessing:!0})}function x(){e({isProcessing:!1})}if("confirm"===c||"included"===o)try{h(),await (0,eI.enableWebAnalytics)({team:d,projectId:l,withPlus:"addon"===o,source:p}),r?.(o)}catch(e){m?.(e?.message??"Unknown error")}finally{x(),i?.()}else"pro"!==n||s?(i?.(),e({step:"closed"}),u?.open({source:eD,teamHint:d?.id,trialBehavior:"disallow-trial",forceImmediateUpgrade:s,forceExpandedReceipt:!0,addOn:a,onConversionStart:h,onConversionError:x,onConversionSuccess:()=>{x(),r?.(o)},disabledSteps:["team-members"]}),g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:n,type:"enable-modal"})):e({step:"confirm"})}}));var eW=e.i(4597921);function eO(e){let{onClose:a}=e,{currency:s,isProcessing:r,plan:n,planIteration:l,selectedOption:o,select:c,doNext:d}=e_(),u=(0,eW.useServerFlag)("active-pro-plan-iteration",!1),p=e_(e=>(function(e){let{selectedOption:a}=e;return"included"===a?{label:"Enable"}:{label:"Continue",type:"secondary",suffix:(0,t.jsx)(eb.ArrowRight,{})}})(e));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(P.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(P.Modal.Header,{children:(0,t.jsx)(P.Modal.Title,{children:"Enable Web Analytics"})}),(0,t.jsx)(i.Text,{color:"gray-900",style:{marginBottom:"0.5rem"},variant:"label-13",children:"Options"}),(0,t.jsxs)(ej.ChoiceboxGroup,{direction:"column",label:"plan",onChange:e=>{c(e)},type:"radio",value:o,children:[(0,t.jsx)(ew,{plan:n,planIteration:l}),"pro"===n?(0,t.jsx)(eT,{currency:s}):(0,t.jsx)(eN,{currency:s,isVercelPlusEnabled:u})]})]}),(0,t.jsxs)(P.Modal.Actions,{children:[(0,t.jsx)(P.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(P.Modal.Action,{loading:r,onClick:()=>void d(),suffix:p.suffix,type:p.type,children:p.label})]})]})}function eE(e){let{project:s,active:i,onClose:r,onEnabling:n,source:l}=e,{mutate:o}=(0,U.useSWRConfig)(),{isProcessing:c,setProps:d,step:u,open:p,doNext:m,startProcessing:h,stopProcessing:x}=e_(),g=(0,I.useToasts)(),f=(0,y.useRouter)(),j=(0,ef.useOpenUpgradeModal)(),b=(0,ef.useUpgradeModalIsOpen)(),{enableWebAnalyticsPlus:S,WebAnalyticsPlusModal:w,isWebAnalyticsPlusEnabled:k}=(0,ev.useToggleWebAnalyticsPlus)({source:eD,skipPostConfirm:!0,onStart:h,onSuccess:()=>void m(),onClose:()=>{r(),x()}}),{team:T,isTeam:A}=(0,v.useTeam)();return(0,a.useEffect)(()=>d({team:T,projectId:s.id,source:l,upgradeTeamModalStore:{isOpen:b,open:j},isPlusEnabled:k,onClose:r,onSuccess(){let e=new URL(window.location.toString());e.searchParams.delete("enable"),(0,F.revalidateProject)(o,s),f.replace(e.toString()),f.refresh()},onError(e){g.error(e)}}),[k,r,j,s,f,d,T,l,b,o,g.error]),(0,a.useEffect)(()=>n?.(c),[c,n]),(0,a.useEffect)(()=>{i&&p(A)},[i,p,A]),(0,a.useEffect)(()=>{"confirm"===u&&i&&S?.()},[i,S,u]),"choose"===u?(0,t.jsx)(P.Modal.Modal,{active:i,onClickOutside:r,children:(0,t.jsx)(eO,{onClose:r})}):w}function eF(e){let s=(0,ey.useCanToggleWebAnalytics)(),i=(0,y.useSearchParams)(),[r,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),c=(0,a.useCallback)(()=>n(!1),[n]),d=(0,a.useCallback)(()=>n(!0),[n]);return(0,a.useEffect)(()=>{i?.get("enable")==="1"&&n(!0)},[i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.Tooltip,{text:s?void 0:"Additional permissions are required to enable this feature.",children:(0,t.jsx)(ec.Button,{disabled:!s,loading:l,onClick:d,width:120,children:"Enable"})}),e.project?(0,t.jsx)(eg.CompatRouterAllowed,{children:(0,t.jsx)(eE,{active:r,onClose:c,onEnabling:e=>o(e),project:e.project,source:i?.get("source")??void 0})}):null]})}function eM(e){let{project:a}=e;return(0,t.jsx)(eo.EnablementHeading,{cards:[{icon:(0,t.jsx)(ed.Analytics,{}),title:"Real-time insights into your traffic",children:(0,t.jsx)(i.Text,{children:"Ensure smooth performance with real-time bandwidth analysis."})},{icon:(0,t.jsx)(eh.Lightning,{}),title:"Deeper insights with custom events",children:(0,t.jsx)(i.Text,{children:"Track whatever is relevant for your website."})},{icon:(0,t.jsx)(ex.Shield,{}),title:"Respects visitor privacy",children:(0,t.jsx)(i.Text,{children:"Web Analytics doesn't rely on cookies and doesn't store personal information."})},{icon:(0,t.jsx)(em.Globe,{}),title:"First-party, at the edge",children:(0,t.jsx)(i.Text,{children:"Data is collected through your own domain."})},{icon:(0,t.jsx)(eu.CodeBlock,{}),title:"Easy integration",children:(0,t.jsx)(i.Text,{children:"Start collecting data with one line of code. Supports all major frameworks."})},{icon:(0,t.jsx)(ep.Gauge,{}),title:"Your site stays fast",children:(0,t.jsx)(i.Text,{children:"The light-weight trackings script is less than 5kb."})}],description:"Collect valuable insights on user behavior and site performance with detailed page view metrics. Gain knowledge on top pages.",title:(0,t.jsxs)(i.Text,{as:"h1",size:32,weight:500,children:[" ","Web Analytics"," "]}),children:(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)(eF,{project:a}),(0,t.jsx)(ec.Button,{type:"tertiary",children:(0,t.jsx)(w.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",children:"Limits & Pricing"})})]})})}function eB(){let{isFeatureEnabled:e}=(0,j.useWebAnalyticsContext)();return e?(0,t.jsx)(en,{}):(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(eM,{project:null}),children:(0,t.jsx)(eU,{})})}function eU(){let{data:e}=(0,es.useCurrentDashboardProject)();return(0,t.jsx)(eM,{project:e})}},4825876,e=>{"use strict";e.s(["TopFlags",()=>A]);var t=e.i(751170),a=e.i(5887909),s=e.i(5499338),i=e.i(2504781),r=e.i(9508212),n=e.i(57106),l=e.i(7917902),o=e.i(7151748),c=e.i(3870297),d=e.i(2065543),u=e.i(4099374),p=e.i(1138941),m=e.i(6060673),h=e.i(2590593),x=e.i(205804),y=e.i(4394132),g=e.i(690612),f=e.i(9789867),v=e.i(6051304),j=e.i(224612),b=e.i(5254778),S=e.i(4049612),w=e.i(6492834),k=e.i(7884422),T=e.i(6760726);function A(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(N,{loading:!0,items:[],type:y.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{children:(0,t.jsx)(P,{})})})}function P(){let{filter:e,setFilter:a,removeFilter:s,toggleFilter:i}=(0,g.useWebAnalyticsFilter)(),r=(0,f.useFilterProps)("flags"),n=Object.keys(e).length>0,l="hobby"===(0,T.useBillingPlan)(),{hasData:o}=(0,b.useWebAnalyticsContext)(),{showPlaceholder:c}=(0,S.useWebAnalyticsStatus)(),d=(0,k.useGenericOptions)(),{range:p}=d,[m]=(0,j.useWebAnalyticsQueryState)(),x=m.tab,y=(0,u.useMemo)(()=>{let e=m.filter.flags;if(e)return(0,j.isPropertiesFilterValue)(e)?Object.keys(e.properties)[0]:e.values[0]},[m.filter.flags]),{data:A,isLoading:P}=(0,w.useTopStatsData)({type:"flags",...d,jsonProperty:y},{fallbackData:o?void 0:{data:[]}}),C=(0,u.useMemo)(()=>l?[]:A,[A,l]);return(0,t.jsx)(N,{...r,filterTags:r.filterTags,items:C,loading:P,onRowClick:t=>{e.flags?(0,j.isPropertiesFilterValue)(e.flags)?i({flags:{properties:{[y??""]:t.key},operator:"eq"}}):a({flags:{properties:{[y??""]:t.key},operator:"eq"}}):i({flags:{values:[t.key],operator:"eq"}})},range:p,renderEmptyState:()=>n?(0,t.jsx)(v.EmptyState,{hasFilter:!0}):(0,t.jsx)(I,{}),renderFilterTag:e=>2===e.length?(0,t.jsx)(h.FilterTag,{onRemoveTag:()=>{s("flags",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(h.FilterTag,{onRemoveTag:()=>{s("flags")},value:e[0],children:e[0]}),skeleton:c,type:x})}function N(e){return(0,t.jsx)(h.Panel,{filterTags:[],...e,description:"Which flags are recorded the most",limit:5,renderItemTitle:e=>e.key||"Unknown",title:"Flags",titleBadge:(0,t.jsx)(s.Badge,{size:"sm",variant:"pink",children:"Beta"}),totalCountLabel:"Total",valueDisplayMode:"all-values"})}function C(e){let{children:a}=e,{user:s,team:i}=(0,l.useAccount)(),r=i||s,n=r?.billing?.plan||"hobby",d=(0,p.useProjectIdOrName)(),{data:u}=(0,m.useProject)(d);return(0,t.jsx)("div",{className:"tailwind flex-1",onClick:()=>{setTimeout(()=>{let e=!1;try{let t=JSON.parse(new URL(location.href).searchParams.get("filter")||"{}");e="flags"in t}catch{}o.analytics.track(c.AnalyticsEvent.ANALYTICS_CLICKED_ON_FLAGS,{currentPlan:n,projectId:u?.id,teamId:i?.id||s?.uid,hasFlagsFilter:e})},100)},children:a})}function I(e){let{requiresUpgrade:s,onClickUpgrade:l,requiresCreation:o}=e;return(0,t.jsx)("div",{className:x.default["empty-state-wrapper"],children:(0,t.jsxs)(r.Stack,{align:"center",gap:3,children:[(0,t.jsx)("div",{className:"flex size-[42px] items-center justify-center rounded-full border border-gray-100 p-2 text-gray-800",children:(0,t.jsx)(d.ToggleOnAlt,{size:16})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No flags"}),(0,t.jsxs)("div",{className:x.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Gain insights into how active feature flags impact user behavior."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[s?(0,t.jsxs)(t.Fragment,{children:[o?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsx)(t.Fragment,{children:"Get started by setting up flag tracking. "}),(0,t.jsx)(n.Link,{external:!0,href:"/docs/feature-flags/integrate-with-web-analytics",variant:"highlight",children:"Learn more"})]})}),s?(0,t.jsx)("div",{children:(0,t.jsx)(r.Stack,{align:"center",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(i.Button,{onClick:l,size:"small",children:o?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}},6176457,e=>{"use strict";e.s(["UserList",()=>K],6176457);var t=e.i(751170),a=e.i(4099374),s=e.i(7884422),i=e.i(6492834),r=e.i(4597921),n=e.i(5806401),l=e.i(2504781),o=e.i(1344973),c=e.i(8735244),d=e.i(9508212),u=e.i(5255926),p=e.i(5499338),m=e.i(6942035),h=e.i(6143247),x=e.i(9722978),y=e.i(2189655),g=e.i(7432042),f=e.i(3285452),v=e.i(1933683),j=e.i(3884708),b=e.i(7399351),S=e.i(376725),w=e.i(3126613);let k=e=>{let a,{url:s,className:i}=e;try{a=new URL(s).hostname.replace("www.","")}catch{a=s}return(0,t.jsxs)("div",{title:s,className:(0,x.default)(i,"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1"),children:[(0,t.jsx)(S.Favicon,{url:s,size:14}),(0,t.jsx)("span",{className:"truncate",children:a})]})},T=e=>{let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleTimeString(t,{hour:"numeric",minute:"numeric"})},A=e=>e?(0,g.default)(1e3*e,{long:!0}):"",P=e=>e.toISOString().split("T")[0],N=e=>t=>{if(0===t.length)return[];let a=[],s=[t[0]];for(let i=1;i<t.length;i++){let r=t[i];e(s[s.length-1],r)?s.push(r):(a.push(s),s=[r])}return a.push(s),a},C=N((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()<(0,g.default)("30m")),I=N((e,t)=>{let a=e?.[0]?.[0],s=t?.[0]?.[0];return!!a&&!!s&&P(a.timestamp)===P(s.timestamp)}),D=e=>{let{event:a,active:s,onClick:i,showTime:r=!0}=e,n="pageview"===a.type,l=n?a.route||a.path:"event"===a.type?a.eventName:"Unknown Event",o=void 0;return(0,t.jsxs)("div",{className:(0,x.default)("relative w-full first:rounded-t last:rounded-b","transition-all duration-200",s?"bg-blue-50 shadow-md":"bg-white hover:bg-gray-50"),children:[(0,t.jsxs)("button",{type:"button",onClick:i,className:(0,x.default)("flex items-center w-full px-2 py-1.5 pr-4 text-left bg-transparent","cursor-pointer transition-all duration-200",s&&"transform translate-y-1"),children:[(0,t.jsxs)("div",{className:(0,x.default)("flex items-center justify-center w-8 h-8 mr-1 relative",n?"text-blue-500":"text-amber-500"),children:[(0,t.jsx)("div",{className:(0,x.default)("absolute inset-0 rounded-full transition-all duration-200",n?"bg-blue-500":"bg-amber-500",s?"opacity-20":"opacity-0 hover:opacity-10")}),n?(0,t.jsx)(v.Eye,{color:"currentColor",className:"w-4 h-4"}):(0,t.jsx)(j.Lightning,{color:"currentColor",className:"w-4 h-4"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-1000 truncate",children:n?(0,t.jsx)(L,{route:a.route||"",path:a.path}):l}),!n&&"event"===a.type&&a.eventData&&(0,t.jsx)("p",{className:"text-xs text-gray-700 truncate",children:Object.entries(a.eventData).filter(e=>{let[t]=e;return"eventName"!==t}).map(e=>{let[t,a]=e;return`${t}: ${a}`}).join("  ")})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-700",children:[o&&(0,t.jsx)("span",{children:A(o)}),s?(0,t.jsx)(b.ChevronUp,{color:"gray-700",className:"w-4 h-4"}):r&&(0,t.jsx)("span",{children:T(a.timestamp)})]})]})})]}),s&&(0,t.jsxs)("div",{className:"px-3 pb-3 text-xs text-gray-800",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Time:"})," ",T(a.timestamp)]}),n&&o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Duration:"})," ",A(o)]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Event Data:"}),(0,t.jsx)("pre",{className:"mt-1 text-xs bg-white p-2 rounded bg-background-200 overflow-x-auto",children:JSON.stringify("event"===a.type?{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams,eventName:a.eventName,eventData:a.eventData}:{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams},null,2)})]})]})]})},L=e=>{let{route:a,path:s,className:i}=e;return a.split("/").filter(e=>!!e),(0,t.jsx)("div",{className:(0,x.default)("flex truncate relative",i),title:s,children:(0,t.jsx)("span",{className:"text-gray-1000 mr-2",children:(0,t.jsx)(w.RouteHighlighter,{route:a||s,path:s})})})},_=e=>{let{className:a}=e;return(0,t.jsx)("div",{className:(0,x.default)("flex items-center justify-start px-6",a),children:(0,t.jsx)("div",{className:"w-px h-2 bg-gray-300"})})},W=e=>{let{pageGroup:a,activeEventId:s,onEventClick:i,direction:r}=e,n=[...a].sort((e,t)=>e.type!==t.type?"pageview"===e.type?-1:1:e.timestamp.getTime()-t.timestamp.getTime()),l=e=>e.toLocaleTimeString([],{hour:"numeric",minute:"numeric"});return(0,t.jsx)("div",{className:(0,x.default)("bg-white rounded-md shadow-sm overflow-hidden flex divide-y divide-gray-200","asc"===r?"flex-col-reverse":"flex-col"),children:n.map((e,a)=>{let r=0===a||l(e.timestamp)!==l(n[a-1].timestamp);return(0,t.jsx)(D,{event:e,active:s===B(e),onClick:()=>i(B(e)),showTime:r},B(e))})})},O=e=>{let{referrer:a}=e;return(0,t.jsx)("div",{className:"relative flex flex-col items-start ml-2",children:a?(0,t.jsx)(k,{url:a}):(0,t.jsx)("div",{className:"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1",children:(0,t.jsx)("span",{children:"Direct"})})})},E=e=>{let{session:s,activeEventId:i,onEventClick:r,direction:n}=e,l=[...s].sort((e,t)=>{let a=e[0],s=t[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0}),o=l[0],c=o?.[0],d=c?.referrer;return(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:(0,x.default)("pl-1.5 flex","asc"===n?"flex-col-reverse":"flex-col"),children:[(0,t.jsx)(O,{referrer:d}),(0,t.jsx)(_,{}),l.map((e,s)=>(0,t.jsxs)(a.default.Fragment,{children:[(0,t.jsx)(W,{pageGroup:e,activeEventId:i,onEventClick:r,direction:n},B(e[0])),s<l.length-1&&(0,t.jsx)(_,{})]},B(e[0])))]})})},F=e=>{let{day:s,activeEventId:i,onEventClick:r,direction:n}=e,l=s?.[0]?.[0]?.[0];if(!l)return null;let o=(e=>{let t=new Date,a=new Date(t);if(a.setDate(t.getDate()-1),P(e)===P(t))return"Today";{if(P(e)===P(a))return"Yesterday";let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}})(l.timestamp),c=s.flat().flat().length,d=[...s].sort((e,t)=>{let a=e[0]?.[0],s=t[0]?.[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0});return(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 flex items-center justify-center py-2 bg-gradient-to-b from-background-200 to-transparent",children:(0,t.jsxs)("div",{className:"px-3 py-1 bg-gray-300 text-gray-1000 text-xs font-medium rounded-full",children:[o,"  ",c," events"]})}),(0,t.jsx)("div",{className:(0,x.default)("max-w-2xl mx-auto flex gap-10 pt-10","asc"===n?"flex-col-reverse":"flex-col"),children:d.map(e=>(0,t.jsx)(a.default.Fragment,{children:(0,t.jsx)(E,{session:e,activeEventId:i,onEventClick:r,direction:n})},B(e[0][0])))})]})},M=e=>{let{direction:a,onClick:s}=e;return(0,t.jsx)("button",{type:"button",onClick:s,className:(0,x.default)("flex items-center justify-center w-10 h-10 bg-white border border-gray-300 rounded-lg","hover:bg-gray-100 active:bg-gray-100 transition-colors duration-200","text-gray-800 hover:text-gray-900","bg-transparent"),children:(0,t.jsx)(f.ArrowDown,{className:(0,x.default)("w-5 h-5 transition-transform duration-200","asc"===a&&"rotate-180")})})},B=e=>{let t="pageview"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams}:"event"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams,eventName:e.eventName,eventData:e.eventData}:{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams};return`${e.type}-${e.timestamp.getTime()}-${JSON.stringify(t).split("").reduce((e,t)=>e+t.charCodeAt(0),0)}`};function U(e){let{events:s=[]}=e,[i,r]=(0,a.useState)("desc"),[n,l]=(0,a.useState)(null),o=(0,a.useMemo)(()=>{let e=[...s].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),t=e=>{let t=[],a=[];for(let s of e)"pageview"===s.type?(a.length>0&&t.push(a),a=[s]):0===a.length?t.push([s]):a.push(s);return a.length>0&&t.push(a),t};return[...(0,y.pipe)(e,C,e=>e.map(t),I)].reverse()},[s]),c=e=>{l(t=>t===e?null:e)};return 0===o.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-700",children:"No events found"})}):(0,t.jsxs)("div",{className:"bg-background-200",children:[(0,t.jsx)("div",{className:"absolute top-12 right-4 z-20",children:(0,t.jsx)(M,{direction:i,onClick:()=>{r(e=>"asc"===e?"desc":"asc")}})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:o.map((e,a)=>{let s=e?.[0]?.[0]?.[0];return(0,t.jsx)(F,{day:e,activeEventId:n,onEventClick:c,direction:i},s?B(s):`day-${a}`)})})]})}var R=e.i(2590593),$=e.i(205804),G=e.i(7950227),H=e.i(7946377);let q=e=>{let{user:a,onClick:s}=e;return(0,t.jsxs)("div",{className:"flex items-center px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 gap-3",onClick:s,role:"button",tabIndex:0,children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Text,{className:"text-xs font-medium text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsx)(o.Text,{className:"truncate font-medium text-sm ml-2",children:"Anonymous"}),(0,t.jsxs)(o.Text,{className:"text-xs text-gray-700 ml-4 flex items-center gap-2",children:[(0,t.jsx)(G.Flag,{countryCode:a.country.toUpperCase()}),(0,H.getCountryName)(a.country)]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)(o.Text,{className:"truncate text-xs text-gray-500 ml-1",children:["#",a.id.slice(-8)]}),(0,t.jsxs)(o.Text,{className:"text-xs text-gray-700 ml-4",children:[a.events," events"]}),(0,t.jsx)(o.Text,{className:"text-xs text-gray-500 ml-auto w-20 text-right",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/36e5);if(t<1)return"Just now";{if(t<24)return`${t}h ago`;let e=Math.floor(t/24);return`${e}d ago`}})(a.lastActivity)})]})},V=()=>(0,t.jsxs)(d.Stack,{className:(0,x.clsx)("tailwind flex-1",$.default.container),children:[(0,t.jsx)(R.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(p.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",className:"min-h-[73px]",labels:["Last Seen"]}),(0,t.jsx)("div",{className:"flex flex-col my-2",children:Array.from({length:5},(e,t)=>`skeleton-${t}`).map(e=>(0,t.jsx)("div",{className:"flex items-center px-3",style:{height:40},children:(0,t.jsx)(u.Skeleton,{animated:!0,height:32,style:{opacity:.5,width:"100%"}})},e))})]}),z=e=>{let{user:a,onClose:s,events:i,loading:r=!1}=e;return a?(0,t.jsxs)(n.Sheet,{onOpenChange:e=>!e&&s(),open:!!a,children:[(0,t.jsx)(n.SheetOverlay,{}),(0,t.jsx)(n.SheetContent,{className:(0,h.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-3/4 sm:max-w-[auto] overflow-hidden"),side:"right",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Text,{className:"text-sm font-bold text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Text,{className:"text-lg font-bold",children:"Anonymous User"}),(0,t.jsxs)(o.Text,{className:"text-sm text-gray-700",children:["#",a.id.slice(-8)]}),(0,t.jsx)(o.Text,{className:"text-sm text-gray-600",children:a.country})]})]}),(0,t.jsx)(l.Button,{"aria-label":"Close",className:"!px-1.5",onClick:s,size:"medium",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(m.Cross,{})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-background-200",children:r?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(c.Spinner,{}),(0,t.jsx)(o.Text,{className:"ml-2 text-sm text-gray-600",children:"Loading events..."})]}):(0,t.jsx)(U,{events:i})})]})})]}):null};function Q(e){let{users:a=[],loading:s=!1,onClickUser:i}=e;return s?(0,t.jsx)(V,{}):(0,t.jsxs)(d.Stack,{className:(0,x.clsx)("tailwind flex-1",$.default.container),children:[(0,t.jsx)(R.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(p.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",labels:["Last Seen"],className:"min-h-[73px]"}),(0,t.jsx)("div",{className:"flex flex-col",children:0===a.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(o.Text,{className:"text-sm text-gray-600",children:"No users found"})}):a.slice(0,6).map(e=>(0,t.jsx)(q,{user:e,onClick:()=>i?.(e)},e.id))})]})}var J=e.i(409142);function K(){return(0,r.useServerFlag)("enable-analytics-journey-view",!1)?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(Y,{})}):null}function Y(){let{state:e,set:r}=(0,J.useSearchParamsState)({userId:{defaultValue:void 0}}),[n,l]=(0,a.useState)(null),o=(0,s.useGenericOptions)(),{data:c,isLoading:d}=(0,i.useUserList)({...o}),{data:u,isLoading:p}=(0,i.useUserEvents)({...o,userId:e.userId??""}),m=e.userId&&u?.events||[];return(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{users:c?.users||[],loading:d,onClickUser:e=>{l(e),r({userId:e.id})}}),(0,t.jsx)(z,{events:m,user:n,loading:p,onClose:()=>{l(null),r({userId:void 0})}})]})}}]);

//# sourceMappingURL=498ea9613cd4dfb1.js.map
//# debugId=c8626e04-7597-59d6-a483-acf88931392d
