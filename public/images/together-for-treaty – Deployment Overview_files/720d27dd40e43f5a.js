
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f4cdf858-4a2e-549a-81ae-407bd83e30f7")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3793583,e=>{"use strict";e.s(["sub",()=>o]);var t=e.i(9487122),r=e.i(8119470),n=e.i(2812875);function o(e,o,i){let{years:l=0,months:a=0,weeks:s=0,days:u=0,hours:d=0,minutes:c=0,seconds:g=0}=o,m=(0,n.subMonths)(e,a+12*l,i),f=(0,r.subDays)(m,u+7*s,i);return(0,t.constructFrom)(i?.in||e,f-1e3*(g+60*(c+60*d)))}},3210897,e=>{"use strict";e.s(["useTracingQuickLinks",()=>g]);var t=e.i(751170),r=e.i(4099374),n=e.i(277234),o=e.i(1988648),i=e.i(1933683),l=e.i(248550),a=e.i(4535059),s=e.i(2689512),u=e.i(5071474),d=e.i(8216525);function c(e){let{children:r}=e;return(0,t.jsx)("span",{className:"grid size-[18px] place-content-center",children:r})}let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{includeRequest:g=!0}=e;return(0,r.useCallback)(e=>{let r=e.attributes,m=r["vercel.ownerId"],f=r["vercel.projectId"],h=r["vercel.deploymentId"];if(!m||!f||!h)return[];let p=(0,n.default)((0,o.getDashboardDeploymentEndpoint)({teamSlug:m,projectName:f,deploymentId:h})).then(e=>(e.team||(e.team={name:"Unknown Team",slug:e.ownerId,id:e.ownerId}),e.project||(e.project={name:"Unknown Project",id:e.projectId,framework:""}),e.id=e.id.replace("dpl_",""),e)),b=[{key:"Project",value:p.then(e=>({label:e.project.name,href:`/${e.team.slug}/${e.project.name}`,icon:(0,t.jsx)(s.ProjectAvatar,{className:"!rounded-full",project:e.project,size:18})}))},{key:"Deployment",value:p.then(e=>({label:(0,t.jsx)("span",{className:"text-label-13-mono",children:(0,u.default)(e).hash}),href:`/${e.team.slug}/${e.project.name}/${e.id}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(d.DeploymentStatus,{deployment:e})})}))}],y=r["http.route"];y&&b.push({key:"Route",value:p.then(e=>({label:"Observability",href:`/${e.team.slug}/${e.project.name}/observability/route/${encodeURIComponent(String(y).replace(/\.rsc$/,""))}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(i.Eye,{size:12})})}))});let C=r["vercel.sessionId"];C&&b.push({key:"Session",value:p.then(e=>({label:"Traces",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({sessionIds:String(C),hasTraces:"true"}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(a.Traces,{size:12})})}))});let v=g&&r["vercel.requestId"];return v&&b.push({key:"Request",value:p.then(e=>({label:"Logs",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({requestIds:String(v),selectedLogId:String(v)}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(l.Logs,{size:12})})}))}),b},[g])}},4535059,e=>{"use strict";e.s(["Traces",()=>t]);let t=(0,e.i(9334638).withNewIcon)(`<g stroke="currentColor" stroke-width="1.5" fill="none">
    <path d="M4.75 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V4.75" stroke-linecap="square"/>
    <path d="M11.25 15.25H13.25C14.3546 15.25 15.25 14.3546 15.25 13.25V11.25" stroke-linecap="square"/>
    <path d="M11.25 0.75H13.25C14.3546 0.75 15.25 1.64543 15.25 2.75V4.75" stroke-linecap="square"/>
    <path d="M4.75 15.25H2.75C1.64543 15.25 0.75 14.3546 0.75 13.25V11.25" stroke-linecap="square"/>
    <path d="M4.5 5H9.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M7.5 8L12.5 8" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M4.5 11H9.5" stroke-linecap="round" stroke-linejoin="round"/>
  </g>`)},5376191,e=>{"use strict";e.s(["Minus",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2 7.25H2.75H13.25H14V8.75H13.25H2.75H2V7.25Z" fill="currentColor"/>')},8681022,e=>{e.v("/_next/static/media/worker.508297a8.ts")},3074892,e=>{"use strict";e.s(["MagnifyingGlassPlus",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.5C1.5 3.73858 3.73858 1.5 6.5 1.5C9.26142 1.5 11.5 3.73858 11.5 6.5C11.5 9.26142 9.26142 11.5 6.5 11.5C3.73858 11.5 1.5 9.26142 1.5 6.5ZM6.5 0C2.91015 0 0 2.91015 0 6.5C0 10.0899 2.91015 13 6.5 13C8.02469 13 9.42677 12.475 10.5353 11.596L13.9697 15.0303L14.5 15.5607L15.5607 14.5L15.0303 13.9697L11.596 10.5353C12.475 9.42677 13 8.02469 13 6.5C13 2.91015 10.0899 0 6.5 0ZM4.125 5.875H4.75H5.875V4.75V4.125H7.125V4.75V5.875H8.25H8.875V7.125H8.25H7.125V8.25V8.875H5.875V8.25V7.125H4.75H4.125V5.875Z" fill="currentColor"/>')},9096091,9698309,e=>{"use strict";function t(e){let[t,r]=e;return 1e3*t+r/1e6}function r(e){return[Math.floor(e/1e3),e%1e3*1e3]}e.s(["addToRow",()=>u,"adjustSpanVisibility",()=>d,"parseTrace",()=>a],9096091),e.s(["formatDuration",()=>o,"formatTimeSelection",()=>l,"getHighResInMs",()=>t,"getMsInHighRes",()=>r],9698309);let n=new Intl.NumberFormat(void 0,{maximumFractionDigits:2});function o(e){return e>=1e3?`${n.format(e/1e3)}s`:`${n.format(e)}ms`}let i=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function l(e){return e>=1e3?`${i.format(e/1e3)}s`:`${i.format(e)}ms`}let a=e=>{let{spans:n}=e,o={startTime:0,endTime:0,duration:0,depth:0,children:[]},i={},l=new Map,a=e=>{let t=l.get(e);if(t)return t;let r=l.size+1;return l.set(e,r),r},u=!1;for(let e of n){let r,n=t(e.startTime),l=t(e.endTime),d=t(e.duration);l>o.endTime&&(o.endTime=l,o.duration=l-o.startTime),(0===o.startTime||n<o.startTime)&&(o.startTime=n,o.duration=o.endTime-n);let c=e.resource.startsWith("vercel.");c||(u=!0);let g=c&&("vercel.serverless-runtime"!==e.resource||!("http.method"in e.attributes)),m=g?0:a(e.resource);g&&(r=`â–² ${e.name}`),i[e.spanId]={parent:null,startTime:n,endTime:l,duration:d,span:e,depth:0,label:r,events:s(e),isVercel:g,children:[],resourceIndex:m}}let d=(e,t)=>{let r;t&&(r=i[t])||(r=o),e.parent=r,r.children.push(e)},c=e=>{for(let t of("parent"in e&&(e.depth=e.parent.depth+1),e.children))c(t)},g=1,m=(e,t)=>{if("parent"in e&&e.span.name===t){let t=e.endTime,n=e=>e.children.length?e.children.map(n).sort((e,t)=>e.duration-t.duration)[0]||e:"waitUntil"===e.span.name?(t=e.startTime,e.parent):e,o=n(e),l=`instrumentation-hint-${g++}`,a=.05*e.duration,s=e.startTime+a,u=Math.max(s+a,Math.min(t-.01*e.duration,e.endTime-a)),d=u-s,c={parent:o,startTime:s,endTime:u,duration:d,span:{spanId:l,name:"Add your spans here",resource:"",kind:0,library:{name:""},status:{code:200},traceFlags:0,attributes:{},links:[],events:[],startTime:r(s),endTime:r(u),duration:r(d)},depth:e.depth+1,isVercel:!1,isInstrumentationHint:!0,children:[],resourceIndex:1};return o.children.push(c),i[l]=c,!0}for(let r of e.children)if(m(r,t))return!0;return!1};for(let e of Object.values(i))d(e,e.span.parentSpanId);if(c(o),!u){for(let e of["Invoke Function","Invoke Middleware","Vercel Runtime"])if(m(o,e))break}return{root:o,map:i}},s=e=>{if(!e.events.length)return;let r=`${e.spanId}:ev`;return e.events.map((e,n)=>({key:`${r}${n}`,timestamp:t(e.timestamp),event:e})).sort((e,t)=>e.timestamp-t.timestamp)},u=(e,t,r)=>{let n=t.parent;for(let o=(n?.row||-1)+1;;++o){let n=e[o];if(n){if(!n.every(e=>{let{startTime:n,endTime:o}=e;return n+r>t.endTime||o-r<t.startTime}))continue}else n=[],e.push(n);t.row=o,n.push(t);break}},d=(e,t)=>{let r=e.duration*t;return e.isVisible=r>=2,e.isHovered=!1,e.isVisible}},3285452,e=>{"use strict";e.s(["ArrowDown",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.74999 1.75V1H7.24999V1.75V12.4393L3.28032 8.46967L2.74999 7.93934L1.68933 9L2.21966 9.53033L7.29288 14.6036C7.68341 14.9941 8.31657 14.9941 8.7071 14.6036L13.7803 9.53033L14.3107 9L13.25 7.93934L12.7197 8.46967L8.74999 12.4393V1.75Z" fill="currentColor"/>')},1988648,e=>{"use strict";e.s(["getDashboardDeploymentDomainsEndpoint",()=>i,"getDashboardDeploymentEndpoint",()=>o],1988648);var t=e.i(8042625);function r(e){return e.startsWith("dpl_")?e:`dpl_${e}`}var n=e.i(4244280);function o(e){let{deploymentId:o,projectName:i,teamSlug:l}=e;return`${n.API_DASHBOARD}/deployments/${r(o)}${(0,t.encode)({teamId:l,projectName:i,includeDeleted:!0})}`}function i(e){let{deploymentId:o,teamSlug:i}=e;return`${n.API_DASHBOARD}/deployments/${r(o)}/domains${(0,t.encode)({teamId:i})}`}},8857649,(e,t,r)=>{"use strict";t.exports=function(){let{onlyFirst:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))",e?void 0:"g")}},4926852,e=>{e.v({"bg-black":"ansi-module__io-Oja__bg-black","bg-blue":"ansi-module__io-Oja__bg-blue","bg-cyan":"ansi-module__io-Oja__bg-cyan","bg-gray":"ansi-module__io-Oja__bg-gray","bg-green":"ansi-module__io-Oja__bg-green","bg-magenta":"ansi-module__io-Oja__bg-magenta","bg-red":"ansi-module__io-Oja__bg-red","bg-white":"ansi-module__io-Oja__bg-white","bg-yellow":"ansi-module__io-Oja__bg-yellow",bold:"ansi-module__io-Oja__bold","fg-black":"ansi-module__io-Oja__fg-black","fg-blue":"ansi-module__io-Oja__fg-blue","fg-cyan":"ansi-module__io-Oja__fg-cyan","fg-gray":"ansi-module__io-Oja__fg-gray","fg-green":"ansi-module__io-Oja__fg-green","fg-magenta":"ansi-module__io-Oja__fg-magenta","fg-red":"ansi-module__io-Oja__fg-red","fg-white":"ansi-module__io-Oja__fg-white","fg-yellow":"ansi-module__io-Oja__fg-yellow",italic:"ansi-module__io-Oja__italic",strikethrough:"ansi-module__io-Oja__strikethrough",underline:"ansi-module__io-Oja__underline"})},8320377,e=>{"use strict";e.s(["Ansi",()=>c],8320377);var t=e.i(751170),r=e.i(4099374),n=e.i(57106),o=e.i(8857649);function i(e,t){let r=[];for(let n of e.split(t))r.push(n),r.push(t);return r.pop(),r}let l={"\x1b[30m":"black","\x1b[31m":"red","\x1b[32m":"green","\x1b[33m":"yellow","\x1b[34m":"blue","\x1b[35m":"magenta","\x1b[36m":"cyan","\x1b[37m":"white","\x1b[90m":"gray","\x1b[91m":"redBright","\x1b[92m":"greenBright","\x1b[93m":"yellowBright","\x1b[94m":"blueBright","\x1b[95m":"magentaBright","\x1b[96m":"cyanBright","\x1b[97m":"whiteBright","\x1b[39m":"foregroundColorClose","\x1b[40m":"bgBlack","\x1b[41m":"bgRed","\x1b[42m":"bgGreen","\x1b[43m":"bgYellow","\x1b[44m":"bgBlue","\x1b[45m":"bgMagenta","\x1b[46m":"bgCyan","\x1b[47m":"bgWhite","\x1b[100m":"bgGray","\x1b[101m":"bgRedBright","\x1b[102m":"bgGreenBright","\x1b[103m":"bgYellowBright","\x1b[104m":"bgBlueBright","\x1b[105m":"bgMagentaBright","\x1b[106m":"bgCyanBright","\x1b[107m":"bgWhiteBright","\x1b[49m":"backgroundColorClose","\x1b[1m":"boldOpen","\x1b[2m":"dimOpen","\x1b[3m":"italicOpen","\x1b[4m":"underlineOpen","\x1b[7m":"inverseOpen","\x1b[8m":"hiddenOpen","\x1b[9m":"strikethroughOpen","\x1b[22m":"boldDimClose","\x1b[23m":"italicClose","\x1b[24m":"underlineClose","\x1b[27m":"inverseClose","\x1b[28m":"hiddenClose","\x1b[29m":"strikethroughClose","\x1b[0m":"reset"},a={black:"foregroundColorOpen",red:"foregroundColorOpen",green:"foregroundColorOpen",yellow:"foregroundColorOpen",blue:"foregroundColorOpen",magenta:"foregroundColorOpen",cyan:"foregroundColorOpen",white:"foregroundColorOpen",gray:"foregroundColorOpen",redBright:"foregroundColorOpen",greenBright:"foregroundColorOpen",yellowBright:"foregroundColorOpen",blueBright:"foregroundColorOpen",magentaBright:"foregroundColorOpen",cyanBright:"foregroundColorOpen",whiteBright:"foregroundColorOpen",bgBlack:"backgroundColorOpen",bgRed:"backgroundColorOpen",bgGreen:"backgroundColorOpen",bgYellow:"backgroundColorOpen",bgBlue:"backgroundColorOpen",bgMagenta:"backgroundColorOpen",bgCyan:"backgroundColorOpen",bgWhite:"backgroundColorOpen",bgGray:"backgroundColorOpen",bgRedBright:"backgroundColorOpen",bgGreenBright:"backgroundColorOpen",bgYellowBright:"backgroundColorOpen",bgBlueBright:"backgroundColorOpen",bgMagentaBright:"backgroundColorOpen",bgCyanBright:"backgroundColorOpen",bgWhiteBright:"backgroundColorOpen",foregroundColorClose:"foregroundColorClose",backgroundColorClose:"backgroundColorClose",boldOpen:"boldOpen",dimOpen:"dimOpen",italicOpen:"italicOpen",underlineOpen:"underlineOpen",inverseOpen:"inverseOpen",hiddenOpen:"hiddenOpen",strikethroughOpen:"strikethroughOpen",boldDimClose:"boldDimClose",italicClose:"italicClose",underlineClose:"underlineClose",inverseClose:"inverseClose",hiddenClose:"hiddenClose",strikethroughClose:"strikethroughClose",reset:"reset"};var s=e.i(4926852);function u(e,t){let r,n;if(!t)return;let o=[];return t.bold&&o.push(s.default.bold),t.italic&&o.push(s.default.italic),t.strikethrough&&o.push(s.default.strikethrough),t.underline&&o.push(s.default.underline),t.foregroundColor&&(r=t.foregroundColor),t.backgroundColor&&(n=t.backgroundColor,/^bg[A-Z]/.test(n)&&(n=n.substring(2).toLowerCase())),!e&&(t.inverse?(r&&o.push(s.default[`bg-${r}`]),n&&o.push(s.default[`fg-${n}`])):(r&&o.push(s.default[`fg-${r}`]),n&&o.push(s.default[`bg-${n}`]))),o.join(" ")||void 0}let d=[/https?:\/\/vercel\.link\/[^\s)]+/,/https?:\/\/vercel\.com\/[^\s)]+/];function c(e){let{children:s,disableColors:c=!1,linkifyInternalLink:g=!1,newLines:m=!1,renderText:f=e=>e,renderNewLine:h=()=>(0,t.jsx)("br",{})}=e,p=(function(e){let t=e.replace((0,o.default)(),""),r=function(e){let t=e.split("\n"),r=t.length,n=0;for(let e of t){let t=e.length;t>n&&(n=t)}return{columns:n,rows:r}}(t),n={raw:e,plainText:t,textArea:r,chunks:[]},{ansies:s,words:u}=(e=>{let t=[...new Set(e.match((0,o.default)()))],r=function e(t,r){let n=Array.isArray(t);return 0===r.length?n?t:[t]:"string"==typeof t?e(i(t,r[r.length-1]),r.slice(0,-1)):n?e(function(e,t){let r=[];for(let n of e){let e=i(n,t).filter(Boolean);r.push(...e)}return r}(t,r[r.length-1]),r.slice(0,-1)):[]}(e,t.concat(["\n"]));return{ansies:t,words:r}})(e),d={foregroundColor:[],backgroundColor:[],boldDim:[]},c={italic:!1,underline:!1,inverse:!1,strikethrough:!1},g=0,m=0,f=0,h=0;function p(e,t){let r={type:e,value:t,position:{x:g,y:m,n:h,raw:f}};return("text"===e||"ansi"===e)&&(r.style={backgroundColor:(()=>{if(d.backgroundColor.length>0)return d.backgroundColor[d.backgroundColor.length-1]})(),bold:d.boldDim.includes("bold"),dim:d.boldDim.includes("dim"),foregroundColor:(()=>{if(d.foregroundColor.length>0)return d.foregroundColor[d.foregroundColor.length-1]})(),inverse:!!c.inverse,italic:!!c.italic,strikethrough:c.strikethrough,underline:!!c.underline}),r}for(let e of u){if("\n"===e){let e=p("newline","\n");n.chunks.push(e),g=0,m+=1,f+=1,h+=1;continue}if(!s.includes(e)){let t=p("text",e);n.chunks.push(t),g+=e.length,f+=e.length,h+=e.length;continue}let t=/\[(?<codes>[0-9;]*)m/.exec(e)?.groups?.codes;for(let e of t?t.split(";"):[]){let t=l[`\u001B[${e}m`];switch(a[t]){case"foregroundColorOpen":d.foregroundColor.push(t);break;case"foregroundColorClose":d.foregroundColor.pop();break;case"backgroundColorOpen":d.backgroundColor.push(t);break;case"backgroundColorClose":d.backgroundColor.pop();break;case"boldOpen":d.boldDim.push("bold");break;case"dimOpen":d.boldDim.push("dim");break;case"boldDimClose":d.boldDim.pop();break;case"italicOpen":c.italic=!0;break;case"italicClose":c.italic=!1;break;case"underlineOpen":c.underline=!0;break;case"underlineClose":c.underline=!1;break;case"inverseOpen":c.inverse=!0;break;case"inverseClose":c.inverse=!1;break;case"strikethroughOpen":c.strikethrough=!0;break;case"strikethroughClose":c.strikethrough=!1;break;case"reset":c.strikethrough=!1,c.inverse=!1,c.italic=!1,d.boldDim=[],d.backgroundColor=[],d.foregroundColor=[]}}let r=l[e],o=a[r],i=p("ansi",{tag:r,ansi:e,decorator:o});n.chunks.push(i),f+=e.length}return n})(s).chunks.filter(e=>{let{type:t}=e;return"text"===t||m&&"newline"===t}).map((e,o)=>{if("newline"===e.type)return h();let i=e.value,l=null,a=-1;if(g&&"string"==typeof i){let{text:e,internalLink:t,index:r}=function(e){for(let t of d){let r=t.exec(e);if(r?.length===1)return{text:e.replace(r[0],""),internalLink:r[0],index:r.index}}return{text:e,internalLink:null,index:-1}}(i);i=e,l=t,a=r}let s=u(c,e.style),m=null;return"string"==typeof i&&(m=l?(0,t.jsxs)(t.Fragment,{children:[f(i.substring(0,a)),(0,t.jsx)(n.Link,{href:l,underline:!0,children:l}),f(i.substring(a))]}):f(i)),s?(0,t.jsx)("span",{className:u(c,e.style),children:m},o):(0,t.jsx)(r.Fragment,{children:m},o)});return(0,t.jsx)(t.Fragment,{children:p})}},1552611,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(4099374),r={};let n=function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var l=[],a=[],s=function(e){var n=(0,t.createContext)(r);l.push(n),a.push(function(){return(0,t.useContext)(n)})};return o.length?o.forEach(function(e){return s(e.name)}):s(e.name),[function(r){for(var n=r.children,i=e(function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(o[r]=e[r]);return o}(r,["children"])),a=n,s=0;s<l.length;s+=1){var u=l[s],d=o[s]||function(e){return e};a=(0,t.createElement)(u.Provider,{value:d(i)},a)}return a}].concat(a)}},8306707,e=>{"use strict";function t(e,t,r){let n={...e,...t};return t.levels?.length===0&&delete n.levels,t.deploymentDomains?.length===0&&delete n.deploymentDomains,t.routes?.length===0&&delete n.routes,t.requestPaths?.length===0&&delete n.requestPaths,t.requestIds?.length===0&&delete n.requestIds,t.statusCodes?.length===0&&delete n.statusCodes,t.caches?.length===0&&delete n.caches,t.domains?.length===0&&delete n.domains,t.requestMethods?.length===0&&delete n.requestMethods,t.sources?.length===0&&delete n.sources,t.environments?.length===0&&delete n.environments,t.branches?.length===0&&delete n.branches,""===t.searchQuery&&delete n.searchQuery,(!t.selectedLogId||r)&&delete n.selectedLogId,n}function r(e){if(e&&0!==e.length)return e.join(",")}function n(e){let t=Number(e.split("-")[1]);if(!Number.isNaN(t)||!Number.isNaN(t=Number(e.slice(0,13))))return t}function o(e){return Array.from(e.matchAll(/"(?<tokenQuoted>[^"]+)"|(?<tokenWord>\S+)/g),e=>e.groups?.tokenQuoted||e.groups?.tokenWord)}e.s(["extractTimestampOfLogId",()=>n,"getNewLogsQuery",()=>t,"stringifyArrayContent",()=>r,"tokenizeSearchQuery",()=>o])},4643311,e=>{e.v({badge:"disclosure-module__kAv1ia__badge",button:"disclosure-module__kAv1ia__button",collapseContent:"disclosure-module__kAv1ia__collapseContent",collapseGroup:"disclosure-module__kAv1ia__collapseGroup",icon:"disclosure-module__kAv1ia__icon",iconWrapper:"disclosure-module__kAv1ia__iconWrapper",open:"disclosure-module__kAv1ia__open"})},7580732,e=>{"use strict";e.s(["Disclosure",()=>m]);var t=e.i(751170),r=e.i(4099374),n=e.i(9722978),o=e.i(3667099),i=e.i(7807066),l=e.i(6226725),a=e.i(9508212),s=e.i(1344973),u=e.i(2037703),d=e.i(692265),c=e.i(4643311);let g=e=>{let{defaultExpanded:g=!1,title:m,contentClassName:f,count:h,id:p,onToggle:b,onExpand:y,children:C,className:v,buttonClassName:_,onClearFilter:x,...j}=e,[k,w]=(0,r.useState)(g);(0,r.useEffect)(()=>{w(g)},[g]);let O=(0,u.useCollapse)(),I=(0,d.useId)("collapse-section-"),T=(0,d.useId)("collapse-button-"),[A,{height:L}]=(0,o.default)(),D=(0,r.useCallback)(()=>w(!k),[k]),S=(0,r.useMemo)(()=>O?0===O.selected.size?k:O.selected.has(m):k,[O,k,m]),M=(0,r.useCallback)(()=>{"function"==typeof b&&b(),S||"function"!=typeof y||y(),O?O.onChange(S?"":m):D()},[O,S,m,b,D,y]);return(0,t.jsxs)("div",{className:(0,n.clsx)(c.default.collapse,{[c.default.context]:O},v),id:p,...j,children:[(0,t.jsx)(s.Text,{size:14,weight:500,children:(0,t.jsx)("button",{"aria-controls":I,"aria-disabled":S?g:void 0,"aria-expanded":S,"aria-label":m,className:(0,n.clsx)("geist-reset",c.default.button,{[c.default.open]:S},_),id:T,onClick:M,children:(0,t.jsxs)(a.Stack,{align:"center",as:"span",direction:"row",justify:"space-between",children:[(0,t.jsxs)(a.Stack,{align:"center",as:"span",direction:"row",children:[(0,t.jsx)("span",{className:c.default.iconWrapper,children:(0,t.jsx)("span",{className:(0,n.clsx)(c.default.icon,{[c.default.open]:S}),children:(0,t.jsx)(i.ChevronRight,{"aria-hidden":"true",size:16})})}),(0,t.jsx)("span",{className:c.default.text,children:m})]}),h?(0,t.jsxs)("span",{"aria-label":`Clear ${m} filter`,className:c.default.badge,onClick:e=>{e.stopPropagation(),x?.()},onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),x?.())},role:"button",tabIndex:0,children:[(0,t.jsx)(l.CrossCircle,{color:"gray-700"}),(0,t.jsx)(s.Text,{color:"gray-900",size:12,weight:500,children:h})]}):null]})})}),(0,t.jsx)("div",{"aria-labelledby":T,className:c.default.collapseContent,id:I,role:"region",style:{height:S?0!==L?L:void 0:0,visibility:S?"visible":"hidden"},children:(0,t.jsx)("div",{className:f,ref:A,children:C})})]})};g.displayName="Disclosure";let m=(0,r.memo)(g)},7033605,294613,8063555,6094744,e=>{"use strict";e.s(["useLogsApiParams",()=>v,"useLogsQueryState",()=>C],7033605);var t=e.i(4099374),r=e.i(1233856),n=e.i(3679047),o=e.i(409142);e.s(["useUserRetention",()=>p],8063555);var i=e.i(516467),l=e.i(3793583),a=e.i(7917902),s=e.i(588428);e.s(["getMaxRetention",()=>m,"getMaxTimeRange",()=>f],294613);var u=e.i(268049);let d={hobby:{hours:1},pro:{days:1},enterprise:{days:3}},c={hobby:{hours:1},pro:{days:30},enterprise:{days:30}},g={days:14};function m(e,t){return(e?c:d)[t??"hobby"]}function f(e,t){let r=m(e,t);return(0,u.milliseconds)(r)>(0,u.milliseconds)(g)?g:r}var h=e.i(2126130);let p=()=>{let{team:e,isLoading:r}=(0,a.useAccount)(),{isReady:n,value:o}=(0,s.useRuntimeLogsExtendedTimelineFlag)(),{ready:u,hasObservabilityPlusAccessOnCurrentProject:d}=(0,h.useHasObservabilityPlus)(),c=!!n&&!!u&&(d||!!o),g=e?.billing?.plan??"hobby";return(0,t.useMemo)(()=>{let t=m(c,g),n=f(c,g),o={past30Minutes:{minutes:30},pastHour:{hours:1},past12Hours:{hours:12},pastDay:{days:1},past3Days:{days:3},pastWeek:{days:7},past2Weeks:{days:14},maximum:n};return{isLoading:r,billingPlan:g,maxRetention:t,maxTimeRange:n,getNewDates:e=>{let t=new Date;return[(0,l.sub)(t,o[e]),t]},findClosestTimeline:(e,t)=>{let r=[];for(let e of Object.values(o))r.push((0,l.sub)(t,e));let n=function(e,t){let r,n,o=+(0,i.toDate)(e);return isNaN(o)?NaN:(t.forEach((e,t)=>{let l=(0,i.toDate)(e);if(isNaN(+l)){r=NaN,n=NaN;return}let a=Math.abs(o-l);(null==r||a<n)&&(r=t,n=a)}),r)}(e,r),a=Object.keys(o);return void 0===n?"pastHour":a[n]},teamId:e?.id,hasExtendedTimeline:c}},[g,c,r,e?.id])};e.s(["PageConfigProvider",()=>b,"usePageConfig",()=>y],6094744);let[b,y]=(0,e.i(1552611).default)(function(e){return{functionFilterDefaultExpanded:!1,isDeploymentEditable:!0,...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r})),topOffset:46}}),C=()=>{let e=(0,n.useParams)(),{deploymentIdQuery:r}=y(),i=(0,t.useMemo)(()=>r&&"string"==typeof e?.id?[`dpl_${e.id}`]:[],[r,e]),l=(0,t.useMemo)(()=>({timeline:{defaultValue:"past30Minutes",onChangeRemoveKeys:["startDate","endDate","page","live"]},startDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},endDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},live:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e,onChangeRemoveKeys:["page","timeline","startDate","endDate","paused"]},paused:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},page:{defaultValue:1,formatToUrl:e=>e.toString(),parseFromUrl:e=>Number(e)},selectedLogId:{defaultValue:""},refreshedAt:{defaultValue:void 0},caches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},levels:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentDomains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentIds:{defaultValue:i,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},routes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestPaths:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestMethods:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},domains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},sources:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestTags:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},searchQuery:{defaultValue:""},statusCodes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},environments:{defaultValue:[],formatToUrl:e=>e.length>0?e.join(","):"",parseFromUrl:e=>e.split(",")},branches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},myLogs:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},sessionIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},hasTraces:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},traceIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},invocationIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")}}),[i]),{set:a,state:s}=(0,o.useSearchParamsState)(l);return(0,t.useMemo)(()=>({state:s,setState:a,hasActiveFilters:()=>s.deploymentDomains.length>0||s.routes.length>0||s.domains.length>0||s.sources.length>0||s.levels.length>0||s.statusCodes.length>0||s.requestIds.length>0||""!==s.searchQuery||s.requestMethods.length>0||s.requestPaths.length>0||s.caches.length>0||s.environments.length>0||s.branches.length>0||s.requestTags.length>0||s.myLogs||s.sessionIds.length>0||s.hasTraces||s.traceIds.length>0||s.invocationIds.length>0||void 0!==s.startDate||void 0!==s.endDate||"past30Minutes"!==s.timeline||s.live}),[s,a])},v=()=>{let{state:e}=C(),{getNewDates:n}=p();return(0,t.useMemo)(()=>{if(e.startDate&&e.endDate)return e;let[t,o]=n(e.timeline);return{...e,startDate:(0,r.endOfDuration)(t,{minutes:1}),endDate:(0,r.endOfDuration)(o,{minutes:1})}},[e,n])}},710731,e=>{e.v({badge:"generic-filter-module__Jtj5jG__badge",button:"generic-filter-module__Jtj5jG__button",card:"generic-filter-module__Jtj5jG__card",checkbox:"generic-filter-module__Jtj5jG__checkbox",onlyInstance:"generic-filter-module__Jtj5jG__onlyInstance",option:"generic-filter-module__Jtj5jG__option",optionsContainer:"generic-filter-module__Jtj5jG__optionsContainer",skeleton:"generic-filter-module__Jtj5jG__skeleton",tooltip:"generic-filter-module__Jtj5jG__tooltip",tooltipContainer:"generic-filter-module__Jtj5jG__tooltipContainer",truncateText:"generic-filter-module__Jtj5jG__truncateText"})},6209667,e=>{"use strict";e.s(["LogFilter",()=>f,"generateFilterOption",()=>y]);var t=e.i(751170),r=e.i(6357175),n=e.i(4099374),o=e.i(9508212),i=e.i(5255926),l=e.i(1344973),a=e.i(8835183),s=e.i(3869281),u=e.i(5468328),d=e.i(2988836),c=e.i(9031150),g=e.i(7797615),m=e.i(710731);let f=(0,n.memo)(function(e){let{options:i,onChange:s,onSearch:u=()=>{},searchId:d,searchLabel:f="Search",searchPlaceholder:p="Search...",isCountLoading:y=!1,isFirstLoading:v=!1,isLoading:_=!1,hideSearch:x=!1,selectedOptions:j=[],showSelectedOptionsAtTop:k,totalAvailableOptions:w}=e,[O,I]=(0,n.useState)(),T=(0,r.useDebouncedCallback)(u,300),A=(0,n.useRef)(null),L=(0,n.useRef)(void 0),D=(0,n.useMemo)(()=>{let e=[],t=[];return k&&j.length?(i.forEach(r=>{j.includes(r.value)?e.push(r):t.push(r)}),[...e,...t]):i},[i,j,k]);return((0,n.useEffect)(()=>{let e=L.current;k&&e&&j!==e&&A.current&&j.findIndex(t=>!e.includes(t))>=0&&(A.current.scrollTop=0),L.current=j},[j,k]),_||0!==w||0!==j.length||O)?(0,t.jsxs)(o.Stack,{gap:2,children:[x?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:d,children:f}),(0,t.jsx)(a.SearchInput,{className:m.default.searchInput,clearable:!0,id:d,loading:_,onChange:e=>{T(e.target.value),I(e.target.value)},placeholder:p,value:O,width:"100%"})]}),(0,t.jsxs)("div",{className:m.default.optionsContainer,ref:A,tabIndex:-1,children:[D.map(e=>(0,t.jsx)(h,{additionalInfo:e.additionalInfo,checked:j.includes(e.value),count:e.count,icon:e.icon,isCountLoading:y,label:e.label,onChange:()=>{(0,c.awaitPaint)().then(()=>{s(j.includes(e.value)?j.filter(t=>t!==e.value):[...j,e.value])})},value:e.value},e.value)),v?(0,t.jsx)(b,{selectedCount:j.length}):null]}),w&&w>25?(0,t.jsxs)(l.Text,{size:12,style:{color:"var(--accents-5)",textAlign:"center"},children:[(0,g.abbreviateNumber)(w-25)," more to search"]}):null]}):(0,t.jsx)(C,{})});function h(e){let{count:r,label:a,value:c,onChange:f,checked:h,icon:p,isCountLoading:b,additionalInfo:y}=e,[C,v]=(0,n.useState)(!1),_=(0,n.useRef)(null),x="string"==typeof a?a:c;return(0,t.jsx)(o.Stack,{className:m.default.option,justify:"center",onMouseEnter:()=>{_.current&&v(_.current.offsetWidth<_.current.scrollWidth)},children:(0,t.jsx)(u.Tooltip,{className:m.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!C,lowerDelay:!0,maxWidth:"100%",position:"right",tabIndex:null,text:x,tooltipClassName:m.default.tooltip,useParentForBoundingRect:!0,children:(0,t.jsx)(o.Stack,{align:"center",direction:"row",children:(0,t.jsx)(s.Checkbox,{checked:h,className:m.default.checkbox,fullWidth:!0,id:c,onChange:f,textOverflow:!1,value:c,children:(0,t.jsxs)(o.Stack,{align:"center",direction:"row",gap:2,children:[p?(0,t.jsx)(o.Stack,{children:p}):null,(0,t.jsx)("span",{className:m.default.truncateText,ref:_,children:a}),y?(0,t.jsx)(u.Tooltip,{text:y,children:(0,t.jsx)(d.InformationFillSmall,{})}):null,b?(0,t.jsx)(i.Skeleton,{height:20,style:{marginLeft:"auto"},width:30}):null,b||"number"!=typeof r?null:(0,t.jsx)("span",{className:m.default.badge,style:{marginLeft:"auto"},children:(0,t.jsx)(l.Text,{color:"gray-900",size:12,weight:500,children:(0,g.abbreviateNumber)(r).toUpperCase()})})]})})})})})}function p(){return(0,t.jsxs)(o.Stack,{className:m.default.skeleton,direction:"row",gap:2,children:[(0,t.jsx)(i.Skeleton,{height:20,width:20}),(0,t.jsx)(i.Skeleton,{height:23,width:170})]})}function b(e){let{selectedCount:r}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:r>3?0:3-r},(e,r)=>(0,t.jsx)(p,{},r))})}let y=e=>{let{attributeValue:t,total:r}=e;return{label:t,value:t,count:r}};function C(e){let{comment:r}=e;return(0,t.jsx)(o.Stack,{align:"center",className:m.default.card,direction:"column",gap:1,justify:"center",children:(0,t.jsx)(l.Text,{color:"gray-900",size:14,children:r||"No options."})})}},7827812,e=>{"use strict";e.s(["LOGS_PAGE_SIZE",()=>f,"useGroupLogs",()=>y,"useGroupLogsInternal",()=>p]);var t=e.i(406579),r=e.i(7151748),n=e.i(3870297),o=e.i(8042625),i=e.i(4244280),l=e.i(7917902),a=e.i(7432042),s=e.i(4099374),u=e.i(1138941),d=e.i(6060673),c=e.i(8306707),g=e.i(7033605),m=e.i(9224004);let f=50,h={hobby:(0,a.default)("65 seconds"),pro:(0,a.default)("205 seconds"),enterprise:(0,a.default)("905 seconds")};function p(){let{data:e}=(0,d.useProject)((0,u.useProjectIdOrName)()),{user:a,team:m,isLoading:f}=(0,l.useAccount)(),{deploymentDomains:p,deploymentIds:y,domains:C,levels:v,routes:_,sources:x,requestTags:j,startDate:k,endDate:w,live:O,searchQuery:I,requestIds:T,requestMethods:A,requestPaths:L,statusCodes:D,caches:S,environments:M,branches:N,myLogs:U,sessionIds:B,hasTraces:V,traceIds:P,invocationIds:R}=(0,g.useLogsApiParams)(),q=(0,t.default)((t,r)=>{if(r&&!r.hasMoreRows)return null;if(f||!e)return;let n=null!==m?m.id:null,l=null!==a?a?.uid:null,s=m?.billing?h[m.billing.plan]:h.enterprise,u=n||l;if(null===u)return;let d=O?void 0:w?.getTime(),g=t;t>0&&r?.rows&&r.rows.length>0&&(d=new Date(r.rows[r.rows.length-1].timestamp).getTime()-1,g=0);let b=(0,o.encode)({startDate:T.length>0?Math.min(...T.map(e=>Number(e.split("-")[1])))-s:k.getTime(),endDate:T.length>0?Math.max(...T.map(e=>Number(e.split("-")[1])))+s:d,page:g,searchQuery:(0,c.stringifyArrayContent)((0,c.tokenizeSearchQuery)(I)),projectId:e.id,deploymentDomain:(0,c.stringifyArrayContent)(p),deploymentId:(0,c.stringifyArrayContent)(y),domain:(0,c.stringifyArrayContent)(C),level:(0,c.stringifyArrayContent)(v),ownerId:u,source:(0,c.stringifyArrayContent)(x),requestTags:(0,c.stringifyArrayContent)(j),route:(0,c.stringifyArrayContent)(_),requestPath:(0,c.stringifyArrayContent)(L),requestMethod:(0,c.stringifyArrayContent)(A),requestId:T.map(e=>e.split("::").pop()),statusCode:(0,c.stringifyArrayContent)(D),cache:(0,c.stringifyArrayContent)(S),myLogs:U?"true":void 0,environment:(0,c.stringifyArrayContent)(M),branch:(0,c.stringifyArrayContent)(N),sessionId:(0,c.stringifyArrayContent)(B),hasTraces:V?"true":void 0,traceId:(0,c.stringifyArrayContent)(P),invocationId:(0,c.stringifyArrayContent)(R)});return`${i.API_LOGS}/request-logs${b}`},(e,t)=>(r.analytics.track(n.AnalyticsEvent.LOGS_RUN_QUERY,{teamSlug:m?.slug}),b(e,t)),{refreshInterval:5e3*!!O,keepPreviousData:!0,revalidateAll:O,revalidateOnFocus:O,revalidateFirstPage:O}),$=(0,s.useMemo)(()=>q.data?.flatMap(e=>e.rows??[])||[],[q.data]);return(0,s.useMemo)(()=>({...q,logRows:$}),[q,$])}async function b(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}return r.json()}function y(){let e=(0,m.useLogs)();return{logRows:e.logRows,...e.swr}}},9224004,e=>{"use strict";e.s(["GroupLogsProvider",()=>m,"useLogs",()=>f],9224004);var t=e.i(751170),r=e.i(4099374),n=e.i(7827812),o=e.i(349746),i=e.i(7033605),l=e.i(5851942),a=e.i(3679047),s=e.i(9171423),u=e.i(134877),d=e.i(8042625),c=e.i(3210897);let g=(0,r.createContext)(null);function m(e){let{children:m}=e,{selectedLogId:f}=(0,i.useLogsApiParams)(),h=(0,n.useGroupLogsInternal)(),p=(0,o.useSelectedLogInternal)(f,h.logRows),b=(e=>{let[t,n]=(0,r.useState)({}),o=(0,r.useRef)(new Map),i=(0,a.useParams)(),l=i?.teamSlug||"";if((0,r.useEffect)(()=>{if(!l||!e)return;let t=o.current;t.has(e)||(t.set(e,void 0),(async()=>{let r=await (0,s.fetchApi)(`/api/observability/traces/${e}${(0,d.encode)({teamId:l,project:i?.project})}`);if(!r||"string"==typeof r||"error"in r||(0,u.isAPIError)(r))return t.delete(e);t.set(e,r),n({})})())},[l,e,i]),e)return o.current.get(e)})(p.data?.traceId&&p.data?.sessionId?p.data.traceId:void 0),y=(0,c.useTracingQuickLinks)({includeRequest:!1}),C=(0,r.useMemo)(()=>({logRows:h.logRows,selectedLog:p.data,selectedTrace:b,isLoadingSelected:p.isLoading,error:p.error,swr:h}),[h,p.data,b,p.isLoading,p.error]);return(0,t.jsx)(g.Provider,{value:C,children:(0,t.jsx)(l.TraceViewerProvider,{getQuickLinks:y,children:m})})}function f(){let e=(0,r.useContext)(g);if(!e)throw Error("useLogs must be used within a LogsProvider");return e}g.displayName="LogsContext"},349746,e=>{"use strict";e.s(["useSelectedLog",()=>g,"useSelectedLogInternal",()=>d]);var t=e.i(9014736),r=e.i(8042625),n=e.i(4244280),o=e.i(7917902),i=e.i(4099374),l=e.i(1138941),a=e.i(6060673),s=e.i(8306707),u=e.i(9224004);function d(e,u){let{team:d,isLoading:g}=(0,o.useAccount)(),{data:m}=(0,a.useProject)((0,l.useProjectIdOrName)()),[f,h]=(0,i.useState)();(0,i.useEffect)(()=>{if(!e)return;let t=u.find(t=>t.requestId===e);t?h(t):f&&e!==f.requestId&&h(void 0)},[e,u,f]);let p=(0,i.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),b=(0,t.default)(()=>{if(p||g||!e)return null;let t=m?.id;if(!d||!t)return null;let o=d.id,i=(0,s.extractTimestampOfLogId)(e);if(void 0===i)return null;let l=(0,r.encode)({ownerId:o,projectId:t,startDate:i,endDate:i,requestId:[e]});return`${n.API_LOGS}/request-logs${l}`},c,{revalidateOnFocus:!1});return e?{data:b.data??p??f,error:b.error,isLoading:b.isLoading}:{data:void 0,error:void 0,isLoading:!1}}async function c(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}let n=await r.json();return n.rows?.[0]}function g(){let e=(0,u.useLogs)();return{data:e.selectedLog,error:e.error,isLoading:e.isLoadingSelected}}},4569709,e=>{e.v({draggable:"draggable-border-module__CfqrMq__draggable",dragging:"draggable-border-module__CfqrMq__dragging",fakeBorder:"draggable-border-module__CfqrMq__fakeBorder",horizontal:"draggable-border-module__CfqrMq__horizontal",leftBorder:"draggable-border-module__CfqrMq__leftBorder",root:"draggable-border-module__CfqrMq__root",vertical:"draggable-border-module__CfqrMq__vertical"})},8510056,e=>{"use strict";e.s(["DraggableBorder",()=>i]);var t=e.i(751170),r=e.i(4099374),n=e.i(9722978),o=e.i(4569709);function i(e){let{element:i,onWidthChange:l,position:a,onReset:s,onStartDrag:u,onStopDrag:d}=e,c=(0,r.useRef)(0),g=(0,r.useRef)(0),[m,f]=(0,r.useState)(!1),h="bottom"===a||"top"===a;return(0,r.useEffect)(()=>{let e=e=>{if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!m)return;let t=g.current;if(h){let r=e.clientY-c.current;t+="top"===a?-r:r}else"left"===a?t+=c.current-e.clientX:t+=e.clientX-c.current;l(t)},t=()=>{f(!1),d&&d()};return document.addEventListener("dragover",e),document.addEventListener("drop",t,{capture:!0}),()=>{document.removeEventListener("dragover",e),document.removeEventListener("drop",t)}},[m,l,a,h,d]),(0,t.jsxs)("div",{className:(0,n.clsx)(o.default.root,{[o.default.horizontal]:h,[o.default.vertical]:!h}),style:{[a]:"right"===a?"-10px":"-8px"},children:[(0,t.jsx)("div",{className:o.default.draggable,draggable:!0,onClick:e=>{s&&2===e.detail&&s()},onDrag:()=>{f(!0)},onDragEnd:()=>{f(!1),d&&d()},onDragStart:e=>{f(!0),u&&u(),i.current&&(c.current=h?e.clientY:e.clientX,g.current=h?i.current.offsetHeight:i.current.offsetWidth)},role:"none"}),(0,t.jsx)("div",{className:(0,n.clsx)(o.default.fakeBorder,{[o.default.dragging]:m,[o.default.leftBorder]:"left"===a}),draggable:!1})]})}},9321858,6097977,e=>{"use strict";e.s(["GroupExportModal",()=>c],9321858);var t=e.i(751170),r=e.i(4099374),n=e.i(3285452),o=e.i(9508212),i=e.i(1344973),l=e.i(3671642),a=e.i(5323212),s=e.i(6891161),u=e.i(8735244);let d=[1e3,5e3,1e4,5e4,1e5];function c(e){let{onClose:c,getExport:g,format:m}=e,[f,h]=(0,r.useState)(1e3),[p,b]=(0,r.useState)(!1),y=async()=>{b(!0),await g(m,f),b(!1),c()};return(0,t.jsxs)(s.Modal.Modal,{active:!0,onClickOutside:c,children:[(0,t.jsx)(s.Modal.Body,{children:(0,t.jsxs)(o.Stack,{gap:6,children:[(0,t.jsx)("header",{children:(0,t.jsxs)(o.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsxs)(i.Text,{as:"h2",lineHeight:32,size:24,weight:600,children:["Export Logs (",m.toUpperCase(),")"]}),p?(0,t.jsx)(u.Spinner,{size:20}):null]})}),(0,t.jsxs)(i.Text,{lineHeight:20,size:14,children:["Export to ",m]}),(0,t.jsx)(l.Label,{id:"select-line-limit",value:"Result Limit",withInput:!0,children:(0,t.jsx)(a.Select,{id:"select-line-limit",onChange:e=>{h(Number(e.target.value))},prefix:(0,t.jsx)(n.ArrowDown,{}),value:f,children:d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)(s.Modal.Action,{onClick:c,type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Modal.Action,{disabled:p,onClick:y,type:"secondary",children:"Export"})]})]})}e.s(["downloadCsv",()=>k,"downloadJson",()=>w,"useGroupLogsExport",()=>j],6097977);var g=e.i(455575),m=e.i(8042625),f=e.i(277234),h=e.i(4244280),p=e.i(7917902),b=e.i(5062269),y=e.i(615800),C=e.i(1138941),v=e.i(6060673),_=e.i(7033605),x=e.i(8306707);function j(){let{user:e,team:t,isLoading:r}=(0,p.useAccount)(),n=(0,g.useToasts)(),{deploymentDomains:o,deploymentIds:i,domains:l,levels:a,routes:s,sources:u,startDate:d,endDate:c,searchQuery:j,requestIds:O,requestMethods:I,requestPaths:T,statusCodes:A,caches:L,environments:D,branches:S,myLogs:M,sessionIds:N,hasTraces:U,traceIds:B,invocationIds:V}=(0,_.useLogsApiParams)(),{data:P}=(0,v.useProject)((0,C.useProjectIdOrName)());return{getExport:async(g,p)=>{if(r||!P)return;let C=null!==t?t.id:null,v=null!==e?e.uid:null,_=(0,m.encode)({branch:(0,x.stringifyArrayContent)(S),cache:(0,x.stringifyArrayContent)(L),deploymentDomain:(0,x.stringifyArrayContent)(o),deploymentId:(0,x.stringifyArrayContent)(i),domain:(0,x.stringifyArrayContent)(l),endDate:c?.getTime(),environment:(0,x.stringifyArrayContent)(D),format:g,level:(0,x.stringifyArrayContent)(a),ownerId:C||v,pageSize:p,projectId:P.id,requestId:O[0],requestMethod:(0,x.stringifyArrayContent)(I),requestPath:(0,x.stringifyArrayContent)(T),route:(0,x.stringifyArrayContent)(s),searchQuery:j?(0,x.stringifyArrayContent)((0,x.tokenizeSearchQuery)(j)):void 0,source:(0,x.stringifyArrayContent)(u),startDate:d.getTime(),statusCode:(0,x.stringifyArrayContent)(A),myLogs:M?"true":void 0,sessionId:(0,x.stringifyArrayContent)(N),hasTraces:U?"true":void 0,traceId:(0,x.stringifyArrayContent)(B),invocationId:(0,x.stringifyArrayContent)(V)}),R=`${h.API_GROUP_LOGS_EXPORT}${_}`,q=await (0,f.fetchAPI)(R);if(q.error)return void n.error("Something went wrong, please try again later");if("csv"===g){let e=new Promise(e=>{k(q.data,"logs_result.csv"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("csv file downloaded"))}else{let e=new Promise(e=>{w(JSON.stringify(q.data),"logs_result.json"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("json file downloaded"))}(0,y.trackInSnowflake)(b.Topic.VercelAppV0LogQueryResultsExported,{team_id:C||void 0,user_id:v||"",project_id:P.id,export_type:g,num_results_downloaded:p},"vercel-app")}}}function k(e,t){let r=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}function w(e,t){let r=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}}]);

//# sourceMappingURL=66452f5377d2784a.js.map
//# debugId=f4cdf858-4a2e-549a-81ae-407bd83e30f7
