
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="96dcab5e-febf-517d-b53a-d2914c609814")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5479400,e=>{"use strict";e.s(["GitCommit",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5ZM8 12C9.95279 12 11.5787 10.6006 11.9298 8.75H15.25H16V7.25H15.25H11.9298C11.5787 5.39935 9.95279 4 8 4C6.04721 4 4.42125 5.39935 4.0702 7.25H0.75H0V8.75H0.75H4.0702C4.42125 10.6006 6.04721 12 8 12Z" fill="currentColor"/>')},6850581,e=>{"use strict";e.s(["RelativeTimeCard",()=>s,"useShortTimeAgo",()=>c]);var t=e.i(751170),l=e.i(4099374),n=e.i(1344973),r=e.i(5797774);function s(e){let{date:l,children:n,...s}=e,o=void 0===n?(0,t.jsx)(i,{date:l}):n;return l?(0,t.jsx)(r.ContextCard.Trigger,{content:(0,t.jsx)(a,{date:l}),...s,children:o}):o}function i(e){let{date:l}=e,r=c(l);return(0,t.jsx)(n.Text,{as:"span",color:"gray-900",variant:"label-14",children:r})}function a(e){let{date:n}=e,r=Intl.DateTimeFormat().resolvedOptions().timeZone,s=function(e){let[t,n]=(0,l.useState)("");return(0,l.useEffect)(()=>{let t=()=>{let t=function(e){let t=Math.abs(e),l=[];for(let{unit:e,ms:n}of u){let r=Math.floor(t/n);if((r>0||l.length>0)&&(l.push(`${r} ${e}${1!==r?"s":""}`),t%=n),3===l.length)break}return l.join(", ")}(new Date().getTime()-e);n(t?`${t} ago`:"Just now")};t();let l=setInterval(t,1e3);return()=>clearInterval(l)},[e]),t}(n);return(0,t.jsxs)("div",{className:"flex flex-col gap-3 min-w-[300px] ",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsx)("span",{className:"tabular-nums text-label-13 text-gray-900",children:s})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(o,{date:n,zone:"UTC"}),(0,t.jsx)(o,{date:n,zone:r})]})]})}function o(e){let{date:l,zone:n}=e,r=new Date(l),s=new Intl.DateTimeFormat("en-US",{timeZone:n,timeZoneName:"short"}).formatToParts(r).find(e=>"timeZoneName"===e.type)?.value||n,i=r.toLocaleString("en-US",{timeZone:n,year:"numeric",month:"long",day:"numeric"}),a=r.toLocaleTimeString("en-US",{timeZone:n,hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-4 px-1.5 bg-gray-200 rounded-xs",children:(0,t.jsx)("span",{className:"text-label-12-mono text-gray-900",children:s})}),(0,t.jsx)("span",{className:"text-label-13",children:i})]}),(0,t.jsx)("span",{className:"tabular-nums text-label-12-mono text-gray-900",children:a})]})}let u=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}];function c(e){let[t,n]=(0,l.useState)("");return(0,l.useEffect)(()=>{if(!e)return void n("");let t=()=>{let t=new Date().getTime()-e,l=Math.floor(t/864e5),r=Math.floor(t/36e5),s=Math.floor(t/6e4);l>0?n(`${l} day${l>1?"s":""} ago`):r>0?n(`${r} hour${r>1?"s":""} ago`):s>0?n(`${s} minute${s>1?"s":""} ago`):n("Just now")};t();let l=setInterval(t,6e4);return()=>clearInterval(l)},[e]),t}},6107899,e=>{"use strict";e.s(["PreviewEye",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02174 4.76932C6.11625 2.33698 9.8838 2.33698 11.9783 4.76932L14.7603 7.99999L13.6664 9.27031L14.6934 10.3764L16.3184 8.48938V7.5106L13.115 3.79054C10.422 0.663244 5.57803 0.663247 2.88509 3.79054L-0.318298 7.5106V8.48938L2.88509 12.2094C4.7342 14.3568 7.59749 15.0297 10.0822 14.2281L8.9183 12.9747C7.16767 13.2832 5.28865 12.7019 4.02174 11.2307L1.23978 7.99999L4.02174 4.76932ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>')},3978547,e=>{"use strict";e.s(["ClockDashed",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.35066 2.06247C5.96369 1.78847 6.62701 1.60666 7.32351 1.53473L7.16943 0.0426636C6.31208 0.1312 5.49436 0.355227 4.73858 0.693033L5.35066 2.06247ZM8.67651 1.53473C11.9481 1.87258 14.5 4.63876 14.5 8.00001C14.5 11.5899 11.5899 14.5 8.00001 14.5C4.63901 14.5 1.87298 11.9485 1.5348 8.67722L0.0427551 8.83147C0.459163 12.8594 3.86234 16 8.00001 16C12.4183 16 16 12.4183 16 8.00001C16 3.86204 12.8589 0.458666 8.83059 0.0426636L8.67651 1.53473ZM2.73972 4.18084C3.14144 3.62861 3.62803 3.14195 4.18021 2.74018L3.29768 1.52727C2.61875 2.02128 2.02064 2.61945 1.52671 3.29845L2.73972 4.18084ZM1.5348 7.32279C1.60678 6.62656 1.78856 5.96348 2.06247 5.35066L0.693033 4.73858C0.355343 5.4941 0.131354 6.31152 0.0427551 7.16854L1.5348 7.32279ZM8.75001 4.75V4H7.25001V4.75V7.875C7.25001 8.18976 7.3982 8.48615 7.65001 8.675L9.55001 10.1L10.15 10.55L11.05 9.35L10.45 8.9L8.75001 7.625V4.75Z" fill="currentColor"/>')},1840726,e=>{"use strict";function t(e){let{commandForIgnoringBuildStep:t}=e||{};return"string"==typeof t&&t.trim().length>0}function l(e){let{project:l,deployment:n}=e;return t(l)||t(n?.projectSettings)}e.s(["useShowIgnoreBuildStep",()=>l])},3008300,e=>{"use strict";e.s(["DEFAULT_USE_IGNORE_BUILD_STEP_PROMOTE",()=>l,"DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY",()=>t,"DeploymentOverviewParams",()=>n]);let t=!0,l=!1,n={automaticAliases:!0}},3930829,e=>{"use strict";e.s(["useIsomorphicSWRInfinite",()=>o]);var t=e.i(4099374),l=e.i(406579),n=e.i(2919890),r=e.i(7316497),s=e.i(5260505),i=e.i(8765922),a=e.i(1194788);function o(e,o,u){let{isServer:c,config:d,fetcher:m,fallbackSource:h}=(0,n.useIsomorphicSwrContext)(!0),f=(0,t.useMemo)(()=>"function"==typeof o?(e,t)=>o(e,t):(e,t)=>t(e),[o]),p=(0,t.useMemo)(()=>e=>{if(c)throw Error("useSWR: swrFetcher is not available on server");return f(e,m)},[c,f,m]),x="object"==typeof o?o:u,{ssr:g,...j}=x??{},b=(0,r.mergeConfig)(d,x),y=e(0,null),v=h(y??null,f,b,!1),{data:k,isLoading:w,error:S}=(0,s.useAsyncValue)(c,v),C=(0,l.default)((t,l)=>{let n=e(t,l);return w&&!c?null:n},p,{...j,suspense:!1,fallback:{[(0,l.unstable_serialize)(e)]:k?[k]:void 0},revalidateOnMount:!c&&(j.revalidateOnMount??(!k&&!w))}),{mutate:E,data:L,isLoading:R}=C,D=(0,t.useMemo)(()=>(0,i.withThrottle)(y,()=>{(0,a.debug)(`Client fallback data fetch for ${y}`),E()},2e3),[y,E]);return(0,t.useEffect)(()=>{!S||R||L||D()},[S,D,L,R]),{...C,isLoading:C.isLoading&&void 0===C.data||w||c}}},5771992,e=>{"use strict";e.s(["default",()=>x,"useDeploymentsInfinite",()=>p],5771992);var t=e.i(4099374),l=e.i(9014736),n=e.i(8042625),r=e.i(277234),s=e.i(4244280),i=e.i(5338940),a=e.i(1360174),o=e.i(5140444),u=e.i(3679047),c=e.i(3930829),d=e.i(588428),m=e.i(4670733),h=e.i(2259673),f=e.i(7783521);function p(e){let{limit:l,project:r,projectId:p,requireProject:x,users:g,target:j,readyStateFilter:b,meta:y,rollbackCandidate:v,since:k,until:w,subscribeToUpdates:S,branch:C,ignoreProjectSlug:E}=e,{refreshInterval:L,...R}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v6",{isReady:I,team:P}=(0,i.useTeam)(),{user:T}=(0,o.useUser)(),[M,N]=(0,t.useState)(()=>L),_=g&&g.length>0?g.map(e=>e.uid).join(","):null,$=r?.id||p,{value:A}=(0,m.useInstantRollbackHobbyRestrictionFlag)(),{value:O}=(0,d.useInstantRollbackHobbyRestrictionTeamFlag)(),{teamSlug:B,project:F}=(0,u.useParams)()??{},q={projectId:$,limit:l,teamId:P?.id,target:j||null,users:_,state:b,meta:y,rollbackCandidate:v,since:k,until:w,branch:C},U=x||(A||O)&&void 0!==v&&(!P||P.billing?.plan==="hobby"),H=(0,c.useIsomorphicSWRInfinite)((e,t)=>{if(B&&F&&!E){if(!e)return`${(0,s.API_DEPLOYMENTS)(D)}${(0,n.encode)({...q,teamId:B,projectId:F})}`;let r=t&&t.deployments.length>=l?t.deployments[t.deployments.length-1].created-1:null;return r?`${(0,s.API_DEPLOYMENTS)(D)}${(0,n.encode)({...q,teamId:B,projectId:F,from:r})}`:null}if(U&&!$)return null;if(!e)return I?`${(0,s.API_DEPLOYMENTS)(D)}${(0,n.encode)(q)}`:null;let r=t&&t.deployments.length>=l?t.deployments[t.deployments.length-1].created-1:null;return r&&I?`${(0,s.API_DEPLOYMENTS)(D)}${(0,n.encode)({...q,from:r})}`:null},{...R,refreshInterval:M,ssr:{timeout:1e3}}),{mutate:V}=H,Z=(0,t.useMemo)(()=>(0,a.default)(()=>{V()},100),[V]),{isListening:W}=function(e,t){let l=e?`${e.accountId}-${e.id}`:void 0;return(0,h.usePusherEvent)("deployments",l,"deployment-created",t)}(S?r:void 0,Z);W||L===M?W&&3e4!==M&&N(3e4):N(L);let z=(0,t.useMemo)(()=>H.data?H.data.flatMap(e=>e.deployments):[],[H.data]),Y=P?P.id:T?.uid,J=(0,t.useMemo)(()=>S&&Y?z.map(e=>({id:e.uid,readyState:e.readyState,aliasAssigned:!!e.aliasAssigned,ownerId:Y})):[],[z,S,Y]);(0,f.useDeploymentsStatusPing)(J,Z);let G=!!H.data,K=G&&0===z.length,Q=G&&H.data&&H.size>H.data.length,X=G&&H.data&&H.data[H.data.length-1]?.deployments.length<l;return[H,{deployments:z,initialDataLoaded:G,isEmpty:K,loadMore:()=>H.setSize(e=>e+1),isLoadingMore:Q,isReachingEnd:X,mutate:H.mutate}]}function x(e){let{limit:t,projectId:a,project:o,from:u,target:c,users:d=[],...m}=e,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v6",{isReady:p,team:x}=(0,i.useTeam)(),g=d.length>0?d.map(e=>e.uid).join(","):null,j=!!a||!!o?.id;return(0,l.default)(p&&j&&t>0?`${(0,s.API_DEPLOYMENTS)(f)}${(0,n.encode)({projectId:a||o?.id,limit:t,from:u||null,teamId:x?.id,target:c,users:g,...m})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),h)}},3753138,e=>{"use strict";e.s(["ArrowCircleUp",()=>t]);let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 10.75V11.5H8.75V10.75V6.56066L10.2197 8.03033L10.75 8.56066L11.8107 7.5L11.2803 6.96967L8.53033 4.21967C8.23744 3.92678 7.76256 3.92678 7.46967 4.21967L4.71967 6.96967L4.18934 7.5L5.25 8.56066L5.78033 8.03033L7.25 6.56066V10.75ZM14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="currentColor"/>')},5887909,e=>{"use strict";e.s(["Balancer",()=>p,"Provider",()=>f,"default",()=>x]);var t=e.i(4099374),l="undefined"==typeof window?t.default.useEffect:t.default.useLayoutEffect,n=0,r=()=>++n,s=!1;function i(){let[e,i]=t.default.useState(s?r:void 0);return l(()=>{void 0===e&&i(++n),s=!0},[]),void 0===e?e:`rwb-${e.toString(32)}`}var a="__wrap_b",o="__wrap_n",u="__wrap_o",c=(e,t,l)=>{let n=(l=l||document.querySelector(`[data-br="${e}"]`)).parentElement,r=e=>l.style.maxWidth=e+"px";l.style.maxWidth="";let s=n.clientWidth,i=n.clientHeight,a=s/2-.25,o=s+.5,u;if(s){for(r(a),a=Math.max(l.scrollWidth,a);a+1<o;)r(u=Math.round((a+o)/2)),n.clientHeight===i?o=u:a=u;r(o*t+s*(1-t))}l.__wrap_o||"undefined"!=typeof ResizeObserver&&(l.__wrap_o=new ResizeObserver(()=>{self.__wrap_b(0,+l.dataset.brr,l)})).observe(n)},d=c.toString(),m=function(e,l){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n&&(n=`self.${o}!=1&&${n}`),t.default.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:(e?"":`self.${o}=self.${o}||(self.CSS&&CSS.supports("text-wrap","balance")?1:2);self.${a}=${d};`)+n},nonce:l})},h=t.default.createContext(!1),f=e=>{let{nonce:l,children:n}=e;return t.default.createElement(h.Provider,{value:!0},m(!1,l),n)},p=e=>{let{ratio:n=1,nonce:r,children:s,...d}=e,f=t.default.useMemo(()=>"useId"in t.default?t.default.useId:i,[])(),p=t.default.useRef(),x=t.default.useContext(h),g=d.as||"span";return l(()=>{1!==self[o]&&p.current&&(self[a]=c)(0,n,p.current)},[s,n]),l(()=>{if(1!==self[o])return()=>{if(!p.current)return;let e=p.current[u];e&&(e.disconnect(),delete p.current[u])}},[]),t.default.createElement(t.default.Fragment,null,t.default.createElement(g,{...d,"data-br":f,"data-brr":n,ref:p,style:{display:"inline-block",verticalAlign:"top",textDecoration:"inherit",textWrap:"balance"},suppressHydrationWarning:!0},s),m(x,r,`self.${a}("${f}",${n})`))},x=p},935882,e=>{"use strict";e.s(["default",()=>t]);let t=e.i(4099374).useLayoutEffect},7401972,e=>{"use strict";e.s(["useProjectDeployedBranches",()=>o]);var t=e.i(4099374),l=e.i(406579),n=e.i(8042625),r=e.i(277234),s=e.i(4244280),i=e.i(5338940),a=e.i(935882);function o(e){let{project:o,includeProductionBranch:c,query:d,limit:m,active:h,includeDeploymentInfo:f,readyStateFilter:p}=e,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:g,team:j}=(0,i.useTeam)(),[b,y]=(0,t.useState)(""),v={search:d&&u(d)?`"${d}"`:d,active:h?"1":null,teamId:j?.id,includeDeployments:f?"1":null,limit:m,state:p},k=(0,l.default)((e,t)=>{if(!o)return null;if(!e)return g?`${(0,s.API_PROJECTS_VERSION)("v5")}/${o.id}/branches/${(0,n.encode)(v)}`:null;let l=t&&m&&t.branches.length>=m?t.until:null;return l&&g?`${(0,s.API_PROJECTS_VERSION)("v5")}/${o.id}/branches/${(0,n.encode)({...v,until:l})}`:null},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}).then(e=>({...e,query:d})),x),w=o?.link?.productionBranch,S=(0,t.useMemo)(()=>{let e;if(!k.data)return;if(f){let t,l=[];for(let n of k.data)for(let r of(e=n.query,n.branches))w&&r.branch===w?t=r:l.push(r);return{query:e,result:(c&&t?[t,...l]:l).filter(e=>!!e.deployment).sort((e,t)=>t.deployment.createdAt-e.deployment.createdAt)}}let t=new Set;for(let l of k.data)for(let n of(e=l.query,l.branches))t.add(n.branch);return{query:e,result:(w&&t.has(w)&&t.delete(w),c&&w?[w,...t]:[...t])}},[k.data,c,w,f]);(0,a.default)(()=>{S?.query&&y(S.query)},[S?.query,y]);let C=!!k.data,E=C&&S?.result.length===0,L=C&&k.data&&k.size>k.data.length,R=!m||C&&k.data&&k.data[k.data.length-1]?.branches.length<m;return[k,{branches:S?.result,fetchedQuery:b,initialDataLoaded:C,isValidating:k.isValidating,isEmpty:E,loadMore:()=>k.setSize(e=>e+1),isLoadingMore:L,isReachingEnd:R,mutate:k.mutate}]}let u=e=>+e==+e},1553329,e=>{"use strict";e.s(["UndoRollbackModal",()=>p]);var t=e.i(751170),l=e.i(4099374),n=e.i(6891161),r=e.i(9508212),s=e.i(1344973),i=e.i(3679047),a=e.i(1717203),o=e.i(7557283),u=e.i(930810),c=e.i(6060673),d=e.i(8227242),m=e.i(4396019),h=e.i(5771992),f=e.i(6619197);function p(e){let{open:p,setOpen:x}=e,g=(0,l.useRef)(!1),j=(0,i.useParams)(),{data:b}=(0,c.useProject)(j?.project,d.INSTANT_ROLLBACK_PROJECT_API_PARAMS),{can:y}=(0,a.default)({projectIdOrName:j?.project}),v=y(o.Action.Delete,o.Resource.DeploymentRollback),{deployment:k,rollbackDescription:w}=(0,m.useProjectProductionDeployment)(j?.project),[,S]=(0,h.useDeploymentsInfinite)({projectId:b?b.id:"",requireProject:!0,limit:10,rollbackCandidate:!0},{}),{deployments:C}=S,[E,L]=(0,l.useState)(null);null===E&&C.length>0&&L(C[0]);let{loading:R,promote:D}=(0,f.usePromoteDeployment)({deployment:E,project:b,useIgnoreBuildStep:!1});return((0,l.useEffect)(()=>{p&&!g.current?(S.loadMore(),g.current=!0):p||(g.current=!1)},[p,S]),void 0===k)?null:(0,t.jsxs)(n.Modal.Modal,{active:p,onClickOutside:()=>x(!1),sticky:!0,children:[(0,t.jsxs)(n.Modal.Body,{children:[(0,t.jsx)(n.Modal.Header,{children:(0,t.jsx)(n.Modal.Title,{center:!0,children:"Undo Rollback"})}),(0,t.jsxs)(r.Stack,{gap:6,children:[w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Text,{size:16,children:"Rollback details:"}),(0,t.jsx)(u.RollbackDescriptionCard,{project:b,rollbackDescription:w})]}):null,(0,t.jsx)(s.Text,{size:16,children:"Undo this rollback by promoting a different deployment:"}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(u.ChooseDeploymentList,{deployments:C,productionDeployment:k,rolledBackDeploymentId:b?.lastAliasRequest?.type==="rollback"?b.lastAliasRequest.fromDeploymentId:void 0,selectedDeployment:E,setSelectedDeployment:L,swr:S,ariaLabel:"Promote Deployment"})})]})]}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:()=>x(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Modal.Action,{disabled:!v,loading:R,onClick:()=>{D()},children:"Confirm"})]})]})}},7966665,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let n=e.r(7482588);function r(e){return/^[a-f0-9]{40}$/i.test(e)}l.default=function(e,t){let l,s;if("string"!=typeof e||!e.length)return null;if(e.startsWith("git@"))switch(!0){case e.startsWith("git@github.com:"):l="github",s=e.replace("git@github.com:","");break;case t&&e.startsWith(`git@${t}:`):l="ghes",s=e.replace(`git@${t}:`,"");break;case e.startsWith("git@gitlab.com:"):l="gitlab",s=e.replace("git@gitlab.com:","");break;case e.startsWith("git@bitbucket.org:"):l="bitbucket",s=e.replace("git@bitbucket.org:","");break;default:return null}else{let r=n.parse(e);if(!r.pathname)return null;switch(r.hostname){case"github.com":case"www.github.com":l="github";break;case t:l="ghes";break;case"gitlab.com":case"www.gitlab.com":l="gitlab";break;case"bitbucket.org":case"www.bitbucket.org":l="bitbucket";break;default:return null}s=r.pathname.replace(/(^\/|\/$)/g,"")}let i=(s=s.replace(/\.git$/,"")).split("/").filter(Boolean);if(i.length<2)return null;if(2===i.length)return{type:l,owner:i[0],name:i[1],branch:"",sha:"",subdir:""};let a="",o="",u="",c=i[0],d=i[1];if("github"===l)if("blob"!==i[2]&&"tree"!==i[2]&&"commit"!==i[2])return null;else r(i[3])?o=i[3]:a=i[3],u=i.slice(4).join("/");else if("ghes"===l)if("blob"!==i[2]&&"tree"!==i[2]&&"commit"!==i[2])return null;else r(i[3])?o=i[3]:a=i[3],u=i.slice(4).join("/");else if("gitlab"===l)if("-"===i[2])("blob"===i[3]||"tree"===i[3]||"commit"===i[3])&&(r(i[4])?o=i[4]:a=i[4],u=i.slice(5).join("/"));else{let e=i.indexOf("-");-1===e?d=i.slice(1).join("/"):(d=i.slice(1,e).join("/"),("blob"===i[e+1]||"tree"===i[e+1]||"commit"===i[e+1])&&(r(i[e+2])?o=i[e+2]:a=i[e+2],u=i.slice(e+3).join("/")))}else if("bitbucket"===l)if("src"!==i[2]&&"commits"!==i[2])return null;else r(i[3])?o=i[3]:a=i[3],u=i.slice(4).join("/");return{type:l,owner:c,name:d,branch:a,sha:o,subdir:u}}},3023251,e=>{"use strict";e.s(["getOrgAndRepoFromLink",()=>l,"getRepoFromLink",()=>n]);var t=e.i(7966665);function l(e){if(!e||"error"in e)return null;switch(e.type){case"github":return{org:e.org||"",repo:e.repo};case"gitlab":if("projectUrl"in e){let l=(0,t.default)(e.projectUrl);if(l)return{org:l.owner,repo:l.name}}break;case"bitbucket":if("slug"in e)return{org:e.owner,repo:e.slug}}return null}function n(e){let{includeOrg:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(e);return n?t?`${n.org}/${n.repo}`:n.repo:""}},3872542,e=>{"use strict";e.s(["PropagatedPropsOmitter",()=>l]);var t=e.i(751170);function l(e){let{children:l}=e;return(0,t.jsx)(t.Fragment,{children:l})}},5598924,5442212,e=>{"use strict";e.s(["BranchSearchCombobox",()=>x],5598924);var t=e.i(751170),l=e.i(9338892),n=e.i(4099374),r=e.i(5255926),s=e.i(6881349),i=e.i(7151748),a=e.i(3870297);e.s(["useProjectFilteredBranch",()=>h,"useRouterFilteredBranch",()=>m],5442212);var o=e.i(1991452),u=e.i(3679047),c=e.i(9031150),d=e.i(935882);let m=()=>{let e=(0,u.useSearchParams)();return{isReady:(0,o.useRouter)().isReady,filterBranch:e?.get("filterBranch")||void 0}};function h(){let{project:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m(),[l,r]=(0,n.useState)(t.filterBranch||null);(0,n.useEffect)(()=>{r(t.filterBranch||null)},[t.isReady,t.filterBranch]);let s=(0,o.useRouter)(),i=(0,n.useCallback)(e=>{(0,c.awaitPaint)().then(()=>{r(e),function(e,t){let{teamSlug:l,project:n,slug:r,...s}=e.query;t?s.filterBranch=t:delete s.filterBranch,e.replace({pathname:window.location.pathname,query:s},void 0,{shallow:!0,scroll:!1})}(s,e)})},[s]),a=l?{ref:l}:void 0,u=(0,n.useCallback)(()=>{l&&(r(null),i(null))},[l,i]),h=!e||!t.isReady,f=null!==l,[p,x]=(0,n.useState)(f);return(0,d.default)(()=>{x(f)},[x,h,f]),{showBranchFilterBar:p,filteredBranch:l,setFilteredBranch:i,clearBranch:u,gitSource:a}}var f=e.i(1947138),p=e.i(7401972);function x(e){let{skeletonStyle:l}=e;return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(j,{skeletonStyle:l}),children:(0,t.jsx)(g,{...e})})}let g=(0,n.memo)(e=>{let{loading:r,skeleton:o,onSelect:u,project:c,value:h,includeProductionBranch:x,placeholder:g,skeletonStyle:b,comboboxSize:y,clearable:v}=e,[k,w]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,L,{currentValue:R,setValueImmediate:D}]=(0,f.useDebounceState)(h||"",300);(0,n.useEffect)(()=>{h&&D(h)},[D,h]);let[,{branches:I,isValidating:P,fetchedQuery:T}]=(0,p.useProjectDeployedBranches)({project:c,includeProductionBranch:x,query:E},{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1}),M=(T||"")!==E,N=!!S&&!!k&&!!R&&M,{filterBranch:_}=m();(0,n.useEffect)(()=>{_&&D(_)},[D,_]),(0,n.useEffect)(()=>{D(h||"")},[D,h]),(0,n.useEffect)(()=>{k||I&&!P&&w(!0)},[k,I,P]);let[$,A]=(0,n.useState)([]);(0,n.useEffect)(()=>{P||void 0===I||(0!==O.current.query.indexOf(R)&&(O.current={values:[],query:R}),A(I||[]))},[JSON.stringify(I),T]);let O=(0,n.useRef)({values:[],query:""}),B=P||R.length>=E.length&&R.length>=1?O.current.values:[],F=[...new Set([...B,...N?$:I||[]])],q=(0,n.useRef)(null);return((0,d.default)(()=>{R&&q.current?.setValue(R)},[R]),(0,d.default)(()=>{h||q.current?.clear()},[h]),o&&!k)?(0,t.jsx)(j,{skeletonStyle:b}):(0,t.jsxs)(s.Combobox,{clearable:v,filter:function(e,t){let n=""===t?e:(0,l.matchSorter)(e,t,{keys:["value","label"]}),r=[];for(let e of B)n.find(t=>t.value===e)&&r.push(e);let s=[...new Set([...r,...n.map(e=>e.value)])],i=s.map(e=>{let t=n.find(t=>t.value===e);if(!t)throw Error("impossible state");return t});return O.current={values:s,query:R},i},loading:N||r,onChange:e=>{e===_?setTimeout(()=>{u?.(null),q.current?.clear(),D("")}):(i.analytics.track(a.AnalyticsEvent.DEPLOYMENT_OVERVIEW_FILTERS_BRANCH,{value:e}),D(e||""),u?.(e))},onChangeOpen:e=>{C(e)},placeholder:g||"All Branches...",ref:q,size:y,children:[(0,t.jsx)(s.Combobox.Input,{loading:N||r,onChange:e=>{""===e.target.value?D(""):L(e.target.value)}}),(0,t.jsx)(s.Combobox.List,{children:F.map((e,l)=>(0,t.jsx)(s.Combobox.Option,{value:e,children:e},R?e:`${e}${l}`))})]})});function j(e){let{skeletonStyle:l}=e;return(0,t.jsx)(r.Skeleton,{style:l||{height:40},width:"100%"})}},9427114,e=>{"use strict";e.s(["DeploymentsHeader",()=>C]);var t=e.i(751170),l=e.i(1991452),n=e.i(4099374),r=e.i(5255926),s=e.i(9508212),i=e.i(1344973),a=e.i(8522580),o=e.i(6850581),u=e.i(2504781),c=e.i(198667),d=e.i(8893913),m=e.i(57106),h=e.i(7218483),f=e.i(7442760),p=e.i(6060673),x=e.i(4396019),g=e.i(2695633),j=e.i(3023251),b=e.i(5071474),y=e.i(9222994),v=e.i(5371931),k=e.i(3959677),w=e.i(1553329),S=e.i(8227242);function C(e){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(L,{}),children:(0,t.jsx)(E,{...e})})}function E(e){let{banner:r,button:C,isLoading:E}=e,D=(0,l.useRouter)(),{scope:I}=(0,f.useDeploymentListScope)(),P="string"==typeof D.query.project?D.query.project:void 0,{data:T,isLoading:M}=(0,p.useProject)(P,S.INSTANT_ROLLBACK_PROJECT_API_PARAMS),{deployment:N,rollbackDescription:_,isLoading:$}=(0,x.useProjectProductionDeployment)(T?.id),[A,O]=(0,n.useState)(!1),B=_?.createdAt??T?.lastAliasRequest?.requestedAt,F=(0,h.useAgo)(B);if("TEAM_DEPLOYMENTS"===I)return(0,t.jsxs)("span",{children:["All deployments from"," ",(0,t.jsx)(i.Text,{as:"span",monospace:!0,children:D.query.teamSlug})]});if(E||M||$)return(0,t.jsx)(L,{});if(N&&T?.lastAliasRequest?.type==="rollback"&&"succeeded"===T.lastAliasRequest.jobStatus&&N.id===T.lastAliasRequest.toDeploymentId)return(0,t.jsxs)(R,{button:C,children:[(0,t.jsx)(w.UndoRollbackModal,{open:A,setOpen:O}),(0,t.jsx)(a.Note,{fill:!0,icon:(0,t.jsx)(d.RotateCounterClockwise,{}),style:{marginTop:-8,marginBottom:-12},type:"warning",action:(0,t.jsx)(u.Button,{size:"small",type:"secondary",onClick:()=>{O(e=>!e)},children:"Undo Rollback"}),children:(0,t.jsxs)(s.Stack,{children:[(0,t.jsxs)("div",{children:["This project was rolled back to"," ",(0,t.jsx)(m.Link,{className:"font-medium",href:N.id,tab:!1,children:(0,b.default)(N).hash})," ",(0,t.jsx)(o.RelativeTimeCard,{date:B,side:"bottom",children:F}),_?(0,t.jsxs)(t.Fragment,{children:[" by ",_.username]}):null,"."," ",!1===T.autoAssignCustomDomains&&"Production domain auto-assignment is disabled."," ",(0,t.jsx)(m.Link,{external:!0,href:"/docs/instant-rollback",children:"Learn more"})]}),_?.description?(0,t.jsxs)("div",{className:"pt-2",children:["Rollback reason:"," ",(0,t.jsx)(i.Text,{style:{color:"var(--ds-amber-1000)"},as:"span",children:(0,t.jsx)(S.LinkParser,{text:_.description})})]}):(0,t.jsx)("div",{children:"No rollback reason given."})]})})]});let q=N?(0,g.getGitMeta)(N.meta):function(e){let{org:l,repo:n}=(0,j.getOrgAndRepoFromLink)(e)??{},{productionBranch:r}=e??{};if(l&&n&&r)switch(e?.type){case"github":return{logo:(0,t.jsx)(k.default,{}),branchUrl:`https://github.com/${l}/${n}/tree/${r}`};case"gitlab":return{logo:(0,t.jsx)(v.default,{}),branchUrl:`https://gitlab.com/${l}/${n}/-/tree/${r}`};case"bitbucket":return{logo:(0,t.jsx)(y.default,{}),branchUrl:`https://bitbucket.org/${l}/${n}/branch/${r}`};default:return}}(T?.link);if(!q||!T?.link){let e=N?.name??T?.name;return(0,t.jsx)(R,{button:C,children:(0,t.jsx)("span",{className:"flex h-11 md:h-auto",children:e?(0,t.jsxs)(i.Text,{color:"gray-900",children:["All"," ",(0,t.jsx)(i.Text,{as:"span",color:"gray-1000",children:e})," ","deployments"]}):null})})}return r?(0,t.jsx)(R,{button:C,children:r}):(0,t.jsx)(R,{button:C,children:(0,t.jsx)(i.Text,{className:"h-11 md:h-auto",color:"gray-900",children:(0,t.jsxs)("span",{className:"flex flex-row flex-wrap items-center",children:[(0,t.jsx)(c.RefreshClockwise,{className:"shrink-0",size:14}),(0,t.jsx)("span",{className:"pl-2",children:"Automatically created "}),(0,t.jsx)("span",{className:"pr-0.5",children:"for pushes to "}),(0,t.jsx)(m.Link,{className:"basis-full sm:basis-auto",href:q.branchUrl,children:(0,t.jsxs)(s.Stack,{align:"center",as:"span",direction:"row",gap:1,style:{display:"inline-flex"},children:[(0,t.jsx)("span",{"aria-hidden":!0,children:q.logo}),(0,t.jsx)(i.Text,{as:"span",monospace:!0,children:(0,j.getRepoFromLink)(T.link,{includeOrg:!0})})]})})]})})})}function L(){return(0,t.jsx)("span",{className:"flex h-11 flex-col md:h-auto md:w-1/3",children:(0,t.jsx)(r.Skeleton,{height:22,width:"100%"})})}function R(e){let{children:l,button:n}=e;return(0,t.jsxs)("aside",{className:"relative pl-[3px]",children:[l,(0,t.jsx)("div",{className:"absolute right-0 top-0 translate-y-[calc(-100%-20px)]",children:n})]})}},6546805,e=>{"use strict";e.s(["FilterEnvironment",()=>y,"useFilterEnvironment",()=>j]);var t=e.i(751170),l=e.i(9722978),n=e.i(6318858),r=e.i(6405202),s=e.i(4099374),i=e.i(3679047),a=e.i(9508212),o=e.i(5255926),u=e.i(4991687),c=e.i(8674454),d=e.i(8459493),m=e.i(6694387),h=e.i(1807102),f=e.i(7957424);let p="text-label-14 pr-4 font-normal md:[font-size:inherit]",x={production:"Production",preview:"Preview"},g={environment:void 0};function j(){let{environmentQuery:e,setEnvironmentQuery:t}=function(){let[e,t]=(0,s.useState)(!1),l=null!==(0,i.useSearchParams)(),[n,a]=(0,r.useQueryState)("environment",r.queryTypes.string),o=(0,i.useParams)(),{data:u,isLoading:c}=(0,f.useCustomEnvironments)(o?.project),d=u?.customEnvironments??[],m=!!n?.startsWith("env_"),h=m&&e&&!!d.find(e=>e.id===n),p=(0,s.useCallback)(e=>{a(k(e)?e:null)},[a]);return(0,s.useEffect)(()=>{l&&!e&&t(!0)},[e,l]),(0,s.useEffect)(()=>{e&&!c&&m&&!h&&a(null)},[m,c,e,h,a]),{environmentQuery:e&&k(n)?n:void 0,setEnvironmentQuery:p}}(),{get:l,set:n,hasLoaded:a}=(0,h.useLocalStorageObject)("DEPLOYMENT_ENVIRONMENT_FILTER",2592e6,!0);(0,s.useEffect)(()=>{e&&u({type:"select",target:e})},[e]),(0,s.useEffect)(()=>{if(!a||e)return;let n=l("environment");n&&"all"!==n&&t(n)},[a,l,e,t]);let[o,u]=(0,s.useReducer)((e,l)=>{switch(l.type){case"select":return t(l.target),{...e,environment:l.target};case"clear":return t(void 0),g;default:return e}},g),c=(0,s.useCallback)(e=>{let t=k(e)?e:void 0;n("environment",e||"all"),(0,s.startTransition)(()=>u({type:"select",target:t}))},[n]);return{environment:o.environment,clear:()=>{(0,s.startTransition)(()=>{u({type:"clear"})})},handleSelect:c}}let b={all:"All Environments",...x};function y(e){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(w,{}),children:(0,t.jsx)(v,{...e})})}function v(e){let{className:r,target:o,onSelect:h,skeleton:g=!1}=e,[j,y]=(0,s.useState)(!1),v=(0,i.useParams)(),{data:k}=(0,f.useCustomEnvironments)(v?.project),S=k?.customEnvironments??[],C=o&&(Object.keys(x).includes(o)||S.some(e=>e.id===o))?o:"all",E=(0,s.useCallback)(e=>{h("all"===e?void 0:e)},[h]);return((0,s.useEffect)(()=>{g||y(!0)},[g]),g&&!j)?(0,t.jsx)(w,{}):(0,t.jsx)("div",{className:(0,l.clsx)("mx-0 w-full md:w-auto",r),children:(0,t.jsxs)(u.MenuContainer,{children:[(0,t.jsx)(m.MenuButton,{align:"flex-grow",className:"min-w-[180px]",showChevron:!0,type:"secondary",children:(0,t.jsx)(a.Stack,{align:"center",direction:"row",flex:1,children:(0,t.jsx)("span",{className:p,children:b[C]||S.find(e=>e.id===C)?.slug})})}),(0,t.jsxs)(c.Menu,{width:300,children:[Object.entries(b).map(e=>{let[l,r]=e,s=C===l;return(0,t.jsxs)(d.MenuItem,{onClick:()=>{E(l)},children:[(0,t.jsx)(a.Stack,{flex:1,children:(0,t.jsx)("span",{className:p,children:r})}),(0,t.jsx)(a.Stack,{align:"end",flex:0,children:s?(0,t.jsx)(n.Check,{}):null})]},l)}),S.map(e=>{let l=e.id===C;return(0,t.jsxs)(d.MenuItem,{onClick:()=>{E(e.id)},wrap:"wrap",children:[(0,t.jsx)(a.Stack,{flex:1,children:(0,t.jsx)("span",{className:p,children:e.slug})}),(0,t.jsx)(a.Stack,{align:"end",flex:0,children:l?(0,t.jsx)(n.Check,{}):null})]},e.id)})]})]})})}function k(e){if(!e)return!1;let t=Object.keys(x).includes(String(e)),l=String(e).startsWith("env_");return t||l}function w(){return(0,t.jsx)(o.Skeleton,{height:40,width:"100%"})}},3039157,e=>{"use strict";e.s(["DeploymentsSkeleton",()=>b]);var t=e.i(751170),l=e.i(1794286),n=e.i(9318197),r=e.i(9508212),s=e.i(1344973),i=e.i(3679047),a=e.i(4099374),o=e.i(4450569),u=e.i(8062867),c=e.i(2652226),d=e.i(5758916),m=e.i(7442760),h=e.i(5598924),f=e.i(1122901),p=e.i(9427114),x=e.i(6546805),g=e.i(4029500);let j=()=>void 0;function b(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(v,{}),children:(0,t.jsx)(y,{})})}function y(){let{scope:e="PROJECT_DEPLOYMENTS"}=(0,m.useDeploymentListScope)(),l=(0,i.useSearchParams)(),n=l?.get("filterBranch")!==null;return(0,t.jsx)(v,{deploymentListScope:e,filterBranchParamExists:n})}function v(e){let{deploymentListScope:i,filterBranchParamExists:a}=e;return(0,t.jsx)("div",{style:{background:"var(--ds-background-200)",paddingBottom:1},children:(0,t.jsxs)(c.default,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Text,{as:"h1",size:32,weight:500,children:"Deployments"}),(0,t.jsx)(p.DeploymentsHeader,{isLoading:!0})]}),updatedStyles:!0,children:[(0,t.jsxs)(t.Fragment,{children:["TEAM_DEPLOYMENTS"===i?(0,t.jsxs)(r.Stack,{direction:{sm:"column",lg:"row"},flex:1,gap:2,children:[(0,t.jsx)(l.Calendar,{onChange:j,skeleton:!0,value:void 0}),(0,t.jsx)(o.default,{className:"hidden lg:flex",flex:1}),(0,t.jsx)(x.FilterEnvironment,{onSelect:j,skeleton:!0}),(0,t.jsx)(f.default,{handleSelectStatusItem:j,position:"none",selectedStatusItems:{},skeleton:!0})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:flex-wrap lg:flex-nowrap",children:[(0,t.jsx)("div",{className:"md:w-[300px] md:grow lg:w-auto lg:flex-1 [@media(min-width:700px)]:w-full",children:(0,t.jsx)(h.BranchSearchCombobox,{skeleton:!0})}),(0,t.jsx)(l.Calendar,{onChange:j,skeleton:!0,value:void 0}),(0,t.jsx)("div",{className:"lg:flex-0 relative md:flex-1 [&_button]:!w-full",children:(0,t.jsx)(x.FilterEnvironment,{onSelect:j,skeleton:!0})}),(0,t.jsx)(f.default,{handleSelectStatusItem:j,position:"none",selectedStatusItems:{},skeleton:!0})]}),(0,t.jsx)(n.Spacer,{y:.5})]}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.FilteredBranchEntityBar,{isLoading:!0,onClearBranch:j}),(0,t.jsx)(n.Spacer,{y:.5})]}):null,(0,t.jsx)(u.EntityGroup,{className:"border-none shadow-none md:border md:border-solid md:border-gray-alpha-400",children:(0,t.jsxs)(o.default,{className:"gap-3 md:gap-0",children:[(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0}),(0,t.jsx)(d.DeploymentRow,{skeleton:!0})]})})]})})}}]);

//# sourceMappingURL=351b2f1d813525cc.js.map
//# debugId=96dcab5e-febf-517d-b53a-d2914c609814
